{"ast":null,"code":"import _objectSpread from\"/home/deploy/atendechatop/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useReducer,useState,useContext}from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import toastError from\"../../errors/toastError\";import Popover from\"@material-ui/core/Popover\";import AnnouncementIcon from\"@material-ui/icons/Announcement\";import{i18n}from\"../../translate/i18n\";import{AuthContext}from\"../../context/Auth/AuthContext\";import{Avatar,Badge,IconButton,List,ListItem,ListItemAvatar,ListItemText,Dialog,Paper,Typography,DialogTitle,DialogContent,DialogActions,Button,DialogContentText}from\"@material-ui/core\";import api from\"../../services/api\";import{isArray}from\"lodash\";import moment from\"moment\";// import { SocketContext } from \"../../context/Socket/SocketContext\";\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const useStyles=makeStyles(theme=>({mainPaper:_objectSpread({flex:1,maxHeight:300,maxWidth:500,padding:theme.spacing(1),overflowY:\"scroll\"},theme.scrollbarStyles)}));function AnnouncementDialog(_ref){let{announcement,open,handleClose}=_ref;// const getMediaPath = (filename) => {\n//   return path.join(`${process.env.REACT_APP_BACKEND_URL}`,\"public\", \"announcements\",`${filename}`);\n// };\nreturn/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:()=>handleClose(),\"aria-labelledby\":\"alert-dialog-title\",\"aria-describedby\":\"alert-dialog-description\",children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"alert-dialog-title\",children:announcement.title}),/*#__PURE__*/_jsxs(DialogContent,{children:[announcement.mediaPath&&/*#__PURE__*/_jsx(\"div\",{style:{border:\"1px solid #f1f1f1\",margin:\"0 auto 20px\",textAlign:\"center\",width:\"95%\",height:300,backgroundRepeat:\"no-repeat\",backgroundSize:\"cover\",backgroundPosition:\"center\"},children:/*#__PURE__*/_jsx(\"img\",{alt:\"announcement image\",src:announcement.mediaPath,style:{width:\"95%\",height:\"100%\"}})}),/*#__PURE__*/_jsx(DialogContentText,{id:\"alert-dialog-description\",style:{whiteSpace:\"pre-line\"},children:announcement.text})]}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:()=>handleClose(),color:\"primary\",autoFocus:true,children:\"Fechar\"})})]});}const reducer=(state,action)=>{if(action.type===\"LOAD_ANNOUNCEMENTS\"){const announcements=action.payload;const newAnnouncements=[];if(isArray(announcements)){announcements.forEach(announcement=>{const announcementIndex=state.findIndex(u=>u.id===announcement.id);if(announcementIndex!==-1){state[announcementIndex]=announcement;}else{newAnnouncements.push(announcement);}});}return[...state,...newAnnouncements];}if(action.type===\"UPDATE_ANNOUNCEMENTS\"){const announcement=action.payload;const announcementIndex=state.findIndex(u=>u.id===announcement.id);if(announcementIndex!==-1){state[announcementIndex]=announcement;return[...state];}else{return[announcement,...state];}}if(action.type===\"DELETE_ANNOUNCEMENT\"){const announcementId=action.payload;const announcementIndex=state.findIndex(u=>u.id===announcementId);if(announcementIndex!==-1){state.splice(announcementIndex,1);}return[...state];}if(action.type===\"RESET\"){return[];}};export default function AnnouncementsPopover(){const classes=useStyles();const[loading,setLoading]=useState(false);const[anchorEl,setAnchorEl]=useState(null);const[pageNumber,setPageNumber]=useState(1);const[hasMore,setHasMore]=useState(false);const[searchParam]=useState(\"\");const[announcements,dispatch]=useReducer(reducer,[]);const[invisible,setInvisible]=useState(false);const[announcement,setAnnouncement]=useState({});const[showAnnouncementDialog,setShowAnnouncementDialog]=useState(false);//   const socketManager = useContext(SocketContext);\nconst{user,socket}=useContext(AuthContext);useEffect(()=>{dispatch({type:\"RESET\"});setPageNumber(1);},[searchParam]);useEffect(()=>{setLoading(true);const delayDebounceFn=setTimeout(()=>{fetchAnnouncements();},500);return()=>clearTimeout(delayDebounceFn);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[searchParam,pageNumber]);useEffect(()=>{if(user.companyId&&socket){const companyId=user.companyId;//    const socket = socketManager.GetSocket();\nconst onCompanyAnnouncement=data=>{if(data.action===\"update\"||data.action===\"create\"){dispatch({type:\"UPDATE_ANNOUNCEMENTS\",payload:data.record});setInvisible(false);}if(data.action===\"delete\"){dispatch({type:\"DELETE_ANNOUNCEMENT\",payload:+data.id});}};socket.on(\"company-announcement\",onCompanyAnnouncement);return()=>{socket.off(\"company-announcement\",onCompanyAnnouncement);};}return undefined;},[user]);const fetchAnnouncements=async()=>{try{// Usar nova rota que filtra por empresa\nconst{data}=await api.get(\"/announcements/for-company\",{params:{searchParam,pageNumber}});dispatch({type:\"LOAD_ANNOUNCEMENTS\",payload:data.records});setHasMore(data.hasMore);setLoading(false);}catch(err){toastError(err);}};const loadMore=()=>{setPageNumber(prevState=>prevState+1);};const handleScroll=e=>{if(!hasMore||loading)return;const{scrollTop,scrollHeight,clientHeight}=e.currentTarget;if(scrollHeight-(scrollTop+100)<clientHeight){loadMore();}};const handleClick=event=>{setAnchorEl(event.currentTarget);setInvisible(true);};const handleClose=()=>{setAnchorEl(null);};const borderPriority=priority=>{if(priority===1){return\"4px solid #b81111\";}if(priority===2){return\"4px solid orange\";}if(priority===3){return\"4px solid grey\";}};const handleShowAnnouncementDialog=record=>{setAnnouncement(record);setShowAnnouncementDialog(true);setAnchorEl(null);};const open=Boolean(anchorEl);const id=open?\"simple-popover\":undefined;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(AnnouncementDialog,{announcement:announcement,open:showAnnouncementDialog,handleClose:()=>setShowAnnouncementDialog(false)}),/*#__PURE__*/_jsx(IconButton,{variant:\"contained\",\"aria-describedby\":id,onClick:handleClick,style:{color:\"white\"},children:/*#__PURE__*/_jsx(Badge,{color:\"secondary\",variant:\"dot\",invisible:invisible||announcements.length<1,children:/*#__PURE__*/_jsx(AnnouncementIcon,{})})}),/*#__PURE__*/_jsx(Popover,{id:id,open:open,anchorEl:anchorEl,onClose:handleClose,anchorOrigin:{vertical:\"bottom\",horizontal:\"center\"},transformOrigin:{vertical:\"top\",horizontal:\"center\"},children:/*#__PURE__*/_jsx(Paper,{variant:\"outlined\",onScroll:handleScroll,className:classes.mainPaper,children:/*#__PURE__*/_jsxs(List,{component:\"nav\",\"aria-label\":\"main mailbox folders\",style:{minWidth:300},children:[isArray(announcements)&&announcements.map((item,key)=>/*#__PURE__*/_jsxs(ListItem,{style:{background:key%2===0?\"primary\":\"secondary\",border:\"1px solid #eee\",borderLeft:borderPriority(item.priority),cursor:\"pointer\"},onClick:()=>handleShowAnnouncementDialog(item),children:[item.mediaPath&&/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(Avatar,{src:item.mediaPath})}),/*#__PURE__*/_jsx(ListItemText,{primary:item.title,secondary:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Typography,{component:\"span\",style:{fontSize:12},children:moment(item.createdAt).format(\"DD/MM/YYYY\")}),/*#__PURE__*/_jsx(\"span\",{style:{marginTop:5,display:\"block\"}}),/*#__PURE__*/_jsx(Typography,{component:\"span\",variant:\"body2\",children:item.text})]})})]},key)),isArray(announcements)&&announcements.length===0&&/*#__PURE__*/_jsx(ListItemText,{primary:i18n.t(\"mainDrawer.appBar.notRegister\")})]})})})]});}","map":{"version":3,"names":["React","useEffect","useReducer","useState","useContext","makeStyles","toastError","Popover","AnnouncementIcon","i18n","AuthContext","Avatar","Badge","IconButton","List","ListItem","ListItemAvatar","ListItemText","Dialog","Paper","Typography","DialogTitle","DialogContent","DialogActions","Button","DialogContentText","api","isArray","moment","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","useStyles","theme","mainPaper","_objectSpread","flex","maxHeight","maxWidth","padding","spacing","overflowY","scrollbarStyles","AnnouncementDialog","_ref","announcement","open","handleClose","onClose","children","id","title","mediaPath","style","border","margin","textAlign","width","height","backgroundRepeat","backgroundSize","backgroundPosition","alt","src","whiteSpace","text","onClick","color","autoFocus","reducer","state","action","type","announcements","payload","newAnnouncements","forEach","announcementIndex","findIndex","u","push","announcementId","splice","AnnouncementsPopover","classes","loading","setLoading","anchorEl","setAnchorEl","pageNumber","setPageNumber","hasMore","setHasMore","searchParam","dispatch","invisible","setInvisible","setAnnouncement","showAnnouncementDialog","setShowAnnouncementDialog","user","socket","delayDebounceFn","setTimeout","fetchAnnouncements","clearTimeout","companyId","onCompanyAnnouncement","data","record","on","off","undefined","get","params","records","err","loadMore","prevState","handleScroll","e","scrollTop","scrollHeight","clientHeight","currentTarget","handleClick","event","borderPriority","priority","handleShowAnnouncementDialog","Boolean","variant","length","anchorOrigin","vertical","horizontal","transformOrigin","onScroll","className","component","minWidth","map","item","key","background","borderLeft","cursor","primary","secondary","fontSize","createdAt","format","marginTop","display","t"],"sources":["/home/deploy/atendechatop/frontend/src/components/AnnouncementsPopover/index.js"],"sourcesContent":["import React, { useEffect, useReducer, useState, useContext } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport toastError from \"../../errors/toastError\";\nimport Popover from \"@material-ui/core/Popover\";\nimport AnnouncementIcon from \"@material-ui/icons/Announcement\";\n\nimport { i18n } from \"../../translate/i18n\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\n\nimport {\n  Avatar,\n  Badge,\n  IconButton,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  Dialog,\n  Paper,\n  Typography,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  DialogContentText,\n} from \"@material-ui/core\";\nimport api from \"../../services/api\";\nimport { isArray } from \"lodash\";\nimport moment from \"moment\";\n// import { SocketContext } from \"../../context/Socket/SocketContext\";\n\nconst useStyles = makeStyles((theme) => ({\n  mainPaper: {\n    flex: 1,\n    maxHeight: 300,\n    maxWidth: 500,\n    padding: theme.spacing(1),\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles,\n  },\n}));\n\nfunction AnnouncementDialog({ announcement, open, handleClose }) {\n  // const getMediaPath = (filename) => {\n  //   return path.join(`${process.env.REACT_APP_BACKEND_URL}`,\"public\", \"announcements\",`${filename}`);\n  // };\n  return (\n    <Dialog\n      open={open}\n      onClose={() => handleClose()}\n      aria-labelledby=\"alert-dialog-title\"\n      aria-describedby=\"alert-dialog-description\"\n    >\n      <DialogTitle id=\"alert-dialog-title\">{announcement.title}</DialogTitle>\n      <DialogContent>\n        {announcement.mediaPath && (\n          <div\n            style={{\n              border: \"1px solid #f1f1f1\",\n              margin: \"0 auto 20px\",\n              textAlign: \"center\",\n              width: \"95%\",\n              height: 300,\n              backgroundRepeat: \"no-repeat\",\n              backgroundSize: \"cover\",\n              backgroundPosition: \"center\",\n            }}\n          >\n            <img\n              alt={`announcement image`}\n              src={announcement.mediaPath}\n              style={{\n                width: \"95%\",\n                height: \"100%\",\n              }}\n            />\n          </div>\n        )}\n        <DialogContentText id=\"alert-dialog-description\" style={{ whiteSpace: \"pre-line\" }}>\n          {announcement.text}\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={() => handleClose()} color=\"primary\" autoFocus>\n          Fechar\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_ANNOUNCEMENTS\") {\n    const announcements = action.payload;\n    const newAnnouncements = [];\n\n    if (isArray(announcements)) {\n      announcements.forEach((announcement) => {\n        const announcementIndex = state.findIndex(\n          (u) => u.id === announcement.id\n        );\n        if (announcementIndex !== -1) {\n          state[announcementIndex] = announcement;\n        } else {\n          newAnnouncements.push(announcement);\n        }\n      });\n    }\n\n    return [...state, ...newAnnouncements];\n  }\n\n  if (action.type === \"UPDATE_ANNOUNCEMENTS\") {\n    const announcement = action.payload;\n    const announcementIndex = state.findIndex((u) => u.id === announcement.id);\n\n    if (announcementIndex !== -1) {\n      state[announcementIndex] = announcement;\n      return [...state];\n    } else {\n      return [announcement, ...state];\n    }\n  }\n\n  if (action.type === \"DELETE_ANNOUNCEMENT\") {\n    const announcementId = action.payload;\n\n    const announcementIndex = state.findIndex((u) => u.id === announcementId);\n    if (announcementIndex !== -1) {\n      state.splice(announcementIndex, 1);\n    }\n    return [...state];\n  }\n\n  if (action.type === \"RESET\") {\n    return [];\n  }\n};\n\nexport default function AnnouncementsPopover() {\n  const classes = useStyles();\n\n  const [loading, setLoading] = useState(false);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [hasMore, setHasMore] = useState(false);\n  const [searchParam] = useState(\"\");\n  const [announcements, dispatch] = useReducer(reducer, []);\n  const [invisible, setInvisible] = useState(false);\n  const [announcement, setAnnouncement] = useState({});\n  const [showAnnouncementDialog, setShowAnnouncementDialog] = useState(false);\n//   const socketManager = useContext(SocketContext);\n  const { user, socket } = useContext(AuthContext);\n\n\n  useEffect(() => {\n    dispatch({ type: \"RESET\" });\n    setPageNumber(1);\n  }, [searchParam]);\n\n  useEffect(() => {\n    setLoading(true);\n    const delayDebounceFn = setTimeout(() => {\n      fetchAnnouncements();\n    }, 500);\n    return () => clearTimeout(delayDebounceFn);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [searchParam, pageNumber]);\n\n  useEffect(() => {\n    if (user.companyId && socket) {\n      const companyId = user.companyId;\n//    const socket = socketManager.GetSocket();\n\n      const onCompanyAnnouncement = (data) => {\n        if (data.action === \"update\" || data.action === \"create\") {\n          dispatch({ type: \"UPDATE_ANNOUNCEMENTS\", payload: data.record });\n          setInvisible(false);\n        }\n        if (data.action === \"delete\") {\n          dispatch({ type: \"DELETE_ANNOUNCEMENT\", payload: +data.id });\n        }\n      };\n      socket.on(`company-announcement`, onCompanyAnnouncement);\n\n      return () => {\n        socket.off(`company-announcement`, onCompanyAnnouncement);\n      };\n    }\n    return undefined;\n  }, [user]);\n\n  const fetchAnnouncements = async () => {\n    try {\n      // Usar nova rota que filtra por empresa\n      const { data } = await api.get(\"/announcements/for-company\", {\n        params: { searchParam, pageNumber },\n      });\n      dispatch({ type: \"LOAD_ANNOUNCEMENTS\", payload: data.records });\n      setHasMore(data.hasMore);\n      setLoading(false);\n    } catch (err) {\n      toastError(err);\n    }\n  };\n\n  const loadMore = () => {\n    setPageNumber((prevState) => prevState + 1);\n  };\n\n  const handleScroll = (e) => {\n    if (!hasMore || loading) return;\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\n      loadMore();\n    }\n  };\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n    setInvisible(true);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const borderPriority = (priority) => {\n    if (priority === 1) {\n      return \"4px solid #b81111\";\n    }\n    if (priority === 2) {\n      return \"4px solid orange\";\n    }\n    if (priority === 3) {\n      return \"4px solid grey\";\n    }\n  };\n\n\n  const handleShowAnnouncementDialog = (record) => {\n    setAnnouncement(record);\n    setShowAnnouncementDialog(true);\n    setAnchorEl(null);\n  };\n\n  const open = Boolean(anchorEl);\n  const id = open ? \"simple-popover\" : undefined;\n\n  return (\n    <div>\n      <AnnouncementDialog\n        announcement={announcement}\n        open={showAnnouncementDialog}\n        handleClose={() => setShowAnnouncementDialog(false)}\n      />\n      <IconButton\n        variant=\"contained\"\n        aria-describedby={id}\n        onClick={handleClick}\n        style={{ color: \"white\" }}\n      >\n        <Badge\n          color=\"secondary\"\n          variant=\"dot\"\n          invisible={invisible || announcements.length < 1}\n        >\n          <AnnouncementIcon />\n        </Badge>\n      </IconButton>\n      <Popover\n        id={id}\n        open={open}\n        anchorEl={anchorEl}\n        onClose={handleClose}\n        anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"center\",\n        }}\n        transformOrigin={{\n          vertical: \"top\",\n          horizontal: \"center\",\n        }}\n      >\n        <Paper\n          variant=\"outlined\"\n          onScroll={handleScroll}\n          className={classes.mainPaper}\n        >\n          <List\n            component=\"nav\"\n            aria-label=\"main mailbox folders\"\n            style={{ minWidth: 300 }}\n          >\n            {isArray(announcements) &&\n              announcements.map((item, key) => (\n                <ListItem\n                  key={key}\n                  style={{\n                    background: key % 2 === 0 ? \"primary\" : \"secondary\",\n                    border: \"1px solid #eee\",\n                    borderLeft: borderPriority(item.priority),\n                    cursor: \"pointer\",\n                  }}\n                  onClick={() => handleShowAnnouncementDialog(item)}\n                >\n                  {item.mediaPath && (\n                    <ListItemAvatar>\n                      <Avatar\n                        src={item.mediaPath}\n                      />\n                    </ListItemAvatar>\n                  )}\n                  <ListItemText\n                    primary={item.title}\n                    secondary={\n                      <>\n                        <Typography component=\"span\" style={{ fontSize: 12 }}>\n                          {moment(item.createdAt).format(\"DD/MM/YYYY\")}\n                        </Typography>\n                        <span style={{ marginTop: 5, display: \"block\" }}></span>\n                        <Typography component=\"span\" variant=\"body2\">\n                          {item.text}\n                        </Typography>\n                      </>\n                    }\n                  />\n                </ListItem>\n              ))}\n            {isArray(announcements) && announcements.length === 0 && (\n              <ListItemText primary={i18n.t(\"mainDrawer.appBar.notRegister\")} />\n            )}\n          </List>\n        </Paper>\n      </Popover>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}