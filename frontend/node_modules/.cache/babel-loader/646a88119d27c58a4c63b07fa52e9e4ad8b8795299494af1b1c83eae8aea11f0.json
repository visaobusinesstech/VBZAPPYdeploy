{"ast":null,"code":"import _objectSpread from\"/home/deploy/codigologlow/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useReducer,useContext}from\"react\";import{toast}from\"react-toastify\";import{makeStyles}from\"@material-ui/core/styles\";import Paper from\"@material-ui/core/Paper\";import Button from\"@material-ui/core/Button\";import Table from\"@material-ui/core/Table\";import TableBody from\"@material-ui/core/TableBody\";import TableCell from\"@material-ui/core/TableCell\";import TableHead from\"@material-ui/core/TableHead\";import TableRow from\"@material-ui/core/TableRow\";import IconButton from\"@material-ui/core/IconButton\";import SearchIcon from\"@material-ui/icons/Search\";import TextField from\"@material-ui/core/TextField\";import InputAdornment from\"@material-ui/core/InputAdornment\";import CircularProgress from\"@material-ui/core/CircularProgress\";import DeleteOutlineIcon from\"@material-ui/icons/DeleteOutline\";import EditIcon from\"@material-ui/icons/Edit\";import{AccountCircle}from\"@material-ui/icons\";import MainContainer from\"../../components/MainContainer\";import MainHeader from\"../../components/MainHeader\";import MainHeaderButtonsWrapper from\"../../components/MainHeaderButtonsWrapper\";import Title from\"../../components/Title\";import whatsappIcon from\"../../assets/nopicture.png\";import api from\"../../services/api\";import{i18n}from\"../../translate/i18n\";import TableRowSkeleton from\"../../components/TableRowSkeleton\";import UserModal from\"../../components/UserModal\";import ConfirmationModal from\"../../components/ConfirmationModal\";import toastError from\"../../errors/toastError\";import{SocketContext,socketManager}from\"../../context/Socket/SocketContext\";import UserStatusIcon from\"../../components/UserModal/statusIcon\";import{getBackendUrl}from\"../../config\";import{AuthContext}from\"../../context/Auth/AuthContext\";import{Avatar}from\"@material-ui/core\";import ForbiddenPage from\"../../components/ForbiddenPage\";import ChatBubbleOutlineIcon from\"@material-ui/icons/ChatBubbleOutline\";import{useHistory}from\"react-router-dom\";import usePlans from\"../../hooks/usePlans\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const backendUrl=getBackendUrl();const reducer=(state,action)=>{if(action.type===\"LOAD_USERS\"){const users=action.payload;const newUsers=[];users.forEach(user=>{const userIndex=state.findIndex(u=>u.id===user.id);if(userIndex!==-1){state[userIndex]=user;}else{newUsers.push(user);}});return[...state,...newUsers];}if(action.type===\"UPDATE_USERS\"){const user=action.payload;const userIndex=state.findIndex(u=>u.id===user.id);if(userIndex!==-1){state[userIndex]=user;return[...state];}else{return[user,...state];}}if(action.type===\"DELETE_USER\"){const userId=action.payload;const userIndex=state.findIndex(u=>u.id===userId);if(userIndex!==-1){state.splice(userIndex,1);}return[...state];}if(action.type===\"RESET\"){return[];}};const useStyles=makeStyles(theme=>({mainPaper:_objectSpread({flex:1,padding:theme.spacing(2),overflowY:\"scroll\"},theme.scrollbarStyles),userAvatar:{width:theme.spacing(6),height:theme.spacing(6)},avatarDiv:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},loadingContainer:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",padding:theme.spacing(3)},loadingText:{marginLeft:theme.spacing(2)}}));const Users=()=>{const classes=useStyles();const history=useHistory();const[loading,setLoading]=useState(false);const[loadingMore,setLoadingMore]=useState(false);const[pageNumber,setPageNumber]=useState(1);const[hasMore,setHasMore]=useState(false);const[selectedUser,setSelectedUser]=useState(null);const[deletingUser,setDeletingUser]=useState(null);const[userModalOpen,setUserModalOpen]=useState(false);const[confirmModalOpen,setConfirmModalOpen]=useState(false);const[searchParam,setSearchParam]=useState(\"\");const[users,dispatch]=useReducer(reducer,[]);const{user:loggedInUser,socket}=useContext(AuthContext);const{profileImage}=loggedInUser;const companyId=loggedInUser.companyId;const[showInternalChat,setShowInternalChat]=useState(false);const{getPlanCompany}=usePlans();useEffect(()=>{async function fetchData(){if(!companyId){return;}try{setLoading(true);const planConfigs=await getPlanCompany(undefined,companyId);setShowInternalChat(planConfigs.plan.useInternalChat);}catch(err){console.error(\"Error fetching plan:\",err);}finally{setLoading(false);}}fetchData();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[companyId]);useEffect(()=>{dispatch({type:\"RESET\"});setPageNumber(1);},[searchParam]);useEffect(()=>{setLoading(true);const fetchUsers=async()=>{try{const{data}=await api.get(\"/users/\",{params:{searchParam,pageNumber}});dispatch({type:\"LOAD_USERS\",payload:data.users});setHasMore(data.hasMore);}catch(err){toastError(err);}finally{setLoading(false);setLoadingMore(false);}};fetchUsers();},[searchParam,pageNumber]);useEffect(()=>{if(loggedInUser){const companyId=loggedInUser.companyId;const onCompanyUser=data=>{if(data.action===\"update\"||data.action===\"create\"){dispatch({type:\"UPDATE_USERS\",payload:data.user});}if(data.action===\"delete\"){dispatch({type:\"DELETE_USER\",payload:+data.userId});}};socket.on(\"company-\".concat(companyId,\"-user\"),onCompanyUser);return()=>{socket.off(\"company-\".concat(companyId,\"-user\"),onCompanyUser);};}},[socket,loggedInUser]);const handleOpenUserModal=()=>{setSelectedUser(null);setUserModalOpen(true);};const handleCloseUserModal=()=>{setSelectedUser(null);setUserModalOpen(false);};const handleSearch=event=>{setSearchParam(event.target.value.toLowerCase());};const handleEditUser=user=>{setSelectedUser(user);setUserModalOpen(true);};const handleDeleteUser=async userId=>{try{await api.delete(\"/users/\".concat(userId));toast.success(i18n.t(\"users.toasts.deleted\"));}catch(err){toastError(err);}setDeletingUser(null);setSearchParam(\"\");setPageNumber(1);};const loadMore=()=>{setLoadingMore(true);setPageNumber(prevPage=>prevPage+1);};const handleScroll=e=>{if(!hasMore||loading)return;const{scrollTop,scrollHeight,clientHeight}=e.currentTarget;if(scrollHeight-(scrollTop+100)<clientHeight){loadMore();}};const renderProfileImage=user=>{const buildImageUrl=userData=>{if(!userData.profileImage){return whatsappIcon;}return\"\".concat(backendUrl,\"/public/company\").concat(userData.companyId,\"/user/\").concat(userData.profileImage);};// Para o usuário logado, verificar localStorage também\nif(user.id===loggedInUser.id){const savedProfileImage=localStorage.getItem(\"profileImage\");const profileImageToUse=savedProfileImage||user.profileImage;const imageUrl=profileImageToUse?\"\".concat(backendUrl,\"/public/company\").concat(user.companyId,\"/user/\").concat(profileImageToUse):whatsappIcon;return/*#__PURE__*/_jsx(Avatar,{src:imageUrl,alt:user.name,className:classes.userAvatar,onError:e=>{e.target.src=whatsappIcon;}});}// Para outros usuários\nreturn/*#__PURE__*/_jsx(Avatar,{src:buildImageUrl(user),alt:user.name,className:classes.userAvatar});};const handleCreateChat=async targetUser=>{try{setLoading(true);const{data}=await api.post(\"/chats\",{users:[{id:loggedInUser.id},{id:targetUser.id}],isGroup:false,title:targetUser.name});toast.success(\"Chat criado com sucesso!\");history.push(\"/chats/\".concat(data.uuid));}catch(err){toastError(err);}finally{setLoading(false);}};const handleBackfillChats=async()=>{if(!window.confirm(\"Tem certeza que deseja gerar chats para todos os usuários existentes? Isso pode demorar e criar muitos chats.\")){return;}setLoading(true);try{await api.post(\"/chats/backfill\");toast.success(\"Chats gerados com sucesso!\");}catch(err){toastError(err);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(MainContainer,{children:[/*#__PURE__*/_jsx(ConfirmationModal,{title:deletingUser&&\"\".concat(i18n.t(\"users.confirmationModal.deleteTitle\"),\" \").concat(deletingUser.name,\"?\"),open:confirmModalOpen,onClose:()=>setConfirmModalOpen(false),onConfirm:()=>handleDeleteUser(deletingUser.id),children:i18n.t(\"users.confirmationModal.deleteMessage\")}),/*#__PURE__*/_jsx(UserModal,{open:userModalOpen,onClose:handleCloseUserModal,\"aria-labelledby\":\"form-dialog-title\",userId:selectedUser&&selectedUser.id}),loggedInUser.profile===\"user\"?/*#__PURE__*/_jsx(ForbiddenPage,{}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(MainHeader,{children:[/*#__PURE__*/_jsxs(Title,{children:[i18n.t(\"users.title\"),\" (\",users.length,\")\"]}),/*#__PURE__*/_jsxs(MainHeaderButtonsWrapper,{children:[/*#__PURE__*/_jsx(TextField,{placeholder:i18n.t(\"contacts.searchPlaceholder\"),type:\"search\",value:searchParam,onChange:handleSearch,InputProps:{startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(SearchIcon,{style:{color:\"gray\"}})})}}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:handleOpenUserModal,children:i18n.t(\"users.buttons.add\")}),loggedInUser.profile===\"admin\"&&showInternalChat&&/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",onClick:handleBackfillChats,disabled:loading,children:\"Gerar Chats Existentes\"})]})]}),/*#__PURE__*/_jsxs(Paper,{className:classes.mainPaper,variant:\"outlined\",onScroll:handleScroll,children:[/*#__PURE__*/_jsxs(Table,{size:\"small\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:i18n.t(\"users.table.ID\")}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:i18n.t(\"users.table.status\")}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Avatar\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:i18n.t(\"users.table.name\")}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:i18n.t(\"users.table.email\")}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:i18n.t(\"users.table.profile\")}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:i18n.t(\"users.table.startWork\")}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:i18n.t(\"users.table.endWork\")}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:i18n.t(\"users.table.actions\")})]})}),/*#__PURE__*/_jsx(TableBody,{children:/*#__PURE__*/_jsxs(_Fragment,{children:[users.map(user=>/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:user.id}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(UserStatusIcon,{user:user})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(\"div\",{className:classes.avatarDiv,children:renderProfileImage(user)})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:user.name}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:user.email}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:user.profile}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:user.startWork}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:user.endWork}),/*#__PURE__*/_jsxs(TableCell,{align:\"center\",children:[/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:()=>handleCreateChat(user),disabled:!showInternalChat,children:/*#__PURE__*/_jsx(ChatBubbleOutlineIcon,{})}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:()=>handleEditUser(user),children:/*#__PURE__*/_jsx(EditIcon,{})}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:e=>{setConfirmModalOpen(true);setDeletingUser(user);},children:/*#__PURE__*/_jsx(DeleteOutlineIcon,{})})]})]},user.id)),loadingMore&&/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{colSpan:9,align:\"center\",children:/*#__PURE__*/_jsx(CircularProgress,{})})})]})})]}),loading&&!loadingMore&&/*#__PURE__*/_jsxs(\"div\",{className:classes.loadingContainer,children:[/*#__PURE__*/_jsx(CircularProgress,{}),/*#__PURE__*/_jsx(\"span\",{className:classes.loadingText,children:i18n.t(\"loading\")})]})]})]})]});};export default Users;","map":{"version":3,"names":["React","useState","useEffect","useReducer","useContext","toast","makeStyles","Paper","Button","Table","TableBody","TableCell","TableHead","TableRow","IconButton","SearchIcon","TextField","InputAdornment","CircularProgress","DeleteOutlineIcon","EditIcon","AccountCircle","MainContainer","MainHeader","MainHeaderButtonsWrapper","Title","whatsappIcon","api","i18n","TableRowSkeleton","UserModal","ConfirmationModal","toastError","SocketContext","socketManager","UserStatusIcon","getBackendUrl","AuthContext","Avatar","ForbiddenPage","ChatBubbleOutlineIcon","useHistory","usePlans","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","backendUrl","reducer","state","action","type","users","payload","newUsers","forEach","user","userIndex","findIndex","u","id","push","userId","splice","useStyles","theme","mainPaper","_objectSpread","flex","padding","spacing","overflowY","scrollbarStyles","userAvatar","width","height","avatarDiv","display","alignItems","justifyContent","loadingContainer","loadingText","marginLeft","Users","classes","history","loading","setLoading","loadingMore","setLoadingMore","pageNumber","setPageNumber","hasMore","setHasMore","selectedUser","setSelectedUser","deletingUser","setDeletingUser","userModalOpen","setUserModalOpen","confirmModalOpen","setConfirmModalOpen","searchParam","setSearchParam","dispatch","loggedInUser","socket","profileImage","companyId","showInternalChat","setShowInternalChat","getPlanCompany","fetchData","planConfigs","undefined","plan","useInternalChat","err","console","error","fetchUsers","data","get","params","onCompanyUser","on","concat","off","handleOpenUserModal","handleCloseUserModal","handleSearch","event","target","value","toLowerCase","handleEditUser","handleDeleteUser","delete","success","t","loadMore","prevPage","handleScroll","e","scrollTop","scrollHeight","clientHeight","currentTarget","renderProfileImage","buildImageUrl","userData","savedProfileImage","localStorage","getItem","profileImageToUse","imageUrl","src","alt","name","className","onError","handleCreateChat","targetUser","post","isGroup","title","uuid","handleBackfillChats","window","confirm","children","open","onClose","onConfirm","profile","length","placeholder","onChange","InputProps","startAdornment","position","style","color","variant","onClick","disabled","onScroll","size","align","map","email","startWork","endWork","colSpan"],"sources":["/home/deploy/codigologlow/frontend/src/pages/Users/index.js"],"sourcesContent":["import React, { useState, useEffect, useReducer, useContext } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport { AccountCircle } from \"@material-ui/icons\";\nimport MainContainer from \"../../components/MainContainer\";\nimport MainHeader from \"../../components/MainHeader\";\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\nimport Title from \"../../components/Title\";\nimport whatsappIcon from \"../../assets/nopicture.png\";\nimport api from \"../../services/api\";\nimport { i18n } from \"../../translate/i18n\";\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\nimport UserModal from \"../../components/UserModal\";\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\nimport toastError from \"../../errors/toastError\";\nimport {\n  SocketContext,\n  socketManager,\n} from \"../../context/Socket/SocketContext\";\nimport UserStatusIcon from \"../../components/UserModal/statusIcon\";\nimport { getBackendUrl } from \"../../config\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\nimport { Avatar } from \"@material-ui/core\";\nimport ForbiddenPage from \"../../components/ForbiddenPage\";\nimport ChatBubbleOutlineIcon from \"@material-ui/icons/ChatBubbleOutline\";\nimport { useHistory } from \"react-router-dom\";\nimport usePlans from \"../../hooks/usePlans\";\n\nconst backendUrl = getBackendUrl();\n\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_USERS\") {\n    const users = action.payload;\n    const newUsers = [];\n\n    users.forEach((user) => {\n      const userIndex = state.findIndex((u) => u.id === user.id);\n      if (userIndex !== -1) {\n        state[userIndex] = user;\n      } else {\n        newUsers.push(user);\n      }\n    });\n\n    return [...state, ...newUsers];\n  }\n\n  if (action.type === \"UPDATE_USERS\") {\n    const user = action.payload;\n    const userIndex = state.findIndex((u) => u.id === user.id);\n\n    if (userIndex !== -1) {\n      state[userIndex] = user;\n      return [...state];\n    } else {\n      return [user, ...state];\n    }\n  }\n\n  if (action.type === \"DELETE_USER\") {\n    const userId = action.payload;\n\n    const userIndex = state.findIndex((u) => u.id === userId);\n    if (userIndex !== -1) {\n      state.splice(userIndex, 1);\n    }\n    return [...state];\n  }\n\n  if (action.type === \"RESET\") {\n    return [];\n  }\n};\n\nconst useStyles = makeStyles((theme) => ({\n  mainPaper: {\n    flex: 1,\n    padding: theme.spacing(2),\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles,\n  },\n  userAvatar: {\n    width: theme.spacing(6),\n    height: theme.spacing(6),\n  },\n  avatarDiv: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  loadingContainer: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: theme.spacing(3),\n  },\n  loadingText: {\n    marginLeft: theme.spacing(2),\n  },\n}));\n\nconst Users = () => {\n  const classes = useStyles();\n  const history = useHistory();\n\n  const [loading, setLoading] = useState(false);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [hasMore, setHasMore] = useState(false);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [deletingUser, setDeletingUser] = useState(null);\n  const [userModalOpen, setUserModalOpen] = useState(false);\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\n  const [searchParam, setSearchParam] = useState(\"\");\n  const [users, dispatch] = useReducer(reducer, []);\n  const { user: loggedInUser, socket } = useContext(AuthContext);\n  const { profileImage } = loggedInUser;\n  const companyId = loggedInUser.companyId;\n\n  const [showInternalChat, setShowInternalChat] = useState(false);\n\n  const { getPlanCompany } = usePlans();\n\n  useEffect(() => {\n    async function fetchData() {\n      if (!companyId) {\n        return;\n      }\n\n      try {\n        setLoading(true);\n        const planConfigs = await getPlanCompany(undefined, companyId);\n\n        setShowInternalChat(planConfigs.plan.useInternalChat);\n      } catch (err) {\n        console.error(\"Error fetching plan:\", err);\n      } finally {\n        setLoading(false);\n      }\n    }\n    fetchData();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [companyId]);\n\n  useEffect(() => {\n    dispatch({ type: \"RESET\" });\n    setPageNumber(1);\n  }, [searchParam]);\n\n  useEffect(() => {\n    setLoading(true);\n    const fetchUsers = async () => {\n      try {\n        const { data } = await api.get(\"/users/\", {\n          params: { searchParam, pageNumber },\n        });\n        dispatch({ type: \"LOAD_USERS\", payload: data.users });\n        setHasMore(data.hasMore);\n      } catch (err) {\n        toastError(err);\n      } finally {\n        setLoading(false);\n        setLoadingMore(false);\n      }\n    };\n    fetchUsers();\n  }, [searchParam, pageNumber]);\n\nuseEffect(() => {\n  if (loggedInUser) {\n    const companyId = loggedInUser.companyId;\n    \n    const onCompanyUser = (data) => {\n      if (data.action === \"update\" || data.action === \"create\") {\n        dispatch({ type: \"UPDATE_USERS\", payload: data.user });\n      }\n      if (data.action === \"delete\") {\n        dispatch({ type: \"DELETE_USER\", payload: +data.userId });\n      }\n    };\n    \n    socket.on(`company-${companyId}-user`, onCompanyUser);\n    \n    return () => {\n      socket.off(`company-${companyId}-user`, onCompanyUser);\n    };\n  }\n}, [socket, loggedInUser]);\n\n  const handleOpenUserModal = () => {\n    setSelectedUser(null);\n    setUserModalOpen(true);\n  };\n\n  const handleCloseUserModal = () => {\n    setSelectedUser(null);\n    setUserModalOpen(false);\n  };\n\n  const handleSearch = (event) => {\n    setSearchParam(event.target.value.toLowerCase());\n  };\n\n  const handleEditUser = (user) => {\n    setSelectedUser(user);\n    setUserModalOpen(true);\n  };\n\n  const handleDeleteUser = async (userId) => {\n    try {\n      await api.delete(`/users/${userId}`);\n      toast.success(i18n.t(\"users.toasts.deleted\"));\n    } catch (err) {\n      toastError(err);\n    }\n    setDeletingUser(null);\n    setSearchParam(\"\");\n    setPageNumber(1);\n  };\n\n  const loadMore = () => {\n    setLoadingMore(true);\n    setPageNumber((prevPage) => prevPage + 1);\n  };\n\n  const handleScroll = (e) => {\n    if (!hasMore || loading) return;\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\n      loadMore();\n    }\n  };\n\nconst renderProfileImage = (user) => {\n  const buildImageUrl = (userData) => {\n    if (!userData.profileImage) {\n      return whatsappIcon;\n    }\n    return `${backendUrl}/public/company${userData.companyId}/user/${userData.profileImage}`;\n  };\n\n  // Para o usuário logado, verificar localStorage também\n  if (user.id === loggedInUser.id) {\n    const savedProfileImage = localStorage.getItem(\"profileImage\");\n    const profileImageToUse = savedProfileImage || user.profileImage;\n    \n    const imageUrl = profileImageToUse \n      ? `${backendUrl}/public/company${user.companyId}/user/${profileImageToUse}`\n      : whatsappIcon;\n\n    return (\n      <Avatar\n        src={imageUrl}\n        alt={user.name}\n        className={classes.userAvatar}\n        onError={(e) => {\n          e.target.src = whatsappIcon;\n        }}\n      />\n    );\n  }\n  \n  // Para outros usuários\n  return (\n    <Avatar\n      src={buildImageUrl(user)}\n      alt={user.name}\n      className={classes.userAvatar}\n    />\n  );\n};\n\n  const handleCreateChat = async (targetUser) => {\n    try {\n      setLoading(true);\n      const { data } = await api.post(\"/chats\", {\n        users: [{ id: loggedInUser.id }, { id: targetUser.id }],\n        isGroup: false,\n        title: targetUser.name,\n      });\n      toast.success(\"Chat criado com sucesso!\");\n      history.push(`/chats/${data.uuid}`);\n    } catch (err) {\n      toastError(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleBackfillChats = async () => {\n    if (\n      !window.confirm(\n        \"Tem certeza que deseja gerar chats para todos os usuários existentes? Isso pode demorar e criar muitos chats.\"\n      )\n    ) {\n      return;\n    }\n    setLoading(true);\n    try {\n      await api.post(\"/chats/backfill\");\n      toast.success(\"Chats gerados com sucesso!\");\n    } catch (err) {\n      toastError(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <MainContainer>\n      <ConfirmationModal\n        title={\n          deletingUser &&\n          `${i18n.t(\"users.confirmationModal.deleteTitle\")} ${\n            deletingUser.name\n          }?`\n        }\n        open={confirmModalOpen}\n        onClose={() => setConfirmModalOpen(false)}\n        onConfirm={() => handleDeleteUser(deletingUser.id)}\n      >\n        {i18n.t(\"users.confirmationModal.deleteMessage\")}\n      </ConfirmationModal>\n      <UserModal\n        open={userModalOpen}\n        onClose={handleCloseUserModal}\n        aria-labelledby=\"form-dialog-title\"\n        userId={selectedUser && selectedUser.id}\n      />\n      {loggedInUser.profile === \"user\" ? (\n        <ForbiddenPage />\n      ) : (\n        <>\n          <MainHeader>\n            <Title>\n              {i18n.t(\"users.title\")} ({users.length})\n            </Title>\n            <MainHeaderButtonsWrapper>\n              <TextField\n                placeholder={i18n.t(\"contacts.searchPlaceholder\")}\n                type=\"search\"\n                value={searchParam}\n                onChange={handleSearch}\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">\n                      <SearchIcon style={{ color: \"gray\" }} />\n                    </InputAdornment>\n                  ),\n                }}\n              />\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={handleOpenUserModal}\n              >\n                {i18n.t(\"users.buttons.add\")}\n              </Button>\n              {loggedInUser.profile === \"admin\" && showInternalChat && (\n                <Button\n                  variant=\"contained\"\n                  color=\"secondary\"\n                  onClick={handleBackfillChats}\n                  disabled={loading}\n                >\n                  Gerar Chats Existentes\n                </Button>\n              )}\n            </MainHeaderButtonsWrapper>\n          </MainHeader>\n          <Paper\n            className={classes.mainPaper}\n            variant=\"outlined\"\n            onScroll={handleScroll}\n          >\n            <Table size=\"small\">\n              <TableHead>\n                <TableRow>\n                  <TableCell align=\"center\">\n                    {i18n.t(\"users.table.ID\")}\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    {i18n.t(\"users.table.status\")}\n                  </TableCell>\n                  <TableCell align=\"center\">Avatar</TableCell>\n                  <TableCell align=\"center\">\n                    {i18n.t(\"users.table.name\")}\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    {i18n.t(\"users.table.email\")}\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    {i18n.t(\"users.table.profile\")}\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    {i18n.t(\"users.table.startWork\")}\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    {i18n.t(\"users.table.endWork\")}\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    {i18n.t(\"users.table.actions\")}\n                  </TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                <>\n                  {users.map((user) => (\n                    <TableRow key={user.id}>\n                      <TableCell align=\"center\">{user.id}</TableCell>\n                      <TableCell align=\"center\">\n                        <UserStatusIcon user={user} />\n                      </TableCell>\n                      <TableCell align=\"center\">\n                        <div className={classes.avatarDiv}>\n                          {renderProfileImage(user)}\n                        </div>\n                      </TableCell>\n                      <TableCell align=\"center\">{user.name}</TableCell>\n                      <TableCell align=\"center\">{user.email}</TableCell>\n                      <TableCell align=\"center\">{user.profile}</TableCell>\n                      <TableCell align=\"center\">{user.startWork}</TableCell>\n                      <TableCell align=\"center\">{user.endWork}</TableCell>\n                      <TableCell align=\"center\">\n                        <IconButton\n                          size=\"small\"\n                          onClick={() => handleCreateChat(user)}\n                          disabled={!showInternalChat}\n                        >\n                          <ChatBubbleOutlineIcon />\n                        </IconButton>\n                        <IconButton\n                          size=\"small\"\n                          onClick={() => handleEditUser(user)}\n                        >\n                          <EditIcon />\n                        </IconButton>\n\n                        <IconButton\n                          size=\"small\"\n                          onClick={(e) => {\n                            setConfirmModalOpen(true);\n                            setDeletingUser(user);\n                          }}\n                        >\n                          <DeleteOutlineIcon />\n                        </IconButton>\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                  {loadingMore && (\n                    <TableRow>\n                      <TableCell colSpan={9} align=\"center\">\n                        <CircularProgress />\n                      </TableCell>\n                    </TableRow>\n                  )}\n                </>\n              </TableBody>\n            </Table>\n            {loading && !loadingMore && (\n              <div className={classes.loadingContainer}>\n                <CircularProgress />\n                <span className={classes.loadingText}>{i18n.t(\"loading\")}</span>\n              </div>\n            )}\n          </Paper>\n        </>\n      )}\n    </MainContainer>\n  );\n};\n\nexport default Users;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}