{"ast":null,"code":"import _objectSpread from\"/home/deploy/atendechatop/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useContext,useEffect}from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import Paper from\"@material-ui/core/Paper\";import Button from\"@material-ui/core/Button\";import Grid from'@material-ui/core/Grid';import TextField from'@material-ui/core/TextField';import SubscriptionModal from\"../../components/SubscriptionModal\";import MainHeader from\"../../components/MainHeader\";import Title from\"../../components/Title\";import MainContainer from\"../../components/MainContainer\";import moment from\"moment\";import{useDate}from\"../../hooks/useDate\";import{AuthContext}from\"../../context/Auth/AuthContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const useStyles=makeStyles(theme=>({mainPaper:_objectSpread({flex:1,padding:theme.spacing(1),overflowY:\"scroll\"},theme.scrollbarStyles)}));const Contacts=()=>{var _user$company,_user$company2;const classes=useStyles();const{user,socket}=useContext(AuthContext);const[loading]=useState(false);const[,setPageNumber]=useState(1);const[selectedContactId,setSelectedContactId]=useState(null);const[contactModalOpen,setContactModalOpen]=useState(false);const[hasMore]=useState(false);const[dueDate,setDueDate]=useState(\"\");const{returnDays}=useDate();const handleOpenContactModal=()=>{setSelectedContactId(null);setContactModalOpen(true);};const handleCloseContactModal=()=>{setSelectedContactId(null);setContactModalOpen(false);};const loadMore=()=>{setPageNumber(prevState=>prevState+1);};const handleScroll=e=>{if(!hasMore||loading)return;const{scrollTop,scrollHeight,clientHeight}=e.currentTarget;if(scrollHeight-(scrollTop+100)<clientHeight){loadMore();}};useEffect(()=>{const currentDueDate=localStorage.getItem(\"dueDate\");if(currentDueDate!==\"\"&&currentDueDate!==\"null\"){setDueDate(moment(currentDueDate).format(\"DD/MM/YYYY\"));}},[]);return/*#__PURE__*/_jsxs(MainContainer,{className:classes.mainContainer,children:[/*#__PURE__*/_jsx(SubscriptionModal,{open:contactModalOpen,onClose:handleCloseContactModal,\"aria-labelledby\":\"form-dialog-title\",contactId:selectedContactId}),/*#__PURE__*/_jsx(MainHeader,{children:/*#__PURE__*/_jsx(Title,{children:\"Assinatura\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:4,children:/*#__PURE__*/_jsxs(Paper,{className:classes.mainPaper,variant:\"outlined\",onScroll:handleScroll,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(TextField,{id:\"outlined-full-width\",label:\"Per\\xEDodo de Licen\\xE7a\"// defaultValue={`Sua licen√ßa vence em ${returnDays(user?.company?.dueDate)} dias!`}\n,defaultValue:returnDays(user===null||user===void 0?void 0:(_user$company=user.company)===null||_user$company===void 0?void 0:_user$company.dueDate)===0?\"Sua licen\\xE7a vence em hoje!\":\"Sua licen\\xE7a vence em \".concat(returnDays(user===null||user===void 0?void 0:(_user$company2=user.company)===null||_user$company2===void 0?void 0:_user$company2.dueDate),\" dias!\"),fullWidth:true,margin:\"normal\",InputLabelProps:{shrink:true},InputProps:{readOnly:true},variant:\"outlined\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(TextField,{id:\"outlined-full-width\",label:\"Email de cobran\\xE7a\",defaultValue:user===null||user===void 0?void 0:user.email,fullWidth:true,margin:\"normal\",InputLabelProps:{shrink:true},InputProps:{readOnly:true},variant:\"outlined\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:handleOpenContactModal,fullWidth:true,children:\"Assine Agora!\"})})]})})]});};export default Contacts;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}