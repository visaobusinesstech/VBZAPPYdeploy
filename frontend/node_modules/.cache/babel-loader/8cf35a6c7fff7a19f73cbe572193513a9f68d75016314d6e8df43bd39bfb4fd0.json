{"ast":null,"code":"import _objectSpread from\"/home/deploy/codigologlow/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useRef,useEffect,useContext}from\"react\";import{useTheme}from\"@material-ui/core/styles\";import{useHistory}from\"react-router-dom\";import{format}from\"date-fns\";// import { SocketContext } from \"../../context/Socket/SocketContext\";\nimport useSound from\"use-sound\";import Popover from\"@material-ui/core/Popover\";import IconButton from\"@material-ui/core/IconButton\";import List from\"@material-ui/core/List\";import ListItem from\"@material-ui/core/ListItem\";import ListItemText from\"@material-ui/core/ListItemText\";import{makeStyles}from\"@material-ui/core/styles\";import Badge from\"@material-ui/core/Badge\";import ChatIcon from\"@material-ui/icons/Chat\";import TicketListItem from\"../TicketListItem\";import useTickets from\"../../hooks/useTickets\";import alertSound from\"../../assets/sound.mp3\";import{AuthContext}from\"../../context/Auth/AuthContext\";import{i18n}from\"../../translate/i18n\";import toastError from\"../../errors/toastError\";import useCompanySettings from\"../../hooks/useSettings/companySettings\";import Favicon from\"react-favicon\";import{getBackendUrl}from\"../../config\";import defaultLogoFavicon from\"../../assets/favicon.ico\";import{TicketsContext}from\"../../context/Tickets/TicketsContext\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const useStyles=makeStyles(theme=>({tabContainer:_objectSpread({overflowY:\"auto\",maxHeight:350},theme.scrollbarStyles),popoverPaper:{width:\"100%\",maxWidth:350,marginLeft:theme.spacing(2),marginRight:theme.spacing(1),[theme.breakpoints.down(\"sm\")]:{maxWidth:270}},noShadow:{boxShadow:\"none !important\"}}));const NotificationsPopOver=volume=>{const classes=useStyles();const theme=useTheme();const history=useHistory();// const socketManager = useContext(SocketContext);\nconst{user,socket}=useContext(AuthContext);const{profile,queues}=user;const ticketIdUrl=+history.location.pathname.split(\"/\")[2];const ticketIdRef=useRef(ticketIdUrl);const anchorEl=useRef();const[isOpen,setIsOpen]=useState(false);const[notifications,setNotifications]=useState([]);const queueIds=queues.map(q=>q.id);const{get:getSetting}=useCompanySettings();const{setCurrentTicket,setTabOpen}=useContext(TicketsContext);const[showTicketWithoutQueue,setShowTicketWithoutQueue]=useState(false);const[showNotificationPending,setShowNotificationPending]=useState(false);const[showGroupNotification,setShowGroupNotification]=useState(false);const[,setDesktopNotifications]=useState([]);const{tickets}=useTickets({withUnreadMessages:\"true\"// showAll: showTicketWithoutQueue ? \"true\" : \"false\"\n});const[play]=useSound(alertSound,volume);const soundAlertRef=useRef();const historyRef=useRef(history);useEffect(()=>{const fetchSettings=async()=>{try{const setting=await getSetting({\"column\":\"showNotificationPending\"});if(setting.showNotificationPending===true){setShowNotificationPending(true);}if(user.allTicket===\"enable\"){setShowTicketWithoutQueue(true);}if(user.allowGroup===true){setShowGroupNotification(true);}}catch(err){toastError(err);}};fetchSettings();},[setShowTicketWithoutQueue,setShowNotificationPending]);useEffect(()=>{soundAlertRef.current=play;if(!(\"Notification\"in window)){console.log(\"This browser doesn't support notifications\");}else{Notification.requestPermission();}},[play]);useEffect(()=>{const processNotifications=()=>{// if (showTicketWithoutQueue) {\nsetNotifications(tickets);// } else {\n// \tconst newNotifications = tickets.filter(ticket => ticket.status !== \"pending\");\n// \tsetNotifications(newNotifications);\n// }\n};processNotifications();},[tickets]);useEffect(()=>{ticketIdRef.current=ticketIdUrl;},[ticketIdUrl]);useEffect(()=>{const companyId=user.companyId;// const socket = socketManager.GetSocket();\nif(user.id&&socket){const queueIds=queues.map(q=>q.id);const onConnectNotificationsPopover=()=>{socket.emit(\"joinNotification\");};const onCompanyTicketNotificationsPopover=data=>{if(data.action===\"updateUnread\"||data.action===\"delete\"){setNotifications(prevState=>{const ticketIndex=prevState.findIndex(t=>t.id===data.ticketId);if(ticketIndex!==-1){prevState.splice(ticketIndex,1);return[...prevState];}return prevState;});setDesktopNotifications(prevState=>{const notfiticationIndex=prevState.findIndex(n=>n.tag===String(data.ticketId));if(notfiticationIndex!==-1){prevState[notfiticationIndex].close();prevState.splice(notfiticationIndex,1);return[...prevState];}return prevState;});}};// Adicione esta lógica no componente NotificationsPopOver\nconst onCompanyAppMessageNotificationsPopover=data=>{var _data$ticket,_data$ticket2,_user$queues,_data$ticket3,_data$ticket4,_data$ticket5,_data$ticket6,_data$ticket6$whatsap;if(data.action===\"create\"&&!data.message.fromMe&&!data.message.read&&(((_data$ticket=data.ticket)===null||_data$ticket===void 0?void 0:_data$ticket.userId)===(user===null||user===void 0?void 0:user.id)||!((_data$ticket2=data.ticket)!==null&&_data$ticket2!==void 0&&_data$ticket2.userId))&&(user!==null&&user!==void 0&&(_user$queues=user.queues)!==null&&_user$queues!==void 0&&_user$queues.some(queue=>queue.id===data.ticket.queueId)||!data.ticket.queueId&&showTicketWithoutQueue===true)&&(![\"pending\",\"lgpd\",\"nps\",\"group\"].includes((_data$ticket3=data.ticket)===null||_data$ticket3===void 0?void 0:_data$ticket3.status)||((_data$ticket4=data.ticket)===null||_data$ticket4===void 0?void 0:_data$ticket4.status)===\"pending\"&&showNotificationPending===true||((_data$ticket5=data.ticket)===null||_data$ticket5===void 0?void 0:_data$ticket5.status)===\"group\"&&((_data$ticket6=data.ticket)===null||_data$ticket6===void 0?void 0:(_data$ticket6$whatsap=_data$ticket6.whatsapp)===null||_data$ticket6$whatsap===void 0?void 0:_data$ticket6$whatsap.groupAsTicket)===\"enabled\"&&showGroupNotification===true)){var _data$ticket7,_data$ticket7$whatsap;// Aplicar lógica de permissão para mensagens pending\nconst shouldBlurMessages=data.ticket.status===\"pending\"&&user.allowSeeMessagesInPendingTickets===\"disabled\";// Se deve ocultar a mensagem, modifique o ticket antes de adicioná-lo às notificações\nconst ticketToAdd=shouldBlurMessages?_objectSpread(_objectSpread({},data.ticket),{},{lastMessage:i18n.t(\"notifications.messageHidden\")// ou \"Mensagem oculta\"\n}):data.ticket;setNotifications(prevState=>{const ticketIndex=prevState.findIndex(t=>t.id===ticketToAdd.id);if(ticketIndex!==-1){prevState[ticketIndex]=ticketToAdd;return[...prevState];}return[ticketToAdd,...prevState];});const shouldNotNotificate=data.message.ticketId===ticketIdRef.current&&document.visibilityState===\"visible\"||data.ticket.userId&&data.ticket.userId!==(user===null||user===void 0?void 0:user.id)||data.ticket.isGroup&&((_data$ticket7=data.ticket)===null||_data$ticket7===void 0?void 0:(_data$ticket7$whatsap=_data$ticket7.whatsapp)===null||_data$ticket7$whatsap===void 0?void 0:_data$ticket7$whatsap.groupAsTicket)===\"disabled\"&&showGroupNotification===false;if(shouldNotNotificate===true)return;// Para notificações desktop, também aplicar a lógica de ocultação\nconst messageBody=shouldBlurMessages?i18n.t(\"notifications.messageHidden\"):data.message.body;handleNotifications(_objectSpread(_objectSpread({},data),{},{message:_objectSpread(_objectSpread({},data.message),{},{body:messageBody})}));}};socket.on(\"connect\",onConnectNotificationsPopover);socket.on(\"company-\".concat(companyId,\"-ticket\"),onCompanyTicketNotificationsPopover);socket.on(\"company-\".concat(companyId,\"-appMessage\"),onCompanyAppMessageNotificationsPopover);return()=>{socket.off(\"connect\",onConnectNotificationsPopover);socket.off(\"company-\".concat(companyId,\"-ticket\"),onCompanyTicketNotificationsPopover);socket.off(\"company-\".concat(companyId,\"-appMessage\"),onCompanyAppMessageNotificationsPopover);};}return undefined;},[user,profile,queues,showTicketWithoutQueue,socket,showNotificationPending,showGroupNotification]);const handleNotifications=data=>{const{message,contact,ticket}=data;const options={body:\"\".concat(message.body,\" - \").concat(format(new Date(),\"HH:mm\")),icon:contact.urlPicture,tag:ticket.id,renotify:true};const notification=new Notification(\"\".concat(i18n.t(\"tickets.notification.message\"),\" \").concat(contact.name),options);notification.onclick=e=>{e.preventDefault();window.focus();setTabOpen(ticket.status);historyRef.current.push(\"/tickets/\".concat(ticket.uuid));// handleChangeTab(null, ticket.isGroup? \"group\" : \"open\");\n};setDesktopNotifications(prevState=>{const notfiticationIndex=prevState.findIndex(n=>n.tag===notification.tag);if(notfiticationIndex!==-1){prevState[notfiticationIndex]=notification;return[...prevState];}return[notification,...prevState];});soundAlertRef.current();};const handleClick=()=>{setIsOpen(prevState=>!prevState);};const handleClickAway=()=>{setIsOpen(false);};const NotificationTicket=_ref=>{let{children}=_ref;return/*#__PURE__*/_jsx(\"div\",{onClick:handleClickAway,children:children});};const browserNotification=()=>{const numbers=\"⓿➊➋➌➍➎➏➐➑➒➓⓫⓬⓭⓮⓯⓰⓱⓲⓳⓴\";if(notifications.length>0){if(notifications.length<21){document.title=numbers.substring(notifications.length,notifications.length+1)+\" - \"+(theme.appName||\"...\");}else{document.title=\"(\"+notifications.length+\")\"+(theme.appName||\"...\");}}else{document.title=theme.appName||\"...\";}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Favicon,{animated:true,url:theme!==null&&theme!==void 0&&theme.appLogoFavicon?theme.appLogoFavicon:defaultLogoFavicon,alertCount:notifications.length,iconSize:195})});};return/*#__PURE__*/_jsxs(_Fragment,{children:[browserNotification(),/*#__PURE__*/_jsx(IconButton,{onClick:handleClick,ref:anchorEl,\"aria-label\":\"Open Notifications\",color:\"inherit\",style:{color:\"white\"},children:/*#__PURE__*/_jsx(Badge,{overlap:\"rectangular\",badgeContent:notifications.length,color:\"secondary\",children:/*#__PURE__*/_jsx(ChatIcon,{})})}),/*#__PURE__*/_jsx(Popover,{disableScrollLock:true,open:isOpen,anchorEl:anchorEl.current,anchorOrigin:{vertical:\"bottom\",horizontal:\"right\"},transformOrigin:{vertical:\"top\",horizontal:\"right\"},classes:{paper:classes.popoverPaper},onClose:handleClickAway,children:/*#__PURE__*/_jsx(List,{dense:true,className:classes.tabContainer,children:notifications.length===0?/*#__PURE__*/_jsx(ListItem,{children:/*#__PURE__*/_jsx(ListItemText,{children:i18n.t(\"notifications.noTickets\")})}):notifications.map(ticket=>/*#__PURE__*/_jsx(NotificationTicket,{children:/*#__PURE__*/_jsx(TicketListItem,{ticket:ticket})},ticket.id))})})]});};export default NotificationsPopOver;","map":{"version":3,"names":["React","useState","useRef","useEffect","useContext","useTheme","useHistory","format","useSound","Popover","IconButton","List","ListItem","ListItemText","makeStyles","Badge","ChatIcon","TicketListItem","useTickets","alertSound","AuthContext","i18n","toastError","useCompanySettings","Favicon","getBackendUrl","defaultLogoFavicon","TicketsContext","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","useStyles","theme","tabContainer","_objectSpread","overflowY","maxHeight","scrollbarStyles","popoverPaper","width","maxWidth","marginLeft","spacing","marginRight","breakpoints","down","noShadow","boxShadow","NotificationsPopOver","volume","classes","history","user","socket","profile","queues","ticketIdUrl","location","pathname","split","ticketIdRef","anchorEl","isOpen","setIsOpen","notifications","setNotifications","queueIds","map","q","id","get","getSetting","setCurrentTicket","setTabOpen","showTicketWithoutQueue","setShowTicketWithoutQueue","showNotificationPending","setShowNotificationPending","showGroupNotification","setShowGroupNotification","setDesktopNotifications","tickets","withUnreadMessages","play","soundAlertRef","historyRef","fetchSettings","setting","allTicket","allowGroup","err","current","window","console","log","Notification","requestPermission","processNotifications","companyId","onConnectNotificationsPopover","emit","onCompanyTicketNotificationsPopover","data","action","prevState","ticketIndex","findIndex","t","ticketId","splice","notfiticationIndex","n","tag","String","close","onCompanyAppMessageNotificationsPopover","_data$ticket","_data$ticket2","_user$queues","_data$ticket3","_data$ticket4","_data$ticket5","_data$ticket6","_data$ticket6$whatsap","message","fromMe","read","ticket","userId","some","queue","queueId","includes","status","whatsapp","groupAsTicket","_data$ticket7","_data$ticket7$whatsap","shouldBlurMessages","allowSeeMessagesInPendingTickets","ticketToAdd","lastMessage","shouldNotNotificate","document","visibilityState","isGroup","messageBody","body","handleNotifications","on","concat","off","undefined","contact","options","Date","icon","urlPicture","renotify","notification","name","onclick","e","preventDefault","focus","push","uuid","handleClick","handleClickAway","NotificationTicket","_ref","children","onClick","browserNotification","numbers","length","title","substring","appName","animated","url","appLogoFavicon","alertCount","iconSize","ref","color","style","overlap","badgeContent","disableScrollLock","open","anchorOrigin","vertical","horizontal","transformOrigin","paper","onClose","dense","className"],"sources":["/home/deploy/codigologlow/frontend/src/components/NotificationsPopOver/index.js"],"sourcesContent":["import React, { useState, useRef, useEffect, useContext } from \"react\";\nimport { useTheme } from \"@material-ui/core/styles\";\n\nimport { useHistory } from \"react-router-dom\";\nimport { format } from \"date-fns\";\n// import { SocketContext } from \"../../context/Socket/SocketContext\";\n\nimport useSound from \"use-sound\";\n\nimport Popover from \"@material-ui/core/Popover\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Badge from \"@material-ui/core/Badge\";\nimport ChatIcon from \"@material-ui/icons/Chat\";\n\nimport TicketListItem from \"../TicketListItem\";\nimport useTickets from \"../../hooks/useTickets\";\nimport alertSound from \"../../assets/sound.mp3\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\nimport { i18n } from \"../../translate/i18n\";\nimport toastError from \"../../errors/toastError\";\nimport useCompanySettings from \"../../hooks/useSettings/companySettings\";\nimport Favicon from \"react-favicon\";\nimport { getBackendUrl } from \"../../config\";\nimport defaultLogoFavicon from \"../../assets/favicon.ico\";\nimport { TicketsContext } from \"../../context/Tickets/TicketsContext\";\n\nconst useStyles = makeStyles(theme => ({\n\ttabContainer: {\n\t\toverflowY: \"auto\",\n\t\tmaxHeight: 350,\n\t\t...theme.scrollbarStyles,\n\t},\n\tpopoverPaper: {\n\t\twidth: \"100%\",\n\t\tmaxWidth: 350,\n\t\tmarginLeft: theme.spacing(2),\n\t\tmarginRight: theme.spacing(1),\n\t\t[theme.breakpoints.down(\"sm\")]: {\n\t\t\tmaxWidth: 270,\n\t\t},\n\t},\n\tnoShadow: {\n\t\tboxShadow: \"none !important\",\n\t},\n}));\n\nconst NotificationsPopOver = (volume) => {\n\tconst classes = useStyles();\n\tconst theme = useTheme();\n\n\tconst history = useHistory();\n\t// const socketManager = useContext(SocketContext);\n\tconst { user, socket } = useContext(AuthContext);\n\tconst { profile, queues } = user;\n\n\tconst ticketIdUrl = +history.location.pathname.split(\"/\")[2];\n\tconst ticketIdRef = useRef(ticketIdUrl);\n\tconst anchorEl = useRef();\n\tconst [isOpen, setIsOpen] = useState(false);\n\tconst [notifications, setNotifications] = useState([]);\n\tconst queueIds = queues.map((q) => q.id);\n\tconst { get: getSetting } = useCompanySettings();\n    const { setCurrentTicket, setTabOpen } = useContext(TicketsContext);\n\n\tconst [showTicketWithoutQueue, setShowTicketWithoutQueue] = useState(false);\n\tconst [showNotificationPending, setShowNotificationPending] = useState(false);\n\tconst [showGroupNotification, setShowGroupNotification] = useState(false);\n\n\tconst [, setDesktopNotifications] = useState([]);\n\n\tconst { tickets } = useTickets({\n\t\twithUnreadMessages: \"true\"\n\t\t// showAll: showTicketWithoutQueue ? \"true\" : \"false\"\n\t});\n\n\tconst [play] = useSound(alertSound, volume);\n\tconst soundAlertRef = useRef();\n\n\tconst historyRef = useRef(history);\n\n\tuseEffect(() => {\n\t\tconst fetchSettings = async () => {\n\t\t\ttry {\n\t\t\t\tconst setting = await getSetting(\n\t\t\t\t\t{\n\t\t\t\t\t\t\"column\": \"showNotificationPending\"\n\t\t\t\t\t}\n\t\t\t\t);\n\n\n\n\t\t\t\tif (setting.showNotificationPending === true) {\n\t\t\t\t\tsetShowNotificationPending(true);\n\t\t\t\t}\n\n\t\t\t\tif (user.allTicket === \"enable\") {\n\t\t\t\t\tsetShowTicketWithoutQueue(true);\n\t\t\t\t}\n\t\t\t\tif (user.allowGroup === true) {\n\t\t\t\t\tsetShowGroupNotification(true);\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\ttoastError(err);\n\t\t\t}\n\t\t}\n\n\t\tfetchSettings();\n\t}, [setShowTicketWithoutQueue, setShowNotificationPending]);\n\n\tuseEffect(() => {\n\t\tsoundAlertRef.current = play;\n\n\t\tif (!(\"Notification\" in window)) {\n\t\t\tconsole.log(\"This browser doesn't support notifications\");\n\t\t} else {\n\t\t\tNotification.requestPermission();\n\t\t}\n\t}, [play]);\n\n\tuseEffect(() => {\n\t\tconst processNotifications = () => {\n\t\t\t// if (showTicketWithoutQueue) {\n\t\t\tsetNotifications(tickets);\n\t\t\t// } else {\n\t\t\t// \tconst newNotifications = tickets.filter(ticket => ticket.status !== \"pending\");\n\n\t\t\t// \tsetNotifications(newNotifications);\n\t\t\t// }\n\t\t}\n\n\t\tprocessNotifications();\n\t}, [tickets]);\n\n\tuseEffect(() => {\n\t\tticketIdRef.current = ticketIdUrl;\n\t}, [ticketIdUrl]);\n\n\tuseEffect(() => {\n\t\tconst companyId = user.companyId;\n\t\t// const socket = socketManager.GetSocket();\n\t\tif (user.id && socket) {\n\t\t\tconst queueIds = queues.map((q) => q.id);\n\n\t\t\tconst onConnectNotificationsPopover = () => {\n\t\t\t\tsocket.emit(\"joinNotification\");\n\t\t\t}\n\n\t\t\tconst onCompanyTicketNotificationsPopover = (data) => {\n\t\t\t\tif (data.action === \"updateUnread\" || data.action === \"delete\") {\n\t\t\t\t\tsetNotifications(prevState => {\n\t\t\t\t\t\tconst ticketIndex = prevState.findIndex(t => t.id === data.ticketId);\n\t\t\t\t\t\tif (ticketIndex !== -1) {\n\t\t\t\t\t\t\tprevState.splice(ticketIndex, 1);\n\t\t\t\t\t\t\treturn [...prevState];\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn prevState;\n\t\t\t\t\t});\n\n\t\t\t\t\tsetDesktopNotifications(prevState => {\n\t\t\t\t\t\tconst notfiticationIndex = prevState.findIndex(\n\t\t\t\t\t\t\tn => n.tag === String(data.ticketId)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (notfiticationIndex !== -1) {\n\t\t\t\t\t\t\tprevState[notfiticationIndex].close();\n\t\t\t\t\t\t\tprevState.splice(notfiticationIndex, 1);\n\t\t\t\t\t\t\treturn [...prevState];\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn prevState;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n// Adicione esta lógica no componente NotificationsPopOver\nconst onCompanyAppMessageNotificationsPopover = (data) => {\n    if (\n        data.action === \"create\" && !data.message.fromMe &&\n        !data.message.read &&\n        (data.ticket?.userId === user?.id || !data.ticket?.userId) &&\n        (user?.queues?.some(queue => (queue.id === data.ticket.queueId)) ||\n            !data.ticket.queueId && showTicketWithoutQueue === true) &&\n        (![\"pending\", \"lgpd\", \"nps\", \"group\"].includes(data.ticket?.status) ||\n            (data.ticket?.status === \"pending\" && showNotificationPending === true) ||\n            (data.ticket?.status === \"group\" && data.ticket?.whatsapp?.groupAsTicket === \"enabled\" && showGroupNotification === true))\n    ) {\n        // Aplicar lógica de permissão para mensagens pending\n        const shouldBlurMessages = data.ticket.status === \"pending\" && user.allowSeeMessagesInPendingTickets === \"disabled\";\n        \n        // Se deve ocultar a mensagem, modifique o ticket antes de adicioná-lo às notificações\n        const ticketToAdd = shouldBlurMessages \n            ? {\n                ...data.ticket,\n                lastMessage: i18n.t(\"notifications.messageHidden\") // ou \"Mensagem oculta\"\n              }\n            : data.ticket;\n\n        setNotifications(prevState => {\n            const ticketIndex = prevState.findIndex(t => t.id === ticketToAdd.id);\n            if (ticketIndex !== -1) {\n                prevState[ticketIndex] = ticketToAdd;\n                return [...prevState];\n            }\n            return [ticketToAdd, ...prevState];\n        });\n\n        const shouldNotNotificate =\n            (data.message.ticketId === ticketIdRef.current &&\n                document.visibilityState === \"visible\") ||\n            (data.ticket.userId && data.ticket.userId !== user?.id) ||\n            (data.ticket.isGroup && data.ticket?.whatsapp?.groupAsTicket === \"disabled\" && showGroupNotification === false);\n\n        if (shouldNotNotificate === true) return;\n\n        // Para notificações desktop, também aplicar a lógica de ocultação\n        const messageBody = shouldBlurMessages \n            ? i18n.t(\"notifications.messageHidden\")\n            : data.message.body;\n\n        handleNotifications({\n            ...data,\n            message: {\n                ...data.message,\n                body: messageBody\n            }\n        });\n    }\n}\n\n\t\t\tsocket.on(\"connect\", onConnectNotificationsPopover);\n\t\t\tsocket.on(`company-${companyId}-ticket`, onCompanyTicketNotificationsPopover);\n\t\t\tsocket.on(`company-${companyId}-appMessage`, onCompanyAppMessageNotificationsPopover);\n\n\t\t\treturn () => {\n\t\t\t\tsocket.off(\"connect\", onConnectNotificationsPopover);\n\t\t\t\tsocket.off(`company-${companyId}-ticket`, onCompanyTicketNotificationsPopover);\n\t\t\t\tsocket.off(`company-${companyId}-appMessage`, onCompanyAppMessageNotificationsPopover);\n\t\t\t};\n\t\t}\n\t\treturn undefined;\n\t}, [user, profile, queues, showTicketWithoutQueue, socket, showNotificationPending, showGroupNotification]);\n\n\tconst handleNotifications = data => {\n\t\tconst { message, contact, ticket } = data;\n\n\t\tconst options = {\n\t\t\tbody: `${message.body} - ${format(new Date(), \"HH:mm\")}`,\n\t\t\ticon: contact.urlPicture,\n\t\t\ttag: ticket.id,\n\t\t\trenotify: true,\n\t\t};\n\t\tconst notification = new Notification(\n\t\t\t`${i18n.t(\"tickets.notification.message\")} ${contact.name}`,\n\t\t\toptions\n\t\t);\n\n\t\tnotification.onclick = e => {\n\t\t\te.preventDefault();\n\t\t\twindow.focus();\n\t\t\tsetTabOpen(ticket.status)\n\t\t\thistoryRef.current.push(`/tickets/${ticket.uuid}`);\n\t\t\t// handleChangeTab(null, ticket.isGroup? \"group\" : \"open\");\n\t\t};\n\n\t\tsetDesktopNotifications(prevState => {\n\t\t\tconst notfiticationIndex = prevState.findIndex(\n\t\t\t\tn => n.tag === notification.tag\n\t\t\t);\n\t\t\tif (notfiticationIndex !== -1) {\n\t\t\t\tprevState[notfiticationIndex] = notification;\n\t\t\t\treturn [...prevState];\n\t\t\t}\n\t\t\treturn [notification, ...prevState];\n\t\t});\n\t\tsoundAlertRef.current();\n\t};\n\n\tconst handleClick = () => {\n\t\tsetIsOpen(prevState => !prevState);\n\t};\n\n\tconst handleClickAway = () => {\n\t\tsetIsOpen(false);\n\t};\n\n\tconst NotificationTicket = ({ children }) => {\n\t\treturn <div onClick={handleClickAway}>{children}</div>;\n\t};\n\n\tconst browserNotification = () => {\n\t\tconst numbers = \"⓿➊➋➌➍➎➏➐➑➒➓⓫⓬⓭⓮⓯⓰⓱⓲⓳⓴\";\n\t\tif (notifications.length > 0) {\n\t\t\tif (notifications.length < 21) {\n\t\t\t\tdocument.title = numbers.substring(notifications.length, notifications.length + 1) + \" - \" + (theme.appName || \"...\");\n\t\t\t} else {\n\t\t\t\tdocument.title = \"(\" + notifications.length + \")\" + (theme.appName || \"...\");\n\t\t\t}\n\t\t} else {\n\t\t\tdocument.title = theme.appName || \"...\";\n\t\t}\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Favicon\n\t\t\t\t\tanimated={true}\n\t\t\t\t\turl={(theme?.appLogoFavicon) ? theme.appLogoFavicon : defaultLogoFavicon}\n\t\t\t\t\talertCount={notifications.length}\n\t\t\t\t\ticonSize={195}\n\t\t\t\t/>\n\t\t\t</>\n\t\t);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{browserNotification()}\n\n\t\t\t<IconButton\n\t\t\t\tonClick={handleClick}\n\t\t\t\tref={anchorEl}\n\t\t\t\taria-label=\"Open Notifications\"\n\t\t\t\tcolor=\"inherit\"\n\t\t\t\tstyle={{ color: \"white\" }}\n\t\t\t>\n\t\t\t\t<Badge overlap=\"rectangular\" badgeContent={notifications.length} color=\"secondary\">\n\t\t\t\t\t<ChatIcon />\n\t\t\t\t</Badge>\n\t\t\t</IconButton>\n\t\t\t<Popover\n\t\t\t\tdisableScrollLock\n\t\t\t\topen={isOpen}\n\t\t\t\tanchorEl={anchorEl.current}\n\t\t\t\tanchorOrigin={{\n\t\t\t\t\tvertical: \"bottom\",\n\t\t\t\t\thorizontal: \"right\",\n\t\t\t\t}}\n\t\t\t\ttransformOrigin={{\n\t\t\t\t\tvertical: \"top\",\n\t\t\t\t\thorizontal: \"right\",\n\t\t\t\t}}\n\t\t\t\tclasses={{ paper: classes.popoverPaper }}\n\t\t\t\tonClose={handleClickAway}\n\t\t\t>\n\t\t\t\t<List dense className={classes.tabContainer}>\n\t\t\t\t\t{notifications.length === 0 ? (\n\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t<ListItemText>{i18n.t(\"notifications.noTickets\")}</ListItemText>\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t) : (\n\t\t\t\t\t\tnotifications.map(ticket => (\n\t\t\t\t\t\t\t<NotificationTicket key={ticket.id}>\n\t\t\t\t\t\t\t\t<TicketListItem ticket={ticket} />\n\t\t\t\t\t\t\t</NotificationTicket>\n\t\t\t\t\t\t))\n\t\t\t\t\t)}\n\t\t\t\t</List>\n\t\t\t</Popover>\n\t\t</>\n\t);\n};\n\nexport default NotificationsPopOver;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}