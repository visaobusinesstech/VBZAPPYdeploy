{"ast":null,"code":"import React,{useState,useEffect,useContext}from'react';import{useHistory}from\"react-router-dom\";import QRCode from'react-qr-code';import{SuccessContent,Total}from'./style';import{CopyToClipboard}from'react-copy-to-clipboard';import{FaCopy,FaCheckCircle}from'react-icons/fa';import{socketConnection}from\"../../../services/socket\";import{useDate}from\"../../../hooks/useDate\";import{toast}from\"react-toastify\";import{AuthContext}from'../../../context/Auth/AuthContext';import{SocketContext}from'../../../context/Socket/SocketContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function CheckoutSuccess(props){var _pix$qrcode;const{pix}=props;const socketManager=useContext(SocketContext);const[pixString]=useState((pix===null||pix===void 0?void 0:(_pix$qrcode=pix.qrcode)===null||_pix$qrcode===void 0?void 0:_pix$qrcode.qrcode)||'');const[stripeURL]=useState(pix.stripeURL);const[asaasURL]=useState(pix.asaasURL);const[mercadopagoURL]=useState(pix.mercadopagoURL);const[valorext]=useState(pix.valorext);const[copied,setCopied]=useState(false);const history=useHistory();const{dateToClient}=useDate();const{user,socket}=useContext(AuthContext);const companyId=user.companyId;useEffect(()=>{const onCompanyPayment=data=>{if(data.action===\"CONCLUIDA\"){toast.success(\"Sua licen\\xE7a foi renovada at\\xE9 \".concat(dateToClient(data.company.dueDate),\"!\"));setTimeout(()=>{history.push(\"/\");},4000);}};socket.on(\"company-\".concat(companyId,\"-payment\"),onCompanyPayment);return()=>{socket.disconnect();};},[history,dateToClient,socketManager]);const handleCopyQR=()=>{setTimeout(()=>{setCopied(false);},1*1000);setCopied(true);};return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(Total,{children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"span\",{children:\"TOTAL\"})}),/*#__PURE__*/_jsxs(\"strong\",{children:[\"R$ \",valorext.toLocaleString('pt-br',{minimumFractionDigits:2})]})]}),/*#__PURE__*/_jsxs(SuccessContent,{children:[pixString&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(QRCode,{value:pixString}),/*#__PURE__*/_jsx(CopyToClipboard,{text:pixString,onCopy:handleCopyQR,children:/*#__PURE__*/_jsx(\"button\",{className:\"copy-button\",type:\"button\",children:copied?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Copiado\"}),/*#__PURE__*/_jsx(FaCheckCircle,{size:18})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Copiar c\\xF3digo QR PIX\"}),/*#__PURE__*/_jsx(FaCopy,{size:18})]})})}),/*#__PURE__*/_jsx(\"span\",{children:\"Para finalizar, basta realizar o pagamento escaneando ou colando o c\\xF3digo Pix acima ou escolha Pagar com Cart\\xE3o de Cr\\xE9dito abaixo.\"}),/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"p\",{children:\" \"})})]}),stripeURL&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.open(stripeURL,'_blank'),type:\"button\",style:{color:'#3c6afb',background:'#ffffff',border:'1px solid #3c6afb',padding:'6px 16px',fontSize:'18px',minWidth:'50%',boxSizing:'border-box',transition:'background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',fontFamily:'\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',fontWeight:'500',lineHeight:'1.75',borderRadius:'4px',letterSpacing:'0.02857em',textTransform:'uppercase'// Add any additional styles here\n},children:\"Pagar com Cart\\xE3o de Cr\\xE9dito\"}),/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"p\",{children:\" \"})})]}),mercadopagoURL&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.open(mercadopagoURL,'_blank'),type:\"button\",style:{color:'#3c6afb',background:'#ffffff',border:'1px solid #3c6afb',padding:'6px 16px',fontSize:'18px',minWidth:'50%',boxSizing:'border-box',transition:'background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',fontFamily:'\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',fontWeight:'500',lineHeight:'1.75',borderRadius:'4px',letterSpacing:'0.02857em',textTransform:'uppercase'// Add any additional styles here\n},children:\"Pagar com MercadoPago\"}),/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"p\",{children:\" \"})})]}),asaasURL&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.open(asaasURL,'_blank'),type:\"button\",style:{color:'#3c6afb',background:'#ffffff',border:'1px solid #3c6afb',padding:'6px 16px',fontSize:'18px',minWidth:'50%',boxSizing:'border-box',transition:'background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',fontFamily:'\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',fontWeight:'500',lineHeight:'1.75',borderRadius:'4px',letterSpacing:'0.02857em',textTransform:'uppercase'// Add any additional styles here\n},children:\"Pagar com Asaas\"}),/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"p\",{children:\" \"})})]})]})]});}export default CheckoutSuccess;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}