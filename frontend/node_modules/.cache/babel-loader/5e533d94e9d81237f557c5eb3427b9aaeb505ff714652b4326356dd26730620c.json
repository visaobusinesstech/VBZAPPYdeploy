{"ast":null,"code":"import _objectSpread from\"/home/deploy/atendechatop/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useContext,useRef,useCallback}from\"react\";import{useParams,useHistory}from\"react-router-dom\";import clsx from\"clsx\";import{makeStyles,Paper,useMediaQuery}from\"@material-ui/core\";import{useTheme}from\"@material-ui/core/styles\";import ContactDrawer from\"../ContactDrawer\";import MessageInput from\"../MessageInput/\";import TicketHeader from\"../TicketHeader\";import TicketInfo from\"../TicketInfo\";import TicketActionButtons from\"../TicketActionButtonsCustom\";import MessagesList from\"../MessagesList\";import api from\"../../services/api\";import{ReplyMessageProvider}from\"../../context/ReplyingMessage/ReplyingMessageContext\";import{ForwardMessageProvider}from\"../../context/ForwarMessage/ForwardMessageContext\";import toastError from\"../../errors/toastError\";import{AuthContext}from\"../../context/Auth/AuthContext\";import{TagsContainer}from\"../TagsContainer\";import{isNil}from'lodash';import{EditMessageProvider}from\"../../context/EditingMessage/EditingMessageContext\";import{TicketsContext}from\"../../context/Tickets/TicketsContext\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const drawerWidth=320;const useStyles=makeStyles(theme=>({root:{display:\"flex\",height:\"100%\",position:\"relative\",overflow:\"hidden\"},mainWrapper:{flex:1,height:\"100%\",display:\"flex\",flexDirection:\"column\",overflow:\"hidden\",borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeft:\"0\",marginRight:-drawerWidth,transition:theme.transitions.create(\"margin\",{easing:theme.transitions.easing.sharp,duration:theme.transitions.duration.leavingScreen}),[theme.breakpoints.down('md')]:{marginRight:0}},mainWrapperShift:{borderTopRightRadius:0,borderBottomRightRadius:0,transition:theme.transitions.create(\"margin\",{easing:theme.transitions.easing.easeOut,duration:theme.transitions.duration.enteringScreen}),marginRight:0,[theme.breakpoints.down('md')]:{marginRight:0}}}));const Ticket=()=>{const{ticketId}=useParams();const history=useHistory();const theme=useTheme();const isMobile=useMediaQuery(theme.breakpoints.down('md'));const classes=useStyles();const{user,socket}=useContext(AuthContext);const{setTabOpen}=useContext(TicketsContext);const[drawerOpen,setDrawerOpen]=useState(false);const[loading,setLoading]=useState(true);const[contact,setContact]=useState({});const[ticket,setTicket]=useState({});const[dragDropFiles,setDragDropFiles]=useState([]);const{companyId}=user;useEffect(()=>{setLoading(true);const delayDebounceFn=setTimeout(()=>{const fetchTicket=async()=>{try{if(!isNil(ticketId)&&ticketId!==\"undefined\"){const{data}=await api.get(\"/tickets/u/\"+ticketId);setContact(data.contact);// setWhatsapp(data.whatsapp);\n// setQueueId(data.queueId);\nsetTicket(data);if([\"pending\",\"open\",\"group\"].includes(data.status)){setTabOpen(data.status);}setLoading(false);}}catch(err){history.push(\"/tickets\");// correção para evitar tela branca uuid não encontrado Feito por Altemir 16/08/2023\nsetLoading(false);toastError(err);}};fetchTicket();},500);return()=>clearTimeout(delayDebounceFn);},[ticketId,user,history]);useEffect(()=>{if(!ticket&&!ticket.id&&ticket.uuid!==ticketId&&ticketId===\"undefined\"){return;}if(user.companyId){//    const socket = socketManager.GetSocket();\nconst onConnectTicket=()=>{socket.emit(\"joinChatBox\",\"\".concat(ticket.id));};const onCompanyTicket=data=>{if(data.action===\"update\"&&data.ticket.id===(ticket===null||ticket===void 0?void 0:ticket.id)){setTicket(data.ticket);}if(data.action===\"delete\"&&data.ticketId===(ticket===null||ticket===void 0?void 0:ticket.id)){history.push(\"/tickets\");}};const onCompanyContactTicket=data=>{if(data.action===\"update\"){// if (isMounted) {\nsetContact(prevState=>{var _data$contact;if(prevState.id===((_data$contact=data.contact)===null||_data$contact===void 0?void 0:_data$contact.id)){return _objectSpread(_objectSpread({},prevState),data.contact);}return prevState;});// }\n}};socket.on(\"connect\",onConnectTicket);socket.on(\"company-\".concat(companyId,\"-ticket\"),onCompanyTicket);socket.on(\"company-\".concat(companyId,\"-contact\"),onCompanyContactTicket);return()=>{socket.emit(\"joinChatBoxLeave\",\"\".concat(ticket.id));socket.off(\"connect\",onConnectTicket);socket.off(\"company-\".concat(companyId,\"-ticket\"),onCompanyTicket);socket.off(\"company-\".concat(companyId,\"-contact\"),onCompanyContactTicket);};}},[ticketId,ticket,history]);const handleDrawerOpen=useCallback(()=>{setDrawerOpen(true);},[]);const handleDrawerClose=useCallback(()=>{setDrawerOpen(false);},[]);const handleQuickMessageSelect=quickMessage=>{try{if(quickMessage.message){// Disparar evento que o MessageInput vai escutar\nconst event=new CustomEvent('insertQuickMessage',{detail:{message:quickMessage.message}});window.dispatchEvent(event);}if(quickMessage.mediaPath){// Tratar mídia se necessário\n}}catch(error){console.error(\"Erro ao inserir resposta rápida:\",error);toastError(\"Erro ao inserir resposta rápida\");}};const renderMessagesList=()=>{return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MessagesList,{isGroup:ticket.isGroup,onDrop:setDragDropFiles,whatsappId:ticket.whatsappId,queueId:ticket.queueId,channel:ticket.channel,ticketStatus:ticket.status}),/*#__PURE__*/_jsx(MessageInput,{ticketId:ticket.id,ticketStatus:ticket.status,ticketChannel:ticket.channel,droppedFiles:dragDropFiles,contactId:contact.id,whatsappId:ticket.whatsappId})]});};return/*#__PURE__*/_jsxs(\"div\",{className:classes.root,id:\"drawer-container\",children:[/*#__PURE__*/_jsxs(Paper,{variant:\"outlined\",elevation:0,className:clsx(classes.mainWrapper,{[classes.mainWrapperShift]:drawerOpen&&!isMobile}),children:[/*#__PURE__*/_jsxs(TicketHeader,{loading:loading,children:[ticket.contact!==undefined&&/*#__PURE__*/_jsx(\"div\",{id:\"TicketHeader\",children:/*#__PURE__*/_jsx(TicketInfo,{contact:contact,ticket:ticket,onClick:handleDrawerOpen})}),/*#__PURE__*/_jsx(TicketActionButtons,{ticket:ticket,contact:contact,onQuickMessageSelect:handleQuickMessageSelect})]}),/*#__PURE__*/_jsx(Paper,{children:/*#__PURE__*/_jsx(TagsContainer,{contact:contact})}),/*#__PURE__*/_jsx(ReplyMessageProvider,{children:/*#__PURE__*/_jsx(ForwardMessageProvider,{children:/*#__PURE__*/_jsx(EditMessageProvider,{children:renderMessagesList()})})})]}),/*#__PURE__*/_jsx(ContactDrawer,{open:drawerOpen,handleDrawerClose:handleDrawerClose,contact:contact,loading:loading,ticket:ticket})]});};export default Ticket;","map":{"version":3,"names":["React","useState","useEffect","useContext","useRef","useCallback","useParams","useHistory","clsx","makeStyles","Paper","useMediaQuery","useTheme","ContactDrawer","MessageInput","TicketHeader","TicketInfo","TicketActionButtons","MessagesList","api","ReplyMessageProvider","ForwardMessageProvider","toastError","AuthContext","TagsContainer","isNil","EditMessageProvider","TicketsContext","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","drawerWidth","useStyles","theme","root","display","height","position","overflow","mainWrapper","flex","flexDirection","borderTopLeftRadius","borderBottomLeftRadius","borderLeft","marginRight","transition","transitions","create","easing","sharp","duration","leavingScreen","breakpoints","down","mainWrapperShift","borderTopRightRadius","borderBottomRightRadius","easeOut","enteringScreen","Ticket","ticketId","history","isMobile","classes","user","socket","setTabOpen","drawerOpen","setDrawerOpen","loading","setLoading","contact","setContact","ticket","setTicket","dragDropFiles","setDragDropFiles","companyId","delayDebounceFn","setTimeout","fetchTicket","data","get","includes","status","err","push","clearTimeout","id","uuid","onConnectTicket","emit","concat","onCompanyTicket","action","onCompanyContactTicket","prevState","_data$contact","_objectSpread","on","off","handleDrawerOpen","handleDrawerClose","handleQuickMessageSelect","quickMessage","message","event","CustomEvent","detail","window","dispatchEvent","mediaPath","error","console","renderMessagesList","children","isGroup","onDrop","whatsappId","queueId","channel","ticketStatus","ticketChannel","droppedFiles","contactId","className","variant","elevation","undefined","onClick","onQuickMessageSelect","open"],"sources":["/home/deploy/atendechatop/frontend/src/components/Ticket/index.js"],"sourcesContent":["import React, { useState, useEffect, useContext, useRef, useCallback } from \"react\";\nimport { useParams, useHistory } from \"react-router-dom\";\n\nimport clsx from \"clsx\";\n\nimport { makeStyles, Paper, useMediaQuery } from \"@material-ui/core\";\nimport { useTheme } from \"@material-ui/core/styles\";\n\nimport ContactDrawer from \"../ContactDrawer\";\nimport MessageInput from \"../MessageInput/\";\nimport TicketHeader from \"../TicketHeader\";\nimport TicketInfo from \"../TicketInfo\";\nimport TicketActionButtons from \"../TicketActionButtonsCustom\";\nimport MessagesList from \"../MessagesList\";\nimport api from \"../../services/api\";\nimport { ReplyMessageProvider } from \"../../context/ReplyingMessage/ReplyingMessageContext\";\nimport { ForwardMessageProvider } from \"../../context/ForwarMessage/ForwardMessageContext\";\n\nimport toastError from \"../../errors/toastError\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\nimport { TagsContainer } from \"../TagsContainer\";\nimport { isNil } from 'lodash';\nimport { EditMessageProvider } from \"../../context/EditingMessage/EditingMessageContext\";\nimport { TicketsContext } from \"../../context/Tickets/TicketsContext\";\n\nconst drawerWidth = 320;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    height: \"100%\",\n    position: \"relative\",\n    overflow: \"hidden\",\n  },\n\n  mainWrapper: {\n    flex: 1,\n    height: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    overflow: \"hidden\",\n    borderTopLeftRadius: 0,\n    borderBottomLeftRadius: 0,\n    borderLeft: \"0\",\n    marginRight: -drawerWidth,\n    transition: theme.transitions.create(\"margin\", {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    [theme.breakpoints.down('md')]: {\n      marginRight: 0,\n    },\n  },\n\n  mainWrapperShift: {\n    borderTopRightRadius: 0,\n    borderBottomRightRadius: 0,\n    transition: theme.transitions.create(\"margin\", {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n    marginRight: 0,\n    [theme.breakpoints.down('md')]: {\n      marginRight: 0,\n    },\n  },\n}));\n\nconst Ticket = () => {\n  const { ticketId } = useParams();\n  const history = useHistory();\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n  const classes = useStyles();\n\n  const { user, socket } = useContext(AuthContext);\n  const { setTabOpen } = useContext(TicketsContext);\n\n\n  const [drawerOpen, setDrawerOpen] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [contact, setContact] = useState({});\n  const [ticket, setTicket] = useState({});\n  const [dragDropFiles, setDragDropFiles] = useState([]);\n  const { companyId } = user;\n\n  useEffect(() => {\n    setLoading(true);\n    const delayDebounceFn = setTimeout(() => {\n      const fetchTicket = async () => {\n        try {\n\n          if (!isNil(ticketId) && ticketId !== \"undefined\") {\n\n            const { data } = await api.get(\"/tickets/u/\" + ticketId);\n\n            setContact(data.contact);\n            // setWhatsapp(data.whatsapp);\n            // setQueueId(data.queueId);\n            setTicket(data);\n            if ([\"pending\", \"open\", \"group\"].includes(data.status)) {\n              setTabOpen(data.status);\n            }\n            setLoading(false);\n          }\n        } catch (err) {\n          history.push(\"/tickets\");   // correção para evitar tela branca uuid não encontrado Feito por Altemir 16/08/2023\n          setLoading(false);\n          toastError(err);\n        }\n      };\n      fetchTicket();\n    }, 500);\n\n    return () => clearTimeout(delayDebounceFn);\n  }, [ticketId, user, history]);\n\n  useEffect(() => {\n    if (!ticket && !ticket.id && ticket.uuid !== ticketId && ticketId === \"undefined\") {\n      return;\n    }\n\n    if (user.companyId) {\n      //    const socket = socketManager.GetSocket();\n\n      const onConnectTicket = () => {\n        socket.emit(\"joinChatBox\", `${ticket.id}`);\n      }\n\n      const onCompanyTicket = (data) => {\n        if (data.action === \"update\" && data.ticket.id === ticket?.id) {\n          setTicket(data.ticket);\n        }\n\n        if (data.action === \"delete\" && data.ticketId === ticket?.id) {\n          history.push(\"/tickets\");\n        }\n      };\n\n      const onCompanyContactTicket = (data) => {\n        if (data.action === \"update\") {\n          // if (isMounted) {\n          setContact((prevState) => {\n            if (prevState.id === data.contact?.id) {\n              return { ...prevState, ...data.contact };\n            }\n            return prevState;\n          });\n          // }\n        }\n      };\n\n      socket.on(\"connect\", onConnectTicket)\n      socket.on(`company-${companyId}-ticket`, onCompanyTicket);\n      socket.on(`company-${companyId}-contact`, onCompanyContactTicket);\n\n      return () => {\n\n        socket.emit(\"joinChatBoxLeave\", `${ticket.id}`);\n        socket.off(\"connect\", onConnectTicket);\n        socket.off(`company-${companyId}-ticket`, onCompanyTicket);\n        socket.off(`company-${companyId}-contact`, onCompanyContactTicket);\n      };\n    }\n  }, [ticketId, ticket, history]);\n\n  const handleDrawerOpen = useCallback(() => {\n    setDrawerOpen(true);\n  }, []);\n\n  const handleDrawerClose = useCallback(() => {\n    setDrawerOpen(false);\n  }, []);\n\n  const handleQuickMessageSelect = (quickMessage) => {\n    try {\n      if (quickMessage.message) {\n        // Disparar evento que o MessageInput vai escutar\n        const event = new CustomEvent('insertQuickMessage', {\n          detail: { message: quickMessage.message }\n        });\n        window.dispatchEvent(event);\n        \n      }\n      \n      if (quickMessage.mediaPath) {\n        // Tratar mídia se necessário\n      }\n    } catch (error) {\n      console.error(\"Erro ao inserir resposta rápida:\", error);\n      toastError(\"Erro ao inserir resposta rápida\");\n    }\n  };\n\n  const renderMessagesList = () => {\n    return (\n      <>\n        <MessagesList\n          isGroup={ticket.isGroup}\n          onDrop={setDragDropFiles}\n          whatsappId={ticket.whatsappId}\n          queueId={ticket.queueId}\n          channel={ticket.channel}\n          ticketStatus={ticket.status}\n        >\n        </MessagesList>\n        <MessageInput\n          ticketId={ticket.id}\n          ticketStatus={ticket.status}\n          ticketChannel={ticket.channel}\n          droppedFiles={dragDropFiles}\n          contactId={contact.id}\n          whatsappId={ticket.whatsappId}\n        />\n      </>\n    );\n  };\n\n\n  return (\n    <div className={classes.root} id=\"drawer-container\">\n      <Paper\n        variant=\"outlined\"\n        elevation={0}\n        className={clsx(classes.mainWrapper, {\n          [classes.mainWrapperShift]: drawerOpen && !isMobile,\n        })}\n      >\n        {/* <div id=\"TicketHeader\"> */}\n        <TicketHeader loading={loading}>\n          {ticket.contact !== undefined && (\n            <div id=\"TicketHeader\">\n              <TicketInfo\n                contact={contact}\n                ticket={ticket}\n                onClick={handleDrawerOpen}\n              />\n            </div>\n          )}\n        <TicketActionButtons\n          ticket={ticket}\n          contact={contact}\n          onQuickMessageSelect={handleQuickMessageSelect}\n        />\n        </TicketHeader>\n        {/* </div> */}\n        <Paper>\n          <TagsContainer contact={contact} />\n        </Paper>\n        <ReplyMessageProvider>\n          <ForwardMessageProvider>\n            <EditMessageProvider>\n              {renderMessagesList()}\n            </EditMessageProvider>\n          </ForwardMessageProvider>\n        </ReplyMessageProvider>\n      </Paper>\n\n      <ContactDrawer\n        open={drawerOpen}\n        handleDrawerClose={handleDrawerClose}\n        contact={contact}\n        loading={loading}\n        ticket={ticket}\n      />\n\n    </div>\n  );\n};\n\nexport default Ticket;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}