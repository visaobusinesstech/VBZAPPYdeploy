{"ast":null,"code":"import _objectSpread from\"/home/deploy/codigologlow/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef,useContext}from\"react\";import*as Yup from\"yup\";import{Formik,Form,Field}from\"formik\";import{toast}from\"react-toastify\";import{isNil}from\"lodash\";import DeleteOutlineIcon from\"@material-ui/icons/DeleteOutline\";import{makeStyles}from\"@material-ui/core/styles\";import{green}from\"@material-ui/core/colors\";import moment from\"moment\";import{Dialog,DialogContent,DialogTitle,Button,DialogActions,CircularProgress,FormControl,InputLabel,MenuItem,Select,TextField,Switch,FormControlLabel,Grid,Divider,Tab,Tabs,Paper,Box}from\"@material-ui/core\";import api from\"../../services/api\";import{i18n}from\"../../translate/i18n\";import toastError from\"../../errors/toastError\";import QueueSelect from\"../QueueSelect\";import TabPanel from\"../TabPanel\";import{Autorenew,FileCopy}from\"@material-ui/icons\";import useCompanySettings from\"../../hooks/useSettings/companySettings\";import SchedulesForm from\"../SchedulesForm\";import usePlans from\"../../hooks/usePlans\";import{AuthContext}from\"../../context/Auth/AuthContext\";import{Colorize}from\"@material-ui/icons\";import ColorPicker from\"../ColorPicker\";import InputAdornment from\"@material-ui/core/InputAdornment\";import IconButton from\"@material-ui/core/IconButton\";import getRandomHexColor from\"../../utils/getRandomHexColor\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const useStyles=makeStyles(theme=>({root:{display:\"flex\",flexWrap:\"wrap\",gap:4},multFieldLine:{marginTop:12,display:\"flex\",\"& > *:not(:last-child)\":{marginRight:theme.spacing(1)}},btnWrapper:{position:\"relative\"},importMessage:{marginTop:12,marginBottom:12,paddingBottom:20,paddingTop:3,padding:12,border:\"solid grey 2px\",borderRadius:4,display:\"flex\",\"& > *:not(:last-child)\":{marginRight:theme.spacing(1)}},buttonProgress:{color:green[500],position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12},textField:{marginRight:theme.spacing(1),flex:1},tokenRefresh:{minWidth:\"auto\",display:\"flex\",// Torna o botão flexível para alinhar o conteúdo\nalignItems:\"center\",// Alinha verticalmente ao centro\njustifyContent:\"center\"// Alinha horizontalmente ao centro\n},colorAdorment:{width:20,height:20},formControl:{width:220// paddingTop: 14\n},colorField:{width:150}}));const SessionSchema=Yup.object().shape({name:Yup.string().min(2,\"Too Short!\").max(50,\"Too Long!\").required(\"Required\")});const WhatsAppModal=_ref=>{let{open,onClose,whatsAppId,channel}=_ref;const classes=useStyles();const[autoToken,setAutoToken]=useState(\"\");const inputFileRef=useRef(null);const[attachment,setAttachment]=useState(null);const[attachmentName,setAttachmentName]=useState(\"\");const initialState={name:\"\",greetingMessage:\"\",complationMessage:\"\",outOfHoursMessage:\"\",ratingMessage:\"\",isDefault:false,token:\"\",maxUseBotQueues:3,provider:\"beta\",expiresTicket:0,allowGroup:false,enableImportMessage:false,groupAsTicket:\"disabled\",timeUseBotQueues:\"0\",timeSendQueue:\"0\",sendIdQueue:0,expiresTicketNPS:\"0\",expiresInactiveMessage:\"\",timeInactiveMessage:\"\",inactiveMessage:\"\",maxUseBotQueuesNPS:3,whenExpiresTicket:0,timeCreateNewTicket:0,greetingMediaAttachment:\"\",importRecentMessages:\"\",importOldMessages:\"\",importOldMessagesGroups:\"\",integrationId:\"\",collectiveVacationEnd:\"\",collectiveVacationStart:\"\",collectiveVacationMessage:\"\",queueIdImportMessages:null,isOficial:false,phone_number_id:\"\",waba_id:\"\",send_token:\"\",business_id:\"\",phone_number:\"\",color:getRandomHexColor(),flowInactiveTime:0,flowIdInactiveTime:0,timeAwaitActiveFlowId:0,maxUseInactiveTime:1,timeToReturnQueue:0,triggerIntegrationOnClose:true,wavoip:\"\"};const[whatsApp,setWhatsApp]=useState(initialState);const[selectedQueueIds,setSelectedQueueIds]=useState([]);const[queues,setQueues]=useState([]);const[tab,setTab]=useState(\"general\");const[enableImportMessage,setEnableImportMessage]=useState(false);const[importOldMessagesGroups,setImportOldMessagesGroups]=useState(false);const[closedTicketsPostImported,setClosedTicketsPostImported]=useState(false);const[importOldMessages,setImportOldMessages]=useState(moment().add(-1,\"days\").format(\"YYYY-MM-DDTHH:mm\"));const[importRecentMessages,setImportRecentMessages]=useState(moment().add(-1,\"minutes\").format(\"YYYY-MM-DDTHH:mm\"));const[copied,setCopied]=useState(false);const[integrations,setIntegrations]=useState([]);const[schedulesEnabled,setSchedulesEnabled]=useState(false);const[NPSEnabled,setNPSEnabled]=useState(false);const[showOpenAi,setShowOpenAi]=useState(false);const[showIntegrations,setShowIntegrations]=useState(false);const{user}=useContext(AuthContext);const[isOficial,setIsOficial]=useState(false);const[useWhatsappOfficial,setUseWhatsappOfficial]=useState(false);const[colorPickerModalOpen,setColorPickerModalOpen]=useState(false);const[schedules,setSchedules]=useState([{weekday:i18n.t(\"queueModal.serviceHours.monday\"),weekdayEn:\"monday\",startTimeA:\"08:00\",endTimeA:\"12:00\",startTimeB:\"13:00\",endTimeB:\"18:00\"},{weekday:i18n.t(\"queueModal.serviceHours.tuesday\"),weekdayEn:\"tuesday\",startTimeA:\"08:00\",endTimeA:\"12:00\",startTimeB:\"13:00\",endTimeB:\"18:00\"},{weekday:i18n.t(\"queueModal.serviceHours.wednesday\"),weekdayEn:\"wednesday\",startTimeA:\"08:00\",endTimeA:\"12:00\",startTimeB:\"13:00\",endTimeB:\"18:00\"},{weekday:i18n.t(\"queueModal.serviceHours.thursday\"),weekdayEn:\"thursday\",startTimeA:\"08:00\",endTimeA:\"12:00\",startTimeB:\"13:00\",endTimeB:\"18:00\"},{weekday:i18n.t(\"queueModal.serviceHours.friday\"),weekdayEn:\"friday\",startTimeA:\"08:00\",endTimeA:\"12:00\",startTimeB:\"13:00\",endTimeB:\"18:00\"},{weekday:\"Sábado\",weekdayEn:\"saturday\",startTimeA:\"08:00\",endTimeA:\"12:00\",startTimeB:\"13:00\",endTimeB:\"18:00\"},{weekday:\"Domingo\",weekdayEn:\"sunday\",startTimeA:\"08:00\",endTimeA:\"12:00\",startTimeB:\"13:00\",endTimeB:\"18:00\"}]);const{get:getSetting}=useCompanySettings();const{getPlanCompany}=usePlans();const[selectedPrompt,setSelectedPrompt]=useState(null);const[triggerIntegrationOnClose,setTriggerIntegrationOnClose]=useState(true);const[integrationType,setIntegrationType]=useState(\"n8n\");const[integrationTypeId,setIntegrationTypeId]=useState(null);const[prompts,setPrompts]=useState([]);const[webhooks,setWebhooks]=useState([]);const[flowIdNotPhrase,setFlowIdNotPhrase]=useState();const[flowIdWelcome,setFlowIdWelcome]=useState();const[flowIdInactiveTime,setFlowIdInactiveTime]=useState();const[timeAwaitActiveFlowId,setTimeAwaitActiveFlowId]=useState();const[showWavoipCall,setShowWavoipCall]=useState(false);useEffect(()=>{if(!whatsAppId&&!whatsApp.token){setAutoToken(generateRandomCode(30));}else if(whatsAppId&&!whatsApp.token){setAutoToken(generateRandomCode(30));}else{setAutoToken(whatsApp.token);}},[whatsAppId,whatsApp.token]);useEffect(()=>{async function fetchData(){const companyId=user.companyId;const planConfigs=await getPlanCompany(undefined,companyId);setShowOpenAi(planConfigs.plan.useOpenAi);setShowIntegrations(planConfigs.plan.useIntegrations);setUseWhatsappOfficial(planConfigs.plan.useWhatsappOfficial);setShowWavoipCall(planConfigs.plan.wavoip);}fetchData();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);useEffect(()=>{(async()=>{try{const{data}=await api.get(\"/prompt\");setPrompts(data.prompts);}catch(err){toastError(err);}})();},[whatsAppId]);useEffect(()=>{(async()=>{try{const{data}=await api.get(\"/flowbuilder\");setWebhooks(data.flows);}catch(err){toastError(err);}})();},[]);useEffect(()=>{const fetchData=async()=>{const settingSchedules=await getSetting({column:\"scheduleType\"});setSchedulesEnabled(settingSchedules.scheduleType===\"connection\");const settingNPS=await getSetting({column:\"userRating\"});setNPSEnabled(settingNPS.userRating===\"enabled\");};fetchData();},[]);const handleEnableImportMessage=async e=>{setEnableImportMessage(e.target.checked);};const handleEnableIsOficial=async e=>{setIsOficial(e.target.checked);};useEffect(()=>{const fetchSession=async()=>{if(!whatsAppId)return;try{var _data$queues;const{data}=await api.get(\"whatsapp/\".concat(whatsAppId,\"?session=0\"));if(data&&data!==null&&data!==void 0&&data.flowIdNotPhrase){const{data:flowDefault}=await api.get(\"flowbuilder/\".concat(data.flowIdNotPhrase));const selectedFlowIdNotPhrase=flowDefault===null||flowDefault===void 0?void 0:flowDefault.flow.id;setFlowIdNotPhrase(selectedFlowIdNotPhrase);}if(data&&data!==null&&data!==void 0&&data.flowIdWelcome){const{data:flowDefault}=await api.get(\"flowbuilder/\".concat(data.flowIdWelcome));const selectedFlowIdWelcome=flowDefault===null||flowDefault===void 0?void 0:flowDefault.flow.id;setFlowIdWelcome(selectedFlowIdWelcome);}if(data&&data!==null&&data!==void 0&&data.flowIdInactiveTime){const{data:flowDefault}=await api.get(\"flowbuilder/\".concat(data.flowIdInactiveTime));const selectedFlowIdInactiveTime=flowDefault===null||flowDefault===void 0?void 0:flowDefault.flow.id;setFlowIdInactiveTime(selectedFlowIdInactiveTime);}if(data&&data!==null&&data!==void 0&&data.timeAwaitActiveFlowId){const{data:flowDefault}=await api.get(\"flowbuilder/\".concat(data.timeAwaitActiveFlowId));const selectedTimeAwaitActiveFlowId=flowDefault===null||flowDefault===void 0?void 0:flowDefault.flow.id;setTimeAwaitActiveFlowId(selectedTimeAwaitActiveFlowId);}setWhatsApp(data);setAttachmentName(data.greetingMediaAttachment);setAutoToken(data.token);data.promptId?setSelectedPrompt(data.promptId):setSelectedPrompt(null);const whatsQueueIds=(_data$queues=data.queues)===null||_data$queues===void 0?void 0:_data$queues.map(queue=>queue.id);setSelectedQueueIds(whatsQueueIds);setIsOficial(channel===\"whatsapp_oficial\");setSchedules(data.schedules);if(!isNil(data===null||data===void 0?void 0:data.importOldMessages)){setEnableImportMessage(true);setImportOldMessages(data===null||data===void 0?void 0:data.importOldMessages);setImportRecentMessages(data===null||data===void 0?void 0:data.importRecentMessages);setClosedTicketsPostImported(data===null||data===void 0?void 0:data.closedTicketsPostImported);setImportOldMessagesGroups(data===null||data===void 0?void 0:data.importOldMessagesGroups);}}catch(err){toastError(err);}};fetchSession();},[whatsAppId]);useEffect(()=>{(async()=>{try{const{data}=await api.get(\"/queue\");setQueues(data);}catch(err){toastError(err);}})();},[]);useEffect(()=>{(async()=>{try{const{data}=await api.get(\"/queueIntegration\");setIntegrations(data.queueIntegrations);}catch(err){toastError(err);}})();},[]);const handleChangeQueue=e=>{setSelectedQueueIds(e);setSelectedPrompt(null);};const handleChangePrompt=e=>{setSelectedPrompt(e.target.value);setSelectedQueueIds([]);};const handleChange=e=>{setTriggerIntegrationOnClose(e.target.value);};const handleIntegrationTypeChange=e=>{setIntegrationType(e.target.value);setIntegrationTypeId(e.target.value);};const handleSaveWhatsApp=async values=>{if(!whatsAppId)setAutoToken(generateRandomCode(30));if(NPSEnabled){if(isNil(values.ratingMessage)){toastError(i18n.t(\"whatsappModal.errorRatingMessage\"));return;}if(values.expiresTicketNPS===\"0\"&&values.expiresTicketNPS===\"\"&&values.expiresTicketNPS===0){toastError(i18n.t(\"whatsappModal.errorExpiresNPS\"));return;}}if(values.timeSendQueue===\"\")values.timeSendQueue=\"0\";if((values.sendIdQueue===0||values.sendIdQueue===\"\"||isNil(values.sendIdQueue))&&values.timeSendQueue!==0&&values.timeSendQueue!==\"0\"){toastError(i18n.t(\"whatsappModal.errorSendQueue\"));return;}const whatsappData=_objectSpread(_objectSpread({},values),{},{flowIdWelcome:flowIdWelcome?flowIdWelcome:null,flowIdInactiveTime:flowIdInactiveTime?flowIdInactiveTime:null,flowIdNotPhrase:flowIdNotPhrase?flowIdNotPhrase:null,timeAwaitActiveFlowId:timeAwaitActiveFlowId?timeAwaitActiveFlowId:null,queueIds:selectedQueueIds,importOldMessages:enableImportMessage?importOldMessages:null,importRecentMessages:enableImportMessage?importRecentMessages:null,importOldMessagesGroups:importOldMessagesGroups?importOldMessagesGroups:null,closedTicketsPostImported:closedTicketsPostImported?closedTicketsPostImported:null,token:autoToken?autoToken:null,schedules,promptId:selectedPrompt?selectedPrompt:null,channel,triggerIntegrationOnClose:triggerIntegrationOnClose,integrationTypeId:triggerIntegrationOnClose?integrationTypeId:null,color:values.color?values.color:getRandomHexColor(),wavoip:values.wavoip?values.wavoip:null});delete whatsappData[\"queues\"];delete whatsappData[\"session\"];try{if(whatsAppId){if(whatsAppId&&enableImportMessage&&(whatsApp===null||whatsApp===void 0?void 0:whatsApp.status)===\"CONNECTED\"){try{setWhatsApp(_objectSpread(_objectSpread({},whatsApp),{},{status:\"qrcode\"}));await api.delete(\"/whatsappsession/\".concat(whatsApp.id));}catch(err){toastError(err);}}await api.put(\"/whatsapp/\".concat(whatsAppId),whatsappData);if(attachment!=null){const formData=new FormData();formData.append(\"file\",attachment);await api.post(\"/whatsapp/\".concat(whatsAppId,\"/media-upload\"),formData);}if(!attachmentName&&whatsApp.greetingMediaAttachment!==null){await api.delete(\"/whatsapp/\".concat(whatsAppId,\"/media-upload\"));}}else{const{data}=await api.post(\"/whatsapp\",whatsappData);if(attachment!=null){const formData=new FormData();formData.append(\"file\",attachment);await api.post(\"/whatsapp/\".concat(data.id,\"/media-upload\"),formData);}}toast.success(i18n.t(\"whatsappModal.success\"));handleClose();}catch(err){toastError(err);}};function generateRandomCode(length){const charset=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyvz0123456789\";let code=\"\";for(let i=0;i<length;i++){const randomIndex=Math.floor(Math.random()*charset.length);code+=charset.charAt(randomIndex);}return code;}const handleRefreshToken=()=>{setAutoToken(generateRandomCode(30));};const handleChangeFlowIdNotPhrase=e=>{console.log(e.target.value);setFlowIdNotPhrase(e.target.value);};const handleChangeFlowIdWelcome=e=>{setFlowIdWelcome(e.target.value);};const handleChangeFlowIdInactiveTime=e=>{setFlowIdInactiveTime(e.target.value);};const handleChangeTimeAwaitActiveFlowId=e=>{setTimeAwaitActiveFlowId(e.target.value);};const handleCopyToken=()=>{navigator.clipboard.writeText(autoToken);// Copia o token para a área de transferência\nsetCopied(true);// Define o estado de cópia como verdadeiro\n};const handleSaveSchedules=async values=>{toast.success(\"Clique em salvar para registar as alterações\");setSchedules(values);};const handleClose=()=>{onClose();setWhatsApp(initialState);setEnableImportMessage(false);// inputFileRef.current.value = null\nsetAttachment(null);setAttachmentName(\"\");setCopied(false);};const handleTabChange=(event,newValue)=>{setTab(newValue);};const handleFileUpload=()=>{const file=inputFileRef.current.files[0];setAttachment(file);setAttachmentName(file.name);inputFileRef.current.value=null;};const handleDeleFile=()=>{setAttachment(null);setAttachmentName(null);};return/*#__PURE__*/_jsx(\"div\",{className:classes.root,children:/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:handleClose,maxWidth:\"lg\",fullWidth:true,scroll:\"paper\",children:[/*#__PURE__*/_jsx(DialogTitle,{children:whatsAppId?i18n.t(\"whatsappModal.title.edit\"):i18n.t(\"whatsappModal.title.add\")}),/*#__PURE__*/_jsx(Formik,{initialValues:whatsApp,enableReinitialize:true,validationSchema:SessionSchema,onSubmit:(values,actions)=>{setTimeout(()=>{handleSaveWhatsApp(values);actions.setSubmitting(false);},400);},children:_ref2=>{var _values$collectiveVac,_values$collectiveVac2;let{values,touched,errors,isSubmitting}=_ref2;return/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsx(Paper,{className:classes.mainPaper,elevation:1,children:/*#__PURE__*/_jsxs(Tabs,{value:tab,indicatorColor:\"primary\",textColor:\"primary\",scrollButtons:\"on\",variant:\"scrollable\",onChange:handleTabChange,className:classes.tab,children:[/*#__PURE__*/_jsx(Tab,{label:i18n.t(\"whatsappModal.tabs.general\"),value:\"general\"}),/*#__PURE__*/_jsx(Tab,{label:i18n.t(\"whatsappModal.tabs.integrations\"),value:\"integrations\"}),/*#__PURE__*/_jsx(Tab,{label:i18n.t(\"whatsappModal.tabs.messages\"),value:\"messages\"}),/*#__PURE__*/_jsx(Tab,{label:\"Chatbot\",value:\"chatbot\"}),/*#__PURE__*/_jsx(Tab,{label:i18n.t(\"whatsappModal.tabs.assessments\"),value:\"nps\"}),user.showFlow===\"enabled\"&&/*#__PURE__*/_jsx(Tab,{label:\"Fluxo Padr\\xE3o\",value:\"flowbuilder\"}),schedulesEnabled&&/*#__PURE__*/_jsx(Tab,{label:i18n.t(\"whatsappModal.tabs.schedules\"),value:\"schedules\"})]})}),/*#__PURE__*/_jsxs(Paper,{className:classes.paper,elevation:0,children:[/*#__PURE__*/_jsx(TabPanel,{className:classes.container,value:tab,name:\"general\",children:/*#__PURE__*/_jsxs(DialogContent,{dividers:true,children:[attachmentName&&/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexDirection:\"row-reverse\"},children:/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"primary\",endIcon:/*#__PURE__*/_jsx(DeleteOutlineIcon,{}),onClick:handleDeleFile,children:attachmentName})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column-reverse\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"video/*,image/*\",ref:inputFileRef,style:{display:\"none\"},onChange:handleFileUpload}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:()=>inputFileRef.current.click(),children:i18n.t(\"userModal.buttons.addImage\")})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.multFieldLine,children:/*#__PURE__*/_jsxs(Grid,{spacing:2,container:true,children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.name\"),autoFocus:true,name:\"name\",error:touched.name&&Boolean(errors.name),helperText:touched.name&&errors.name,variant:\"outlined\",margin:\"dense\",className:classes.textField})}),/*#__PURE__*/_jsxs(Grid,{item:true,children:[/*#__PURE__*/_jsx(Field,{as:TextField,label:i18n.t(\"connections.table.color\"),name:\"color\",id:\"color\",onFocus:()=>{setColorPickerModalOpen(false);},error:touched.color&&Boolean(errors.color),helperText:touched.color&&errors.color,InputProps:{startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:values.color},className:classes.colorAdorment})}),endAdornment:/*#__PURE__*/_jsx(IconButton,{size:\"small\",color:\"default\",onClick:()=>setColorPickerModalOpen(true),children:/*#__PURE__*/_jsx(Colorize,{})})},variant:\"outlined\",margin:\"dense\",className:classes.colorField}),/*#__PURE__*/_jsx(ColorPicker,{open:colorPickerModalOpen,handleClose:()=>setColorPickerModalOpen(false),onChange:color=>{values.color=color;setWhatsApp(()=>{return _objectSpread(_objectSpread({},values),{},{color});});}})]}),/*#__PURE__*/_jsxs(Grid,{style:{paddingTop:15},item:true,children:[/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Field,{as:Switch,color:\"primary\",name:\"isDefault\",checked:values.isDefault}),label:i18n.t(\"whatsappModal.form.default\")}),useWhatsappOfficial&&channel===\"whatsapp_oficial\"&&/*#__PURE__*/_jsx(FormControlLabel,{style:{marginRight:7,color:\"gray\"},label:i18n.t(\"whatsappModal.form.isOficial\"),labelPlacement:\"end\",control:/*#__PURE__*/_jsx(Switch,{size:\"medium\",checked:isOficial,onChange:handleEnableIsOficial,name:\"isOficial\",color:\"primary\"})}),/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Field,{as:Switch,color:\"primary\",name:\"allowGroup\",checked:values.allowGroup}),label:i18n.t(\"whatsappModal.form.group\")})]}),/*#__PURE__*/_jsx(Grid,{xs:6,md:4,item:true,children:/*#__PURE__*/_jsxs(FormControl,{variant:\"outlined\",margin:\"dense\",fullWidth:true,className:classes.formControl,children:[/*#__PURE__*/_jsx(InputLabel,{id:\"groupAsTicket-selection-label\",children:i18n.t(\"whatsappModal.form.groupAsTicket\")}),/*#__PURE__*/_jsxs(Field,{as:Select,label:i18n.t(\"whatsappModal.form.groupAsTicket\"),placeholder:i18n.t(\"whatsappModal.form.groupAsTicket\"),labelId:\"groupAsTicket-selection-label\",id:\"groupAsTicket\",name:\"groupAsTicket\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"disabled\",children:i18n.t(\"whatsappModal.menuItem.disabled\")}),/*#__PURE__*/_jsx(MenuItem,{value:\"enabled\",children:i18n.t(\"whatsappModal.menuItem.enabled\")})]})]})})]})}),isOficial&&/*#__PURE__*/_jsx(\"div\",{className:classes.importMessage,children:/*#__PURE__*/_jsxs(Grid,{style:{marginTop:18},container:true,spacing:1,children:[/*#__PURE__*/_jsx(Grid,{xs:12,md:6,xl:3,item:true,children:/*#__PURE__*/_jsx(Field,{fullWidth:true,as:TextField,label:i18n.t(\"whatsappModal.form.phone_number_id\"),name:\"phone_number_id\",InputLabelProps:{shrink:true},error:touched.phone_number_id&&Boolean(errors.phone_number_id),helperText:touched.phone_number_id&&errors.phone_number_id,variant:\"outlined\",required:isOficial})}),/*#__PURE__*/_jsx(Grid,{xs:12,md:6,xl:3,item:true,children:/*#__PURE__*/_jsx(Field,{fullWidth:true,as:TextField,label:i18n.t(\"whatsappModal.form.waba_id\"),name:\"waba_id\",InputLabelProps:{shrink:true},error:touched.waba_id&&Boolean(errors.waba_id),helperText:touched.waba_id&&errors.waba_id,variant:\"outlined\",required:isOficial})}),/*#__PURE__*/_jsx(Grid,{xs:12,md:6,xl:3,item:true,children:/*#__PURE__*/_jsx(Field,{fullWidth:true,as:TextField,label:i18n.t(\"whatsappModal.form.business_id\"),name:\"business_id\",InputLabelProps:{shrink:true},error:touched.business_id&&Boolean(errors.business_id),helperText:touched.business_id&&errors.business_id,variant:\"outlined\",required:isOficial})}),/*#__PURE__*/_jsx(Grid,{xs:12,md:6,xl:3,item:true,children:/*#__PURE__*/_jsx(Field,{fullWidth:true,as:TextField,label:i18n.t(\"whatsappModal.form.phone_number\"),name:\"phone_number\",InputLabelProps:{shrink:true},error:touched.phone_number&&Boolean(errors.phone_number),helperText:touched.phone_number&&errors.phone_number,variant:\"outlined\",required:isOficial})}),/*#__PURE__*/_jsx(Grid,{xs:12,md:12,xl:12,item:true,children:/*#__PURE__*/_jsx(Field,{fullWidth:true,as:TextField,label:i18n.t(\"whatsappModal.form.send_token\"),name:\"send_token\",InputLabelProps:{shrink:true},error:touched.send_token&&Boolean(errors.send_token),helperText:touched.send_token&&errors.send_token,variant:\"outlined\",required:isOficial})})]})}),!isOficial&&/*#__PURE__*/_jsxs(\"div\",{className:classes.importMessage,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.multFieldLine,children:[/*#__PURE__*/_jsx(FormControlLabel,{style:{marginRight:7,color:\"gray\"},label:i18n.t(\"whatsappModal.form.importOldMessagesEnable\"),labelPlacement:\"end\",control:/*#__PURE__*/_jsx(Switch,{size:\"medium\",checked:enableImportMessage,onChange:handleEnableImportMessage,name:\"importOldMessagesEnable\",color:\"primary\"})}),enableImportMessage?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FormControlLabel,{style:{marginRight:7,color:\"gray\"},label:i18n.t(\"whatsappModal.form.importOldMessagesGroups\"),labelPlacement:\"end\",control:/*#__PURE__*/_jsx(Switch,{size:\"medium\",checked:importOldMessagesGroups,onChange:e=>setImportOldMessagesGroups(e.target.checked),name:\"importOldMessagesGroups\",color:\"primary\"})}),/*#__PURE__*/_jsx(FormControlLabel,{style:{marginRight:7,color:\"gray\"},label:i18n.t(\"whatsappModal.form.closedTicketsPostImported\"),labelPlacement:\"end\",control:/*#__PURE__*/_jsx(Switch,{size:\"medium\",checked:closedTicketsPostImported,onChange:e=>setClosedTicketsPostImported(e.target.checked),name:\"closedTicketsPostImported\",color:\"primary\"})})]}):/*#__PURE__*/_jsx(_Fragment,{})]}),enableImportMessage?/*#__PURE__*/_jsxs(Grid,{style:{marginTop:18},container:true,spacing:1,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Field,{fullWidth:true,as:TextField,label:i18n.t(\"whatsappModal.form.importOldMessages\"),type:\"datetime-local\",name:\"importOldMessages\",inputProps:{max:moment().add(0,\"minutes\").format(\"YYYY-MM-DDTHH:mm\"),min:moment().add(-2,\"years\").format(\"YYYY-MM-DDTHH:mm\")}//min=\"2022-11-06T22:22:55\"\n,InputLabelProps:{shrink:true},error:touched.importOldMessages&&Boolean(errors.importOldMessages),helperText:touched.importOldMessages&&errors.importOldMessages,variant:\"outlined\",value:moment(importOldMessages).format(\"YYYY-MM-DDTHH:mm\"),onChange:e=>{setImportOldMessages(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Field,{fullWidth:true,as:TextField,label:i18n.t(\"whatsappModal.form.importRecentMessages\"),type:\"datetime-local\",name:\"importRecentMessages\",inputProps:{max:moment().add(0,\"minutes\").format(\"YYYY-MM-DDTHH:mm\"),min:moment(importOldMessages).format(\"YYYY-MM-DDTHH:mm\")}//min=\"2022-11-06T22:22:55\"\n,InputLabelProps:{shrink:true},error:touched.importRecentMessages&&Boolean(errors.importRecentMessages),helperText:touched.importRecentMessages&&errors.importRecentMessages,variant:\"outlined\",value:moment(importRecentMessages).format(\"YYYY-MM-DDTHH:mm\"),onChange:e=>{setImportRecentMessages(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{xs:12,md:12,xl:12,item:true,children:/*#__PURE__*/_jsxs(FormControl,{variant:\"outlined\",margin:\"dense\",className:classes.FormControl,fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{id:\"queueIdImportMessages-selection-label\",children:i18n.t(\"whatsappModal.form.queueIdImportMessages\")}),/*#__PURE__*/_jsxs(Field,{as:Select,name:\"queueIdImportMessages\",id:\"queueIdImportMessages\",value:values.queueIdImportMessages||\"0\",required:enableImportMessage,label:i18n.t(\"whatsappModal.form.queueIdImportMessages\"),placeholder:i18n.t(\"whatsappModal.form.queueIdImportMessages\"),labelId:\"queueIdImportMessages-selection-label\",children:[/*#__PURE__*/_jsx(MenuItem,{value:0,children:\"\\xA0\"}),queues.map(queue=>/*#__PURE__*/_jsx(MenuItem,{value:queue.id,children:queue.name},queue.id))]})]})})]}):null]}),enableImportMessage&&/*#__PURE__*/_jsx(\"span\",{style:{color:\"red\"},children:i18n.t(\"whatsappModal.form.importAlert\")}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Grid,{xs:6,md:12,item:true,children:/*#__PURE__*/_jsx(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.token\"),type:\"token\",fullWidth:true// name=\"token\"\n,value:autoToken,variant:\"outlined\",margin:\"dense\",disabled:true})}),/*#__PURE__*/_jsx(Button,{onClick:handleRefreshToken,disabled:isSubmitting,className:classes.tokenRefresh,variant:\"text\",startIcon:/*#__PURE__*/_jsx(Autorenew,{style:{marginLeft:5,color:\"green\"}})}),/*#__PURE__*/_jsx(Button,{onClick:handleCopyToken,className:classes.tokenRefresh,variant:\"text\",startIcon:/*#__PURE__*/_jsx(FileCopy,{style:{color:copied?\"blue\":\"inherit\"}})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:i18n.t(\"whatsappModal.form.queueRedirection\")}),/*#__PURE__*/_jsx(\"p\",{children:i18n.t(\"whatsappModal.form.queueRedirectionDesc\")}),/*#__PURE__*/_jsxs(Grid,{spacing:2,container:true,children:[/*#__PURE__*/_jsx(Grid,{xs:6,md:6,item:true,children:/*#__PURE__*/_jsxs(FormControl,{variant:\"outlined\",margin:\"dense\",className:classes.FormControl,fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{id:\"sendIdQueue-selection-label\",children:i18n.t(\"whatsappModal.form.sendIdQueue\")}),/*#__PURE__*/_jsxs(Field,{as:Select,name:\"sendIdQueue\",id:\"sendIdQueue\",value:values.sendIdQueue||\"0\",required:values.timeSendQueue>0,label:i18n.t(\"whatsappModal.form.sendIdQueue\"),placeholder:i18n.t(\"whatsappModal.form.sendIdQueue\"),labelId:\"sendIdQueue-selection-label\",children:[/*#__PURE__*/_jsx(MenuItem,{value:0,children:\"\\xA0\"}),queues.map(queue=>/*#__PURE__*/_jsx(MenuItem,{value:queue.id,children:queue.name},queue.id))]})]})}),/*#__PURE__*/_jsx(Grid,{xs:6,md:6,item:true,children:/*#__PURE__*/_jsx(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.timeSendQueue\"),fullWidth:true,name:\"timeSendQueue\",variant:\"outlined\",margin:\"dense\",error:touched.timeSendQueue&&Boolean(errors.timeSendQueue),helperText:touched.timeSendQueue&&errors.timeSendQueue})})]})]})]})}),/*#__PURE__*/_jsx(TabPanel,{className:classes.container,value:tab,name:\"integrations\",children:/*#__PURE__*/_jsxs(DialogContent,{dividers:true,children:[/*#__PURE__*/_jsx(QueueSelect,{selectedQueueIds:selectedQueueIds,onChange:selectedIds=>handleChangeQueue(selectedIds)}),showWavoipCall&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Field,{as:TextField,label:\"Wavoip\",fullWidth:true,name:\"wavoip\",variant:\"outlined\",margin:\"dense\"})}),showIntegrations&&/*#__PURE__*/_jsxs(FormControl,{variant:\"outlined\",margin:\"dense\",className:classes.FormControl,fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{id:\"integrationId-selection-label\",children:i18n.t(\"queueModal.form.integrationId\")}),/*#__PURE__*/_jsxs(Field,{as:Select,label:i18n.t(\"queueModal.form.integrationId\"),name:\"integrationId\",id:\"integrationId\",variant:\"outlined\",margin:\"dense\",placeholder:i18n.t(\"queueModal.form.integrationId\"),labelId:\"integrationId-selection-label\",children:[/*#__PURE__*/_jsx(MenuItem,{value:null,children:\"Desabilitado\"}),integrations.map(integration=>/*#__PURE__*/_jsx(MenuItem,{value:integration.id,children:integration.name},integration.id))]})]}),showOpenAi&&/*#__PURE__*/_jsxs(FormControl,{margin:\"dense\",variant:\"outlined\",fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:i18n.t(\"whatsappModal.form.prompt\")}),/*#__PURE__*/_jsx(Select,{labelId:\"dialog-select-prompt-label\",id:\"dialog-select-prompt\",name:\"promptId\",value:selectedPrompt||\"\",onChange:handleChangePrompt,label:i18n.t(\"whatsappModal.form.prompt\"),fullWidth:true,MenuProps:{anchorOrigin:{vertical:\"bottom\",horizontal:\"left\"},transformOrigin:{vertical:\"top\",horizontal:\"left\"},getContentAnchorEl:null},children:prompts.map(prompt=>/*#__PURE__*/_jsx(MenuItem,{value:prompt.id,children:prompt.name},prompt.id))})]}),/*#__PURE__*/_jsxs(Grid,{spacing:3,container:true,children:[/*#__PURE__*/_jsx(Grid,{xs:12,item:true,children:/*#__PURE__*/_jsxs(FormControl,{variant:\"outlined\",margin:\"dense\",className:classes.FormControl,fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{id:\"triggerIntegrationOnClose-selection-label\",children:i18n.t(\"whatsappModal.form.triggerIntegrationOnClose\")}),/*#__PURE__*/_jsxs(Field,{onChange:handleChange,value:triggerIntegrationOnClose,as:Select,label:i18n.t(\"whatsappModal.form.triggerIntegrationOnClose\"),name:\"triggerIntegrationOnClose\",id:\"triggerIntegrationOnClose\",variant:\"outlined\",margin:\"dense\",placeholder:i18n.t(\"whatsappModal.form.triggerIntegrationOnClose\"),labelId:\"triggerIntegrationOnClose-selection-label\",children:[/*#__PURE__*/_jsx(MenuItem,{value:false,children:i18n.t(\"whatsappModal.menuItem.disabled\")}),/*#__PURE__*/_jsx(MenuItem,{value:true,children:i18n.t(\"whatsappModal.menuItem.enabled\")})]})]})}),triggerIntegrationOnClose&&/*#__PURE__*/_jsx(Grid,{xs:12,item:true,children:/*#__PURE__*/_jsxs(FormControl,{variant:\"outlined\",margin:\"dense\",className:classes.FormControl,fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{id:\"integrationType-selection-label\",children:i18n.t(\"queueModal.form.integrationId\")}),/*#__PURE__*/_jsxs(Field,{as:Select,label:i18n.t(\"queueModal.form.integrationId\"),name:\"integrationType\",id:\"integrationType\",variant:\"outlined\",margin:\"dense\",placeholder:i18n.t(\"queueModal.form.integrationId\"),labelId:\"integrationType-selection-label\",value:integrationTypeId,onChange:handleIntegrationTypeChange,children:[/*#__PURE__*/_jsx(MenuItem,{value:null,children:\"Desabilitado\"}),integrations.filter(integration=>integration.type===\"n8n\"||integration.type===\"typebot\").map(integration=>/*#__PURE__*/_jsx(MenuItem,{value:integration.id,children:integration.name},integration.id))]})]})})]})]})}),/*#__PURE__*/_jsx(TabPanel,{className:classes.container,value:tab,name:\"messages\",children:/*#__PURE__*/_jsx(DialogContent,{dividers:true,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:1,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,xl:12,children:/*#__PURE__*/_jsx(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.greetingMessage\"),type:\"greetingMessage\",multiline:true,rows:4,fullWidth:true,name:\"greetingMessage\",error:touched.greetingMessage&&Boolean(errors.greetingMessage),helperText:touched.greetingMessage&&errors.greetingMessage,variant:\"outlined\",margin:\"dense\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,xl:12,children:/*#__PURE__*/_jsx(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.complationMessage\"),multiline:true,rows:4,fullWidth:true,name:\"complationMessage\",error:touched.complationMessage&&Boolean(errors.complationMessage),helperText:touched.complationMessage&&errors.complationMessage,variant:\"outlined\",margin:\"dense\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,xl:12,children:/*#__PURE__*/_jsx(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.outOfHoursMessage\"),multiline:true,rows:4,fullWidth:true,name:\"outOfHoursMessage\",error:touched.outOfHoursMessage&&Boolean(errors.outOfHoursMessage),helperText:touched.outOfHoursMessage&&errors.outOfHoursMessage,variant:\"outlined\",margin:\"dense\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,xl:12,children:/*#__PURE__*/_jsx(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.collectiveVacationMessage\"),multiline:true,rows:4,fullWidth:true,name:\"collectiveVacationMessage\",error:touched.collectiveVacationMessage&&Boolean(errors.collectiveVacationMessage),helperText:touched.collectiveVacationMessage&&errors.collectiveVacationMessage,variant:\"outlined\",margin:\"dense\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Field,{fullWidth:true,as:TextField,label:i18n.t(\"whatsappModal.form.collectiveVacationStart\"),type:\"date\",name:\"collectiveVacationStart\",required:((_values$collectiveVac=values.collectiveVacationMessage)===null||_values$collectiveVac===void 0?void 0:_values$collectiveVac.length)>0,inputProps:{min:moment().add(-10,\"days\").format(\"YYYY-MM-DD\")}//min=\"2022-11-06T22:22:55\"\n,InputLabelProps:{shrink:true},error:touched.collectiveVacationStart&&Boolean(errors.collectiveVacationStart),helperText:touched.collectiveVacationStart&&errors.collectiveVacationStart,variant:\"outlined\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Field,{fullWidth:true,as:TextField,label:i18n.t(\"whatsappModal.form.collectiveVacationEnd\"),type:\"date\",name:\"collectiveVacationEnd\",required:((_values$collectiveVac2=values.collectiveVacationMessage)===null||_values$collectiveVac2===void 0?void 0:_values$collectiveVac2.length)>0,inputProps:{min:moment().add(-10,\"days\").format(\"YYYY-MM-DD\")}//min=\"2022-11-06T22:22:55\"\n,InputLabelProps:{shrink:true},error:touched.collectiveVacationEnd&&Boolean(errors.collectiveVacationEnd),helperText:touched.collectiveVacationEnd&&errors.collectiveVacationEnd,variant:\"outlined\"})})]})})}),/*#__PURE__*/_jsx(TabPanel,{className:classes.container,value:tab,name:\"chatbot\",children:/*#__PURE__*/_jsxs(DialogContent,{dividers:true,children:[/*#__PURE__*/_jsxs(Grid,{spacing:2,container:true,children:[/*#__PURE__*/_jsx(Grid,{xs:6,md:3,item:true,children:/*#__PURE__*/_jsx(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.timeCreateNewTicket\"),fullWidth:true,name:\"timeCreateNewTicket\",variant:\"outlined\",margin:\"dense\",error:touched.timeCreateNewTicket&&Boolean(errors.timeCreateNewTicket),helperText:touched.timeCreateNewTicket&&errors.timeCreateNewTicket})}),/*#__PURE__*/_jsx(Grid,{xs:6,md:3,item:true,children:/*#__PURE__*/_jsx(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.maxUseBotQueues\"),fullWidth:true,name:\"maxUseBotQueues\",variant:\"outlined\",margin:\"dense\",error:touched.maxUseBotQueues&&Boolean(errors.maxUseBotQueues),helperText:touched.maxUseBotQueues&&errors.maxUseBotQueues})}),/*#__PURE__*/_jsx(Grid,{xs:6,md:3,item:true,children:/*#__PURE__*/_jsx(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.timeUseBotQueues\"),fullWidth:true,name:\"timeUseBotQueues\",variant:\"outlined\",margin:\"dense\",error:touched.timeUseBotQueues&&Boolean(errors.timeUseBotQueues),helperText:touched.timeUseBotQueues&&errors.timeUseBotQueues})}),/*#__PURE__*/_jsx(Grid,{xs:6,md:3,item:true,children:/*#__PURE__*/_jsx(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.timeToReturnQueue\"),fullWidth:true,name:\"timeToReturnQueue\",variant:\"outlined\",margin:\"dense\",error:touched.timeToReturnQueue&&Boolean(errors.timeToReturnQueue),helperText:touched.timeToReturnQueue&&errors.timeToReturnQueue})})]}),/*#__PURE__*/_jsxs(Grid,{spacing:2,container:true,children:[/*#__PURE__*/_jsx(Grid,{xs:6,md:6,item:true,children:/*#__PURE__*/_jsx(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.expiresTicket\"),fullWidth:true,name:\"expiresTicket\",required:values.timeInactiveMessage>0,variant:\"outlined\",margin:\"dense\",error:touched.expiresTicket&&Boolean(errors.expiresTicket),helperText:touched.expiresTicket&&errors.expiresTicket})}),/*#__PURE__*/_jsx(Grid,{xs:6,md:6,item:true,children:/*#__PURE__*/_jsxs(FormControl,{variant:\"outlined\",margin:\"dense\",fullWidth:true// className={classes.formControl}\n,children:[/*#__PURE__*/_jsx(InputLabel,{id:\"whenExpiresTicket-selection-label\",children:i18n.t(\"whatsappModal.form.whenExpiresTicket\")}),/*#__PURE__*/_jsxs(Field,{as:Select,label:i18n.t(\"whatsappModal.form.whenExpiresTicket\"),placeholder:i18n.t(\"whatsappModal.form.whenExpiresTicket\"),labelId:\"whenExpiresTicket-selection-label\",id:\"whenExpiresTicket\",name:\"whenExpiresTicket\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"0\",children:i18n.t(\"whatsappModal.form.closeLastMessageOptions1\")}),/*#__PURE__*/_jsx(MenuItem,{value:\"1\",children:i18n.t(\"whatsappModal.form.closeLastMessageOptions2\")})]})]})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.expiresInactiveMessage\"),multiline:true,rows:4,fullWidth:true,name:\"expiresInactiveMessage\",error:touched.expiresInactiveMessage&&Boolean(errors.expiresInactiveMessage),helperText:touched.expiresInactiveMessage&&errors.expiresInactiveMessage,variant:\"outlined\",margin:\"dense\"})}),/*#__PURE__*/_jsx(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.timeInactiveMessage\"),fullWidth:true,name:\"timeInactiveMessage\",variant:\"outlined\",margin:\"dense\",error:touched.timeInactiveMessage&&Boolean(errors.timeInactiveMessage),helperText:touched.timeInactiveMessage&&errors.timeInactiveMessage}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.inactiveMessage\"),multiline:true,rows:4,fullWidth:true,name:\"inactiveMessage\",error:touched.inactiveMessage&&Boolean(errors.inactiveMessage),helperText:touched.inactiveMessage&&errors.inactiveMessage,variant:\"outlined\",margin:\"dense\"})}),/*#__PURE__*/_jsxs(Grid,{spacing:2,container:true,children:[user.showFlow===\"enabled\"&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Grid,{xs:6,md:4,item:true,children:/*#__PURE__*/_jsx(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.flowInactiveTime\"),fullWidth:true,name:\"flowInactiveTime\",variant:\"outlined\",margin:\"dense\",error:touched.flowIdInactiveTime&&Boolean(errors.flowIdInactiveTime),helperText:touched.flowIdInactiveTime&&errors.flowIdInactiveTime})})}),/*#__PURE__*/_jsx(Grid,{xs:6,md:4,item:true,children:/*#__PURE__*/_jsx(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.maxUseInactiveTime\"),fullWidth:true,name:\"maxUseInactiveTime\",variant:\"outlined\",margin:\"dense\",error:touched.maxUseInactiveTime&&Boolean(errors.maxUseInactiveTime),helperText:touched.maxUseInactiveTime&&errors.maxUseInactiveTime})}),user.showFlow===\"enabled\"&&/*#__PURE__*/_jsx(Grid,{xs:6,md:4,item:true,children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(FormControl,{variant:\"outlined\",margin:\"dense\",className:classes.FormControl,fullWidth:true,children:/*#__PURE__*/_jsxs(Select,{name:\"flowIdInactiveTime\",value:flowIdInactiveTime||\"\",onChange:handleChangeFlowIdInactiveTime,id:\"flowIdInactiveTime\",variant:\"outlined\",margin:\"dense\",labelId:\"flowIdInactiveTime-selection-label\",children:[/*#__PURE__*/_jsx(MenuItem,{value:null,children:\"Desabilitado\"}),webhooks.map(webhook=>/*#__PURE__*/_jsx(MenuItem,{value:webhook.id,children:webhook.name},webhook.id))]})})})})]})]})}),/*#__PURE__*/_jsx(TabPanel,{className:classes.container,value:tab,name:\"nps\",children:/*#__PURE__*/_jsxs(DialogContent,{dividers:true,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.ratingMessage\"),multiline:true,rows:4,fullWidth:true,name:\"ratingMessage\",error:touched.ratingMessage&&Boolean(errors.ratingMessage),helperText:touched.ratingMessage&&errors.ratingMessage,variant:\"outlined\",margin:\"dense\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.maxUseBotQueuesNPS\"),fullWidth:true,name:\"maxUseBotQueuesNPS\",variant:\"outlined\",margin:\"dense\",error:touched.maxUseBotQueuesNPS&&Boolean(errors.maxUseBotQueuesNPS),helperText:touched.maxUseBotQueuesNPS&&errors.maxUseBotQueuesNPS})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.expiresTicketNPS\"),fullWidth:true,name:\"expiresTicketNPS\",variant:\"outlined\",margin:\"dense\",error:touched.expiresTicketNPS&&Boolean(errors.expiresTicketNPS),helperText:touched.expiresTicketNPS&&errors.expiresTicketNPS})})]})}),showIntegrations&&user.showFlow===\"enabled\"&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(TabPanel,{className:classes.container,value:tab,name:\"flowbuilder\",children:[/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Fluxo de boas vindas\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Este fluxo \\xE9 disparado apenas para novos contatos, pessoas que voce n\\xE3o possui em sua lista de contatos e que mandaram uma mensagem\"}),/*#__PURE__*/_jsx(FormControl,{variant:\"outlined\",margin:\"dense\",className:classes.FormControl,fullWidth:true,children:/*#__PURE__*/_jsxs(Select,{name:\"flowIdNotPhrase\",value:flowIdNotPhrase||\"\",onChange:handleChangeFlowIdNotPhrase,id:\"flowIdNotPhrase\",variant:\"outlined\",margin:\"dense\",labelId:\"flowIdNotPhrase-selection-label\",children:[/*#__PURE__*/_jsx(MenuItem,{value:null,children:\"Desabilitado\"}),webhooks.map(webhook=>/*#__PURE__*/_jsx(MenuItem,{value:webhook.id,children:webhook.name},webhook.id))]})})]}),/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Fluxo de resposta padr\\xE3o\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Resposta Padr\\xE3o \\xE9 enviada com qualquer caractere diferente de uma palavra chave. ATEN\\xC7\\xC3O! Ser\\xE1 disparada se o atendimento ja estiver fechado.\"}),/*#__PURE__*/_jsx(FormControl,{variant:\"outlined\",margin:\"dense\",className:classes.FormControl,fullWidth:true,children:/*#__PURE__*/_jsxs(Select,{name:\"flowIdWelcome\",value:flowIdWelcome||\"\",onChange:handleChangeFlowIdWelcome,id:\"flowIdWelcome\",variant:\"outlined\",margin:\"dense\",labelId:\"flowIdWelcome-selection-label\",children:[/*#__PURE__*/_jsx(MenuItem,{value:null,children:\"Desabilitado\"}),webhooks.map(webhook=>/*#__PURE__*/_jsx(MenuItem,{value:webhook.id,children:webhook.name},webhook.id))]})})]})]})}),/*#__PURE__*/_jsx(TabPanel,{className:classes.container,value:tab,name:\"schedules\",children:tab===\"schedules\"&&/*#__PURE__*/_jsx(Paper,{style:{padding:20},children:/*#__PURE__*/_jsx(SchedulesForm,{loading:false,onSubmit:handleSaveSchedules,initialValues:schedules,labelSaveButton:i18n.t(\"whatsappModal.buttons.okAdd\")})})})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleClose,color:\"secondary\",disabled:isSubmitting,variant:\"outlined\",children:i18n.t(\"whatsappModal.buttons.cancel\")}),/*#__PURE__*/_jsxs(Button,{type:\"submit\",color:\"primary\",disabled:isSubmitting,variant:\"contained\",className:classes.btnWrapper,children:[whatsAppId?i18n.t(\"whatsappModal.buttons.okEdit\"):i18n.t(\"whatsappModal.buttons.okAdd\"),isSubmitting&&/*#__PURE__*/_jsx(CircularProgress,{size:24,className:classes.buttonProgress})]})]})]});}})]})});};export default/*#__PURE__*/React.memo(WhatsAppModal);","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}