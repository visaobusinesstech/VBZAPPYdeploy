{"ast":null,"code":"import _objectSpread from\"/home/deploy/atendechatop/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import api from\"../../services/api\";import{toast}from\"react-toastify\";const useDashboard=()=>{const find=async params=>{try{console.log('Buscando dados do dashboard com params:',params);const{data}=await api.request({url:\"/dashboard\",method:'GET',params});console.log('Dados recebidos do dashboard:',data);// Validar estrutura dos dados\nif(!data){throw new Error('Nenhum dado retornado do servidor');}// Garantir que counters existe e tem valores padrão\nconst defaultCounters={avgSupportTime:0,avgWaitTime:0,supportFinished:0,supportHappening:0,supportPending:0,supportGroups:0,leads:0,activeTickets:0,passiveTickets:0,tickets:0,waitRating:0,withoutRating:0,withRating:0,percRating:0,npsPromotersPerc:0,npsPassivePerc:0,npsDetractorsPerc:0,npsScore:0};const responseData={counters:_objectSpread(_objectSpread({},defaultCounters),data.counters),attendants:Array.isArray(data.attendants)?data.attendants:[]};console.log('Dados processados do dashboard:',responseData);return responseData;}catch(error){var _error$response,_error$response$data;console.error('Erro ao buscar dados do dashboard:',error);if(error!==null&&error!==void 0&&(_error$response=error.response)!==null&&_error$response!==void 0&&(_error$response$data=_error$response.data)!==null&&_error$response$data!==void 0&&_error$response$data.message){toast.error(error.response.data.message);}else{toast.error('Erro ao carregar dados do dashboard');}// Retornar dados vazios em caso de erro\nreturn{counters:{avgSupportTime:0,avgWaitTime:0,supportFinished:0,supportHappening:0,supportPending:0,supportGroups:0,leads:0,activeTickets:0,passiveTickets:0,tickets:0,waitRating:0,withoutRating:0,withRating:0,percRating:0,npsPromotersPerc:0,npsPassivePerc:0,npsDetractorsPerc:0,npsScore:0},attendants:[]};}};const getReport=async params=>{try{console.log('Buscando relatório com params:',params);const{data}=await api.request({url:\"/ticketreport/reports\",method:'GET',params});console.log('Dados do relatório recebidos:',data);return data;}catch(error){var _error$response2,_error$response2$data;console.error('Erro ao buscar relatório:',error);if(error!==null&&error!==void 0&&(_error$response2=error.response)!==null&&_error$response2!==void 0&&(_error$response2$data=_error$response2.data)!==null&&_error$response2$data!==void 0&&_error$response2$data.message){toast.error(error.response.data.message);}else{toast.error('Erro ao carregar relatório');}return{data:[]};}};return{find,getReport};};export default useDashboard;","map":{"version":3,"names":["api","toast","useDashboard","find","params","console","log","data","request","url","method","Error","defaultCounters","avgSupportTime","avgWaitTime","supportFinished","supportHappening","supportPending","supportGroups","leads","activeTickets","passiveTickets","tickets","waitRating","withoutRating","withRating","percRating","npsPromotersPerc","npsPassivePerc","npsDetractorsPerc","npsScore","responseData","counters","_objectSpread","attendants","Array","isArray","error","_error$response","_error$response$data","response","message","getReport","_error$response2","_error$response2$data"],"sources":["/home/deploy/atendechatop/frontend/src/hooks/useDashboard/index.js"],"sourcesContent":["import api from \"../../services/api\";\nimport { toast } from \"react-toastify\";\n\nconst useDashboard = () => {\n  const find = async (params) => {\n    try {\n      console.log('Buscando dados do dashboard com params:', params);\n      \n      const { data } = await api.request({\n        url: `/dashboard`,\n        method: 'GET',\n        params\n      });\n\n      console.log('Dados recebidos do dashboard:', data);\n\n      // Validar estrutura dos dados\n      if (!data) {\n        throw new Error('Nenhum dado retornado do servidor');\n      }\n\n      // Garantir que counters existe e tem valores padrão\n      const defaultCounters = {\n        avgSupportTime: 0,\n        avgWaitTime: 0,\n        supportFinished: 0,\n        supportHappening: 0,\n        supportPending: 0,\n        supportGroups: 0,\n        leads: 0,\n        activeTickets: 0,\n        passiveTickets: 0,\n        tickets: 0,\n        waitRating: 0,\n        withoutRating: 0,\n        withRating: 0,\n        percRating: 0,\n        npsPromotersPerc: 0,\n        npsPassivePerc: 0,\n        npsDetractorsPerc: 0,\n        npsScore: 0\n      };\n\n      const responseData = {\n        counters: { ...defaultCounters, ...data.counters },\n        attendants: Array.isArray(data.attendants) ? data.attendants : []\n      };\n\n      console.log('Dados processados do dashboard:', responseData);\n\n      return responseData;\n    } catch (error) {\n      console.error('Erro ao buscar dados do dashboard:', error);\n      \n      if (error?.response?.data?.message) {\n        toast.error(error.response.data.message);\n      } else {\n        toast.error('Erro ao carregar dados do dashboard');\n      }\n      \n      // Retornar dados vazios em caso de erro\n      return {\n        counters: {\n          avgSupportTime: 0,\n          avgWaitTime: 0,\n          supportFinished: 0,\n          supportHappening: 0,\n          supportPending: 0,\n          supportGroups: 0,\n          leads: 0,\n          activeTickets: 0,\n          passiveTickets: 0,\n          tickets: 0,\n          waitRating: 0,\n          withoutRating: 0,\n          withRating: 0,\n          percRating: 0,\n          npsPromotersPerc: 0,\n          npsPassivePerc: 0,\n          npsDetractorsPerc: 0,\n          npsScore: 0\n        },\n        attendants: []\n      };\n    }\n  };\n\n  const getReport = async (params) => {\n    try {\n      console.log('Buscando relatório com params:', params);\n      \n      const { data } = await api.request({\n        url: `/ticketreport/reports`,\n        method: 'GET',\n        params\n      });\n\n      console.log('Dados do relatório recebidos:', data);\n      return data;\n    } catch (error) {\n      console.error('Erro ao buscar relatório:', error);\n      \n      if (error?.response?.data?.message) {\n        toast.error(error.response.data.message);\n      } else {\n        toast.error('Erro ao carregar relatório');\n      }\n      \n      return { data: [] };\n    }\n  };\n\n  return {\n    find,\n    getReport\n  };\n};\n\nexport default useDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}