{"ast":null,"code":"import{Divider}from'@material-ui/core';import{FileCopyOutlined,Language,Phone}from'@material-ui/icons';import{makeStyles}from'@material-ui/core/styles';import React from'react';import MarkdownWrapper from'../MarkdownWrapper';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const useStyles=makeStyles(theme=>({buttonTemplate:{backgroundColor:\"transparent\",border:'none',color:'#0CADE3','&:hover':{backgroundColor:theme.palette.primary.dark}}}));// Componente para renderizar os botões dinamicamente \nconst Template=_ref=>{let{message}=_ref;const classes=useStyles();const urlRegex=/(https?:\\/\\/[^\\s]+(\\.jpg|\\.jpeg|\\.png|\\.gif|\\.mp4|\\.webm|\\.ogg))/g;// Separar a parte do texto dos botões usando '||||'\nconst[text,buttonsJson]=message.body.split('||||');// Encontra a URL de mídia no texto (se existir)\nconst mediaUrls=text.match(urlRegex);const mediaUrl=mediaUrls?mediaUrls[0]:null;// Considerando a primeira URL encontrada\n// Remove a URL de mídia do texto para não duplicar\nconst textWithoutMediaUrl=text.replace(urlRegex,'').trim();// Funções para verificar se é uma imagem ou vídeo\nconst isImage=url=>/\\.(jpeg|jpg|gif|png)$/i.test(url);const isVideo=url=>/\\.(mp4|webm|ogg)$/i.test(url);const ButtonRenderer=_ref2=>{let{buttons}=_ref2;return/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'10px',padding:'10px',display:'flex',flexDirection:'column',alignItems:'center',gap:'10px'},children:buttons.map((button,index)=>{if(button.type==='URL'){return/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.open(button.url,'_blank'),className:classes.buttonTemplate,children:/*#__PURE__*/_jsxs(\"span\",{style:{color:'blue-light',display:'flex',alignItems:'center',textAlign:'center',gap:'5px'},children:[/*#__PURE__*/_jsx(Language,{}),\" \",button.text]})},index);}else if(button.type==='PHONE_NUMBER'){return/*#__PURE__*/_jsx(\"span\",{style:{color:'blue',display:'flex',alignItems:'center',textAlign:'center',gap:'5px'},children:/*#__PURE__*/_jsxs(\"button\",{className:classes.buttonTemplate,onClick:()=>window.open(\"https://wa.me/\".concat(button.phone_number),'_blank'),children:[/*#__PURE__*/_jsx(Phone,{}),\" \",button.text]},index)});}else if(button.type==='COPY_CODE'){return/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigator.clipboard.writeText(button.example[0]),className:classes.buttonTemplate,children:/*#__PURE__*/_jsxs(\"span\",{style:{color:'blue-light',display:'flex',alignItems:'center',textAlign:'center',gap:'5px'},children:[/*#__PURE__*/_jsx(FileCopyOutlined,{}),\" \",button.text]})},index);}return null;})});};// Parse adicional da string aninhada\nlet buttons=[];if(buttonsJson&&buttonsJson!==\"[]\"){try{if(typeof buttonsJson==='string'){buttons=JSON.parse(JSON.parse(buttonsJson));// Parse adicional aqui\n}else if(typeof buttonsJson==='object'){buttons=Object.values(buttonsJson);}}catch(e){console.log(buttonsJson);console.error('Erro ao fazer parse dos botões:',e);}}return/*#__PURE__*/_jsxs(_Fragment,{children:[mediaUrl&&/*#__PURE__*/_jsx(_Fragment,{children:isImage(mediaUrl)?/*#__PURE__*/_jsx(\"img\",{src:mediaUrl,alt:\"media content\",style:{maxWidth:'100%',height:'auto'}}):isVideo(mediaUrl)?/*#__PURE__*/_jsx(\"video\",{src:mediaUrl,controls:true,style:{maxWidth:'100%',height:'auto'}}):/*#__PURE__*/_jsx(\"p\",{children:\"Unsupported media type\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(MarkdownWrapper,{children:textWithoutMediaUrl}),buttons.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(ButtonRenderer,{buttons:buttons})]})]})]});};export default Template;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}