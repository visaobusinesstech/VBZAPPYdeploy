{"ast":null,"code":"import _objectSpread from\"/home/deploy/codigologlow/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useEffect,useContext}from\"react\";import{AuthContext}from\"../context/Auth/AuthContext\";const useOnlineUsers=()=>{const[onlineUsers,setOnlineUsers]=useState([]);const{socket}=useContext(AuthContext);useEffect(()=>{if(!socket)return;socket.on(\"users:online\",users=>{setOnlineUsers(users);});socket.on(\"user:online\",_ref=>{let{userId,lastSeen}=_ref;setOnlineUsers(prev=>{const userIndex=prev.findIndex(u=>u.id===userId);if(userIndex===-1)return prev;const updatedUsers=[...prev];updatedUsers[userIndex]=_objectSpread(_objectSpread({},updatedUsers[userIndex]),{},{online:true,lastSeen});return updatedUsers;});});socket.on(\"user:offline\",_ref2=>{let{userId,lastSeen}=_ref2;setOnlineUsers(prev=>{const userIndex=prev.findIndex(u=>u.id===userId);if(userIndex===-1)return prev;const updatedUsers=[...prev];updatedUsers[userIndex]=_objectSpread(_objectSpread({},updatedUsers[userIndex]),{},{online:false,lastSeen});return updatedUsers;});});socket.on(\"user:new\",_ref3=>{let{user}=_ref3;setOnlineUsers(prev=>{if(prev.some(u=>u.id===user.id))return prev;return[...prev,_objectSpread(_objectSpread({},user),{},{online:true})];});});const heartbeatInterval=setInterval(()=>{socket.emit(\"heartbeat\");},15000);return()=>{socket.off(\"users:online\");socket.off(\"user:online\");socket.off(\"user:offline\");socket.off(\"user:new\");clearInterval(heartbeatInterval);};},[socket]);return onlineUsers;};export default useOnlineUsers;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}