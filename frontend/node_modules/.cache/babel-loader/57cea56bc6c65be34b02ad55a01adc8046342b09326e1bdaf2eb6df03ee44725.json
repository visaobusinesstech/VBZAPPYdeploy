{"ast":null,"code":"// components/AvatarUpload/index.js - Versão ajustada\nimport React,{useContext,useState}from'react';import Avatar from'@material-ui/core/Avatar';import makeStyles from'@material-ui/core/styles/makeStyles';import Button from'@material-ui/core/Button';import CloudUploadIcon from'@material-ui/icons/CloudUpload';import Box from'@material-ui/core/Box';import{AuthContext}from'../../context/Auth/AuthContext';import{getBackendUrl}from'../../config';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const backendUrl=getBackendUrl();const useStyles=makeStyles(theme=>({avatar:{width:theme.spacing(12),height:theme.spacing(12),margin:theme.spacing(2),cursor:'pointer',borderRadius:'50%',border:'2px solid #ccc'}}));const AvatarUploader=_ref=>{let{setAvatar,avatar,companyId}=_ref;const classes=useStyles();const[selectedFile,setSelectedFile]=useState(null);const[previewImage,setPreviewImage]=useState(null);const{user}=useContext(AuthContext);const handleFileChange=event=>{const file=event.target.files[0];if(!file)return;// Validar tipo de arquivo\nconst allowedTypes=['image/jpeg','image/jpg','image/png','image/gif','image/webp'];if(!allowedTypes.includes(file.type)){alert('Formato de arquivo não suportado. Use apenas JPG, PNG, GIF ou WebP.');return;}// Validar tamanho (máximo 5MB)\nconst maxSize=5*1024*1024;// 5MB\nif(file.size>maxSize){alert('Arquivo muito grande. Tamanho máximo: 5MB');return;}setSelectedFile(file);setAvatar(file);if(file){const reader=new FileReader();reader.onload=()=>{setPreviewImage(reader.result);};reader.readAsDataURL(file);}};// Função para determinar qual imagem exibir\nconst getImageSrc=()=>{if(previewImage)return previewImage;if(avatar&&companyId)return\"\".concat(backendUrl,\"/public/company\").concat(companyId,\"/user/\").concat(avatar);return\"\".concat(backendUrl,\"/public/app/noimage.png\");};return/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Avatar,{alt:\"User Avatar\",src:getImageSrc(),style:{width:120,height:120,cursor:'pointer'},onClick:()=>document.getElementById('avatar-upload').click(),onError:e=>{// Fallback para imagem padrão em caso de erro\ne.target.src=\"\".concat(backendUrl,\"/public/app/noimage.png\");}}),/*#__PURE__*/_jsx(\"input\",{accept:\"image/*\",type:\"file\",id:\"avatar-upload\",style:{display:'none'},onChange:handleFileChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"avatar-upload\",style:{marginTop:10},children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",component:\"span\",startIcon:/*#__PURE__*/_jsx(CloudUploadIcon,{}),children:avatar?'Alterar Avatar':'Upload Avatar'})})]});};export default AvatarUploader;","map":{"version":3,"names":["React","useContext","useState","Avatar","makeStyles","Button","CloudUploadIcon","Box","AuthContext","getBackendUrl","jsx","_jsx","jsxs","_jsxs","backendUrl","useStyles","theme","avatar","width","spacing","height","margin","cursor","borderRadius","border","AvatarUploader","_ref","setAvatar","companyId","classes","selectedFile","setSelectedFile","previewImage","setPreviewImage","user","handleFileChange","event","file","target","files","allowedTypes","includes","type","alert","maxSize","size","reader","FileReader","onload","result","readAsDataURL","getImageSrc","concat","display","flexDirection","alignItems","children","alt","src","style","onClick","document","getElementById","click","onError","e","accept","id","onChange","htmlFor","marginTop","variant","component","startIcon"],"sources":["/home/deploy/atendechatop/frontend/src/components/AvatarUpload/index.js"],"sourcesContent":["// components/AvatarUpload/index.js - Versão ajustada\nimport React, { useContext, useState } from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport Button from '@material-ui/core/Button';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport Box from '@material-ui/core/Box';\nimport { AuthContext } from '../../context/Auth/AuthContext';\nimport { getBackendUrl } from '../../config';\n\nconst backendUrl = getBackendUrl();\n\nconst useStyles = makeStyles((theme) => ({\n  avatar: {\n    width: theme.spacing(12),\n    height: theme.spacing(12),\n    margin: theme.spacing(2),\n    cursor: 'pointer',\n    borderRadius: '50%',\n    border: '2px solid #ccc',\n  },\n}));\n\nconst AvatarUploader = ({ setAvatar, avatar, companyId }) => {\n  const classes = useStyles();\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [previewImage, setPreviewImage] = useState(null);\n  const { user } = useContext(AuthContext);\n\n  const handleFileChange = (event) => {\n    const file = event.target.files[0];\n    \n    if (!file) return;\n\n    // Validar tipo de arquivo\n    const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp'];\n    if (!allowedTypes.includes(file.type)) {\n      alert('Formato de arquivo não suportado. Use apenas JPG, PNG, GIF ou WebP.');\n      return;\n    }\n\n    // Validar tamanho (máximo 5MB)\n    const maxSize = 5 * 1024 * 1024; // 5MB\n    if (file.size > maxSize) {\n      alert('Arquivo muito grande. Tamanho máximo: 5MB');\n      return;\n    }\n\n    setSelectedFile(file);\n    setAvatar(file);\n\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = () => {\n        setPreviewImage(reader.result);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  // Função para determinar qual imagem exibir\n  const getImageSrc = () => {\n    if (previewImage) return previewImage;\n    if (avatar && companyId) return `${backendUrl}/public/company${companyId}/user/${avatar}`;\n    return `${backendUrl}/public/app/noimage.png`;\n  };\n\n  return (\n    <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\">\n      <Avatar\n        alt=\"User Avatar\"\n        src={getImageSrc()}\n        style={{ width: 120, height: 120, cursor: 'pointer' }}\n        onClick={() => document.getElementById('avatar-upload').click()}\n        onError={(e) => {\n          // Fallback para imagem padrão em caso de erro\n          e.target.src = `${backendUrl}/public/app/noimage.png`;\n        }}\n      />\n\n      <input\n        accept=\"image/*\"\n        type=\"file\"\n        id=\"avatar-upload\"\n        style={{ display: 'none' }}\n        onChange={handleFileChange}\n      />\n      <label htmlFor=\"avatar-upload\" style={{ marginTop: 10 }}>\n        <Button\n          variant=\"contained\"\n          component=\"span\"\n          startIcon={<CloudUploadIcon />}\n        >\n          {avatar ? 'Alterar Avatar' : 'Upload Avatar'}\n        </Button>\n      </label>\n    </Box>\n  );\n};\n\nexport default AvatarUploader;"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,UAAU,CAAEC,QAAQ,KAAQ,OAAO,CACnD,MAAO,CAAAC,MAAM,KAAM,0BAA0B,CAC7C,MAAO,CAAAC,UAAU,KAAM,qCAAqC,CAC5D,MAAO,CAAAC,MAAM,KAAM,0BAA0B,CAC7C,MAAO,CAAAC,eAAe,KAAM,gCAAgC,CAC5D,MAAO,CAAAC,GAAG,KAAM,uBAAuB,CACvC,OAASC,WAAW,KAAQ,gCAAgC,CAC5D,OAASC,aAAa,KAAQ,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE7C,KAAM,CAAAC,UAAU,CAAGL,aAAa,CAAC,CAAC,CAElC,KAAM,CAAAM,SAAS,CAAGX,UAAU,CAAEY,KAAK,GAAM,CACvCC,MAAM,CAAE,CACNC,KAAK,CAAEF,KAAK,CAACG,OAAO,CAAC,EAAE,CAAC,CACxBC,MAAM,CAAEJ,KAAK,CAACG,OAAO,CAAC,EAAE,CAAC,CACzBE,MAAM,CAAEL,KAAK,CAACG,OAAO,CAAC,CAAC,CAAC,CACxBG,MAAM,CAAE,SAAS,CACjBC,YAAY,CAAE,KAAK,CACnBC,MAAM,CAAE,gBACV,CACF,CAAC,CAAC,CAAC,CAEH,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAsC,IAArC,CAAEC,SAAS,CAAEV,MAAM,CAAEW,SAAU,CAAC,CAAAF,IAAA,CACtD,KAAM,CAAAG,OAAO,CAAGd,SAAS,CAAC,CAAC,CAC3B,KAAM,CAACe,YAAY,CAAEC,eAAe,CAAC,CAAG7B,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAAC8B,YAAY,CAAEC,eAAe,CAAC,CAAG/B,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAAEgC,IAAK,CAAC,CAAGjC,UAAU,CAACO,WAAW,CAAC,CAExC,KAAM,CAAA2B,gBAAgB,CAAIC,KAAK,EAAK,CAClC,KAAM,CAAAC,IAAI,CAAGD,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAElC,GAAI,CAACF,IAAI,CAAE,OAEX;AACA,KAAM,CAAAG,YAAY,CAAG,CAAC,YAAY,CAAE,WAAW,CAAE,WAAW,CAAE,WAAW,CAAE,YAAY,CAAC,CACxF,GAAI,CAACA,YAAY,CAACC,QAAQ,CAACJ,IAAI,CAACK,IAAI,CAAC,CAAE,CACrCC,KAAK,CAAC,qEAAqE,CAAC,CAC5E,OACF,CAEA;AACA,KAAM,CAAAC,OAAO,CAAG,CAAC,CAAG,IAAI,CAAG,IAAI,CAAE;AACjC,GAAIP,IAAI,CAACQ,IAAI,CAAGD,OAAO,CAAE,CACvBD,KAAK,CAAC,2CAA2C,CAAC,CAClD,OACF,CAEAZ,eAAe,CAACM,IAAI,CAAC,CACrBV,SAAS,CAACU,IAAI,CAAC,CAEf,GAAIA,IAAI,CAAE,CACR,KAAM,CAAAS,MAAM,CAAG,GAAI,CAAAC,UAAU,CAAC,CAAC,CAC/BD,MAAM,CAACE,MAAM,CAAG,IAAM,CACpBf,eAAe,CAACa,MAAM,CAACG,MAAM,CAAC,CAChC,CAAC,CACDH,MAAM,CAACI,aAAa,CAACb,IAAI,CAAC,CAC5B,CACF,CAAC,CAED;AACA,KAAM,CAAAc,WAAW,CAAGA,CAAA,GAAM,CACxB,GAAInB,YAAY,CAAE,MAAO,CAAAA,YAAY,CACrC,GAAIf,MAAM,EAAIW,SAAS,CAAE,SAAAwB,MAAA,CAAUtC,UAAU,oBAAAsC,MAAA,CAAkBxB,SAAS,WAAAwB,MAAA,CAASnC,MAAM,EACvF,SAAAmC,MAAA,CAAUtC,UAAU,4BACtB,CAAC,CAED,mBACED,KAAA,CAACN,GAAG,EAAC8C,OAAO,CAAC,MAAM,CAACC,aAAa,CAAC,QAAQ,CAACC,UAAU,CAAC,QAAQ,CAAAC,QAAA,eAC5D7C,IAAA,CAACR,MAAM,EACLsD,GAAG,CAAC,aAAa,CACjBC,GAAG,CAAEP,WAAW,CAAC,CAAE,CACnBQ,KAAK,CAAE,CAAEzC,KAAK,CAAE,GAAG,CAAEE,MAAM,CAAE,GAAG,CAAEE,MAAM,CAAE,SAAU,CAAE,CACtDsC,OAAO,CAAEA,CAAA,GAAMC,QAAQ,CAACC,cAAc,CAAC,eAAe,CAAC,CAACC,KAAK,CAAC,CAAE,CAChEC,OAAO,CAAGC,CAAC,EAAK,CACd;AACAA,CAAC,CAAC3B,MAAM,CAACoB,GAAG,IAAAN,MAAA,CAAMtC,UAAU,2BAAyB,CACvD,CAAE,CACH,CAAC,cAEFH,IAAA,UACEuD,MAAM,CAAC,SAAS,CAChBxB,IAAI,CAAC,MAAM,CACXyB,EAAE,CAAC,eAAe,CAClBR,KAAK,CAAE,CAAEN,OAAO,CAAE,MAAO,CAAE,CAC3Be,QAAQ,CAAEjC,gBAAiB,CAC5B,CAAC,cACFxB,IAAA,UAAO0D,OAAO,CAAC,eAAe,CAACV,KAAK,CAAE,CAAEW,SAAS,CAAE,EAAG,CAAE,CAAAd,QAAA,cACtD7C,IAAA,CAACN,MAAM,EACLkE,OAAO,CAAC,WAAW,CACnBC,SAAS,CAAC,MAAM,CAChBC,SAAS,cAAE9D,IAAA,CAACL,eAAe,GAAE,CAAE,CAAAkD,QAAA,CAE9BvC,MAAM,CAAG,gBAAgB,CAAG,eAAe,CACtC,CAAC,CACJ,CAAC,EACL,CAAC,CAEV,CAAC,CAED,cAAe,CAAAQ,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}