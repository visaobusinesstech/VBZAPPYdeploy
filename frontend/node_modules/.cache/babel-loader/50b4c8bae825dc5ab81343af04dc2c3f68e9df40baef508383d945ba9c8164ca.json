{"ast":null,"code":"import _objectSpread from\"/home/deploy/codigologlow/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useContext}from\"react\";import{useHistory}from\"react-router-dom\";import{makeStyles}from\"@material-ui/core/styles\";import Button from\"@material-ui/core/Button\";import TextField from\"@material-ui/core/TextField\";import Dialog from\"@material-ui/core/Dialog\";import DialogActions from\"@material-ui/core/DialogActions\";import DialogContent from\"@material-ui/core/DialogContent\";import DialogTitle from\"@material-ui/core/DialogTitle\";import Typography from\"@material-ui/core/Typography\";import Autocomplete,{createFilterOptions}from\"@material-ui/lab/Autocomplete\";import CircularProgress from\"@material-ui/core/CircularProgress\";import{i18n}from\"../../translate/i18n\";import api from\"../../services/api\";import ButtonWithSpinner from\"../ButtonWithSpinner\";import ContactModal from\"../ContactModal\";import toastError from\"../../errors/toastError\";import{AuthContext}from\"../../context/Auth/AuthContext\";import{Grid,ListItemText,MenuItem,Select}from\"@material-ui/core\";import{toast}from\"react-toastify\";import{Facebook,Instagram,WhatsApp}from\"@material-ui/icons\";import ShowTicketOpen from\"../ShowTicketOpenModal\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const useStyles=makeStyles(theme=>({online:{fontSize:11,color:\"#25d366\"},offline:{fontSize:11,color:\"#e1306c\"}}));const filter=createFilterOptions({trim:true});const NewTicketModal=_ref=>{var _user$queues;let{modalOpen,onClose,initialContact}=_ref;const classes=useStyles();const[options,setOptions]=useState([]);const[channelFilter,setChannelFilter]=useState(null);const[loading,setLoading]=useState(false);const[searchParam,setSearchParam]=useState(\"\");const[selectedContact,setSelectedContact]=useState(null);const[selectedQueue,setSelectedQueue]=useState(\"\");const[selectedWhatsapp,setSelectedWhatsapp]=useState(\"\");const[newContact,setNewContact]=useState({});const[whatsapps,setWhatsapps]=useState([]);const[contactModalOpen,setContactModalOpen]=useState(false);const{user}=useContext(AuthContext);const{companyId,whatsappId}=user;const[openAlert,setOpenAlert]=useState(false);const[userTicketOpen,setUserTicketOpen]=useState(\"\");const[queueTicketOpen,setQueueTicketOpen]=useState(\"\");useEffect(()=>{if((initialContact===null||initialContact===void 0?void 0:initialContact.id)!==undefined){setOptions([initialContact]);setSelectedContact(initialContact);}},[initialContact]);useEffect(()=>{setLoading(true);const delayDebounceFn=setTimeout(()=>{const fetchContacts=async()=>{api// .get(`/whatsapp/filter`, { params: { companyId, session: 0, channel: channelFilter } })\n.get(\"/whatsapp\",{params:{companyId,session:0}}).then(_ref2=>{let{data}=_ref2;return setWhatsapps(data);});// .then(({ data }) => {\n//   const mappedWhatsapps = data.map((whatsapp) => ({\n//     ...whatsapp,\n//     selected: false,\n//   }));\n//   setWhatsapps(mappedWhatsapps);\n//   if (channelFilter && mappedWhatsapps.length && mappedWhatsapps?.length === 1 && (user.whatsappId === null || user?.whatsapp?.channel !== channelFilter)) {\n//     setSelectedWhatsapp(mappedWhatsapps[0].id)\n//   }\n// });\n};if(whatsappId!==null&&whatsappId!==undefined){setSelectedWhatsapp(whatsappId);}if(user.queues.length===1){setSelectedQueue(user.queues[0].id);}fetchContacts();setLoading(false);},500);return()=>clearTimeout(delayDebounceFn);},[selectedContact,channelFilter]);useEffect(()=>{if(!modalOpen||searchParam.length<3){setLoading(false);return;}setLoading(true);const delayDebounceFn=setTimeout(()=>{const fetchContacts=async()=>{try{const{data}=await api.get(\"contacts\",{params:{searchParam}});setOptions(data.contacts);setLoading(false);}catch(err){setLoading(false);toastError(err);}};fetchContacts();},500);return()=>clearTimeout(delayDebounceFn);},[searchParam,modalOpen]);const IconChannel=channel=>{switch(channel){case\"facebook\":return/*#__PURE__*/_jsx(Facebook,{style:{color:\"#3b5998\",verticalAlign:\"middle\"}});case\"instagram\":return/*#__PURE__*/_jsx(Instagram,{style:{color:\"#e1306c\",verticalAlign:\"middle\"}});case\"whatsapp\":return/*#__PURE__*/_jsx(WhatsApp,{style:{color:\"#25d366\",verticalAlign:\"middle\"}});case\"whatsapp_oficial\":return/*#__PURE__*/_jsx(WhatsApp,{style:{color:\"#25d366\",verticalAlign:\"middle\"}});default:return\"error\";}};const handleClose=()=>{onClose();setSearchParam(\"\");setOpenAlert(false);setUserTicketOpen(\"\");setQueueTicketOpen(\"\");setSelectedContact(null);};const handleCloseAlert=()=>{setOpenAlert(false);setLoading(false);setOpenAlert(false);setUserTicketOpen(\"\");setQueueTicketOpen(\"\");};const handleSaveTicket=async contactId=>{if(!contactId)return;// if (selectedQueue === \"\" && user.profile !== 'admin') {\nif(selectedQueue===\"\"){toast.error(\"Selecione uma fila\");return;}setLoading(true);try{const queueId=selectedQueue!==\"\"?selectedQueue:null;const whatsappId=selectedWhatsapp!==\"\"?selectedWhatsapp:null;const{data:ticket}=await api.post(\"/tickets\",{contactId:contactId,queueId,whatsappId,userId:user.id,status:\"open\"});onClose(ticket);}catch(err){var _err$response,_err$response2;setLoading(false);// Se for erro 403 (Forbidden), o backend já retornou que outro usuário atende\nif(((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status)===403){var _errorData$ticket,_errorData$ticket$use,_errorData$ticket2,_errorData$ticket2$qu;const errorData=err.response.data;setOpenAlert(true);setUserTicketOpen(((_errorData$ticket=errorData.ticket)===null||_errorData$ticket===void 0?void 0:(_errorData$ticket$use=_errorData$ticket.user)===null||_errorData$ticket$use===void 0?void 0:_errorData$ticket$use.name)||\"Outro usuário\");setQueueTicketOpen(((_errorData$ticket2=errorData.ticket)===null||_errorData$ticket2===void 0?void 0:(_errorData$ticket2$qu=_errorData$ticket2.queue)===null||_errorData$ticket2$qu===void 0?void 0:_errorData$ticket2$qu.name)||\"Sem fila\");return;}// Para erro 409, tentar parsear o ticket existente\nif(((_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.status)===409){const ticket=JSON.parse(err.response.data.error);if(ticket.userId!==(user===null||user===void 0?void 0:user.id)){var _ticket$user,_ticket$queue;setOpenAlert(true);setUserTicketOpen(ticket===null||ticket===void 0?void 0:(_ticket$user=ticket.user)===null||_ticket$user===void 0?void 0:_ticket$user.name);setQueueTicketOpen(ticket===null||ticket===void 0?void 0:(_ticket$queue=ticket.queue)===null||_ticket$queue===void 0?void 0:_ticket$queue.name);}else{setOpenAlert(false);setUserTicketOpen(\"\");setQueueTicketOpen(\"\");setLoading(false);onClose(ticket);}}else{// Outros erros\ntoastError(err);}}setLoading(false);};const handleSelectOption=(e,newValue)=>{if(newValue!==null&&newValue!==void 0&&newValue.number){setSelectedContact(newValue);}else if(newValue!==null&&newValue!==void 0&&newValue.name){setNewContact({name:newValue.name});setContactModalOpen(true);}};const handleCloseContactModal=()=>{setContactModalOpen(false);};const handleAddNewContactTicket=contact=>{setSelectedContact(contact);};const createAddContactOption=(filterOptions,params)=>{const filtered=filter(filterOptions,params);if(params.inputValue!==\"\"&&!loading&&searchParam.length>=3){filtered.push({name:\"\".concat(params.inputValue)});}return filtered;};const renderOption=option=>{if(option.number){return/*#__PURE__*/_jsxs(_Fragment,{children:[IconChannel(option.channel),/*#__PURE__*/_jsxs(Typography,{component:\"span\",style:{fontSize:14,marginLeft:\"10px\",display:\"inline-flex\",alignItems:\"center\",lineHeight:\"2\"},children:[option.name,\" - \",option.number]})]});}else{return\"\".concat(i18n.t(\"newTicketModal.add\"),\" \").concat(option.name);}};const renderOptionLabel=option=>{if(option.number){return\"\".concat(option.name,\" - \").concat(option.number);}else{return\"\".concat(option.name);}};const renderContactAutocomplete=()=>{if(initialContact===undefined||initialContact.id===undefined){return/*#__PURE__*/_jsx(Grid,{xs:12,item:true,children:/*#__PURE__*/_jsx(Autocomplete,{fullWidth:true,options:options,loading:loading,clearOnBlur:true,autoHighlight:true,freeSolo:true,clearOnEscape:true,getOptionLabel:renderOptionLabel,renderOption:renderOption,filterOptions:createAddContactOption,onChange:(e,newValue)=>{setChannelFilter(newValue?newValue.channel:\"whatsapp\");handleSelectOption(e,newValue);},renderInput:params=>/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:i18n.t(\"newTicketModal.fieldLabel\"),variant:\"outlined\",autoFocus:true,onChange:e=>setSearchParam(e.target.value),onKeyPress:e=>{if(loading||!selectedContact)return;else if(e.key===\"Enter\"){handleSaveTicket(selectedContact.id);}},InputProps:_objectSpread(_objectSpread({},params.InputProps),{},{endAdornment:/*#__PURE__*/_jsxs(React.Fragment,{children:[loading?/*#__PURE__*/_jsx(CircularProgress,{color:\"inherit\",size:20}):null,params.InputProps.endAdornment]})})}))})});}return null;};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Dialog,{open:modalOpen,onClose:handleClose,children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"form-dialog-title\",children:i18n.t(\"newTicketModal.title\")}),/*#__PURE__*/_jsx(DialogContent,{dividers:true,children:/*#__PURE__*/_jsxs(Grid,{style:{width:300},container:true,spacing:2,children:[renderContactAutocomplete(),/*#__PURE__*/_jsx(Grid,{xs:12,item:true,children:/*#__PURE__*/_jsx(Select,{required:true,fullWidth:true,displayEmpty:true,variant:\"outlined\",value:selectedQueue,onChange:e=>{setSelectedQueue(e.target.value);},MenuProps:{anchorOrigin:{vertical:\"bottom\",horizontal:\"left\"},transformOrigin:{vertical:\"top\",horizontal:\"left\"},getContentAnchorEl:null},renderValue:()=>{if(selectedQueue===\"\"){return\"Selecione uma fila\";}const queue=user.queues.find(q=>q.id===selectedQueue);return queue.name;},children:((_user$queues=user.queues)===null||_user$queues===void 0?void 0:_user$queues.length)>0&&user.queues.map((queue,key)=>/*#__PURE__*/_jsx(MenuItem,{dense:true,value:queue.id,children:/*#__PURE__*/_jsx(ListItemText,{primary:queue.name})},key))})}),/*#__PURE__*/_jsx(Grid,{xs:12,item:true,children:/*#__PURE__*/_jsx(Select,{required:true,fullWidth:true,displayEmpty:true,variant:\"outlined\",value:selectedWhatsapp,onChange:e=>{setSelectedWhatsapp(e.target.value);},MenuProps:{anchorOrigin:{vertical:\"bottom\",horizontal:\"left\"},transformOrigin:{vertical:\"top\",horizontal:\"left\"},getContentAnchorEl:null},renderValue:()=>{if(selectedWhatsapp===\"\"){return\"Selecione uma Conexão\";}const whatsapp=whatsapps.find(w=>w.id===selectedWhatsapp);return whatsapp===null||whatsapp===void 0?void 0:whatsapp.name;},children:(whatsapps===null||whatsapps===void 0?void 0:whatsapps.length)>0&&whatsapps.map((whatsapp,key)=>/*#__PURE__*/_jsx(MenuItem,{dense:true,value:whatsapp.id,children:/*#__PURE__*/_jsx(ListItemText,{primary:/*#__PURE__*/_jsxs(_Fragment,{children:[IconChannel(whatsapp.channel),/*#__PURE__*/_jsxs(Typography,{component:\"span\",style:{fontSize:14,marginLeft:\"10px\",display:\"inline-flex\",alignItems:\"center\",lineHeight:\"2\"},children:[whatsapp.name,\" \\xA0 \",/*#__PURE__*/_jsxs(\"p\",{className:whatsapp.status==='CONNECTED'?classes.online:classes.offline,children:[\"(\",whatsapp.status,\")\"]})]})]})})},key))})})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleClose,color:\"secondary\",disabled:loading,variant:\"outlined\",children:i18n.t(\"newTicketModal.buttons.cancel\")}),/*#__PURE__*/_jsx(ButtonWithSpinner,{variant:\"contained\",type:\"button\",disabled:!selectedContact,onClick:()=>handleSaveTicket(selectedContact.id),color:\"primary\",loading:loading,children:i18n.t(\"newTicketModal.buttons.ok\")})]}),contactModalOpen&&/*#__PURE__*/_jsx(ContactModal,{open:contactModalOpen,initialValues:newContact,onClose:handleCloseContactModal,onSave:handleAddNewContactTicket}),openAlert&&/*#__PURE__*/_jsx(ShowTicketOpen,{isOpen:openAlert,handleClose:handleCloseAlert,user:userTicketOpen,queue:queueTicketOpen})]})});};export default NewTicketModal;","map":{"version":3,"names":["React","useState","useEffect","useContext","useHistory","makeStyles","Button","TextField","Dialog","DialogActions","DialogContent","DialogTitle","Typography","Autocomplete","createFilterOptions","CircularProgress","i18n","api","ButtonWithSpinner","ContactModal","toastError","AuthContext","Grid","ListItemText","MenuItem","Select","toast","Facebook","Instagram","WhatsApp","ShowTicketOpen","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","useStyles","theme","online","fontSize","color","offline","filter","trim","NewTicketModal","_ref","_user$queues","modalOpen","onClose","initialContact","classes","options","setOptions","channelFilter","setChannelFilter","loading","setLoading","searchParam","setSearchParam","selectedContact","setSelectedContact","selectedQueue","setSelectedQueue","selectedWhatsapp","setSelectedWhatsapp","newContact","setNewContact","whatsapps","setWhatsapps","contactModalOpen","setContactModalOpen","user","companyId","whatsappId","openAlert","setOpenAlert","userTicketOpen","setUserTicketOpen","queueTicketOpen","setQueueTicketOpen","id","undefined","delayDebounceFn","setTimeout","fetchContacts","get","params","session","then","_ref2","data","queues","length","clearTimeout","contacts","err","IconChannel","channel","style","verticalAlign","handleClose","handleCloseAlert","handleSaveTicket","contactId","error","queueId","ticket","post","userId","status","_err$response","_err$response2","response","_errorData$ticket","_errorData$ticket$use","_errorData$ticket2","_errorData$ticket2$qu","errorData","name","queue","JSON","parse","_ticket$user","_ticket$queue","handleSelectOption","e","newValue","number","handleCloseContactModal","handleAddNewContactTicket","contact","createAddContactOption","filterOptions","filtered","inputValue","push","concat","renderOption","option","children","component","marginLeft","display","alignItems","lineHeight","t","renderOptionLabel","renderContactAutocomplete","xs","item","fullWidth","clearOnBlur","autoHighlight","freeSolo","clearOnEscape","getOptionLabel","onChange","renderInput","_objectSpread","label","variant","autoFocus","target","value","onKeyPress","key","InputProps","endAdornment","size","open","dividers","width","container","spacing","required","displayEmpty","MenuProps","anchorOrigin","vertical","horizontal","transformOrigin","getContentAnchorEl","renderValue","find","q","map","dense","primary","whatsapp","w","className","onClick","disabled","type","initialValues","onSave","isOpen"],"sources":["/home/deploy/codigologlow/frontend/src/components/NewTicketModal/index.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Autocomplete, { createFilterOptions } from \"@material-ui/lab/Autocomplete\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { i18n } from \"../../translate/i18n\";\nimport api from \"../../services/api\";\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\nimport ContactModal from \"../ContactModal\";\nimport toastError from \"../../errors/toastError\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\nimport { Grid, ListItemText, MenuItem, Select } from \"@material-ui/core\";\nimport { toast } from \"react-toastify\";\nimport { Facebook, Instagram, WhatsApp } from \"@material-ui/icons\";\nimport ShowTicketOpen from \"../ShowTicketOpenModal\";\n\nconst useStyles = makeStyles((theme) => ({\n  online: {\n    fontSize: 11,\n    color: \"#25d366\"\n  },\n  offline: {\n    fontSize: 11,\n    color: \"#e1306c\"\n  }\n}));\n\nconst filter = createFilterOptions({\n  trim: true,\n});\n\nconst NewTicketModal = ({ modalOpen, onClose, initialContact }) => {\n  const classes = useStyles();\n  const [options, setOptions] = useState([]);\n  const [channelFilter, setChannelFilter] = useState(null);\n\n  const [loading, setLoading] = useState(false);\n  const [searchParam, setSearchParam] = useState(\"\");\n  const [selectedContact, setSelectedContact] = useState(null);\n  const [selectedQueue, setSelectedQueue] = useState(\"\");\n  const [selectedWhatsapp, setSelectedWhatsapp] = useState(\"\");\n  const [newContact, setNewContact] = useState({});\n  const [whatsapps, setWhatsapps] = useState([]);\n  const [contactModalOpen, setContactModalOpen] = useState(false);\n  const { user } = useContext(AuthContext);\n  const { companyId, whatsappId } = user;\n\n  const [openAlert, setOpenAlert] = useState(false);\n  const [userTicketOpen, setUserTicketOpen] = useState(\"\");\n  const [queueTicketOpen, setQueueTicketOpen] = useState(\"\");\n\n  useEffect(() => {\n    if (initialContact?.id !== undefined) {\n      setOptions([initialContact]);\n      setSelectedContact(initialContact);\n    }\n  }, [initialContact]);\n\n  useEffect(() => {\n    setLoading(true);\n    const delayDebounceFn = setTimeout(() => {\n      const fetchContacts = async () => {\n        api\n          // .get(`/whatsapp/filter`, { params: { companyId, session: 0, channel: channelFilter } })\n          .get(`/whatsapp`, { params: { companyId, session: 0 } })\n          .then(({ data }) => setWhatsapps(data));\n\n        // .then(({ data }) => {\n        //   const mappedWhatsapps = data.map((whatsapp) => ({\n        //     ...whatsapp,\n        //     selected: false,\n        //   }));\n        //   setWhatsapps(mappedWhatsapps);\n        //   if (channelFilter && mappedWhatsapps.length && mappedWhatsapps?.length === 1 && (user.whatsappId === null || user?.whatsapp?.channel !== channelFilter)) {\n        //     setSelectedWhatsapp(mappedWhatsapps[0].id)\n        //   }\n        // });\n      };\n\n      if (whatsappId !== null && whatsappId !== undefined) {\n        setSelectedWhatsapp(whatsappId)\n      }\n\n      if (user.queues.length === 1) {\n        setSelectedQueue(user.queues[0].id)\n      }\n      fetchContacts();\n      setLoading(false);\n    }, 500);\n    return () => clearTimeout(delayDebounceFn);\n  }, [selectedContact, channelFilter])\n\n  useEffect(() => {\n    if (!modalOpen || searchParam.length < 3) {\n      setLoading(false);\n      return;\n    }\n    setLoading(true);\n    const delayDebounceFn = setTimeout(() => {\n      const fetchContacts = async () => {\n        try {\n          const { data } = await api.get(\"contacts\", {\n            params: { searchParam },\n          });\n          setOptions(data.contacts);\n          setLoading(false);\n        } catch (err) {\n          setLoading(false);\n          toastError(err);\n        }\n      };\n      fetchContacts();\n    }, 500);\n    return () => clearTimeout(delayDebounceFn);\n  }, [searchParam, modalOpen]);\n\n  const IconChannel = (channel) => {\n    switch (channel) {\n      case \"facebook\":\n        return <Facebook style={{ color: \"#3b5998\", verticalAlign: \"middle\" }} />;\n      case \"instagram\":\n        return <Instagram style={{ color: \"#e1306c\", verticalAlign: \"middle\" }} />;\n      case \"whatsapp\":\n        return <WhatsApp style={{ color: \"#25d366\", verticalAlign: \"middle\" }} />\n      case \"whatsapp_oficial\":\n        return <WhatsApp style={{ color: \"#25d366\", verticalAlign: \"middle\" }} />\n      default:\n        return \"error\";\n    }\n  };\n\n  const handleClose = () => {\n    onClose();\n    setSearchParam(\"\");\n    setOpenAlert(false);\n    setUserTicketOpen(\"\");\n    setQueueTicketOpen(\"\");\n    setSelectedContact(null);\n  };\n\n  const handleCloseAlert = () => {\n    setOpenAlert(false);\n    setLoading(false);\n    setOpenAlert(false);\n    setUserTicketOpen(\"\");\n    setQueueTicketOpen(\"\");\n  };\n\n  const handleSaveTicket = async contactId => {\n    if (!contactId) return;\n    // if (selectedQueue === \"\" && user.profile !== 'admin') {\n    if (selectedQueue === \"\") {\n      toast.error(\"Selecione uma fila\");\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const queueId = selectedQueue !== \"\" ? selectedQueue : null;\n      const whatsappId = selectedWhatsapp !== \"\" ? selectedWhatsapp : null;\n      const { data: ticket } = await api.post(\"/tickets\", {\n        contactId: contactId,\n        queueId,\n        whatsappId,\n        userId: user.id,\n        status: \"open\",\n      });\n\n      onClose(ticket);\n    } catch (err) {\n      setLoading(false);\n      \n      // Se for erro 403 (Forbidden), o backend já retornou que outro usuário atende\n      if (err.response?.status === 403) {\n        const errorData = err.response.data;\n        setOpenAlert(true);\n        setUserTicketOpen(errorData.ticket?.user?.name || \"Outro usuário\");\n        setQueueTicketOpen(errorData.ticket?.queue?.name || \"Sem fila\");\n        return;\n      }\n\n      // Para erro 409, tentar parsear o ticket existente\n      if (err.response?.status === 409) {\n        const ticket = JSON.parse(err.response.data.error);\n\n        if (ticket.userId !== user?.id) {\n          setOpenAlert(true);\n          setUserTicketOpen(ticket?.user?.name);\n          setQueueTicketOpen(ticket?.queue?.name);\n        } else {\n          setOpenAlert(false);\n          setUserTicketOpen(\"\");\n          setQueueTicketOpen(\"\");\n          setLoading(false);\n          onClose(ticket);\n        }\n      } else {\n        // Outros erros\n        toastError(err);\n      }\n    }\n    setLoading(false);\n  };\n\n  const handleSelectOption = (e, newValue) => {\n    if (newValue?.number) {\n      setSelectedContact(newValue);\n    } else if (newValue?.name) {\n      setNewContact({ name: newValue.name });\n      setContactModalOpen(true);\n    }\n  };\n\n  const handleCloseContactModal = () => {\n    setContactModalOpen(false);\n  };\n\n  const handleAddNewContactTicket = contact => {\n    setSelectedContact(contact);\n  };\n\n  const createAddContactOption = (filterOptions, params) => {\n    const filtered = filter(filterOptions, params);\n    if (params.inputValue !== \"\" && !loading && searchParam.length >= 3) {\n      filtered.push({\n        name: `${params.inputValue}`,\n      });\n    }\n    return filtered;\n  };\n\n  const renderOption = option => {\n    if (option.number) {\n      return <>\n        {IconChannel(option.channel)}\n        <Typography component=\"span\" style={{ fontSize: 14, marginLeft: \"10px\", display: \"inline-flex\", alignItems: \"center\", lineHeight: \"2\" }}>\n          {option.name} - {option.number}\n        </Typography>\n      </>\n    } else {\n      return `${i18n.t(\"newTicketModal.add\")} ${option.name}`;\n    }\n  };\n\n  const renderOptionLabel = option => {\n    if (option.number) {\n      return `${option.name} - ${option.number}`;\n    } else {\n      return `${option.name}`;\n    }\n  };\n\n  const renderContactAutocomplete = () => {\n    if (initialContact === undefined || initialContact.id === undefined) {\n      return (\n        <Grid xs={12} item>\n          <Autocomplete\n            fullWidth\n            options={options}\n            loading={loading}\n            clearOnBlur\n            autoHighlight\n            freeSolo\n            clearOnEscape\n            getOptionLabel={renderOptionLabel}\n            renderOption={renderOption}\n            filterOptions={createAddContactOption}\n            onChange={(e, newValue) => {\n              setChannelFilter(newValue ? newValue.channel : \"whatsapp\");\n              handleSelectOption(e, newValue)\n            }}\n            renderInput={params => (\n              <TextField\n                {...params}\n                label={i18n.t(\"newTicketModal.fieldLabel\")}\n                variant=\"outlined\"\n                autoFocus\n                onChange={e => setSearchParam(e.target.value)}\n                onKeyPress={e => {\n                  if (loading || !selectedContact) return;\n                  else if (e.key === \"Enter\") {\n                    handleSaveTicket(selectedContact.id);\n                  }\n                }}\n                InputProps={{\n                  ...params.InputProps,\n                  endAdornment: (\n                    <React.Fragment>\n                      {loading ? (\n                        <CircularProgress color=\"inherit\" size={20} />\n                      ) : null}\n                      {params.InputProps.endAdornment}\n                    </React.Fragment>\n                  ),\n                }}\n              />\n            )}\n          />\n        </Grid>\n      )\n    }\n    return null;\n  }\n\n  return (\n    <>\n\n      <Dialog open={modalOpen} onClose={handleClose}>\n        <DialogTitle id=\"form-dialog-title\">\n          {i18n.t(\"newTicketModal.title\")}\n        </DialogTitle>\n        <DialogContent dividers>\n          <Grid style={{ width: 300 }} container spacing={2}>\n            {/* CONTATO */}\n            {renderContactAutocomplete()}\n            {/* FILA */}\n            <Grid xs={12} item>\n              <Select\n                required\n                fullWidth\n                displayEmpty\n                variant=\"outlined\"\n                value={selectedQueue}\n                onChange={(e) => {\n                  setSelectedQueue(e.target.value)\n                }}\n                MenuProps={{\n                  anchorOrigin: {\n                    vertical: \"bottom\",\n                    horizontal: \"left\",\n                  },\n                  transformOrigin: {\n                    vertical: \"top\",\n                    horizontal: \"left\",\n                  },\n                  getContentAnchorEl: null,\n                }}\n                renderValue={() => {\n                  if (selectedQueue === \"\") {\n                    return \"Selecione uma fila\"\n                  }\n                  const queue = user.queues.find(q => q.id === selectedQueue)\n                  return queue.name\n                }}\n              >\n                {user.queues?.length > 0 &&\n                  user.queues.map((queue, key) => (\n                    <MenuItem dense key={key} value={queue.id}>\n                      <ListItemText primary={queue.name} />\n                    </MenuItem>\n                  ))\n                }\n              </Select>\n            </Grid>\n            {/* CONEXAO */}\n            <Grid xs={12} item>\n              <Select\n                required\n                fullWidth\n                displayEmpty\n                variant=\"outlined\"\n                value={selectedWhatsapp}\n                onChange={(e) => {\n                  setSelectedWhatsapp(e.target.value)\n                }}\n                MenuProps={{\n                  anchorOrigin: {\n                    vertical: \"bottom\",\n                    horizontal: \"left\",\n                  },\n                  transformOrigin: {\n                    vertical: \"top\",\n                    horizontal: \"left\",\n                  },\n                  getContentAnchorEl: null,\n                }}\n                renderValue={() => {\n                  if (selectedWhatsapp === \"\") {\n                    return \"Selecione uma Conexão\"\n                  }\n                  const whatsapp = whatsapps.find(w => w.id === selectedWhatsapp)\n                  return whatsapp?.name\n                }}\n              >\n                {whatsapps?.length > 0 &&\n                  whatsapps.map((whatsapp, key) => (\n                    <MenuItem dense key={key} value={whatsapp.id}>\n                      <ListItemText\n                        primary={\n                          <>\n                            {IconChannel(whatsapp.channel)}\n                            <Typography component=\"span\" style={{ fontSize: 14, marginLeft: \"10px\", display: \"inline-flex\", alignItems: \"center\", lineHeight: \"2\" }}>\n                              {whatsapp.name} &nbsp; <p className={(whatsapp.status) === 'CONNECTED' ? classes.online : classes.offline} >({whatsapp.status})</p>\n                            </Typography>\n                          </>\n                        }\n                      />\n                    </MenuItem>\n                  ))}\n              </Select>\n            </Grid>\n          </Grid>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={handleClose}\n            color=\"secondary\"\n            disabled={loading}\n            variant=\"outlined\"\n          >\n            {i18n.t(\"newTicketModal.buttons.cancel\")}\n          </Button>\n          <ButtonWithSpinner\n            variant=\"contained\"\n            type=\"button\"\n            disabled={!selectedContact}\n            onClick={() => handleSaveTicket(selectedContact.id)}\n            color=\"primary\"\n            loading={loading}\n          >\n            {i18n.t(\"newTicketModal.buttons.ok\")}\n          </ButtonWithSpinner>\n        </DialogActions>\n        {contactModalOpen && (\n          <ContactModal\n            open={contactModalOpen}\n            initialValues={newContact}\n            onClose={handleCloseContactModal}\n            onSave={handleAddNewContactTicket}\n          ></ContactModal>\n        )}\n        {openAlert && (\n          <ShowTicketOpen\n            isOpen={openAlert}\n            handleClose={handleCloseAlert}\n            user={userTicketOpen}\n            queue={queueTicketOpen}\n          />\n        )}\n      </Dialog >\n    </>\n  );\n};\nexport default NewTicketModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}