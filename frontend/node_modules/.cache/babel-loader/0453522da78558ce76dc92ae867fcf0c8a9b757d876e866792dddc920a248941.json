{"ast":null,"code":"import _objectSpread from\"/home/deploy/atendechatop/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState,useContext}from'react';import{Chart as ChartJS,CategoryScale,LinearScale,BarElement,Title,Tooltip,Legend}from'chart.js';import{Bar}from'react-chartjs-2';import ChartDataLabels from'chartjs-plugin-datalabels';import{AdapterDateFns}from'@mui/x-date-pickers/AdapterDateFns';import brLocale from'date-fns/locale/pt-BR';import{DatePicker,LocalizationProvider}from'@mui/x-date-pickers';import{Button,Grid,TextField}from'@material-ui/core';import Typography from\"@material-ui/core/Typography\";import api from'../../services/api';import{format}from'date-fns';import{toast}from'react-toastify';import{makeStyles,useTheme}from\"@material-ui/core/styles\";import'./button.css';import{i18n}from'../../translate/i18n';import{AuthContext}from\"../../context/Auth/AuthContext\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const useStyles=makeStyles(theme=>({container:{paddingTop:theme.spacing(1),paddingBottom:theme.padding,paddingLeft:theme.spacing(1),paddingRight:theme.spacing(2)}}));ChartJS.register(CategoryScale,LinearScale,BarElement,Title,Tooltip,Legend,ChartDataLabels);export const options={responsive:true,plugins:{legend:{position:'top',display:false},title:{display:true,text:'Tickets',position:'left'},datalabels:{display:true,anchor:'start',offset:-30,align:\"start\",color:\"#fff\",textStrokeColor:\"#000\",textStrokeWidth:2,font:{size:20,weight:\"bold\"}}}};export const ChatsUser=()=>{const classes=useStyles();const theme=useTheme();const[initialDate,setInitialDate]=useState(new Date());const[finalDate,setFinalDate]=useState(new Date());const[ticketsData,setTicketsData]=useState({data:[]});const{user}=useContext(AuthContext);const companyId=user.companyId;useEffect(()=>{if(companyId){handleGetTicketsInformation();}},[companyId]);const dataCharts={labels:ticketsData&&(ticketsData===null||ticketsData===void 0?void 0:ticketsData.data.length)>0&&(ticketsData===null||ticketsData===void 0?void 0:ticketsData.data.map(item=>item.nome)),datasets:[{data:(ticketsData===null||ticketsData===void 0?void 0:ticketsData.data.length)>0&&(ticketsData===null||ticketsData===void 0?void 0:ticketsData.data.map((item,index)=>{return item.quantidade;})),backgroundColor:theme.palette.primary.main}]};const handleGetTicketsInformation=async()=>{try{const{data}=await api.get(\"/dashboard/ticketsUsers?initialDate=\".concat(format(initialDate,'yyyy-MM-dd'),\"&finalDate=\").concat(format(finalDate,'yyyy-MM-dd'),\"&companyId=\").concat(companyId));setTicketsData(data);}catch(error){toast.error('Erro ao buscar informações dos tickets');}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Typography,{component:\"h2\",variant:\"h6\",color:\"primary\",gutterBottom:true,children:i18n.t(\"dashboard.users.totalCallsUser\")}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(LocalizationProvider,{dateAdapter:AdapterDateFns,adapterLocale:brLocale,children:/*#__PURE__*/_jsx(DatePicker,{value:initialDate,onChange:newValue=>{setInitialDate(newValue);},label:i18n.t(\"dashboard.date.initialDate\"),renderInput:params=>/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({fullWidth:true},params),{},{sx:{width:'20ch'}}))})})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(LocalizationProvider,{dateAdapter:AdapterDateFns,adapterLocale:brLocale,children:/*#__PURE__*/_jsx(DatePicker,{value:finalDate,onChange:newValue=>{setFinalDate(newValue);},label:i18n.t(\"dashboard.date.finalDate\"),renderInput:params=>/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({fullWidth:true},params),{},{sx:{width:'20ch'}}))})})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Button,{style:{backgroundColor:theme.palette.primary.main,top:'10px'},onClick:handleGetTicketsInformation,variant:\"contained\",children:\"Filtrar\"})})]}),/*#__PURE__*/_jsx(Bar,{options:options,data:dataCharts,style:{maxWidth:'100%',maxHeight:'280px'}})]});};","map":{"version":3,"names":["React","useEffect","useState","useContext","Chart","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","Bar","ChartDataLabels","AdapterDateFns","brLocale","DatePicker","LocalizationProvider","Button","Grid","TextField","Typography","api","format","toast","makeStyles","useTheme","i18n","AuthContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","useStyles","theme","container","paddingTop","spacing","paddingBottom","padding","paddingLeft","paddingRight","register","options","responsive","plugins","legend","position","display","title","text","datalabels","anchor","offset","align","color","textStrokeColor","textStrokeWidth","font","size","weight","ChatsUser","classes","initialDate","setInitialDate","Date","finalDate","setFinalDate","ticketsData","setTicketsData","data","user","companyId","handleGetTicketsInformation","dataCharts","labels","length","map","item","nome","datasets","index","quantidade","backgroundColor","palette","primary","main","get","concat","error","children","component","variant","gutterBottom","t","dateAdapter","adapterLocale","value","onChange","newValue","label","renderInput","params","_objectSpread","fullWidth","sx","width","style","top","onClick","maxWidth","maxHeight"],"sources":["/home/deploy/atendechatop/frontend/src/pages/Dashboard/ChartsUser.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport {\n    Chart as ChartJS,\n    CategoryScale,\n    LinearScale,\n    BarElement,\n    Title,\n    Tooltip,\n    Legend,\n} from 'chart.js';\nimport { Bar } from 'react-chartjs-2';\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\nimport { AdapterDateFns } from '@mui/x-date-pickers/AdapterDateFns';\nimport brLocale from 'date-fns/locale/pt-BR';\nimport { DatePicker, LocalizationProvider } from '@mui/x-date-pickers';\nimport { Button, Grid, TextField } from '@material-ui/core';\nimport Typography from \"@material-ui/core/Typography\";\nimport api from '../../services/api';\nimport { format } from 'date-fns';\nimport { toast } from 'react-toastify';\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\nimport './button.css';\nimport { i18n } from '../../translate/i18n';\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\n\nconst useStyles = makeStyles((theme) => ({\n    container: {\n        paddingTop: theme.spacing(1),\n        paddingBottom: theme.padding,\n        paddingLeft: theme.spacing(1),\n        paddingRight: theme.spacing(2),\n    }\n}));\n\nChartJS.register(\n    CategoryScale,\n    LinearScale,\n    BarElement,\n    Title,\n    Tooltip,\n    Legend,\n    ChartDataLabels\n);\n\nexport const options = {\n    responsive: true,\n    plugins: {\n        legend: {\n            position: 'top',\n            display: false,\n        },\n        title: {\n            display: true,\n            text: 'Tickets',\n            position: 'left',\n        },\n        datalabels: {\n            display: true,\n            anchor: 'start',\n            offset: -30,\n            align: \"start\",\n            color: \"#fff\",\n            textStrokeColor: \"#000\",\n            textStrokeWidth: 2,\n            font: {\n                size: 20,\n                weight: \"bold\"\n\n            },\n        }\n    },\n};\n\nexport const ChatsUser = () => {\n    const classes = useStyles();\n    const theme = useTheme();\n    const [initialDate, setInitialDate] = useState(new Date());\n    const [finalDate, setFinalDate] = useState(new Date());\n    const [ticketsData, setTicketsData] = useState({ data: [] });\n    const { user } = useContext(AuthContext);\n\n    const companyId = user.companyId;\n\n    useEffect(() => {\n        if (companyId) {\n            handleGetTicketsInformation();\n        }\n    }, [companyId]);\n\n    const dataCharts = {\n\n        labels: ticketsData && ticketsData?.data.length > 0 && ticketsData?.data.map((item) => item.nome),\n        datasets: [\n            {\n                data: ticketsData?.data.length > 0 && ticketsData?.data.map((item, index) => {\n                    return item.quantidade\n                }),\n                backgroundColor: theme.palette.primary.main,\n            },\n\n        ],\n    };\n\n    const handleGetTicketsInformation = async () => {\n        try {\n\n            const { data } = await api.get(`/dashboard/ticketsUsers?initialDate=${format(initialDate, 'yyyy-MM-dd')}&finalDate=${format(finalDate, 'yyyy-MM-dd')}&companyId=${companyId}`);\n            setTicketsData(data);\n        } catch (error) {\n            toast.error('Erro ao buscar informações dos tickets');\n        }\n    }\n\n    return (\n        <>\n            <Typography component=\"h2\" variant=\"h6\" color=\"primary\" gutterBottom>\n                {i18n.t(\"dashboard.users.totalCallsUser\")}\n            </Typography>\n\n            <Grid container spacing={2}>\n                <Grid item>\n                    <LocalizationProvider dateAdapter={AdapterDateFns} adapterLocale={brLocale}>\n                        <DatePicker\n                            value={initialDate}\n                            onChange={(newValue) => { setInitialDate(newValue) }}\n                            label={i18n.t(\"dashboard.date.initialDate\")}\n                            renderInput={(params) => <TextField fullWidth {...params} sx={{ width: '20ch' }} />}\n\n                        />\n                    </LocalizationProvider>\n                </Grid>\n                <Grid item>\n                    <LocalizationProvider dateAdapter={AdapterDateFns} adapterLocale={brLocale}>\n                        <DatePicker\n                            value={finalDate}\n                            onChange={(newValue) => { setFinalDate(newValue) }}\n                            label={i18n.t(\"dashboard.date.finalDate\")}\n                            renderInput={(params) => <TextField fullWidth {...params} sx={{ width: '20ch' }} />}\n                        />\n                    </LocalizationProvider>\n                </Grid>\n                <Grid item>\n                    <Button style={{ backgroundColor: theme.palette.primary.main, top: '10px' }} onClick={handleGetTicketsInformation} variant='contained'>Filtrar</Button>\n                </Grid>\n            </Grid>\n            <Bar options={options} data={dataCharts} style={{ maxWidth: '100%', maxHeight: '280px', }} />\n        </>\n    );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}