{"ast":null,"code":"import _objectSpread from\"/home/deploy/atendechatop/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useCallback,useContext,useEffect}from\"react\";import{toast}from\"react-toastify\";import{format,parseISO,set}from\"date-fns\";import Menu from\"@material-ui/core/Menu\";import MenuItem from\"@material-ui/core/MenuItem\";import PopupState,{bindTrigger,bindMenu}from\"material-ui-popup-state\";import{Stack}from\"@mui/material\";import{makeStyles}from\"@material-ui/core/styles\";import{useHistory}from\"react-router-dom\";import{green}from\"@material-ui/core/colors\";import{Button,TableBody,TableRow,TableCell,IconButton,Table,TableHead,Paper,Tooltip,Typography,CircularProgress,Divider}from\"@material-ui/core\";import{Edit,CheckCircle,SignalCellularConnectedNoInternet2Bar,SignalCellularConnectedNoInternet0Bar,SignalCellular4Bar,CropFree,DeleteOutline,Facebook,Instagram,WhatsApp}from\"@material-ui/icons\";import FacebookLogin from\"react-facebook-login/dist/facebook-login-render-props\";import MainContainer from\"../../components/MainContainer\";import MainHeader from\"../../components/MainHeader\";import MainHeaderButtonsWrapper from\"../../components/MainHeaderButtonsWrapper\";import Title from\"../../components/Title\";import TableRowSkeleton from\"../../components/TableRowSkeleton\";import{AuthContext}from\"../../context/Auth/AuthContext\";import useCompanies from\"../../hooks/useCompanies\";import api from\"../../services/api\";import WhatsAppModal from\"../../components/WhatsAppModal\";import WhatsAppModalCompany from\"../../components/CompanyWhatsapps\";import ConfirmationModal from\"../../components/ConfirmationModal\";import QrcodeModal from\"../../components/QrcodeModal\";import{i18n}from\"../../translate/i18n\";import{WhatsAppsContext}from\"../../context/WhatsApp/WhatsAppsContext\";import toastError from\"../../errors/toastError\";import ForbiddenPage from\"../../components/ForbiddenPage\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const useStyles=makeStyles(theme=>({mainPaper:_objectSpread({flex:1,padding:theme.spacing(1),overflowY:\"scroll\",borderRadius:\"10px\",boxShadow:\"rgba(0, 0, 0, 0.1) 0px 4px 12px\"},theme.scrollbarStyles),customTableCell:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},tooltip:{backgroundColor:\"#f5f5f9\",color:\"rgba(0, 0, 0, 0.87)\",fontSize:theme.typography.pxToRem(14),border:\"1px solid #dadde9\",maxWidth:450},tooltipPopper:{textAlign:\"center\"},buttonProgress:{color:green[500]},TableHead:{backgroundColor:theme.palette.barraSuperior,//\"#3d3d3d\",\ncolor:\"textSecondary\",borderRadius:\"5px\"}}));const CustomToolTip=_ref=>{let{title,content,children}=_ref;const classes=useStyles();return/*#__PURE__*/_jsx(Tooltip,{arrow:true,classes:{tooltip:classes.tooltip,popper:classes.tooltipPopper},title:/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,color:\"inherit\",children:title}),content&&/*#__PURE__*/_jsx(Typography,{children:content})]}),children:children});};const IconChannel=channel=>{switch(channel){case\"facebook\":return/*#__PURE__*/_jsx(Facebook,{});case\"instagram\":return/*#__PURE__*/_jsx(Instagram,{});case\"whatsapp\":return/*#__PURE__*/_jsx(WhatsApp,{});default:return\"error\";}};const AllConnections=()=>{const classes=useStyles();const{user,socket}=useContext(AuthContext);const{list}=useCompanies();const[loadingWhatsapp,setLoadingWhatsapp]=useState(true);const[loadingComp,setLoadingComp]=useState(false);const[whats,setWhats]=useState([]);const[whatsAppModalOpen,setWhatsAppModalOpen]=useState(false);const[companies,setCompanies]=useState([]);const[qrModalOpen,setQrModalOpen]=useState(false);const[selectedWhatsApp,setSelectedWhatsApp]=useState(null);const[confirmModalOpen,setConfirmModalOpen]=useState(false);const[filterConnections,setFilterConnections]=useState([]);const[companyWhatsApps,setCompanyWhatsApps]=useState(null);const confirmationModalInitialState={action:\"\",title:\"\",message:\"\",whatsAppId:\"\",open:false};const[confirmModalInfo,setConfirmModalInfo]=useState(confirmationModalInitialState);const history=useHistory();if(!user.super){history.push(\"/tickets\");}useEffect(()=>{setLoadingWhatsapp(true);const fetchSession=async()=>{try{const{data}=await api.get(\"/whatsapp/all/?session=0\");setWhats(data);setLoadingWhatsapp(false);}catch(err){setLoadingWhatsapp(false);toastError(err);}};fetchSession();},[]);const responseFacebook=response=>{if(response.status!==\"unknown\"){const{accessToken,id}=response;api.post(\"/facebook\",{facebookUserId:id,facebookUserToken:accessToken}).then(response=>{toast.success(i18n.t(\"connections.facebook.success\"));}).catch(error=>{toastError(error);});}};useEffect(()=>{loadCompanies();},[]);const loadCompanies=async()=>{setLoadingComp(true);try{const companyList=await list();setCompanies(companyList);}catch(e){toast.error(\"Não foi possível carregar a lista de registros\");}setLoadingComp(false);};const responseInstagram=response=>{if(response.status!==\"unknown\"){const{accessToken,id}=response;api.post(\"/facebook\",{addInstagram:true,facebookUserId:id,facebookUserToken:accessToken}).then(response=>{toast.success(i18n.t(\"connections.facebook.success\"));}).catch(error=>{toastError(error);});}};const handleStartWhatsAppSession=async whatsAppId=>{try{await api.post(\"/whatsappsession/\".concat(whatsAppId));}catch(err){toastError(err);}};const handleRequestNewQrCode=async whatsAppId=>{try{await api.put(\"/whatsappsession/\".concat(whatsAppId));}catch(err){toastError(err);}};const handleOpenWhatsAppModal=(whatsappsFilter,comp)=>{setSelectedWhatsApp(null);setWhatsAppModalOpen(true);if((whatsappsFilter===null||whatsappsFilter===void 0?void 0:whatsappsFilter.length)>0){setFilterConnections(whatsappsFilter);setCompanyWhatsApps(comp);}};const handleCloseWhatsAppModal=useCallback(()=>{setWhatsAppModalOpen(false);setSelectedWhatsApp(null);setFilterConnections([]);setCompanyWhatsApps(null);},[setSelectedWhatsApp,setWhatsAppModalOpen]);const handleOpenQrModal=whatsApp=>{setSelectedWhatsApp(whatsApp);setQrModalOpen(true);};const handleCloseQrModal=useCallback(()=>{setSelectedWhatsApp(null);setQrModalOpen(false);},[setQrModalOpen,setSelectedWhatsApp]);const handleEditWhatsApp=whatsApp=>{setSelectedWhatsApp(whatsApp);setWhatsAppModalOpen(true);};const handleOpenConfirmationModal=(action,whatsAppId)=>{if(action===\"disconnect\"){setConfirmModalInfo({action:action,title:i18n.t(\"connections.confirmationModal.disconnectTitle\"),message:i18n.t(\"connections.confirmationModal.disconnectMessage\"),whatsAppId:whatsAppId});}if(action===\"delete\"){setConfirmModalInfo({action:action,title:i18n.t(\"connections.confirmationModal.deleteTitle\"),message:i18n.t(\"connections.confirmationModal.deleteMessage\"),whatsAppId:whatsAppId});}setConfirmModalOpen(true);};const handleSubmitConfirmationModal=async()=>{if(confirmModalInfo.action===\"disconnect\"){try{await api.delete(\"/whatsappsession/\".concat(confirmModalInfo.whatsAppId));}catch(err){toastError(err);}}if(confirmModalInfo.action===\"delete\"){try{await api.delete(\"/whatsapp/\".concat(confirmModalInfo.whatsAppId));toast.success(i18n.t(\"connections.toasts.deleted\"));}catch(err){toastError(err);}}setConfirmModalInfo(confirmationModalInitialState);};const renderActionButtons=whatsApp=>{return/*#__PURE__*/_jsxs(_Fragment,{children:[whatsApp.status===\"qrcode\"&&/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"contained\",color:\"primary\",onClick:()=>handleOpenQrModal(whatsApp),children:i18n.t(\"connections.buttons.qrcode\")}),whatsApp.status===\"DISCONNECTED\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"outlined\",color:\"primary\",onClick:()=>handleStartWhatsAppSession(whatsApp.id),children:i18n.t(\"connections.buttons.tryAgain\")}),\" \",/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"outlined\",color:\"secondary\",onClick:()=>handleRequestNewQrCode(whatsApp.id),children:i18n.t(\"connections.buttons.newQr\")})]}),(whatsApp.status===\"CONNECTED\"||whatsApp.status===\"PAIRING\"||whatsApp.status===\"TIMEOUT\")&&/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"outlined\",color:\"secondary\",onClick:()=>{handleOpenConfirmationModal(\"disconnect\",whatsApp.id);},children:i18n.t(\"connections.buttons.disconnect\")}),whatsApp.status===\"OPENING\"&&/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"outlined\",disabled:true,color:\"default\",children:i18n.t(\"connections.buttons.connecting\")})]});};const renderStatusToolTips=whatsApp=>{return/*#__PURE__*/_jsxs(\"div\",{className:classes.customTableCell,children:[whatsApp.status===\"DISCONNECTED\"&&/*#__PURE__*/_jsx(CustomToolTip,{title:i18n.t(\"connections.toolTips.disconnected.title\"),content:i18n.t(\"connections.toolTips.disconnected.content\"),children:/*#__PURE__*/_jsx(SignalCellularConnectedNoInternet0Bar,{color:\"secondary\"})}),whatsApp.status===\"OPENING\"&&/*#__PURE__*/_jsx(CircularProgress,{size:24,className:classes.buttonProgress}),whatsApp.status===\"qrcode\"&&/*#__PURE__*/_jsx(CustomToolTip,{title:i18n.t(\"connections.toolTips.qrcode.title\"),content:i18n.t(\"connections.toolTips.qrcode.content\"),children:/*#__PURE__*/_jsx(CropFree,{})}),whatsApp.status===\"CONNECTED\"&&/*#__PURE__*/_jsx(CustomToolTip,{title:i18n.t(\"connections.toolTips.connected.title\"),children:/*#__PURE__*/_jsx(SignalCellular4Bar,{style:{color:green[500]}})}),(whatsApp.status===\"TIMEOUT\"||whatsApp.status===\"PAIRING\")&&/*#__PURE__*/_jsx(CustomToolTip,{title:i18n.t(\"connections.toolTips.timeout.title\"),content:i18n.t(\"connections.toolTips.timeout.content\"),children:/*#__PURE__*/_jsx(SignalCellularConnectedNoInternet2Bar,{color:\"secondary\"})})]});};return/*#__PURE__*/_jsxs(MainContainer,{children:[/*#__PURE__*/_jsx(ConfirmationModal,{title:confirmModalInfo.title,open:confirmModalOpen,onClose:setConfirmModalOpen,onConfirm:handleSubmitConfirmationModal,children:confirmModalInfo.message}),/*#__PURE__*/_jsx(QrcodeModal,{open:qrModalOpen,onClose:handleCloseQrModal,whatsAppId:!whatsAppModalOpen&&(selectedWhatsApp===null||selectedWhatsApp===void 0?void 0:selectedWhatsApp.id)}),/*#__PURE__*/_jsx(WhatsAppModalCompany,{open:whatsAppModalOpen,onClose:handleCloseWhatsAppModal,filteredWhatsapps:filterConnections,companyInfos:companyWhatsApps,whatsAppId:!qrModalOpen&&(selectedWhatsApp===null||selectedWhatsApp===void 0?void 0:selectedWhatsApp.id)}),user.profile===\"user\"?/*#__PURE__*/_jsx(ForbiddenPage,{}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Paper,{className:classes.mainPaper,style:{overflow:\"hidden\"},variant:\"outlined\",children:[/*#__PURE__*/_jsxs(MainHeader,{children:[/*#__PURE__*/_jsxs(Stack,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",color:\"black\",style:{fontWeight:\"bold\",marginLeft:\"10px\",marginTop:\"10px\"},gutterBottom:true,children:i18n.t(\"connections.title\")}),/*#__PURE__*/_jsx(Typography,{style:{marginTop:\"-10px\",marginLeft:\"10px\"},variant:\"caption\",color:\"textSecondary\",children:i18n.t(\"connections.connectYourServiceChannelsToReceiveMessagesAndStartConversationsWithYourCustomers\")})]}),/*#__PURE__*/_jsx(MainHeaderButtonsWrapper,{children:/*#__PURE__*/_jsx(PopupState,{variant:\"popover\",popupId:\"demo-popup-menu\",children:popupState=>/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(Menu,_objectSpread(_objectSpread({},bindMenu(popupState)),{},{children:[/*#__PURE__*/_jsxs(MenuItem,{onClick:()=>{handleOpenWhatsAppModal();popupState.close();},children:[/*#__PURE__*/_jsx(WhatsApp,{fontSize:\"small\",style:{marginRight:\"10px\"}}),\"WhatsApp\"]}),/*#__PURE__*/_jsx(FacebookLogin,{appId:process.env.REACT_APP_FACEBOOK_APP_ID,autoLoad:false,fields:\"name,email,picture\",version:\"13.0\",scope:\"public_profile,pages_messaging,pages_show_list,pages_manage_metadata,pages_read_engagement,business_management\",callback:responseFacebook,render:renderProps=>/*#__PURE__*/_jsxs(MenuItem,{onClick:renderProps.onClick,children:[/*#__PURE__*/_jsx(Facebook,{fontSize:\"small\",style:{marginRight:\"10px\"}}),\"Facebook\"]})}),/*#__PURE__*/_jsx(FacebookLogin,{appId:process.env.REACT_APP_FACEBOOK_APP_ID,autoLoad:false,fields:\"name,email,picture\",version:\"13.0\",scope:\"public_profile,instagram_basic,instagram_manage_messages,pages_messaging,pages_show_list,pages_manage_metadata,pages_read_engagement,business_management\",callback:responseInstagram,render:renderProps=>/*#__PURE__*/_jsxs(MenuItem,{onClick:renderProps.onClick,children:[/*#__PURE__*/_jsx(Instagram,{fontSize:\"small\",style:{marginRight:\"10px\"}}),\"Instagram\"]})})]}))})})})]}),/*#__PURE__*/_jsx(Stack,{style:{overflowY:\"auto\",padding:\"20px\",backgroundColor:\"rgb(244 244 244 / 53%)\",borderRadius:\"5px\",height:\"93%\"},children:/*#__PURE__*/_jsx(Paper,{children:/*#__PURE__*/_jsxs(Table,{size:\"small\",children:[/*#__PURE__*/_jsx(TableHead,{className:classes.TableHead,children:/*#__PURE__*/_jsxs(TableRow,{style:{color:\"#fff\"},children:[/*#__PURE__*/_jsx(TableCell,{style:{color:\"#fff\"},align:\"center\",children:i18n.t(\"connections.client\")}),/*#__PURE__*/_jsx(TableCell,{style:{color:\"#fff\"},align:\"center\",children:i18n.t(\"connections.connectedConnections\")}),/*#__PURE__*/_jsx(TableCell,{style:{color:\"#fff\"},align:\"center\",children:i18n.t(\"connections.disconnectedConnections\")}),/*#__PURE__*/_jsx(TableCell,{style:{color:\"#fff\"},align:\"center\",children:i18n.t(\"connections.totalConnections\")}),user.profile===\"admin\"&&/*#__PURE__*/_jsx(TableCell,{style:{color:\"#fff\"},align:\"center\",children:i18n.t(\"connections.table.actions\")})]})}),/*#__PURE__*/_jsx(TableBody,{children:loadingWhatsapp?/*#__PURE__*/_jsx(TableRowSkeleton,{}):/*#__PURE__*/_jsxs(_Fragment,{children:[console.log(companies,whats),(companies===null||companies===void 0?void 0:companies.length)>0&&companies.map(company=>/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:company===null||company===void 0?void 0:company.name}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:(whats===null||whats===void 0?void 0:whats.length)&&whats.filter(item=>(item===null||item===void 0?void 0:item.companyId)===(company===null||company===void 0?void 0:company.id)&&(item===null||item===void 0?void 0:item.status)===\"CONNECTED\").length}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:(whats===null||whats===void 0?void 0:whats.length)&&whats.filter(item=>(item===null||item===void 0?void 0:item.companyId)===(company===null||company===void 0?void 0:company.id)&&(item===null||item===void 0?void 0:item.status)!==\"CONNECTED\").length}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:(whats===null||whats===void 0?void 0:whats.length)&&whats.filter(item=>(item===null||item===void 0?void 0:item.companyId)===(company===null||company===void 0?void 0:company.id)).length}),user.profile===\"admin\"&&/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:()=>handleOpenWhatsAppModal(whats.filter(item=>(item===null||item===void 0?void 0:item.companyId)===(company===null||company===void 0?void 0:company.id)),company),children:/*#__PURE__*/_jsx(Edit,{})})})]},company.id)),/*#__PURE__*/_jsxs(TableRow,{className:classes.TableHead,children:[/*#__PURE__*/_jsx(TableCell,{style:{color:\"#fff\"},align:\"center\",children:i18n.t(\"connections.total\")}),/*#__PURE__*/_jsx(TableCell,{style:{color:\"#fff\"},align:\"center\",children:(whats===null||whats===void 0?void 0:whats.length)&&whats.filter(item=>(item===null||item===void 0?void 0:item.status)===\"CONNECTED\").length}),/*#__PURE__*/_jsx(TableCell,{style:{color:\"#fff\"},align:\"center\",children:(whats===null||whats===void 0?void 0:whats.length)&&whats.filter(item=>(item===null||item===void 0?void 0:item.status)!==\"CONNECTED\").length}),/*#__PURE__*/_jsx(TableCell,{style:{color:\"#fff\"},align:\"center\",children:(whats===null||whats===void 0?void 0:whats.length)&&whats.length}),user.profile===\"admin\"&&/*#__PURE__*/_jsx(TableCell,{style:{color:\"#fff\"},align:\"center\"})]})]})})]})})})]})})]});};export default AllConnections;","map":{"version":3,"names":["React","useState","useCallback","useContext","useEffect","toast","format","parseISO","set","Menu","MenuItem","PopupState","bindTrigger","bindMenu","Stack","makeStyles","useHistory","green","Button","TableBody","TableRow","TableCell","IconButton","Table","TableHead","Paper","Tooltip","Typography","CircularProgress","Divider","Edit","CheckCircle","SignalCellularConnectedNoInternet2Bar","SignalCellularConnectedNoInternet0Bar","SignalCellular4Bar","CropFree","DeleteOutline","Facebook","Instagram","WhatsApp","FacebookLogin","MainContainer","MainHeader","MainHeaderButtonsWrapper","Title","TableRowSkeleton","AuthContext","useCompanies","api","WhatsAppModal","WhatsAppModalCompany","ConfirmationModal","QrcodeModal","i18n","WhatsAppsContext","toastError","ForbiddenPage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","useStyles","theme","mainPaper","_objectSpread","flex","padding","spacing","overflowY","borderRadius","boxShadow","scrollbarStyles","customTableCell","display","alignItems","justifyContent","tooltip","backgroundColor","color","fontSize","typography","pxToRem","border","maxWidth","tooltipPopper","textAlign","buttonProgress","palette","barraSuperior","CustomToolTip","_ref","title","content","children","classes","arrow","popper","gutterBottom","IconChannel","channel","AllConnections","user","socket","list","loadingWhatsapp","setLoadingWhatsapp","loadingComp","setLoadingComp","whats","setWhats","whatsAppModalOpen","setWhatsAppModalOpen","companies","setCompanies","qrModalOpen","setQrModalOpen","selectedWhatsApp","setSelectedWhatsApp","confirmModalOpen","setConfirmModalOpen","filterConnections","setFilterConnections","companyWhatsApps","setCompanyWhatsApps","confirmationModalInitialState","action","message","whatsAppId","open","confirmModalInfo","setConfirmModalInfo","history","super","push","fetchSession","data","get","err","responseFacebook","response","status","accessToken","id","post","facebookUserId","facebookUserToken","then","success","t","catch","error","loadCompanies","companyList","e","responseInstagram","addInstagram","handleStartWhatsAppSession","concat","handleRequestNewQrCode","put","handleOpenWhatsAppModal","whatsappsFilter","comp","length","handleCloseWhatsAppModal","handleOpenQrModal","whatsApp","handleCloseQrModal","handleEditWhatsApp","handleOpenConfirmationModal","handleSubmitConfirmationModal","delete","renderActionButtons","size","variant","onClick","disabled","renderStatusToolTips","className","style","onClose","onConfirm","filteredWhatsapps","companyInfos","profile","overflow","fontWeight","marginLeft","marginTop","popupId","popupState","close","marginRight","appId","process","env","REACT_APP_FACEBOOK_APP_ID","autoLoad","fields","version","scope","callback","render","renderProps","height","align","console","log","map","company","name","filter","item","companyId"],"sources":["/home/deploy/atendechatop/frontend/src/pages/AllConnections/index.js"],"sourcesContent":["import React, { useState, useCallback, useContext, useEffect } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { format, parseISO, set } from \"date-fns\";\n\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport PopupState, { bindTrigger, bindMenu } from \"material-ui-popup-state\";\nimport { Stack } from \"@mui/material\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useHistory } from \"react-router-dom\";\nimport { green } from \"@material-ui/core/colors\";\nimport {\n  Button,\n  TableBody,\n  TableRow,\n  TableCell,\n  IconButton,\n  Table,\n  TableHead,\n  Paper,\n  Tooltip,\n  Typography,\n  CircularProgress,\n  Divider,\n} from \"@material-ui/core\";\nimport {\n  Edit,\n  CheckCircle,\n  SignalCellularConnectedNoInternet2Bar,\n  SignalCellularConnectedNoInternet0Bar,\n  SignalCellular4Bar,\n  CropFree,\n  DeleteOutline,\n  Facebook,\n  Instagram,\n  WhatsApp,\n} from \"@material-ui/icons\";\n\nimport FacebookLogin from \"react-facebook-login/dist/facebook-login-render-props\";\n\nimport MainContainer from \"../../components/MainContainer\";\nimport MainHeader from \"../../components/MainHeader\";\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\nimport Title from \"../../components/Title\";\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\nimport useCompanies from \"../../hooks/useCompanies\";\nimport api from \"../../services/api\";\nimport WhatsAppModal from \"../../components/WhatsAppModal\";\nimport WhatsAppModalCompany from \"../../components/CompanyWhatsapps\";\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\nimport QrcodeModal from \"../../components/QrcodeModal\";\nimport { i18n } from \"../../translate/i18n\";\nimport { WhatsAppsContext } from \"../../context/WhatsApp/WhatsAppsContext\";\nimport toastError from \"../../errors/toastError\";\nimport ForbiddenPage from \"../../components/ForbiddenPage\";\n\nconst useStyles = makeStyles((theme) => ({\n  mainPaper: {\n    flex: 1,\n    padding: theme.spacing(1),\n    overflowY: \"scroll\",\n    borderRadius: \"10px\",\n    boxShadow: \"rgba(0, 0, 0, 0.1) 0px 4px 12px\",\n    ...theme.scrollbarStyles,\n  },\n  customTableCell: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  tooltip: {\n    backgroundColor: \"#f5f5f9\",\n    color: \"rgba(0, 0, 0, 0.87)\",\n    fontSize: theme.typography.pxToRem(14),\n    border: \"1px solid #dadde9\",\n    maxWidth: 450,\n  },\n  tooltipPopper: {\n    textAlign: \"center\",\n  },\n  buttonProgress: {\n    color: green[500],\n  },\n  TableHead: {\n    backgroundColor: theme.palette.barraSuperior, //\"#3d3d3d\",\n    color: \"textSecondary\",\n    borderRadius: \"5px\",\n  },\n}));\n\nconst CustomToolTip = ({ title, content, children }) => {\n  const classes = useStyles();\n\n  return (\n    <Tooltip\n      arrow\n      classes={{\n        tooltip: classes.tooltip,\n        popper: classes.tooltipPopper,\n      }}\n      title={\n        <React.Fragment>\n          <Typography gutterBottom color=\"inherit\">\n            {title}\n          </Typography>\n          {content && <Typography>{content}</Typography>}\n        </React.Fragment>\n      }\n    >\n      {children}\n    </Tooltip>\n  );\n};\n\nconst IconChannel = (channel) => {\n  switch (channel) {\n    case \"facebook\":\n      return <Facebook />;\n    case \"instagram\":\n      return <Instagram />;\n    case \"whatsapp\":\n      return <WhatsApp />;\n    default:\n      return \"error\";\n  }\n};\n\nconst AllConnections = () => {\n  const classes = useStyles();\n  const { user, socket } = useContext(AuthContext);\n  const { list } = useCompanies();\n  const [loadingWhatsapp, setLoadingWhatsapp] = useState(true);\n  const [loadingComp, setLoadingComp] = useState(false);\n  const [whats, setWhats] = useState([]);\n  const [whatsAppModalOpen, setWhatsAppModalOpen] = useState(false);\n  const [companies, setCompanies] = useState([]);\n  const [qrModalOpen, setQrModalOpen] = useState(false);\n  const [selectedWhatsApp, setSelectedWhatsApp] = useState(null);\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\n  const [filterConnections, setFilterConnections] = useState([]);\n  const [companyWhatsApps, setCompanyWhatsApps] = useState(null);\n  const confirmationModalInitialState = {\n    action: \"\",\n    title: \"\",\n    message: \"\",\n    whatsAppId: \"\",\n    open: false,\n  };\n  const [confirmModalInfo, setConfirmModalInfo] = useState(\n    confirmationModalInitialState\n  );\n\n  const history = useHistory();\n  if (!user.super) {\n    history.push(\"/tickets\");\n  }\n\n  useEffect(() => {\n    setLoadingWhatsapp(true);\n    const fetchSession = async () => {\n      try {\n        const { data } = await api.get(\"/whatsapp/all/?session=0\");\n        setWhats(data);\n        setLoadingWhatsapp(false);\n      } catch (err) {\n        setLoadingWhatsapp(false);\n        toastError(err);\n      }\n    };\n    fetchSession();\n  }, []);\n\n  const responseFacebook = (response) => {\n    if (response.status !== \"unknown\") {\n      const { accessToken, id } = response;\n\n      api\n        .post(\"/facebook\", {\n          facebookUserId: id,\n          facebookUserToken: accessToken,\n        })\n        .then((response) => {\n          toast.success(i18n.t(\"connections.facebook.success\"));\n        })\n        .catch((error) => {\n          toastError(error);\n        });\n    }\n  };\n  useEffect(() => {\n    loadCompanies();\n  }, []);\n  const loadCompanies = async () => {\n    setLoadingComp(true);\n    try {\n      const companyList = await list();\n      setCompanies(companyList);\n    } catch (e) {\n      toast.error(\"Não foi possível carregar a lista de registros\");\n    }\n    setLoadingComp(false);\n  };\n\n  const responseInstagram = (response) => {\n    if (response.status !== \"unknown\") {\n      const { accessToken, id } = response;\n\n      api\n        .post(\"/facebook\", {\n          addInstagram: true,\n          facebookUserId: id,\n          facebookUserToken: accessToken,\n        })\n        .then((response) => {\n          toast.success(i18n.t(\"connections.facebook.success\"));\n        })\n        .catch((error) => {\n          toastError(error);\n        });\n    }\n  };\n\n  const handleStartWhatsAppSession = async (whatsAppId) => {\n    try {\n      await api.post(`/whatsappsession/${whatsAppId}`);\n    } catch (err) {\n      toastError(err);\n    }\n  };\n\n  const handleRequestNewQrCode = async (whatsAppId) => {\n    try {\n      await api.put(`/whatsappsession/${whatsAppId}`);\n    } catch (err) {\n      toastError(err);\n    }\n  };\n\n  const handleOpenWhatsAppModal = (whatsappsFilter, comp) => {\n    setSelectedWhatsApp(null);\n    setWhatsAppModalOpen(true);\n    if (whatsappsFilter?.length > 0) {\n      setFilterConnections(whatsappsFilter);\n      setCompanyWhatsApps(comp);\n    }\n  };\n\n  const handleCloseWhatsAppModal = useCallback(() => {\n    setWhatsAppModalOpen(false);\n    setSelectedWhatsApp(null);\n    setFilterConnections([]);\n    setCompanyWhatsApps(null);\n  }, [setSelectedWhatsApp, setWhatsAppModalOpen]);\n\n  const handleOpenQrModal = (whatsApp) => {\n    setSelectedWhatsApp(whatsApp);\n    setQrModalOpen(true);\n  };\n\n  const handleCloseQrModal = useCallback(() => {\n    setSelectedWhatsApp(null);\n    setQrModalOpen(false);\n  }, [setQrModalOpen, setSelectedWhatsApp]);\n\n  const handleEditWhatsApp = (whatsApp) => {\n    setSelectedWhatsApp(whatsApp);\n    setWhatsAppModalOpen(true);\n  };\n\n  const handleOpenConfirmationModal = (action, whatsAppId) => {\n    if (action === \"disconnect\") {\n      setConfirmModalInfo({\n        action: action,\n        title: i18n.t(\"connections.confirmationModal.disconnectTitle\"),\n        message: i18n.t(\"connections.confirmationModal.disconnectMessage\"),\n        whatsAppId: whatsAppId,\n      });\n    }\n\n    if (action === \"delete\") {\n      setConfirmModalInfo({\n        action: action,\n        title: i18n.t(\"connections.confirmationModal.deleteTitle\"),\n        message: i18n.t(\"connections.confirmationModal.deleteMessage\"),\n        whatsAppId: whatsAppId,\n      });\n    }\n    setConfirmModalOpen(true);\n  };\n\n  const handleSubmitConfirmationModal = async () => {\n    if (confirmModalInfo.action === \"disconnect\") {\n      try {\n        await api.delete(`/whatsappsession/${confirmModalInfo.whatsAppId}`);\n      } catch (err) {\n        toastError(err);\n      }\n    }\n\n    if (confirmModalInfo.action === \"delete\") {\n      try {\n        await api.delete(`/whatsapp/${confirmModalInfo.whatsAppId}`);\n        toast.success(i18n.t(\"connections.toasts.deleted\"));\n      } catch (err) {\n        toastError(err);\n      }\n    }\n\n    setConfirmModalInfo(confirmationModalInitialState);\n  };\n\n  const renderActionButtons = (whatsApp) => {\n    return (\n      <>\n        {whatsApp.status === \"qrcode\" && (\n          <Button\n            size=\"small\"\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={() => handleOpenQrModal(whatsApp)}\n          >\n            {i18n.t(\"connections.buttons.qrcode\")}\n          </Button>\n        )}\n        {whatsApp.status === \"DISCONNECTED\" && (\n          <>\n            <Button\n              size=\"small\"\n              variant=\"outlined\"\n              color=\"primary\"\n              onClick={() => handleStartWhatsAppSession(whatsApp.id)}\n            >\n              {i18n.t(\"connections.buttons.tryAgain\")}\n            </Button>{\" \"}\n            <Button\n              size=\"small\"\n              variant=\"outlined\"\n              color=\"secondary\"\n              onClick={() => handleRequestNewQrCode(whatsApp.id)}\n            >\n              {i18n.t(\"connections.buttons.newQr\")}\n            </Button>\n          </>\n        )}\n        {(whatsApp.status === \"CONNECTED\" ||\n          whatsApp.status === \"PAIRING\" ||\n          whatsApp.status === \"TIMEOUT\") && (\n          <Button\n            size=\"small\"\n            variant=\"outlined\"\n            color=\"secondary\"\n            onClick={() => {\n              handleOpenConfirmationModal(\"disconnect\", whatsApp.id);\n            }}\n          >\n            {i18n.t(\"connections.buttons.disconnect\")}\n          </Button>\n        )}\n        {whatsApp.status === \"OPENING\" && (\n          <Button size=\"small\" variant=\"outlined\" disabled color=\"default\">\n            {i18n.t(\"connections.buttons.connecting\")}\n          </Button>\n        )}\n      </>\n    );\n  };\n\n  const renderStatusToolTips = (whatsApp) => {\n    return (\n      <div className={classes.customTableCell}>\n        {whatsApp.status === \"DISCONNECTED\" && (\n          <CustomToolTip\n            title={i18n.t(\"connections.toolTips.disconnected.title\")}\n            content={i18n.t(\"connections.toolTips.disconnected.content\")}\n          >\n            <SignalCellularConnectedNoInternet0Bar color=\"secondary\" />\n          </CustomToolTip>\n        )}\n        {whatsApp.status === \"OPENING\" && (\n          <CircularProgress size={24} className={classes.buttonProgress} />\n        )}\n        {whatsApp.status === \"qrcode\" && (\n          <CustomToolTip\n            title={i18n.t(\"connections.toolTips.qrcode.title\")}\n            content={i18n.t(\"connections.toolTips.qrcode.content\")}\n          >\n            <CropFree />\n          </CustomToolTip>\n        )}\n        {whatsApp.status === \"CONNECTED\" && (\n          <CustomToolTip title={i18n.t(\"connections.toolTips.connected.title\")}>\n            <SignalCellular4Bar style={{ color: green[500] }} />\n          </CustomToolTip>\n        )}\n        {(whatsApp.status === \"TIMEOUT\" || whatsApp.status === \"PAIRING\") && (\n          <CustomToolTip\n            title={i18n.t(\"connections.toolTips.timeout.title\")}\n            content={i18n.t(\"connections.toolTips.timeout.content\")}\n          >\n            <SignalCellularConnectedNoInternet2Bar color=\"secondary\" />\n          </CustomToolTip>\n        )}\n      </div>\n    );\n  };\n  return (\n    <MainContainer>\n      <ConfirmationModal\n        title={confirmModalInfo.title}\n        open={confirmModalOpen}\n        onClose={setConfirmModalOpen}\n        onConfirm={handleSubmitConfirmationModal}\n      >\n        {confirmModalInfo.message}\n      </ConfirmationModal>\n      <QrcodeModal\n        open={qrModalOpen}\n        onClose={handleCloseQrModal}\n        whatsAppId={!whatsAppModalOpen && selectedWhatsApp?.id}\n      />\n      <WhatsAppModalCompany\n        open={whatsAppModalOpen}\n        onClose={handleCloseWhatsAppModal}\n        filteredWhatsapps={filterConnections}\n        companyInfos={companyWhatsApps}\n        whatsAppId={!qrModalOpen && selectedWhatsApp?.id}\n      />\n\n      {user.profile === \"user\" ? (\n        <ForbiddenPage />\n      ) : (\n        <>\n          <Paper\n            className={classes.mainPaper}\n            style={{ overflow: \"hidden\" }}\n            variant=\"outlined\"\n          >\n            <MainHeader>\n              <Stack>\n                <Typography\n                  variant=\"h5\"\n                  color=\"black\"\n                  style={{\n                    fontWeight: \"bold\",\n                    marginLeft: \"10px\",\n                    marginTop: \"10px\",\n                  }}\n                  gutterBottom\n                >\n                  {i18n.t(\"connections.title\")}\n                </Typography>\n                <Typography\n                  style={{ marginTop: \"-10px\", marginLeft: \"10px\" }}\n                  variant=\"caption\"\n                  color=\"textSecondary\"\n                >\n                  {i18n.t(\n                    \"connections.connectYourServiceChannelsToReceiveMessagesAndStartConversationsWithYourCustomers\"\n                  )}\n                </Typography>\n              </Stack>\n\n              <MainHeaderButtonsWrapper>\n                <PopupState variant=\"popover\" popupId=\"demo-popup-menu\">\n                  {(popupState) => (\n                    <React.Fragment>\n                      <Menu {...bindMenu(popupState)}>\n                        <MenuItem\n                          onClick={() => {\n                            handleOpenWhatsAppModal();\n                            popupState.close();\n                          }}\n                        >\n                          <WhatsApp\n                            fontSize=\"small\"\n                            style={{\n                              marginRight: \"10px\",\n                            }}\n                          />\n                          WhatsApp\n                        </MenuItem>\n                        <FacebookLogin\n                          appId={process.env.REACT_APP_FACEBOOK_APP_ID}\n                          autoLoad={false}\n                          fields=\"name,email,picture\"\n                          version=\"13.0\"\n                          scope=\"public_profile,pages_messaging,pages_show_list,pages_manage_metadata,pages_read_engagement,business_management\"\n                          callback={responseFacebook}\n                          render={(renderProps) => (\n                            <MenuItem onClick={renderProps.onClick}>\n                              <Facebook\n                                fontSize=\"small\"\n                                style={{\n                                  marginRight: \"10px\",\n                                }}\n                              />\n                              Facebook\n                            </MenuItem>\n                          )}\n                        />\n\n                        <FacebookLogin\n                          appId={process.env.REACT_APP_FACEBOOK_APP_ID}\n                          autoLoad={false}\n                          fields=\"name,email,picture\"\n                          version=\"13.0\"\n                          scope=\"public_profile,instagram_basic,instagram_manage_messages,pages_messaging,pages_show_list,pages_manage_metadata,pages_read_engagement,business_management\"\n                          callback={responseInstagram}\n                          render={(renderProps) => (\n                            <MenuItem onClick={renderProps.onClick}>\n                              <Instagram\n                                fontSize=\"small\"\n                                style={{\n                                  marginRight: \"10px\",\n                                }}\n                              />\n                              Instagram\n                            </MenuItem>\n                          )}\n                        />\n                      </Menu>\n                    </React.Fragment>\n                  )}\n                </PopupState>\n              </MainHeaderButtonsWrapper>\n            </MainHeader>\n            <Stack\n              style={{\n                overflowY: \"auto\",\n                padding: \"20px\",\n                backgroundColor: \"rgb(244 244 244 / 53%)\",\n                borderRadius: \"5px\",\n                height: \"93%\",\n              }}\n            >\n              <Paper>\n                <Table size=\"small\">\n                  <TableHead className={classes.TableHead}>\n                    <TableRow style={{ color: \"#fff\" }}>\n                      <TableCell style={{ color: \"#fff\" }} align=\"center\">\n                        {i18n.t(\"connections.client\")}\n                      </TableCell>\n                      <TableCell style={{ color: \"#fff\" }} align=\"center\">\n                        {i18n.t(\"connections.connectedConnections\")}\n                      </TableCell>\n                      <TableCell style={{ color: \"#fff\" }} align=\"center\">\n                        {i18n.t(\"connections.disconnectedConnections\")}\n                      </TableCell>\n                      <TableCell style={{ color: \"#fff\" }} align=\"center\">\n                        {i18n.t(\"connections.totalConnections\")}\n                      </TableCell>\n                      {user.profile === \"admin\" && (\n                        <TableCell style={{ color: \"#fff\" }} align=\"center\">\n                          {i18n.t(\"connections.table.actions\")}\n                        </TableCell>\n                      )}\n                    </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {loadingWhatsapp ? (\n                      <TableRowSkeleton />\n                    ) : (\n                      <>\n                        {console.log(companies, whats)}\n                        {companies?.length > 0 &&\n                          companies.map((company) => (\n                            <TableRow key={company.id}>\n                              <TableCell align=\"center\">\n                                {company?.name}\n                              </TableCell>\n                              <TableCell align=\"center\">\n                                {whats?.length &&\n                                  whats.filter(\n                                    (item) =>\n                                      item?.companyId === company?.id &&\n                                      item?.status === \"CONNECTED\"\n                                  ).length}\n                              </TableCell>\n                              <TableCell align=\"center\">\n                                {whats?.length &&\n                                  whats.filter(\n                                    (item) =>\n                                      item?.companyId === company?.id &&\n                                      item?.status !== \"CONNECTED\"\n                                  ).length}\n                              </TableCell>\n                              <TableCell align=\"center\">\n                                {whats?.length &&\n                                  whats.filter(\n                                    (item) => item?.companyId === company?.id\n                                  ).length}\n                              </TableCell>\n                              {user.profile === \"admin\" && (\n                                <TableCell align=\"center\">\n                                  <IconButton\n                                    size=\"small\"\n                                    onClick={() =>\n                                      handleOpenWhatsAppModal(\n                                        whats.filter(\n                                          (item) =>\n                                            item?.companyId === company?.id\n                                        ),\n                                        company\n                                      )\n                                    }\n                                  >\n                                    <Edit />\n                                  </IconButton>\n                                </TableCell>\n                              )}\n                            </TableRow>\n                          ))}\n                        <TableRow className={classes.TableHead}>\n                          <TableCell style={{ color: \"#fff\" }} align=\"center\">\n                            {i18n.t(\"connections.total\")}\n                          </TableCell>\n                          <TableCell style={{ color: \"#fff\" }} align=\"center\">\n                            {whats?.length &&\n                              whats.filter(\n                                (item) => item?.status === \"CONNECTED\"\n                              ).length}\n                          </TableCell>\n                          <TableCell style={{ color: \"#fff\" }} align=\"center\">\n                            {whats?.length &&\n                              whats.filter(\n                                (item) => item?.status !== \"CONNECTED\"\n                              ).length}\n                          </TableCell>\n                          <TableCell style={{ color: \"#fff\" }} align=\"center\">\n                            {whats?.length && whats.length}\n                          </TableCell>\n                          {user.profile === \"admin\" && (\n                            <TableCell\n                              style={{ color: \"#fff\" }}\n                              align=\"center\"\n                            ></TableCell>\n                          )}\n                        </TableRow>\n                      </>\n                    )}\n                  </TableBody>\n                </Table>\n              </Paper>\n            </Stack>\n          </Paper>\n        </>\n      )}\n    </MainContainer>\n  );\n};\n\nexport default AllConnections;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}