{"ast":null,"code":"import _objectSpread from\"/home/deploy/atendechatop/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{Box,Chip,TextField}from\"@material-ui/core\";import Autocomplete from\"@material-ui/lab/Autocomplete\";import React,{useEffect,useState}from\"react\";import toastError from\"../../errors/toastError\";import api from\"../../services/api\";import{i18n}from\"../../translate/i18n\";import{jsx as _jsx}from\"react/jsx-runtime\";export function WhatsappsFilter(_ref){let{onFiltered,initialWhatsapps}=_ref;const[whatsapps,setWhatsapps]=useState([]);const[selecteds,setSelecteds]=useState([]);useEffect(()=>{async function fetchData(){await loadWhatsapps();}fetchData();},[]);useEffect(()=>{setSelecteds([]);if(Array.isArray(initialWhatsapps)&&Array.isArray(whatsapps)&&whatsapps.length>0){onChange(initialWhatsapps);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[initialWhatsapps,whatsapps]);const loadWhatsapps=async()=>{try{const{data}=await api.get(\"/whatsapp\");const whatsappList=data.map(w=>({id:w.id,name:w.name,channel:w.channel}));setWhatsapps(whatsappList);}catch(err){toastError(err);}};const onChange=async value=>{setSelecteds(value);onFiltered(value);};return/*#__PURE__*/_jsx(Box,{style:{padding:\"0px 10px 10px\"},children:/*#__PURE__*/_jsx(Autocomplete,{multiple:true,size:\"small\",options:whatsapps,value:selecteds,onChange:(e,v,r)=>onChange(v),getOptionLabel:option=>option.name,getOptionSelected:(option,value)=>{return(option===null||option===void 0?void 0:option.id)===(value===null||value===void 0?void 0:value.id)||(option===null||option===void 0?void 0:option.name.toLowerCase())===(value===null||value===void 0?void 0:value.name.toLowerCase());},renderTags:(value,getWhatsappProps)=>value.map((option,index)=>/*#__PURE__*/_jsx(Chip,_objectSpread(_objectSpread({variant:\"outlined\",style:{backgroundColor:\"#bfbfbf\",textShadow:\"1px 1px 1px #000\",color:\"white\"},label:option.name},getWhatsappProps({index})),{},{size:\"small\"}))),renderInput:params=>/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{variant:\"outlined\",placeholder:i18n.t(\"tickets.search.filterConections\")}))})});}","map":{"version":3,"names":["Box","Chip","TextField","Autocomplete","React","useEffect","useState","toastError","api","i18n","jsx","_jsx","WhatsappsFilter","_ref","onFiltered","initialWhatsapps","whatsapps","setWhatsapps","selecteds","setSelecteds","fetchData","loadWhatsapps","Array","isArray","length","onChange","data","get","whatsappList","map","w","id","name","channel","err","value","style","padding","children","multiple","size","options","e","v","r","getOptionLabel","option","getOptionSelected","toLowerCase","renderTags","getWhatsappProps","index","_objectSpread","variant","backgroundColor","textShadow","color","label","renderInput","params","placeholder","t"],"sources":["/home/deploy/atendechatop/frontend/src/components/WhatsappsFilter/index.js"],"sourcesContent":["import { Box, Chip, TextField } from \"@material-ui/core\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\nimport React, { useEffect, useState } from \"react\";\nimport toastError from \"../../errors/toastError\";\nimport api from \"../../services/api\";\nimport { i18n } from \"../../translate/i18n\";\n\nexport function WhatsappsFilter({ onFiltered, initialWhatsapps }) {\n  const [whatsapps, setWhatsapps] = useState([]);\n  const [selecteds, setSelecteds] = useState([]);\n\n  useEffect(() => {\n    async function fetchData() {\n      await loadWhatsapps();\n    }\n    fetchData();\n  }, []);\n\n  useEffect(() => {\n    setSelecteds([]);\n    if (\n      Array.isArray(initialWhatsapps) &&\n      Array.isArray(whatsapps) &&\n      whatsapps.length > 0\n    ) {\n      onChange(initialWhatsapps);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [initialWhatsapps, whatsapps]);\n\n  const loadWhatsapps = async () => {\n    try {\n      const { data } = await api.get(`/whatsapp`);\n      const whatsappList = data.map((w) => ({ id: w.id, name: w.name, channel: w.channel }));\n      setWhatsapps(whatsappList);\n    } catch (err) {\n      toastError(err);\n    }\n  };\n\n  const onChange = async (value) => {\n    setSelecteds(value);\n    onFiltered(value);\n  };\n\n  return (\n    <Box style={{ padding: \"0px 10px 10px\" }}>\n      <Autocomplete\n        multiple\n        size=\"small\"\n        options={whatsapps}\n        value={selecteds}\n        onChange={(e, v, r) => onChange(v)}\n        getOptionLabel={(option) => option.name}\n        getOptionSelected={(option, value) => {\n          return (\n            option?.id === value?.id ||\n            option?.name.toLowerCase() === value?.name.toLowerCase()\n          );\n        }}\n        renderTags={(value, getWhatsappProps) =>\n          value.map((option, index) => (\n            <Chip\n              variant=\"outlined\"\n              style={{\n                backgroundColor: \"#bfbfbf\",\n                textShadow: \"1px 1px 1px #000\",\n                color: \"white\",\n              }}\n              label={option.name}\n              {...getWhatsappProps({ index })}\n              size=\"small\"\n            />\n          ))\n        }\n        renderInput={(params) => (\n          <TextField\n            {...params}\n            variant=\"outlined\"\n            placeholder={i18n.t(\"tickets.search.filterConections\")}\n          />\n        )}\n      />\n    </Box>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}