{"ast":null,"code":"import _objectSpread from\"/home/deploy/atendechatop/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// frontend/geminiModal.jsx\nimport React,{useState,useEffect,useRef}from\"react\";import*as Yup from\"yup\";import{Formik,Form,Field,FieldArray}from\"formik\";import{makeStyles}from\"@material-ui/core/styles\";import{green}from\"@material-ui/core/colors\";import Button from\"@material-ui/core/Button\";import TextField from\"@material-ui/core/TextField\";import Dialog from\"@material-ui/core/Dialog\";import DialogActions from\"@material-ui/core/DialogActions\";import DialogContent from\"@material-ui/core/DialogContent\";import DialogTitle from\"@material-ui/core/DialogTitle\";import{MenuItem,FormControl,InputLabel,Select,FormControlLabel,RadioGroup,Radio,FormLabel,Checkbox,Chip,Box,Typography,Divider,Accordion,AccordionSummary,AccordionDetails,IconButton,Tooltip}from\"@material-ui/core\";import{Visibility,VisibilityOff,ExpandMore,Add,Delete,Info,Settings,Timer}from\"@material-ui/icons\";import{InputAdornment}from\"@material-ui/core\";// Lista de modelos Gemini suportados\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const geminiModels=[\"gemini-pro\",\"gemini-1.5-pro\",\"gemini-1.5-flash\",\"gemini-2.0-flash\",\"gemini-2.0-pro\"];const useStyles=makeStyles(theme=>({root:{display:\"flex\",flexWrap:\"wrap\"},multFieldLine:{display:\"flex\",\"& > *:not(:last-child)\":{marginRight:theme.spacing(1)}},btnWrapper:{position:\"relative\"},buttonProgress:{color:green[500],position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12},formControl:{margin:theme.spacing(1),minWidth:120},sectionTitle:{fontWeight:\"bold\",color:theme.palette.primary.main,marginBottom:theme.spacing(1),display:\"flex\",alignItems:\"center\",gap:theme.spacing(1)},flowModeCard:{border:\"1px solid \".concat(theme.palette.divider),borderRadius:theme.spacing(1),padding:theme.spacing(2),marginBottom:theme.spacing(2),backgroundColor:theme.palette.background.default},temporarySettings:{marginTop:theme.spacing(2),padding:theme.spacing(2),backgroundColor:theme.palette.grey[50],borderRadius:theme.spacing(1),border:\"1px dashed \".concat(theme.palette.primary.light)},keywordChip:{margin:theme.spacing(0.5)},helpText:{fontSize:\"0.75rem\",color:theme.palette.text.secondary,marginTop:theme.spacing(0.5)},accordion:{marginBottom:theme.spacing(1),\"&:before\":{display:\"none\"}},accordionSummary:{backgroundColor:theme.palette.grey[50],borderRadius:theme.spacing(0.5),minHeight:48,\"&.Mui-expanded\":{minHeight:48}},accordionDetails:{padding:theme.spacing(2),flexDirection:\"column\"}}));// Esquema de validação para Gemini\nconst GeminiSchema=Yup.object().shape({name:Yup.string().min(5,\"Muito curto!\").max(100,\"Muito longo!\").required(\"Obrigatório\"),prompt:Yup.string().min(50,\"Muito curto!\").required(\"Descreva o treinamento para Inteligência Artificial\"),model:Yup.string().oneOf(geminiModels,\"Modelo inválido\").required(\"Informe o modelo\"),maxTokens:Yup.number().min(10,\"Mínimo 10 tokens\").max(8000,\"Máximo 8000 tokens\").required(\"Informe o número máximo de tokens\"),temperature:Yup.number().min(0,\"Mínimo 0\").max(2,\"Máximo 2\").required(\"Informe a temperatura\"),apiKey:Yup.string().required(\"Informe a API Key\"),maxMessages:Yup.number().min(1,\"Mínimo 1 mensagem\").max(100,\"Máximo 100 mensagens\").required(\"Informe o número máximo de mensagens\"),flowMode:Yup.string().oneOf([\"permanent\",\"temporary\"],\"Modo de fluxo inválido\").required(\"Selecione o modo de fluxo\"),maxInteractions:Yup.number().when(\"flowMode\",{is:\"temporary\",then:Yup.number().min(1,\"Mínimo 1 interação\").max(50,\"Máximo 50 interações\").nullable(),otherwise:Yup.number().nullable()}),completionTimeout:Yup.number().when(\"flowMode\",{is:\"temporary\",then:Yup.number().min(1,\"Mínimo 1 minuto\").max(60,\"Máximo 60 minutos\").nullable(),otherwise:Yup.number().nullable()}),continueKeywords:Yup.array().when(\"flowMode\",{is:\"temporary\",then:Yup.array().of(Yup.string().required(\"Palavra-chave não pode estar vazia\")).min(1,\"Pelo menos uma palavra-chave é obrigatória no modo temporário\"),otherwise:Yup.array()}),objective:Yup.string().when([\"flowMode\",\"autoCompleteOnObjective\"],{is:(flowMode,autoComplete)=>flowMode===\"temporary\"&&autoComplete,then:Yup.string().required(\"Objetivo é obrigatório quando auto completar está ativo\"),otherwise:Yup.string()})});const FlowBuilderGeminiModal=_ref=>{let{open,onSave,data,onUpdate,close}=_ref;const classes=useStyles();const isMounted=useRef(true);const initialState={name:\"\",prompt:\"\",model:\"gemini-1.5-flash\",maxTokens:1000,temperature:0.7,apiKey:\"\",maxMessages:10,queueId:0,// Campos para controle de fluxo\nflowMode:\"permanent\",maxInteractions:5,completionTimeout:10,continueKeywords:[\"continuar\",\"próximo\",\"avançar\"],objective:\"\",autoCompleteOnObjective:false};const[showApiKey,setShowApiKey]=useState(false);const[integration,setIntegration]=useState(initialState);const[labels,setLabels]=useState({title:\"Adicionar Gemini ao fluxo\",btn:\"Adicionar\"});const[newKeyword,setNewKeyword]=useState(\"\");useEffect(()=>{if(open===\"edit\"){var _data$data;setLabels({title:\"Editar Gemini do fluxo\",btn:\"Salvar\"});const typebotIntegration=(data===null||data===void 0?void 0:(_data$data=data.data)===null||_data$data===void 0?void 0:_data$data.typebotIntegration)||{};setIntegration(_objectSpread(_objectSpread(_objectSpread({},initialState),typebotIntegration),{},{model:geminiModels.includes(typebotIntegration.model)?typebotIntegration.model:\"gemini-1.5-flash\",flowMode:typebotIntegration.flowMode||\"permanent\",continueKeywords:typebotIntegration.continueKeywords||[\"continuar\",\"próximo\",\"avançar\"],maxInteractions:typebotIntegration.maxInteractions||5,completionTimeout:typebotIntegration.completionTimeout||10,objective:typebotIntegration.objective||\"\",autoCompleteOnObjective:typebotIntegration.autoCompleteOnObjective||false}));}else if(open===\"create\"){setLabels({title:\"Adicionar Gemini ao fluxo\",btn:\"Adicionar\"});setIntegration(initialState);}return()=>{isMounted.current=false;};},[open,data]);const handleClose=()=>{setNewKeyword(\"\");close(null);};const handleSavePrompt=(values,_ref2)=>{let{setSubmitting}=_ref2;const promptData=_objectSpread(_objectSpread({},values),{},{// Garantir que campos do modo temporário sejam nulos se modo for permanente\nmaxInteractions:values.flowMode===\"temporary\"?values.maxInteractions:null,completionTimeout:values.flowMode===\"temporary\"?values.completionTimeout:null,continueKeywords:values.flowMode===\"temporary\"?values.continueKeywords:[],objective:values.flowMode===\"temporary\"?values.objective:\"\",autoCompleteOnObjective:values.flowMode===\"temporary\"?values.autoCompleteOnObjective:false,// Forçar provider como gemini e voz como texto\nprovider:\"gemini\",voice:\"texto\"});if(open===\"edit\"){onUpdate(_objectSpread(_objectSpread({},data),{},{data:{typebotIntegration:promptData}}));}else if(open===\"create\"){promptData.projectName=promptData.name;onSave({typebotIntegration:promptData});}handleClose();setSubmitting(false);};const addKeyword=(arrayHelpers,keyword)=>{if(keyword.trim()&&!integration.continueKeywords.includes(keyword.trim())){arrayHelpers.push(keyword.trim());setNewKeyword(\"\");}};const removeKeyword=(arrayHelpers,index)=>{arrayHelpers.remove(index);};const getModelDisplayName=model=>{const modelNames={\"gemini-pro\":\"Gemini Pro\",\"gemini-1.5-pro\":\"Gemini 1.5 Pro\",\"gemini-1.5-flash\":\"Gemini 1.5 Flash\",\"gemini-2.0-flash\":\"Gemini 2.0 Flash\",\"gemini-2.0-pro\":\"Gemini 2.0 Pro\"};return modelNames[model]||model;};return/*#__PURE__*/_jsx(\"div\",{className:classes.root,children:/*#__PURE__*/_jsxs(Dialog,{open:open===\"create\"||open===\"edit\",onClose:handleClose,fullWidth:true,maxWidth:\"lg\",scroll:\"paper\",children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"form-dialog-title\",children:labels.title}),/*#__PURE__*/_jsx(Formik,{initialValues:integration,enableReinitialize:true,validationSchema:GeminiSchema,onSubmit:handleSavePrompt,children:_ref3=>{let{touched,errors,isSubmitting,values,setFieldValue}=_ref3;return/*#__PURE__*/_jsxs(Form,{style:{width:\"100%\"},children:[/*#__PURE__*/_jsxs(DialogContent,{dividers:true,children:[/*#__PURE__*/_jsxs(Accordion,{className:classes.accordion,defaultExpanded:true,children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(ExpandMore,{}),className:classes.accordionSummary,children:/*#__PURE__*/_jsxs(Typography,{className:classes.sectionTitle,children:[/*#__PURE__*/_jsx(Settings,{}),\"Configura\\xE7\\xF5es B\\xE1sicas - Google Gemini\"]})}),/*#__PURE__*/_jsxs(AccordionDetails,{className:classes.accordionDetails,children:[/*#__PURE__*/_jsx(Field,{as:TextField,label:\"Nome do Assistente\",name:\"name\",error:touched.name&&Boolean(errors.name),helperText:touched.name&&errors.name,variant:\"outlined\",margin:\"dense\",fullWidth:true,required:true}),/*#__PURE__*/_jsx(FormControl,{fullWidth:true,margin:\"dense\",variant:\"outlined\",children:/*#__PURE__*/_jsx(Field,{as:TextField,label:\"API Key Google AI\",name:\"apiKey\",type:showApiKey?\"text\":\"password\",error:touched.apiKey&&Boolean(errors.apiKey),helperText:touched.apiKey&&errors.apiKey,variant:\"outlined\",margin:\"dense\",fullWidth:true,required:true,InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(IconButton,{onClick:()=>setShowApiKey(!showApiKey),children:showApiKey?/*#__PURE__*/_jsx(VisibilityOff,{}):/*#__PURE__*/_jsx(Visibility,{})})})}})}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"dense\",variant:\"outlined\",error:touched.model&&Boolean(errors.model),children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Modelo Gemini\"}),/*#__PURE__*/_jsx(Field,{as:Select,label:\"Modelo Gemini\",name:\"model\",children:geminiModels.map(model=>/*#__PURE__*/_jsx(MenuItem,{value:model,children:getModelDisplayName(model)},model))}),touched.model&&errors.model&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"red\",fontSize:\"12px\"},children:errors.model})]}),/*#__PURE__*/_jsx(Field,{as:TextField,label:\"Prompt do Sistema\",name:\"prompt\",error:touched.prompt&&Boolean(errors.prompt),helperText:touched.prompt&&errors.prompt,variant:\"outlined\",margin:\"dense\",fullWidth:true,required:true,rows:6,multiline:true,placeholder:\"Descreva como a IA deve se comportar, que informa\\xE7\\xF5es deve coletar, como deve responder...\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.multFieldLine,children:[/*#__PURE__*/_jsx(Field,{as:TextField,label:\"Temperatura\",name:\"temperature\",error:touched.temperature&&Boolean(errors.temperature),helperText:touched.temperature&&errors.temperature||\"0 = conservador, 2 = criativo\",variant:\"outlined\",margin:\"dense\",fullWidth:true,type:\"number\",inputProps:{step:\"0.1\",min:\"0\",max:\"2\"}}),/*#__PURE__*/_jsx(Field,{as:TextField,label:\"Max Tokens\",name:\"maxTokens\",error:touched.maxTokens&&Boolean(errors.maxTokens),helperText:touched.maxTokens&&errors.maxTokens||\"Tamanho máximo da resposta\",variant:\"outlined\",margin:\"dense\",fullWidth:true,type:\"number\"}),/*#__PURE__*/_jsx(Field,{as:TextField,label:\"Max Mensagens\",name:\"maxMessages\",error:touched.maxMessages&&Boolean(errors.maxMessages),helperText:touched.maxMessages&&errors.maxMessages||\"Histórico de contexto\",variant:\"outlined\",margin:\"dense\",fullWidth:true,type:\"number\"})]})]})]}),/*#__PURE__*/_jsxs(Accordion,{className:classes.accordion,defaultExpanded:true,children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(ExpandMore,{}),className:classes.accordionSummary,children:/*#__PURE__*/_jsxs(Typography,{className:classes.sectionTitle,children:[/*#__PURE__*/_jsx(Timer,{}),\"Comportamento do Fluxo\",/*#__PURE__*/_jsx(Tooltip,{title:\"Configure como o Gemini deve se comportar no fluxo\",children:/*#__PURE__*/_jsx(Info,{fontSize:\"small\",color:\"action\"})})]})}),/*#__PURE__*/_jsxs(AccordionDetails,{className:classes.accordionDetails,children:[/*#__PURE__*/_jsxs(FormControl,{component:\"fieldset\",margin:\"normal\",children:[/*#__PURE__*/_jsx(FormLabel,{component:\"legend\",children:\"Modo de Funcionamento\"}),/*#__PURE__*/_jsxs(RadioGroup,{name:\"flowMode\",value:values.flowMode,onChange:e=>setFieldValue(\"flowMode\",e.target.value),children:[/*#__PURE__*/_jsx(FormControlLabel,{value:\"permanent\",control:/*#__PURE__*/_jsx(Radio,{}),label:/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Permanente\"}),\" - Encerrar fluxo aqui\"]}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"textSecondary\",children:\"O usu\\xE1rio fica conversando com a IA at\\xE9 pedir transfer\\xEAncia ou encerrar\"})]})}),/*#__PURE__*/_jsx(FormControlLabel,{value:\"temporary\",control:/*#__PURE__*/_jsx(Radio,{}),label:/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Tempor\\xE1rio\"}),\" - Volta ao fluxo depois\"]}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"textSecondary\",children:\"A IA executa uma tarefa espec\\xEDfica e depois retorna ao fluxo normal\"})]})})]})]}),values.flowMode===\"temporary\"&&/*#__PURE__*/_jsxs(\"div\",{className:classes.temporarySettings,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"\\u23F1\\uFE0F Configura\\xE7\\xF5es do Modo Tempor\\xE1rio\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",gutterBottom:true,children:\"Configure quando a IA deve parar e retornar ao fluxo\"}),/*#__PURE__*/_jsx(Field,{as:TextField,label:\"M\\xE1ximo de Intera\\xE7\\xF5es\",name:\"maxInteractions\",error:touched.maxInteractions&&Boolean(errors.maxInteractions),helperText:touched.maxInteractions&&errors.maxInteractions||\"Número máximo de mensagens antes de voltar ao fluxo (0 = ilimitado)\",variant:\"outlined\",margin:\"dense\",fullWidth:true,type:\"number\",inputProps:{min:0,max:50}}),/*#__PURE__*/_jsx(Field,{as:TextField,label:\"Timeout (minutos)\",name:\"completionTimeout\",error:touched.completionTimeout&&Boolean(errors.completionTimeout),helperText:touched.completionTimeout&&errors.completionTimeout||\"Tempo limite antes de voltar ao fluxo (0 = sem limite)\",variant:\"outlined\",margin:\"dense\",fullWidth:true,type:\"number\",inputProps:{min:0,max:60}}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"dense\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",gutterBottom:true,children:\"Palavras-chave para Continuar Fluxo\"}),/*#__PURE__*/_jsx(FieldArray,{name:\"continueKeywords\",children:arrayHelpers=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",gap:1,alignItems:\"center\",mb:1,children:[/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",size:\"small\",placeholder:\"Digite uma palavra-chave\",value:newKeyword,onChange:e=>setNewKeyword(e.target.value),onKeyPress:e=>{if(e.key===\"Enter\"){addKeyword(arrayHelpers,newKeyword);}}}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",size:\"small\",startIcon:/*#__PURE__*/_jsx(Add,{}),onClick:()=>addKeyword(arrayHelpers,newKeyword),disabled:!newKeyword.trim(),children:\"Adicionar\"})]}),/*#__PURE__*/_jsx(Box,{display:\"flex\",flexWrap:\"wrap\",gap:0.5,children:values.continueKeywords.map((keyword,index)=>/*#__PURE__*/_jsx(Chip,{label:keyword,className:classes.keywordChip,onDelete:()=>removeKeyword(arrayHelpers,index),deleteIcon:/*#__PURE__*/_jsx(Delete,{}),variant:\"outlined\",size:\"small\"},index))}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"textSecondary\",children:\"Quando o usu\\xE1rio enviar uma dessas palavras, o fluxo continuar\\xE1 automaticamente\"}),touched.continueKeywords&&errors.continueKeywords&&/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"error\",children:errors.continueKeywords})]})})]}),/*#__PURE__*/_jsx(Field,{as:TextField,label:\"Objetivo da IA\",name:\"objective\",error:touched.objective&&Boolean(errors.objective),helperText:touched.objective&&errors.objective||\"Descreva o que a IA deve completar (ex: 'Coletar nome, email e telefone')\",variant:\"outlined\",margin:\"dense\",fullWidth:true,multiline:true,rows:2,placeholder:\"Ex: Coletar dados do cliente, Qualificar interesse, Diagnosticar problema...\"}),/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Checkbox,{checked:values.autoCompleteOnObjective,onChange:e=>setFieldValue(\"autoCompleteOnObjective\",e.target.checked),name:\"autoCompleteOnObjective\"}),label:/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"Auto completar quando atingir objetivo\"}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"textSecondary\",children:\"A IA analisar\\xE1 automaticamente se completou o objetivo e voltar\\xE1 ao fluxo\"})]})}),/*#__PURE__*/_jsx(Field,{as:TextField,label:\"ID da Fila (para transfer\\xEAncia)\",name:\"queueId\",error:touched.queueId&&Boolean(errors.queueId),helperText:\"ID da fila para onde transferir se usu\\xE1rio pedir atendente (0 = n\\xE3o transferir)\",variant:\"outlined\",margin:\"dense\",fullWidth:true,type:\"number\",inputProps:{min:0}})]})]})]})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleClose,color:\"secondary\",variant:\"outlined\",disabled:isSubmitting,children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",color:\"primary\",variant:\"contained\",className:classes.btnWrapper,disabled:isSubmitting,children:labels.btn})]})]});}})]})});};export default FlowBuilderGeminiModal;","map":{"version":3,"names":["React","useState","useEffect","useRef","Yup","Formik","Form","Field","FieldArray","makeStyles","green","Button","TextField","Dialog","DialogActions","DialogContent","DialogTitle","MenuItem","FormControl","InputLabel","Select","FormControlLabel","RadioGroup","Radio","FormLabel","Checkbox","Chip","Box","Typography","Divider","Accordion","AccordionSummary","AccordionDetails","IconButton","Tooltip","Visibility","VisibilityOff","ExpandMore","Add","Delete","Info","Settings","Timer","InputAdornment","jsx","_jsx","jsxs","_jsxs","geminiModels","useStyles","theme","root","display","flexWrap","multFieldLine","marginRight","spacing","btnWrapper","position","buttonProgress","color","top","left","marginTop","marginLeft","formControl","margin","minWidth","sectionTitle","fontWeight","palette","primary","main","marginBottom","alignItems","gap","flowModeCard","border","concat","divider","borderRadius","padding","backgroundColor","background","default","temporarySettings","grey","light","keywordChip","helpText","fontSize","text","secondary","accordion","accordionSummary","minHeight","accordionDetails","flexDirection","GeminiSchema","object","shape","name","string","min","max","required","prompt","model","oneOf","maxTokens","number","temperature","apiKey","maxMessages","flowMode","maxInteractions","when","is","then","nullable","otherwise","completionTimeout","continueKeywords","array","of","objective","autoComplete","FlowBuilderGeminiModal","_ref","open","onSave","data","onUpdate","close","classes","isMounted","initialState","queueId","autoCompleteOnObjective","showApiKey","setShowApiKey","integration","setIntegration","labels","setLabels","title","btn","newKeyword","setNewKeyword","_data$data","typebotIntegration","_objectSpread","includes","current","handleClose","handleSavePrompt","values","_ref2","setSubmitting","promptData","provider","voice","projectName","addKeyword","arrayHelpers","keyword","trim","push","removeKeyword","index","remove","getModelDisplayName","modelNames","className","children","onClose","fullWidth","maxWidth","scroll","id","initialValues","enableReinitialize","validationSchema","onSubmit","_ref3","touched","errors","isSubmitting","setFieldValue","style","width","dividers","defaultExpanded","expandIcon","as","label","error","Boolean","helperText","variant","type","InputProps","endAdornment","onClick","map","value","rows","multiline","placeholder","inputProps","step","component","onChange","e","target","control","gutterBottom","mb","size","onKeyPress","key","startIcon","disabled","onDelete","deleteIcon","checked"],"sources":["/home/deploy/atendechatop/frontend/src/components/FlowBuilderGeminiModal/index.js"],"sourcesContent":["// frontend/geminiModal.jsx\nimport React, { useState, useEffect, useRef } from \"react\";\nimport * as Yup from \"yup\";\nimport { Formik, Form, Field, FieldArray } from \"formik\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { green } from \"@material-ui/core/colors\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport { \n  MenuItem, \n  FormControl, \n  InputLabel, \n  Select, \n  FormControlLabel,\n  RadioGroup,\n  Radio,\n  FormLabel,\n  Checkbox,\n  Chip,\n  Box,\n  Typography,\n  Divider,\n  Accordion,\n  AccordionSummary,\n  AccordionDetails,\n  IconButton,\n  Tooltip\n} from \"@material-ui/core\";\nimport { \n  Visibility, \n  VisibilityOff, \n  ExpandMore,\n  Add,\n  Delete,\n  Info,\n  Settings,\n  Timer\n} from \"@material-ui/icons\";\nimport { InputAdornment } from \"@material-ui/core\";\n\n// Lista de modelos Gemini suportados\nconst geminiModels = [\n  \"gemini-pro\",\n  \"gemini-1.5-pro\", \n  \"gemini-1.5-flash\",\n  \"gemini-2.0-flash\",\n  \"gemini-2.0-pro\"\n];\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n  },\n  multFieldLine: {\n    display: \"flex\",\n    \"& > *:not(:last-child)\": {\n      marginRight: theme.spacing(1),\n    },\n  },\n  btnWrapper: {\n    position: \"relative\",\n  },\n  buttonProgress: {\n    color: green[500],\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n    marginTop: -12,\n    marginLeft: -12,\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n  },\n  sectionTitle: {\n    fontWeight: \"bold\",\n    color: theme.palette.primary.main,\n    marginBottom: theme.spacing(1),\n    display: \"flex\",\n    alignItems: \"center\",\n    gap: theme.spacing(1)\n  },\n  flowModeCard: {\n    border: `1px solid ${theme.palette.divider}`,\n    borderRadius: theme.spacing(1),\n    padding: theme.spacing(2),\n    marginBottom: theme.spacing(2),\n    backgroundColor: theme.palette.background.default\n  },\n  temporarySettings: {\n    marginTop: theme.spacing(2),\n    padding: theme.spacing(2),\n    backgroundColor: theme.palette.grey[50],\n    borderRadius: theme.spacing(1),\n    border: `1px dashed ${theme.palette.primary.light}`\n  },\n  keywordChip: {\n    margin: theme.spacing(0.5),\n  },\n  helpText: {\n    fontSize: \"0.75rem\",\n    color: theme.palette.text.secondary,\n    marginTop: theme.spacing(0.5)\n  },\n  accordion: {\n    marginBottom: theme.spacing(1),\n    \"&:before\": {\n      display: \"none\",\n    }\n  },\n  accordionSummary: {\n    backgroundColor: theme.palette.grey[50],\n    borderRadius: theme.spacing(0.5),\n    minHeight: 48,\n    \"&.Mui-expanded\": {\n      minHeight: 48,\n    }\n  },\n  accordionDetails: {\n    padding: theme.spacing(2),\n    flexDirection: \"column\"\n  }\n}));\n\n// Esquema de validação para Gemini\nconst GeminiSchema = Yup.object().shape({\n  name: Yup.string()\n    .min(5, \"Muito curto!\")\n    .max(100, \"Muito longo!\")\n    .required(\"Obrigatório\"),\n  prompt: Yup.string()\n    .min(50, \"Muito curto!\")\n    .required(\"Descreva o treinamento para Inteligência Artificial\"),\n  model: Yup.string()\n    .oneOf(geminiModels, \"Modelo inválido\")\n    .required(\"Informe o modelo\"),\n  maxTokens: Yup.number()\n    .min(10, \"Mínimo 10 tokens\")\n    .max(8000, \"Máximo 8000 tokens\")\n    .required(\"Informe o número máximo de tokens\"),\n  temperature: Yup.number()\n    .min(0, \"Mínimo 0\")\n    .max(2, \"Máximo 2\")\n    .required(\"Informe a temperatura\"),\n  apiKey: Yup.string().required(\"Informe a API Key\"),\n  maxMessages: Yup.number()\n    .min(1, \"Mínimo 1 mensagem\")\n    .max(100, \"Máximo 100 mensagens\")\n    .required(\"Informe o número máximo de mensagens\"),\n  flowMode: Yup.string()\n    .oneOf([\"permanent\", \"temporary\"], \"Modo de fluxo inválido\")\n    .required(\"Selecione o modo de fluxo\"),\n  maxInteractions: Yup.number().when(\"flowMode\", {\n    is: \"temporary\",\n    then: Yup.number()\n      .min(1, \"Mínimo 1 interação\")\n      .max(50, \"Máximo 50 interações\")\n      .nullable(),\n    otherwise: Yup.number().nullable()\n  }),\n  completionTimeout: Yup.number().when(\"flowMode\", {\n    is: \"temporary\",\n    then: Yup.number()\n      .min(1, \"Mínimo 1 minuto\")\n      .max(60, \"Máximo 60 minutos\")\n      .nullable(),\n    otherwise: Yup.number().nullable()\n  }),\n  continueKeywords: Yup.array().when(\"flowMode\", {\n    is: \"temporary\",\n    then: Yup.array()\n      .of(Yup.string().required(\"Palavra-chave não pode estar vazia\"))\n      .min(1, \"Pelo menos uma palavra-chave é obrigatória no modo temporário\"),\n    otherwise: Yup.array()\n  }),\n  objective: Yup.string().when([\"flowMode\", \"autoCompleteOnObjective\"], {\n    is: (flowMode, autoComplete) => flowMode === \"temporary\" && autoComplete,\n    then: Yup.string().required(\"Objetivo é obrigatório quando auto completar está ativo\"),\n    otherwise: Yup.string()\n  })\n});\n\nconst FlowBuilderGeminiModal = ({ open, onSave, data, onUpdate, close }) => {\n  const classes = useStyles();\n  const isMounted = useRef(true);\n\n  const initialState = {\n    name: \"\",\n    prompt: \"\",\n    model: \"gemini-1.5-flash\",\n    maxTokens: 1000,\n    temperature: 0.7,\n    apiKey: \"\",\n    maxMessages: 10,\n    queueId: 0,\n    \n    // Campos para controle de fluxo\n    flowMode: \"permanent\",\n    maxInteractions: 5,\n    completionTimeout: 10,\n    continueKeywords: [\"continuar\", \"próximo\", \"avançar\"],\n    objective: \"\",\n    autoCompleteOnObjective: false\n  };\n\n  const [showApiKey, setShowApiKey] = useState(false);\n  const [integration, setIntegration] = useState(initialState);\n  const [labels, setLabels] = useState({\n    title: \"Adicionar Gemini ao fluxo\",\n    btn: \"Adicionar\",\n  });\n  const [newKeyword, setNewKeyword] = useState(\"\");\n\n  useEffect(() => {\n    if (open === \"edit\") {\n      setLabels({\n        title: \"Editar Gemini do fluxo\",\n        btn: \"Salvar\",\n      });\n      const typebotIntegration = data?.data?.typebotIntegration || {};\n      setIntegration({\n        ...initialState,\n        ...typebotIntegration,\n        model: geminiModels.includes(typebotIntegration.model)\n          ? typebotIntegration.model\n          : \"gemini-1.5-flash\",\n        flowMode: typebotIntegration.flowMode || \"permanent\",\n        continueKeywords: typebotIntegration.continueKeywords || [\"continuar\", \"próximo\", \"avançar\"],\n        maxInteractions: typebotIntegration.maxInteractions || 5,\n        completionTimeout: typebotIntegration.completionTimeout || 10,\n        objective: typebotIntegration.objective || \"\",\n        autoCompleteOnObjective: typebotIntegration.autoCompleteOnObjective || false\n      });\n    } else if (open === \"create\") {\n      setLabels({\n        title: \"Adicionar Gemini ao fluxo\",\n        btn: \"Adicionar\",\n      });\n      setIntegration(initialState);\n    }\n\n    return () => {\n      isMounted.current = false;\n    };\n  }, [open, data]);\n\n  const handleClose = () => {\n    setNewKeyword(\"\");\n    close(null);\n  };\n\n  const handleSavePrompt = (values, { setSubmitting }) => {\n    const promptData = {\n      ...values,\n      // Garantir que campos do modo temporário sejam nulos se modo for permanente\n      maxInteractions: values.flowMode === \"temporary\" ? values.maxInteractions : null,\n      completionTimeout: values.flowMode === \"temporary\" ? values.completionTimeout : null,\n      continueKeywords: values.flowMode === \"temporary\" ? values.continueKeywords : [],\n      objective: values.flowMode === \"temporary\" ? values.objective : \"\",\n      autoCompleteOnObjective: values.flowMode === \"temporary\" ? values.autoCompleteOnObjective : false,\n      // Forçar provider como gemini e voz como texto\n      provider: \"gemini\",\n      voice: \"texto\"\n    };\n\n    if (open === \"edit\") {\n      onUpdate({\n        ...data,\n        data: { typebotIntegration: promptData },\n      });\n    } else if (open === \"create\") {\n      promptData.projectName = promptData.name;\n      onSave({\n        typebotIntegration: promptData,\n      });\n    }\n    handleClose();\n    setSubmitting(false);\n  };\n\n  const addKeyword = (arrayHelpers, keyword) => {\n    if (keyword.trim() && !integration.continueKeywords.includes(keyword.trim())) {\n      arrayHelpers.push(keyword.trim());\n      setNewKeyword(\"\");\n    }\n  };\n\n  const removeKeyword = (arrayHelpers, index) => {\n    arrayHelpers.remove(index);\n  };\n\n  const getModelDisplayName = (model) => {\n    const modelNames = {\n      \"gemini-pro\": \"Gemini Pro\",\n      \"gemini-1.5-pro\": \"Gemini 1.5 Pro\",\n      \"gemini-1.5-flash\": \"Gemini 1.5 Flash\",\n      \"gemini-2.0-flash\": \"Gemini 2.0 Flash\",\n      \"gemini-2.0-pro\": \"Gemini 2.0 Pro\"\n    };\n    return modelNames[model] || model;\n  };\n\n  return (\n    <div className={classes.root}>\n      <Dialog\n        open={open === \"create\" || open === \"edit\"}\n        onClose={handleClose}\n        fullWidth\n        maxWidth=\"lg\"\n        scroll=\"paper\"\n      >\n        <DialogTitle id=\"form-dialog-title\">\n          {labels.title}\n        </DialogTitle>\n        <Formik\n          initialValues={integration}\n          enableReinitialize={true}\n          validationSchema={GeminiSchema}\n          onSubmit={handleSavePrompt}\n        >\n          {({ touched, errors, isSubmitting, values, setFieldValue }) => (\n            <Form style={{ width: \"100%\" }}>\n              <DialogContent dividers>\n                \n                {/* CONFIGURAÇÕES BÁSICAS */}\n                <Accordion className={classes.accordion} defaultExpanded>\n                  <AccordionSummary \n                    expandIcon={<ExpandMore />}\n                    className={classes.accordionSummary}\n                  >\n                    <Typography className={classes.sectionTitle}>\n                      <Settings />\n                      Configurações Básicas - Google Gemini\n                    </Typography>\n                  </AccordionSummary>\n                  <AccordionDetails className={classes.accordionDetails}>\n                    \n                    <Field\n                      as={TextField}\n                      label=\"Nome do Assistente\"\n                      name=\"name\"\n                      error={touched.name && Boolean(errors.name)}\n                      helperText={touched.name && errors.name}\n                      variant=\"outlined\"\n                      margin=\"dense\"\n                      fullWidth\n                      required\n                    />\n\n                    <FormControl fullWidth margin=\"dense\" variant=\"outlined\">\n                      <Field\n                        as={TextField}\n                        label=\"API Key Google AI\"\n                        name=\"apiKey\"\n                        type={showApiKey ? \"text\" : \"password\"}\n                        error={touched.apiKey && Boolean(errors.apiKey)}\n                        helperText={touched.apiKey && errors.apiKey}\n                        variant=\"outlined\"\n                        margin=\"dense\"\n                        fullWidth\n                        required\n                        InputProps={{\n                          endAdornment: (\n                            <InputAdornment position=\"end\">\n                              <IconButton onClick={() => setShowApiKey(!showApiKey)}>\n                                {showApiKey ? <VisibilityOff /> : <Visibility />}\n                              </IconButton>\n                            </InputAdornment>\n                          ),\n                        }}\n                      />\n                    </FormControl>\n\n                    <FormControl\n                      fullWidth\n                      margin=\"dense\"\n                      variant=\"outlined\"\n                      error={touched.model && Boolean(errors.model)}\n                    >\n                      <InputLabel>Modelo Gemini</InputLabel>\n                      <Field\n                        as={Select}\n                        label=\"Modelo Gemini\"\n                        name=\"model\"\n                      >\n                        {geminiModels.map((model) => (\n                          <MenuItem key={model} value={model}>\n                            {getModelDisplayName(model)}\n                          </MenuItem>\n                        ))}\n                      </Field>\n                      {touched.model && errors.model && (\n                        <div style={{ color: \"red\", fontSize: \"12px\" }}>\n                          {errors.model}\n                        </div>\n                      )}\n                    </FormControl>\n\n                    <Field\n                      as={TextField}\n                      label=\"Prompt do Sistema\"\n                      name=\"prompt\"\n                      error={touched.prompt && Boolean(errors.prompt)}\n                      helperText={touched.prompt && errors.prompt}\n                      variant=\"outlined\"\n                      margin=\"dense\"\n                      fullWidth\n                      required\n                      rows={6}\n                      multiline\n                      placeholder=\"Descreva como a IA deve se comportar, que informações deve coletar, como deve responder...\"\n                    />\n\n                    <div className={classes.multFieldLine}>\n                      <Field\n                        as={TextField}\n                        label=\"Temperatura\"\n                        name=\"temperature\"\n                        error={touched.temperature && Boolean(errors.temperature)}\n                        helperText={touched.temperature && errors.temperature || \"0 = conservador, 2 = criativo\"}\n                        variant=\"outlined\"\n                        margin=\"dense\"\n                        fullWidth\n                        type=\"number\"\n                        inputProps={{\n                          step: \"0.1\",\n                          min: \"0\",\n                          max: \"2\",\n                        }}\n                      />\n                      <Field\n                        as={TextField}\n                        label=\"Max Tokens\"\n                        name=\"maxTokens\"\n                        error={touched.maxTokens && Boolean(errors.maxTokens)}\n                        helperText={touched.maxTokens && errors.maxTokens || \"Tamanho máximo da resposta\"}\n                        variant=\"outlined\"\n                        margin=\"dense\"\n                        fullWidth\n                        type=\"number\"\n                      />\n                      <Field\n                        as={TextField}\n                        label=\"Max Mensagens\"\n                        name=\"maxMessages\"\n                        error={touched.maxMessages && Boolean(errors.maxMessages)}\n                        helperText={touched.maxMessages && errors.maxMessages || \"Histórico de contexto\"}\n                        variant=\"outlined\"\n                        margin=\"dense\"\n                        fullWidth\n                        type=\"number\"\n                      />\n                    </div>\n\n                  </AccordionDetails>\n                </Accordion>\n\n                {/* COMPORTAMENTO DO FLUXO */}\n                <Accordion className={classes.accordion} defaultExpanded>\n                  <AccordionSummary \n                    expandIcon={<ExpandMore />}\n                    className={classes.accordionSummary}\n                  >\n                    <Typography className={classes.sectionTitle}>\n                      <Timer />\n                      Comportamento do Fluxo\n                      <Tooltip title=\"Configure como o Gemini deve se comportar no fluxo\">\n                        <Info fontSize=\"small\" color=\"action\" />\n                      </Tooltip>\n                    </Typography>\n                  </AccordionSummary>\n                  <AccordionDetails className={classes.accordionDetails}>\n                    \n                    <FormControl component=\"fieldset\" margin=\"normal\">\n                      <FormLabel component=\"legend\">Modo de Funcionamento</FormLabel>\n                      <RadioGroup\n                        name=\"flowMode\"\n                        value={values.flowMode}\n                        onChange={(e) => setFieldValue(\"flowMode\", e.target.value)}\n                      >\n                        <FormControlLabel\n                          value=\"permanent\"\n                          control={<Radio />}\n                          label={\n                            <Box>\n                              <Typography variant=\"body1\">\n                                <strong>Permanente</strong> - Encerrar fluxo aqui\n                              </Typography>\n                              <Typography variant=\"caption\" color=\"textSecondary\">\n                                O usuário fica conversando com a IA até pedir transferência ou encerrar\n                              </Typography>\n                            </Box>\n                          }\n                        />\n                        <FormControlLabel\n                          value=\"temporary\"\n                          control={<Radio />}\n                          label={\n                            <Box>\n                              <Typography variant=\"body1\">\n                                <strong>Temporário</strong> - Volta ao fluxo depois\n                              </Typography>\n                              <Typography variant=\"caption\" color=\"textSecondary\">\n                                A IA executa uma tarefa específica e depois retorna ao fluxo normal\n                              </Typography>\n                            </Box>\n                          }\n                        />\n                      </RadioGroup>\n                    </FormControl>\n\n                    {/* CONFIGURAÇÕES DO MODO TEMPORÁRIO */}\n                    {values.flowMode === \"temporary\" && (\n                      <div className={classes.temporarySettings}>\n                        <Typography variant=\"h6\" gutterBottom>\n                          ⏱️ Configurações do Modo Temporário\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" gutterBottom>\n                          Configure quando a IA deve parar e retornar ao fluxo\n                        </Typography>\n\n                        {/* Limite de Interações */}\n                        <Field\n                          as={TextField}\n                          label=\"Máximo de Interações\"\n                          name=\"maxInteractions\"\n                          error={touched.maxInteractions && Boolean(errors.maxInteractions)}\n                          helperText={touched.maxInteractions && errors.maxInteractions || \"Número máximo de mensagens antes de voltar ao fluxo (0 = ilimitado)\"}\n                          variant=\"outlined\"\n                          margin=\"dense\"\n                          fullWidth\n                          type=\"number\"\n                          inputProps={{ min: 0, max: 50 }}\n                        />\n\n                        {/* Timeout */}\n                        <Field\n                          as={TextField}\n                          label=\"Timeout (minutos)\"\n                          name=\"completionTimeout\"\n                          error={touched.completionTimeout && Boolean(errors.completionTimeout)}\n                          helperText={touched.completionTimeout && errors.completionTimeout || \"Tempo limite antes de voltar ao fluxo (0 = sem limite)\"}\n                          variant=\"outlined\"\n                          margin=\"dense\"\n                          fullWidth\n                          type=\"number\"\n                          inputProps={{ min: 0, max: 60 }}\n                        />\n\n                        {/* Palavras-chave de Continuação */}\n                        <FormControl fullWidth margin=\"dense\">\n                          <Typography variant=\"subtitle2\" gutterBottom>\n                            Palavras-chave para Continuar Fluxo\n                          </Typography>\n                          <FieldArray name=\"continueKeywords\">\n                            {(arrayHelpers) => (\n                              <div>\n                                <Box display=\"flex\" gap={1} alignItems=\"center\" mb={1}>\n                                  <TextField\n                                    variant=\"outlined\"\n                                    size=\"small\"\n                                    placeholder=\"Digite uma palavra-chave\"\n                                    value={newKeyword}\n                                    onChange={(e) => setNewKeyword(e.target.value)}\n                                    onKeyPress={(e) => {\n                                      if (e.key === \"Enter\") {\n                                        addKeyword(arrayHelpers, newKeyword);\n                                      }\n                                    }}\n                                  />\n                                  <Button\n                                    variant=\"outlined\"\n                                    size=\"small\"\n                                    startIcon={<Add />}\n                                    onClick={() => addKeyword(arrayHelpers, newKeyword)}\n                                    disabled={!newKeyword.trim()}\n                                  >\n                                    Adicionar\n                                  </Button>\n                                </Box>\n                                <Box display=\"flex\" flexWrap=\"wrap\" gap={0.5}>\n                                  {values.continueKeywords.map((keyword, index) => (\n                                    <Chip\n                                      key={index}\n                                      label={keyword}\n                                      className={classes.keywordChip}\n                                      onDelete={() => removeKeyword(arrayHelpers, index)}\n                                      deleteIcon={<Delete />}\n                                      variant=\"outlined\"\n                                      size=\"small\"\n                                    />\n                                  ))}\n                                </Box>\n                                <Typography variant=\"caption\" color=\"textSecondary\">\n                                  Quando o usuário enviar uma dessas palavras, o fluxo continuará automaticamente\n                                </Typography>\n                                {touched.continueKeywords && errors.continueKeywords && (\n                                  <Typography variant=\"caption\" color=\"error\">\n                                    {errors.continueKeywords}\n                                  </Typography>\n                                )}\n                              </div>\n                            )}\n                          </FieldArray>\n                        </FormControl>\n\n                        {/* Objetivo */}\n                        <Field\n                          as={TextField}\n                          label=\"Objetivo da IA\"\n                          name=\"objective\"\n                          error={touched.objective && Boolean(errors.objective)}\n                          helperText={touched.objective && errors.objective || \"Descreva o que a IA deve completar (ex: 'Coletar nome, email e telefone')\"}\n                          variant=\"outlined\"\n                          margin=\"dense\"\n                          fullWidth\n                          multiline\n                          rows={2}\n                          placeholder=\"Ex: Coletar dados do cliente, Qualificar interesse, Diagnosticar problema...\"\n                        />\n\n                        {/* Auto Completar */}\n                        <FormControlLabel\n                          control={\n                            <Checkbox\n                              checked={values.autoCompleteOnObjective}\n                              onChange={(e) => setFieldValue(\"autoCompleteOnObjective\", e.target.checked)}\n                              name=\"autoCompleteOnObjective\"\n                            />\n                          }\n                          label={\n                            <Box>\n                              <Typography variant=\"body2\">\n                                Auto completar quando atingir objetivo\n                              </Typography>\n                              <Typography variant=\"caption\" color=\"textSecondary\">\n                                A IA analisará automaticamente se completou o objetivo e voltará ao fluxo\n                              </Typography>\n                            </Box>\n                          }\n                        />\n\n                        {/* Fila de Transferência */}\n                        <Field\n                          as={TextField}\n                          label=\"ID da Fila (para transferência)\"\n                          name=\"queueId\"\n                          error={touched.queueId && Boolean(errors.queueId)}\n                          helperText=\"ID da fila para onde transferir se usuário pedir atendente (0 = não transferir)\"\n                          variant=\"outlined\"\n                          margin=\"dense\"\n                          fullWidth\n                          type=\"number\"\n                          inputProps={{ min: 0 }}\n                        />\n\n                      </div>\n                    )}\n\n                  </AccordionDetails>\n                </Accordion>\n\n              </DialogContent>\n              <DialogActions>\n                <Button\n                  onClick={handleClose}\n                  color=\"secondary\"\n                  variant=\"outlined\"\n                  disabled={isSubmitting}\n                >\n                  Cancelar\n                </Button>\n                <Button\n                  type=\"submit\"\n                  color=\"primary\"\n                  variant=\"contained\"\n                  className={classes.btnWrapper}\n                  disabled={isSubmitting}\n                >\n                  {labels.btn}\n                </Button>\n              </DialogActions>\n            </Form>\n          )}\n        </Formik>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default FlowBuilderGeminiModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}