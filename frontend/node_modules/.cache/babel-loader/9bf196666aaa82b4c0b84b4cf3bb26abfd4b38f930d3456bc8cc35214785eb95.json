{"ast":null,"code":"import _objectSpread from\"/home/deploy/atendechatop/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useContext,useState,useEffect,useReducer,useRef}from\"react\";import{isSameDay,parseISO,format}from\"date-fns\";import clsx from\"clsx\";import{isNil}from\"lodash\";import{blue,green}from\"@material-ui/core/colors\";import{Button,Divider,Typography,IconButton,makeStyles}from\"@material-ui/core\";import{AccessTime,Done,DoneAll,ExpandMore,GetApp,Facebook,Instagram,Reply,WhatsApp}from\"@material-ui/icons\";import LockIcon from'@material-ui/icons/Lock';import MarkdownWrapper from\"../MarkdownWrapper\";import VcardPreview from\"../VcardPreview\";import LocationPreview from\"../LocationPreview\";import ModalImageCors from\"../ModalImageCors\";import MessageOptionsMenu from\"../MessageOptionsMenu\";import whatsBackground from\"../../assets/wa-background.png\";import whatsBackgroundDark from\"../../assets/wa-background-dark.png\";import YouTubePreview from\"../ModalYoutubeCors\";import PdfPreview from\"../PdfPreview\";import{ReplyMessageContext}from\"../../context/ReplyingMessage/ReplyingMessageContext\";import{ForwardMessageContext}from\"../../context/ForwarMessage/ForwardMessageContext\";import AdMetaPreview from\"../AdMetaPreview\";import api from\"../../services/api\";import toastError from\"../../errors/toastError\";import{i18n}from\"../../translate/i18n\";import SelectMessageCheckbox from\"./SelectMessageCheckbox\";import useCompanySettings from\"../../hooks/useSettings/companySettings\";import{AuthContext}from\"../../context/Auth/AuthContext\";import{QueueSelectedContext}from\"../../context/QueuesSelected/QueuesSelectedContext\";import AudioModal from\"../AudioModal\";import{CircularProgress}from\"@material-ui/core\";import{useParams,useHistory}from'react-router-dom';import{downloadResource}from\"../../utils\";import Template from\"./templates\";import{usePdfViewer}from\"../../hooks/usePdfViewer\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const useStyles=makeStyles(theme=>({messagesListWrapper:{overflow:\"hidden\",position:\"relative\",display:\"flex\",flexDirection:\"column\",flexGrow:1,width:\"100%\",minWidth:300,minHeight:200},currentTick:{alignItems:\"center\",textAlign:\"center\",alignSelf:\"center\",width:\"95%\",backgroundColor:theme.palette.primary.main,margin:\"10px\",borderRadius:\"10px\",boxShadow:\"1px 5px 10px #b3b3b3\"},currentTicktText:{color:theme.palette.primary,fontWeight:'bold',padding:8,alignSelf:\"center\",marginLeft:\"0px\"},messagesList:_objectSpread({backgroundImage:theme.mode==='light'?\"url(\".concat(whatsBackground,\")\"):\"url(\".concat(whatsBackgroundDark,\")\"),backgroundColor:theme.mode==='light'?\"transparent\":\"#0b0b0d\",display:\"flex\",flexDirection:\"column\",flexGrow:1,padding:\"20px 20px 30px 20px\",overflowY:\"scroll\"},theme.scrollbarStyles),dragElement:{background:'rgba(255, 255, 255, 0.8)',position:\"absolute\",width:\"100%\",height:\"100%\",zIndex:999999,textAlign:\"center\",fontSize:\"3em\",border:\"5px dashed #333\",color:'#333',display:\"flex\",justifyContent:\"center\",alignItems:\"center\"},circleLoading:{color:blue[500],position:\"absolute\",opacity:\"70%\",top:0,left:\"50%\",marginTop:12},messageLeft:{marginRight:20,marginTop:2,minWidth:100,maxWidth:600,height:\"auto\",display:\"block\",position:\"relative\",\"&:hover #messageActionsButton\":{display:\"flex\",position:\"absolute\",top:0,right:0},whiteSpace:\"pre-wrap\",backgroundColor:theme.mode==='light'?\"#ffffff\":\"#202c33\",color:theme.mode==='light'?\"#303030\":\"#ffffff\",alignSelf:\"flex-start\",borderTopLeftRadius:0,borderTopRightRadius:8,borderBottomLeftRadius:8,borderBottomRightRadius:8,paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:0,boxShadow:theme.mode==='light'?\"0 1px 1px #b3b3b3\":\"0 1px 1px #000000\"},quotedContainerLeft:{margin:\"-3px -80px 6px -6px\",overflow:\"hidden\",backgroundColor:theme.mode==='light'?\"#f0f0f0\":\"#1d282f\",borderRadius:\"7.5px\",display:\"flex\",position:\"relative\"},quotedMsg:{padding:10,maxWidth:300,height:\"auto\",display:\"block\",whiteSpace:\"pre-wrap\",overflow:\"hidden\"},quotedSideColorLeft:{flex:\"none\",width:\"4px\",backgroundColor:\"#388aff\"},messageRight:{marginLeft:20,marginTop:2,minWidth:100,maxWidth:600,height:\"auto\",display:\"block\",position:\"relative\",\"&:hover #messageActionsButton\":{display:\"flex\",position:\"absolute\",top:0,right:0},whiteSpace:\"pre-wrap\",backgroundColor:theme.mode==='light'?\"#dcf8c6\":\"#005c4b\",color:theme.mode==='light'?\"#303030\":\"#ffffff\",alignSelf:\"flex-end\",borderTopLeftRadius:8,borderTopRightRadius:8,borderBottomLeftRadius:8,borderBottomRightRadius:0,paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:0,boxShadow:theme.mode==='light'?\"0 1px 1px #b3b3b3\":\"0 1px 1px #000000\"},messageRightPrivate:{marginLeft:20,marginTop:2,minWidth:100,maxWidth:600,height:\"auto\",display:\"block\",position:\"relative\",\"&:hover #messageActionsButton\":{display:\"flex\",position:\"absolute\",top:0,right:0},whiteSpace:\"pre-wrap\",backgroundColor:\"#F0E68C\",color:\"#303030\",alignSelf:\"flex-end\",borderTopLeftRadius:8,borderTopRightRadius:8,borderBottomLeftRadius:8,borderBottomRightRadius:0,paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:0,boxShadow:theme.mode==='light'?\"0 1px 1px #b3b3b3\":\"0 1px 1px #000000\"},quotedContainerRight:{margin:\"-3px -80px 6px -6px\",overflowY:\"hidden\",backgroundColor:theme.mode==='light'?\"#cfe9ba\":\"#025144\",borderRadius:\"7.5px\",display:\"flex\",position:\"relative\"},quotedMsgRight:{padding:10,maxWidth:300,height:\"auto\",whiteSpace:\"pre-wrap\"},quotedSideColorRight:{flex:\"none\",width:\"4px\",backgroundColor:\"#35cd96\"},messageActionsButton:{display:\"none\",position:\"relative\",color:\"#999\",zIndex:1,backgroundColor:\"inherit\",opacity:\"90%\",\"&:hover, &.Mui-focusVisible\":{backgroundColor:\"inherit\"}},messageContactName:{display:\"flex\",color:\"#6bcbef\",fontWeight:500},textContentItem:{overflowWrap:\"break-word\",padding:\"3px 80px 6px 6px\"},textContentItemDeleted:{fontStyle:\"italic\",color:\"rgba(0, 0, 0, 0.36)\",overflowWrap:\"break-word\",padding:\"3px 80px 6px 6px\"},messageMedia:{// âœ… CORREÃ‡ÃƒO: objectFit removido para vÃ­deos funcionarem melhor\n// objectFit: \"cover\", // Removido pois pode causar problemas em vÃ­deos\nwidth:400,height:\"auto\",borderTopLeftRadius:8,borderTopRightRadius:8,borderBottomLeftRadius:8,borderBottomRightRadius:8,// âœ… CORREÃ‡ÃƒO: Adicionar estilos especÃ­ficos para vÃ­deo\n\"&[controls]\":{objectFit:\"contain\"// Para vÃ­deos, usar contain em vez de cover\n}},timestamp:{fontSize:11,position:\"absolute\",bottom:0,right:5,color:\"#999\"},forwardMessage:{fontSize:12,fontStyle:\"italic\",position:\"absolute\",top:0,left:5,color:\"#999\",display:\"flex\",alignItems:\"center\"},dailyTimestamp:{alignItems:\"center\",textAlign:\"center\",alignSelf:\"center\",width:\"110px\",backgroundColor:\"#e1f3fb\",margin:\"10px\",borderRadius:\"10px\",boxShadow:\"0 1px 1px #b3b3b3\"},dailyTimestampText:{color:\"#808888\",padding:8,alignSelf:\"center\",marginLeft:\"0px\"},ackIcons:{fontSize:18,verticalAlign:\"middle\",marginLeft:4},deletedIcon:{fontSize:18,verticalAlign:\"middle\",marginRight:4},ackDoneAllIcon:{color:blue[500],fontSize:18,verticalAlign:\"middle\",marginLeft:4},ackPlayedIcon:{color:green[500],fontSize:18,verticalAlign:\"middle\",marginLeft:4},downloadMedia:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",backgroundColor:\"inherit\",padding:10,color:theme.mode===\"light\"?theme.palette.light:theme.palette.dark},messageCenter:{marginTop:5,alignItems:\"center\",verticalAlign:\"center\",alignContent:\"center\",backgroundColor:\"#E1F5FEEB\",fontSize:\"12px\",minWidth:100,maxWidth:270,color:\"#272727\",borderTopLeftRadius:0,borderTopRightRadius:8,borderBottomLeftRadius:8,borderBottomRightRadius:8,paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:0,boxShadow:\"0 1px 1px #b3b3b3\"},deletedMessage:{color:'#f55d65'}}));const reducer=(state,action)=>{if(action.type===\"LOAD_MESSAGES\"){const messages=action.payload;const newMessages=[];messages.forEach(message=>{const messageIndex=state.findIndex(m=>m.id===message.id);if(messageIndex!==-1){state[messageIndex]=message;}else{newMessages.push(message);}});return[...newMessages,...state];}if(action.type===\"ADD_MESSAGE\"){const newMessage=action.payload;const messageIndex=state.findIndex(m=>m.id===newMessage.id);if(messageIndex!==-1){state[messageIndex]=newMessage;}else{state.push(newMessage);}return[...state];}if(action.type===\"UPDATE_MESSAGE\"){const messageToUpdate=action.payload;const messageIndex=state.findIndex(m=>m.id===messageToUpdate.id);if(messageIndex!==-1){state[messageIndex]=messageToUpdate;}return[...state];}if(action.type===\"RESET\"){return[];}};const MessagesList=_ref=>{let{isGroup,onDrop,whatsappId,queueId,channel,ticketStatus}=_ref;const classes=useStyles();const[messagesList,dispatch]=useReducer(reducer,[]);const[pageNumber,setPageNumber]=useState(1);const[hasMore,setHasMore]=useState(false);const[loading,setLoading]=useState(false);const[loadingMore,setLoadingMore]=useState(false);const history=useHistory();const lastMessageRef=useRef();const[selectedMessage,setSelectedMessage]=useState({});const{setReplyingMessage}=useContext(ReplyMessageContext);const[anchorEl,setAnchorEl]=useState(null);const messageOptionsMenuOpen=Boolean(anchorEl);const{ticketId}=useParams();const currentTicketId=useRef(ticketId);const{getAll}=useCompanySettings();const[dragActive,setDragActive]=useState(false);const[dragTimeout,setDragTimeout]=useState(null);const[videoLoading,setVideoLoading]=useState(true);const[videoError,setVideoError]=useState(false);const[lgpdDeleteMessage,setLGPDDeleteMessage]=useState(false);const{selectedQueuesMessage}=useContext(QueueSelectedContext);// Hook simplificado para PDF\nconst{downloadPdf,extractPdfInfoFromMessage,isPdfUrl}=usePdfViewer();const{showSelectMessageCheckbox}=useContext(ForwardMessageContext);const{user,socket}=useContext(AuthContext);const companyId=user.companyId;useEffect(()=>{async function fetchData(){const settings=await getAll(companyId);let settinglgpdDeleteMessage;let settingEnableLGPD;for(const[key,value]of Object.entries(settings)){if(key===\"lgpdDeleteMessage\")settinglgpdDeleteMessage=value;if(key===\"enableLGPD\")settingEnableLGPD=value;}if(settingEnableLGPD===\"enabled\"&&settinglgpdDeleteMessage===\"enabled\"){setLGPDDeleteMessage(true);}}fetchData();},[]);useEffect(()=>{dispatch({type:\"RESET\"});setPageNumber(1);currentTicketId.current=ticketId;},[ticketId,selectedQueuesMessage]);useEffect(()=>{setLoading(true);const delayDebounceFn=setTimeout(()=>{const fetchMessages=async()=>{if(ticketId===\"undefined\"){history.push(\"/tickets\");return;}if(isNil(ticketId))return;try{const{data}=await api.get(\"/messages/\"+ticketId,{params:{pageNumber,selectedQueues:JSON.stringify(selectedQueuesMessage)}});if(currentTicketId.current===ticketId){dispatch({type:\"LOAD_MESSAGES\",payload:data.messages});setHasMore(data.hasMore);setLoading(false);setLoadingMore(false);}if(pageNumber===1&&data.messages.length>1){scrollToBottom();}}catch(err){setLoading(false);toastError(err);setLoadingMore(false);}};fetchMessages();},500);return()=>{clearTimeout(delayDebounceFn);};},[pageNumber,ticketId,selectedQueuesMessage]);useEffect(()=>{if(ticketId===\"undefined\"){return;}const companyId=user.companyId;const connectEventMessagesList=()=>{socket.emit(\"joinChatBox\",\"\".concat(ticketId));};const onAppMessageMessagesList=data=>{var _data$message,_data$message$ticket,_data$message$ticket2;if(data.action===\"create\"&&data.ticket.uuid===ticketId){dispatch({type:\"ADD_MESSAGE\",payload:data.message});scrollToBottom();}if(data.action===\"update\"&&(data===null||data===void 0?void 0:(_data$message=data.message)===null||_data$message===void 0?void 0:(_data$message$ticket=_data$message.ticket)===null||_data$message$ticket===void 0?void 0:_data$message$ticket.uuid)===ticketId){dispatch({type:\"UPDATE_MESSAGE\",payload:data.message});}if(data.action==\"delete\"&&((_data$message$ticket2=data.message.ticket)===null||_data$message$ticket2===void 0?void 0:_data$message$ticket2.uuid)===ticketId){dispatch({type:\"DELETE_MESSAGE\",payload:data.messageId});}};socket.on(\"connect\",connectEventMessagesList);socket.on(\"company-\".concat(companyId,\"-appMessage\"),onAppMessageMessagesList);return()=>{socket.emit(\"joinChatBoxLeave\",\"\".concat(ticketId));socket.off(\"connect\",connectEventMessagesList);socket.off(\"company-\".concat(companyId,\"-appMessage\"),onAppMessageMessagesList);};},[ticketId]);useEffect(()=>{return()=>{if(dragTimeout){clearTimeout(dragTimeout);}};},[dragTimeout]);const loadMore=()=>{if(loadingMore)return;setLoadingMore(true);setPageNumber(prevPageNumber=>prevPageNumber+1);};const scrollToBottom=()=>{setTimeout(()=>{if(lastMessageRef.current){lastMessageRef.current.scrollIntoView({});}},100);};const handleScroll=e=>{if(!hasMore)return;const{scrollTop}=e.currentTarget;if(scrollTop===0){document.getElementById(\"messagesList\").scrollTop=1;}if(loading){return;}if(scrollTop<50){loadMore();}};const handleOpenMessageOptionsMenu=(e,message)=>{setAnchorEl(e.currentTarget);setSelectedMessage(message);};const handleCloseMessageOptionsMenu=e=>{setAnchorEl(null);};const hanldeReplyMessage=(e,message)=>{setAnchorEl(null);setReplyingMessage(message);};const getBasename=filepath=>{if(!filepath)return'';// Remove query strings e hashes\nconst cleanPath=filepath.split('?')[0].split('#')[0];// Pega o Ãºltimo segmento apÃ³s /\nconst segments=cleanPath.split('/');return segments[segments.length-1];};const checkMessageMedia=message=>{const isAudioMessage=message=>{if(message.mediaType===\"audio\"){console.log(\"ðŸŽµ Detectado como Ã¡udio pelo mediaType:\",message.mediaType);return true;}if(message.mediaUrl){const audioExtensions=['.mp3','.wav','.ogg','.m4a','.aac','.webm'];const url=message.mediaUrl.toLowerCase();const hasAudioExtension=audioExtensions.some(ext=>url.includes(ext));if(hasAudioExtension){console.log(\"ðŸŽµ Detectado como Ã¡udio pela URL:\",url);return true;}}if(message.body&&typeof message.body==='string'){const body=message.body.toLowerCase();const isAudioBody=body.includes('Ã¡udio gravado')||body.includes('audio_')||body.includes('ðŸŽµ')||body.includes('arquivo de Ã¡udio')||body.includes('mensagem de voz');if(isAudioBody){console.log(\"ðŸŽµ Detectado como Ã¡udio pelo body:\",body);return true;}}return false;};// Templates\nif(message.mediaType===\"template\"){return/*#__PURE__*/_jsx(Template,{message:message});}// LocalizaÃ§Ã£o\nelse if(message.mediaType===\"locationMessage\"&&message.body.split('|').length>=2){let locationParts=message.body.split('|');let imageLocation=locationParts[0];let linkLocation=locationParts[1];let descriptionLocation=locationParts.length>2?locationParts[2]:null;return/*#__PURE__*/_jsx(LocationPreview,{image:imageLocation,link:linkLocation,description:descriptionLocation});}// Contatos\nelse if(message.mediaType===\"contactMessage\"){var _obj$,_message$ticket,_message$ticket2;let array=message.body.split(\"\\n\");let obj=[];let contact=\"\";for(let index=0;index<array.length;index++){const v=array[index];let values=v.split(\":\");for(let ind=0;ind<values.length;ind++){if(values[ind].indexOf(\"+\")!==-1){obj.push({number:values[ind]});}if(values[ind].indexOf(\"FN\")!==-1){contact=values[ind+1];}}}return/*#__PURE__*/_jsx(VcardPreview,{contact:contact,numbers:(_obj$=obj[0])===null||_obj$===void 0?void 0:_obj$.number,queueId:message===null||message===void 0?void 0:(_message$ticket=message.ticket)===null||_message$ticket===void 0?void 0:_message$ticket.queueId,whatsappId:message===null||message===void 0?void 0:(_message$ticket2=message.ticket)===null||_message$ticket2===void 0?void 0:_message$ticket2.whatsappId,channel:channel});}else if(message.mediaType===\"adMetaPreview\"){// Adicionado para renderizar o componente de preview de anÃºncio\nconsole.log(\"Entrou no MetaPreview\");// âœ… CORREÃ‡ÃƒO: Parse correto dos dados - formato: image|sourceUrl|title|body|messageUser\nlet[image,sourceUrl,title,body,messageUser]=message.body.split('|');// Fallback para messageUser se nÃ£o estiver presente\nif(!messageUser||messageUser.trim()===\"\"){messageUser=\"OlÃ¡! Tenho interesse e queria mais informaÃ§Ãµes, por favor.\";}return/*#__PURE__*/_jsx(AdMetaPreview,{image:image,sourceUrl:sourceUrl,title:title,body:body,messageUser:messageUser});}// PDF e Documentos - SÃ“ DOWNLOAD\nelse if(isPdfUrl(message.mediaUrl,message.body,message.mediaType)){console.log(\"ðŸ“„ Renderizando como documento/PDF:\",message.id);const pdfInfo=extractPdfInfoFromMessage(message);return/*#__PURE__*/_jsx(PdfPreview,{url:pdfInfo.url,filename:pdfInfo.filename,size:pdfInfo.size,mediaType:pdfInfo.mediaType,onDownload:(url,name)=>{console.log(\"ðŸ“¥ Download PDF solicitado:\",{url,name});downloadPdf(url,name);}});}// Ãudio\nelse if(isAudioMessage(message)){console.log(\"ðŸŽµ Renderizando como Ã¡udio:\",message.id);return/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',maxWidth:'300px',padding:'8px',backgroundColor:'transparent'},children:/*#__PURE__*/_jsx(AudioModal,{url:message.mediaUrl,message:message})});}// Imagens\nelse if(message.mediaType===\"image\"){console.log(\"ðŸ–¼ï¸ Renderizando como imagem\");return/*#__PURE__*/_jsx(ModalImageCors,{imageUrl:message.mediaUrl});}// VÃ­deos\nelse if(message.mediaType===\"video\"){console.log(\"ðŸŽ¥ Renderizando como vÃ­deo\");return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:\"400px\",width:\"100%\",position:\"relative\"},children:[videoLoading&&!videoError&&/*#__PURE__*/_jsxs(\"div\",{style:{position:\"absolute\",top:\"50%\",left:\"50%\",transform:\"translate(-50%, -50%)\",zIndex:2,display:\"flex\",flexDirection:\"column\",alignItems:\"center\",gap:\"8px\"},children:[/*#__PURE__*/_jsx(CircularProgress,{size:30}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"textSecondary\",children:\"Carregando v\\xEDdeo...\"})]}),/*#__PURE__*/_jsxs(\"video\",{className:classes.messageMedia,src:message.mediaUrl,controls:true,preload:\"metadata\",playsInline:true,style:{width:\"100%\",height:\"auto\",maxHeight:\"300px\",borderRadius:\"8px\",backgroundColor:\"#f0f0f0\",opacity:videoLoading?0.3:1,transition:\"opacity 0.3s ease\"},onLoadStart:()=>{console.log(\"â³ Iniciando carregamento do vÃ­deo\");setVideoLoading(true);setVideoError(false);},onLoadedData:()=>{console.log(\"âœ… VÃ­deo carregado e pronto\");setVideoLoading(false);},onCanPlay:()=>{console.log(\"âœ… VÃ­deo pronto para reproduÃ§Ã£o\");setVideoLoading(false);},onError:e=>{console.error(\"âŒ Erro ao carregar vÃ­deo:\",e);console.log(\"ðŸ”— URL do vÃ­deo:\",message.mediaUrl);setVideoLoading(false);setVideoError(true);},children:[/*#__PURE__*/_jsx(\"source\",{src:message.mediaUrl,type:\"video/mp4\"}),/*#__PURE__*/_jsx(\"source\",{src:message.mediaUrl,type:\"video/webm\"}),/*#__PURE__*/_jsx(\"source\",{src:message.mediaUrl,type:\"video/ogg\"}),\"Seu navegador n\\xE3o suporta reprodu\\xE7\\xE3o de v\\xEDdeo.\"]}),videoError&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"20px\",textAlign:\"center\",backgroundColor:\"#f5f5f5\",borderRadius:\"8px\",color:\"#666\",marginTop:\"8px\"},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",style:{marginBottom:\"12px\"},children:\"\\u274C Erro ao carregar v\\xEDdeo\"}),/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(GetApp,{}),onClick:()=>{const link=document.createElement('a');link.href=message.mediaUrl;link.download=message.body||'video.mp4';link.click();},variant:\"outlined\",size:\"small\",children:\"Baixar V\\xEDdeo\"})]})]});}// Outros tipos de arquivo\nelse if(message.mediaUrl){console.log(\"ðŸ“Ž Renderizando como download genÃ©rico\");return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:classes.downloadMedia,children:/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(GetApp,{}),variant:\"outlined\",onClick:()=>downloadPdf(message.mediaUrl,message.body||'arquivo'),children:\"Download\"})}),/*#__PURE__*/_jsx(Divider,{})]});}return null;};const renderMessageAck=message=>{if(message.ack===0){return/*#__PURE__*/_jsx(AccessTime,{fontSize:\"small\",className:classes.ackIcons});}else if(message.ack===1){return/*#__PURE__*/_jsx(Done,{fontSize:\"small\",className:classes.ackIcons});}else if(message.ack===2||message.ack===3){return/*#__PURE__*/_jsx(DoneAll,{fontSize:\"small\",className:classes.ackIcons});}else if(message.ack===4){return/*#__PURE__*/_jsx(DoneAll,{fontSize:\"small\",className:message.mediaType===\"audio\"?classes.ackPlayedIcon:classes.ackDoneAllIcon});}else if(message.ack===5){return/*#__PURE__*/_jsx(DoneAll,{fontSize:\"small\",className:classes.ackDoneAllIcon});}};const renderDailyTimestamps=(message,index)=>{const today=format(new Date(),\"dd/MM/yyyy\");if(index===0){return/*#__PURE__*/_jsx(\"span\",{className:classes.dailyTimestamp,children:/*#__PURE__*/_jsx(\"div\",{className:classes.dailyTimestampText,children:today===format(parseISO(messagesList[index].createdAt),\"dd/MM/yyyy\")?\"HOJE\":format(parseISO(messagesList[index].createdAt),\"dd/MM/yyyy\")})},\"timestamp-\".concat(message.id));}else if(index<messagesList.length-1){let messageDay=parseISO(messagesList[index].createdAt);let previousMessageDay=parseISO(messagesList[index-1].createdAt);if(!isSameDay(messageDay,previousMessageDay)){return/*#__PURE__*/_jsx(\"span\",{className:classes.dailyTimestamp,children:/*#__PURE__*/_jsx(\"div\",{className:classes.dailyTimestampText,children:today===format(parseISO(messagesList[index].createdAt),\"dd/MM/yyyy\")?\"HOJE\":format(parseISO(messagesList[index].createdAt),\"dd/MM/yyyy\")})},\"timestamp-\".concat(message.id));}}else if(index===messagesList.length-1){return/*#__PURE__*/_jsx(\"div\",{ref:lastMessageRef,style:{float:\"left\",clear:\"both\"}},\"ref-\".concat(message.id));}};const renderTicketsSeparator=(message,index)=>{var _messagesList;let lastTicket=(_messagesList=messagesList[index-1])===null||_messagesList===void 0?void 0:_messagesList.ticketId;let currentTicket=message.ticketId;if(lastTicket!==currentTicket&&lastTicket!==undefined){var _message$ticket3;if(message!==null&&message!==void 0&&(_message$ticket3=message.ticket)!==null&&_message$ticket3!==void 0&&_message$ticket3.queue){var _message$ticket4,_message$ticket4$queu,_message$ticket5,_message$ticket5$queu;return/*#__PURE__*/_jsx(\"span\",{className:classes.currentTick,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.currentTicktText,style:{backgroundColor:(message===null||message===void 0?void 0:(_message$ticket4=message.ticket)===null||_message$ticket4===void 0?void 0:(_message$ticket4$queu=_message$ticket4.queue)===null||_message$ticket4$queu===void 0?void 0:_message$ticket4$queu.color)||\"grey\"},children:[\"#\",i18n.t(\"ticketsList.called\"),\" \",message===null||message===void 0?void 0:message.ticketId,\" - \",message===null||message===void 0?void 0:(_message$ticket5=message.ticket)===null||_message$ticket5===void 0?void 0:(_message$ticket5$queu=_message$ticket5.queue)===null||_message$ticket5$queu===void 0?void 0:_message$ticket5$queu.name]})},\"timestamp-\".concat(message.id,\"a\"));}else{return/*#__PURE__*/_jsx(\"span\",{className:classes.currentTick,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.currentTicktText,style:{backgroundColor:\"grey\"},children:[\"#\",i18n.t(\"ticketsList.called\"),\" \",message.ticketId,\" - \",i18n.t(\"ticketsList.noQueue\")]})},\"timestamp-\".concat(message.id,\"b\"));}}};const renderMessageDivider=(message,index)=>{if(index<messagesList.length&&index>0){let messageUser=messagesList[index].fromMe;let previousMessageUser=messagesList[index-1].fromMe;if(messageUser!==previousMessageUser){return/*#__PURE__*/_jsx(\"span\",{style:{marginTop:16}},\"divider-\".concat(message.id));}}};const renderQuotedMessage=message=>{var _message$quotedMsg,_message$quotedMsg2,_message$quotedMsg3,_message$quotedMsg3$c,_message$quotedMsg4,_message$quotedMsg5;return/*#__PURE__*/_jsxs(\"div\",{className:clsx(classes.quotedContainerLeft,{[classes.quotedContainerRight]:message.fromMe}),children:[/*#__PURE__*/_jsx(\"span\",{className:clsx(classes.quotedSideColorLeft,{[classes.quotedSideColorRight]:(_message$quotedMsg=message.quotedMsg)===null||_message$quotedMsg===void 0?void 0:_message$quotedMsg.fromMe})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.quotedMsg,children:[!((_message$quotedMsg2=message.quotedMsg)!==null&&_message$quotedMsg2!==void 0&&_message$quotedMsg2.fromMe)&&/*#__PURE__*/_jsx(\"span\",{className:classes.messageContactName,children:(_message$quotedMsg3=message.quotedMsg)===null||_message$quotedMsg3===void 0?void 0:(_message$quotedMsg3$c=_message$quotedMsg3.contact)===null||_message$quotedMsg3$c===void 0?void 0:_message$quotedMsg3$c.name}),message.quotedMsg.mediaType===\"audio\"&&/*#__PURE__*/_jsx(\"div\",{className:classes.downloadMedia,children:/*#__PURE__*/_jsx(AudioModal,{url:message.quotedMsg.mediaUrl})}),message.quotedMsg.mediaType===\"video\"&&/*#__PURE__*/_jsx(\"div\",{style:{maxWidth:\"300px\",width:\"100%\"},children:/*#__PURE__*/_jsxs(\"video\",{className:classes.messageMedia,src:message.quotedMsg.mediaUrl,controls:true,preload:\"metadata\",style:{width:\"100%\",height:\"auto\",maxHeight:\"200px\",borderRadius:\"6px\",backgroundColor:\"#f0f0f0\"},onError:e=>{console.error(\"âŒ Erro ao carregar vÃ­deo citado:\",e);},children:[/*#__PURE__*/_jsx(\"source\",{src:message.quotedMsg.mediaUrl,type:\"video/mp4\"}),/*#__PURE__*/_jsx(\"source\",{src:message.quotedMsg.mediaUrl,type:\"video/webm\"}),/*#__PURE__*/_jsx(\"source\",{src:message.quotedMsg.mediaUrl,type:\"video/ogg\"}),/*#__PURE__*/_jsx(\"div\",{style:{padding:\"10px\",textAlign:\"center\",fontSize:\"12px\",color:\"#999\"},children:\"\\u274C Erro ao carregar v\\xEDdeo\"})]})}),message.quotedMsg.mediaType===\"contactMessage\"&&\"Contato\",message.quotedMsg.mediaType===\"application\"&&/*#__PURE__*/_jsx(\"div\",{className:classes.downloadMedia,children:/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(GetApp,{}),variant:\"outlined\",target:\"_blank\",href:message.quotedMsg.mediaUrl,children:\"Download\"})}),message.quotedMsg.mediaType===\"image\"&&/*#__PURE__*/_jsx(ModalImageCors,{imageUrl:message.quotedMsg.mediaUrl})||((_message$quotedMsg4=message.quotedMsg)===null||_message$quotedMsg4===void 0?void 0:_message$quotedMsg4.body),!message.quotedMsg.mediaType===\"image\"&&((_message$quotedMsg5=message.quotedMsg)===null||_message$quotedMsg5===void 0?void 0:_message$quotedMsg5.body)]})]});};const handleDrag=event=>{event.preventDefault();event.stopPropagation();if(event.type===\"dragenter\"||event.type===\"dragover\"){const hasFiles=event.dataTransfer&&event.dataTransfer.types&&(event.dataTransfer.types.includes('Files')||event.dataTransfer.types.includes('application/x-moz-file'));if(hasFiles){if(dragTimeout){clearTimeout(dragTimeout);}const timeout=setTimeout(()=>{if(event.dataTransfer.items&&event.dataTransfer.items.length>0){setDragActive(true);}},100);setDragTimeout(timeout);}}else if(event.type===\"dragleave\"){if(dragTimeout){clearTimeout(dragTimeout);setDragTimeout(null);}const rect=event.currentTarget.getBoundingClientRect();const x=event.clientX;const y=event.clientY;if(x<rect.left||x>rect.right||y<rect.top||y>rect.bottom){setDragActive(false);}}};const isYouTubeLink=url=>{const youtubeRegex=/(?:youtube\\.com\\/(?:[^\\/\\n\\s]+\\/\\S+\\/|(?:v|e(?:mbed)?)\\/|\\S*?[?&]v=)|youtu\\.be\\/)([a-zA-Z0-9_-]{11})/;return youtubeRegex.test(url);};const handleDrop=event=>{event.preventDefault();event.stopPropagation();if(dragTimeout){clearTimeout(dragTimeout);setDragTimeout(null);}setDragActive(false);if(event.dataTransfer.files&&event.dataTransfer.files.length>0&&event.dataTransfer.files[0]instanceof File){if(onDrop){onDrop(event.dataTransfer.files);}}};const xmlRegex=/<([^>]+)>/g;const boldRegex=/\\*(.*?)\\*/g;const formatXml=xmlString=>{// Verifica se o XML contÃ©m a assinatura com nome do atendente\nif(boldRegex.test(xmlString)){// Formata o texto dentro da assinatura em negrito\nxmlString=xmlString.replace(boldRegex,\"**$1**\");}return xmlString;};const renderMessages=()=>{if(messagesList.length>0){const viewMessagesList=messagesList.map((message,index)=>{if(message.mediaType===\"call_log\"){var _message$contact;return/*#__PURE__*/_jsxs(React.Fragment,{children:[renderDailyTimestamps(message,index),renderTicketsSeparator(message,index),renderMessageDivider(message,index),/*#__PURE__*/_jsxs(\"div\",{className:classes.messageCenter,children:[/*#__PURE__*/_jsx(IconButton,{variant:\"contained\",size:\"small\",id:\"messageActionsButton\",disabled:message.isDeleted,className:classes.messageActionsButton,onClick:e=>handleOpenMessageOptionsMenu(e,message),children:/*#__PURE__*/_jsx(ExpandMore,{})}),isGroup&&/*#__PURE__*/_jsx(\"span\",{className:classes.messageContactName,children:(_message$contact=message.contact)===null||_message$contact===void 0?void 0:_message$contact.name}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 20 17\",width:\"20\",height:\"17\",children:/*#__PURE__*/_jsx(\"path\",{fill:\"#df3333\",d:\"M18.2 12.1c-1.5-1.8-5-2.7-8.2-2.7s-6.7 1-8.2 2.7c-.7.8-.3 2.3.2 2.8.2.2.3.3.5.3 1.4 0 3.6-.7 3.6-.7.5-.2.8-.5.8-1v-1.3c.7-1.2 5.4-1.2 6.4-.1l.1.1v1.3c0 .2.1.4.2.6.1.2.3.3.5.4 0 0 2.2.7 3.6.7.2 0 1.4-2 .5-3.1zM5.4 3.2l4.7 4.6 5.8-5.7-.9-.8L10.1 6 6.4 2.3h2.5V1H4.1v4.8h1.3V3.2z\"})}),\" \",/*#__PURE__*/_jsxs(\"span\",{children:[i18n.t(\"ticketsList.missedCall\"),\" \",format(parseISO(message.createdAt),\"HH:mm\")]})]})]})]},message.id);}if(!message.fromMe){var _message$queue,_message$contact2,_message$contact3;return/*#__PURE__*/_jsxs(React.Fragment,{children:[renderDailyTimestamps(message,index),renderTicketsSeparator(message,index),renderMessageDivider(message,index),/*#__PURE__*/_jsxs(\"div\",{className:classes.messageLeft,title:message.queueId&&((_message$queue=message.queue)===null||_message$queue===void 0?void 0:_message$queue.name),onDoubleClick:e=>hanldeReplyMessage(e,message),children:[showSelectMessageCheckbox&&/*#__PURE__*/_jsx(SelectMessageCheckbox,{message:message}),/*#__PURE__*/_jsx(IconButton,{variant:\"contained\",size:\"small\",id:\"messageActionsButton\",disabled:message.isDeleted,className:classes.messageActionsButton,onClick:e=>handleOpenMessageOptionsMenu(e,message),children:/*#__PURE__*/_jsx(ExpandMore,{})}),message.isForwarded&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{className:classes.forwardMessage,children:[/*#__PURE__*/_jsx(Reply,{style:{color:\"grey\",transform:'scaleX(-1)'}}),\" Encaminhada\"]}),/*#__PURE__*/_jsx(\"br\",{})]}),isGroup&&/*#__PURE__*/_jsx(\"span\",{className:classes.messageContactName,children:(_message$contact2=message.contact)===null||_message$contact2===void 0?void 0:_message$contact2.name}),isYouTubeLink(message.body)&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(YouTubePreview,{videoUrl:message.body})}),!lgpdDeleteMessage&&message.isDeleted&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"span\",{className:classes.deletedMessage,children:\"\\uD83D\\uDEAB Essa mensagem foi apagada pelo contato \\xA0\"})}),(message.mediaUrl||message.mediaType===\"locationMessage\"||message.mediaType===\"contactMessage\"||message.mediaType===\"template\"||message.mediaType===\"adMetaPreview\")&&checkMessageMedia(message),/*#__PURE__*/_jsxs(\"div\",{className:clsx(classes.textContentItem,{[classes.textContentItemDeleted]:message.isDeleted}),children:[message.quotedMsg&&renderQuotedMessage(message),message.mediaType!==\"adMetaPreview\"&&(message.mediaUrl!==null&&(message.mediaType===\"image\"||message.mediaType===\"video\")&&getBasename(message.mediaUrl).trim()!==message.body.trim()||message.mediaType!==\"audio\"&&message.mediaType!==\"image\"&&message.mediaType!==\"video\"&&message.mediaType!=\"reactionMessage\"&&message.mediaType!=\"locationMessage\"&&message.mediaType!==\"contactMessage\"&&message.mediaType!==\"template\")&&/*#__PURE__*/_jsxs(_Fragment,{children:[xmlRegex.test(message.body)&&/*#__PURE__*/_jsx(\"span\",{children:message.body}),!xmlRegex.test(message.body)&&/*#__PURE__*/_jsx(MarkdownWrapper,{children:lgpdDeleteMessage&&message.isDeleted?\"ðŸš« _Mensagem apagada_ \":message.body})]}),message.quotedMsg&&message.mediaType===\"reactionMessage\"&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:\"0px\"},children:/*#__PURE__*/_jsx(MarkdownWrapper,{children:\"\"+(message===null||message===void 0?void 0:(_message$contact3=message.contact)===null||_message$contact3===void 0?void 0:_message$contact3.name)+\" reagiu... \"+message.body})})}),/*#__PURE__*/_jsx(\"span\",{className:classes.timestamp,children:message.isEdited?\"Editada \"+format(parseISO(message.createdAt),\"HH:mm\"):format(parseISO(message.createdAt),\"HH:mm\")})]})]})]},message.id);}else{var _message$queue2;return/*#__PURE__*/_jsxs(React.Fragment,{children:[renderDailyTimestamps(message,index),renderTicketsSeparator(message,index),renderMessageDivider(message,index),/*#__PURE__*/_jsxs(\"div\",{className:message.isPrivate?classes.messageRightPrivate:classes.messageRight,title:message.queueId&&((_message$queue2=message.queue)===null||_message$queue2===void 0?void 0:_message$queue2.name),onDoubleClick:e=>hanldeReplyMessage(e,message),children:[showSelectMessageCheckbox&&/*#__PURE__*/_jsx(SelectMessageCheckbox,{message:message}),/*#__PURE__*/_jsx(IconButton,{variant:\"contained\",size:\"small\",id:\"messageActionsButton\",disabled:message.isDeleted,className:classes.messageActionsButton,onClick:e=>handleOpenMessageOptionsMenu(e,message),children:/*#__PURE__*/_jsx(ExpandMore,{})}),message.isForwarded&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{className:classes.forwardMessage,children:[/*#__PURE__*/_jsx(Reply,{style:{color:\"grey\",transform:'scaleX(-1)'}}),\" Encaminhada\"]}),/*#__PURE__*/_jsx(\"br\",{})]}),isYouTubeLink(message.body)&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(YouTubePreview,{videoUrl:message.body})}),!lgpdDeleteMessage&&message.isDeleted&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"span\",{className:classes.deletedMessage,children:\"\\uD83D\\uDEAB Essa mensagem foi apagada \\xA0\"})}),(message.mediaUrl||message.mediaType===\"locationMessage\"||message.mediaType===\"contactMessage\"||message.mediaType===\"template\")&&checkMessageMedia(message),/*#__PURE__*/_jsxs(\"div\",{className:clsx(classes.textContentItem,{[classes.textContentItemDeleted]:message.isDeleted}),children:[message.quotedMsg&&renderQuotedMessage(message),(message.mediaType===\"image\"||message.mediaType===\"video\")&&getBasename(message.mediaUrl)===message.body||message.mediaType!==\"audio\"&&message.mediaType!=\"reactionMessage\"&&message.mediaType!=\"locationMessage\"&&message.mediaType!==\"contactMessage\"&&message.mediaType!==\"template\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[xmlRegex.test(message.body)&&/*#__PURE__*/_jsx(\"div\",{children:formatXml(message.body)}),!xmlRegex.test(message.body)&&/*#__PURE__*/_jsx(MarkdownWrapper,{children:message.body})]}),message.quotedMsg&&message.mediaType===\"reactionMessage\"&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:\"0px\"},children:/*#__PURE__*/_jsx(MarkdownWrapper,{children:\"VocÃª reagiu... \"+message.body})})}),/*#__PURE__*/_jsxs(\"span\",{className:classes.timestamp,children:[message.isEdited?\"Editada \"+format(parseISO(message.createdAt),\"HH:mm\"):format(parseISO(message.createdAt),\"HH:mm\"),renderMessageAck(message)]})]})]})]},message.id);}});return viewMessagesList;}else{return/*#__PURE__*/_jsx(\"div\",{children:\"Diga ol\\xE1 para seu novo contato!\"});}};const shouldBlurMessages=ticketStatus===\"pending\"&&user.allowSeeMessagesInPendingTickets===\"disabled\";return/*#__PURE__*/_jsxs(\"div\",{className:classes.messagesListWrapper,onDragEnter:handleDrag,children:[dragActive&&/*#__PURE__*/_jsx(\"div\",{className:classes.dragElement,onDragEnter:handleDrag,onDragLeave:handleDrag,onDragOver:handleDrag,onDrop:handleDrop,children:\"Solte o arquivo aqui\"}),/*#__PURE__*/_jsx(MessageOptionsMenu,{message:selectedMessage,anchorEl:anchorEl,menuOpen:messageOptionsMenuOpen,handleClose:handleCloseMessageOptionsMenu,isGroup:isGroup,whatsappId:whatsappId,queueId:queueId}),/*#__PURE__*/_jsx(\"div\",{id:\"messagesList\",className:classes.messagesList,onScroll:handleScroll,style:{filter:shouldBlurMessages?\"blur(4px)\":\"none\",pointerEvents:shouldBlurMessages?\"none\":\"auto\"},children:messagesList.length>0?renderMessages():[]}),channel!==\"whatsapp\"&&channel!==undefined&&/*#__PURE__*/_jsxs(\"div\",{style:{width:\"100%\",display:\"flex\",padding:\"10px\",alignItems:\"center\",backgroundColor:\"#E1F3FB\"},children:[channel===\"facebook\"?/*#__PURE__*/_jsx(Facebook,{}):channel===\"instagram\"?/*#__PURE__*/_jsx(Instagram,{}):/*#__PURE__*/_jsx(WhatsApp,{}),/*#__PURE__*/_jsx(\"span\",{children:\"Voc\\xEA tem 24h para responder ap\\xF3s receber uma mensagem, de acordo com as pol\\xEDticas da Meta.\"})]}),loading&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(CircularProgress,{className:classes.circleLoading})})]});};export default MessagesList;","map":{"version":3,"names":["React","useContext","useState","useEffect","useReducer","useRef","isSameDay","parseISO","format","clsx","isNil","blue","green","Button","Divider","Typography","IconButton","makeStyles","AccessTime","Done","DoneAll","ExpandMore","GetApp","Facebook","Instagram","Reply","WhatsApp","LockIcon","MarkdownWrapper","VcardPreview","LocationPreview","ModalImageCors","MessageOptionsMenu","whatsBackground","whatsBackgroundDark","YouTubePreview","PdfPreview","ReplyMessageContext","ForwardMessageContext","AdMetaPreview","api","toastError","i18n","SelectMessageCheckbox","useCompanySettings","AuthContext","QueueSelectedContext","AudioModal","CircularProgress","useParams","useHistory","downloadResource","Template","usePdfViewer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","useStyles","theme","messagesListWrapper","overflow","position","display","flexDirection","flexGrow","width","minWidth","minHeight","currentTick","alignItems","textAlign","alignSelf","backgroundColor","palette","primary","main","margin","borderRadius","boxShadow","currentTicktText","color","fontWeight","padding","marginLeft","messagesList","_objectSpread","backgroundImage","mode","concat","overflowY","scrollbarStyles","dragElement","background","height","zIndex","fontSize","border","justifyContent","circleLoading","opacity","top","left","marginTop","messageLeft","marginRight","maxWidth","right","whiteSpace","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","paddingLeft","paddingRight","paddingTop","paddingBottom","quotedContainerLeft","quotedMsg","quotedSideColorLeft","flex","messageRight","messageRightPrivate","quotedContainerRight","quotedMsgRight","quotedSideColorRight","messageActionsButton","messageContactName","textContentItem","overflowWrap","textContentItemDeleted","fontStyle","messageMedia","objectFit","timestamp","bottom","forwardMessage","dailyTimestamp","dailyTimestampText","ackIcons","verticalAlign","deletedIcon","ackDoneAllIcon","ackPlayedIcon","downloadMedia","light","dark","messageCenter","alignContent","deletedMessage","reducer","state","action","type","messages","payload","newMessages","forEach","message","messageIndex","findIndex","m","id","push","newMessage","messageToUpdate","MessagesList","_ref","isGroup","onDrop","whatsappId","queueId","channel","ticketStatus","classes","dispatch","pageNumber","setPageNumber","hasMore","setHasMore","loading","setLoading","loadingMore","setLoadingMore","history","lastMessageRef","selectedMessage","setSelectedMessage","setReplyingMessage","anchorEl","setAnchorEl","messageOptionsMenuOpen","Boolean","ticketId","currentTicketId","getAll","dragActive","setDragActive","dragTimeout","setDragTimeout","videoLoading","setVideoLoading","videoError","setVideoError","lgpdDeleteMessage","setLGPDDeleteMessage","selectedQueuesMessage","downloadPdf","extractPdfInfoFromMessage","isPdfUrl","showSelectMessageCheckbox","user","socket","companyId","fetchData","settings","settinglgpdDeleteMessage","settingEnableLGPD","key","value","Object","entries","current","delayDebounceFn","setTimeout","fetchMessages","data","get","params","selectedQueues","JSON","stringify","length","scrollToBottom","err","clearTimeout","connectEventMessagesList","emit","onAppMessageMessagesList","_data$message","_data$message$ticket","_data$message$ticket2","ticket","uuid","messageId","on","off","loadMore","prevPageNumber","scrollIntoView","handleScroll","e","scrollTop","currentTarget","document","getElementById","handleOpenMessageOptionsMenu","handleCloseMessageOptionsMenu","hanldeReplyMessage","getBasename","filepath","cleanPath","split","segments","checkMessageMedia","isAudioMessage","mediaType","console","log","mediaUrl","audioExtensions","url","toLowerCase","hasAudioExtension","some","ext","includes","body","isAudioBody","locationParts","imageLocation","linkLocation","descriptionLocation","image","link","description","_obj$","_message$ticket","_message$ticket2","array","obj","contact","index","v","values","ind","indexOf","number","numbers","sourceUrl","title","messageUser","trim","pdfInfo","filename","size","onDownload","name","style","children","imageUrl","transform","gap","variant","className","src","controls","preload","playsInline","maxHeight","transition","onLoadStart","onLoadedData","onCanPlay","onError","error","marginBottom","startIcon","onClick","createElement","href","download","click","renderMessageAck","ack","renderDailyTimestamps","today","Date","createdAt","messageDay","previousMessageDay","ref","float","clear","renderTicketsSeparator","_messagesList","lastTicket","currentTicket","undefined","_message$ticket3","queue","_message$ticket4","_message$ticket4$queu","_message$ticket5","_message$ticket5$queu","t","renderMessageDivider","fromMe","previousMessageUser","renderQuotedMessage","_message$quotedMsg","_message$quotedMsg2","_message$quotedMsg3","_message$quotedMsg3$c","_message$quotedMsg4","_message$quotedMsg5","target","handleDrag","event","preventDefault","stopPropagation","hasFiles","dataTransfer","types","timeout","items","rect","getBoundingClientRect","x","clientX","y","clientY","isYouTubeLink","youtubeRegex","test","handleDrop","files","File","xmlRegex","boldRegex","formatXml","xmlString","replace","renderMessages","viewMessagesList","map","_message$contact","disabled","isDeleted","xmlns","viewBox","fill","d","_message$queue","_message$contact2","_message$contact3","onDoubleClick","isForwarded","videoUrl","isEdited","_message$queue2","isPrivate","shouldBlurMessages","allowSeeMessagesInPendingTickets","onDragEnter","onDragLeave","onDragOver","menuOpen","handleClose","onScroll","filter","pointerEvents"],"sources":["/home/deploy/atendechatop/frontend/src/components/MessagesList/index.js"],"sourcesContent":["import React, { useContext, useState, useEffect, useReducer, useRef } from \"react\";\nimport { isSameDay, parseISO, format } from \"date-fns\";\nimport clsx from \"clsx\";\nimport { isNil } from \"lodash\";\nimport { blue, green } from \"@material-ui/core/colors\";\nimport {\n  Button,\n  Divider,\n  Typography,\n  IconButton,\n  makeStyles\n} from \"@material-ui/core\";\n\nimport {\n  AccessTime,\n  Done,\n  DoneAll,\n  ExpandMore,\n  GetApp,\n  Facebook,\n  Instagram,\n  Reply,\n  WhatsApp\n} from \"@material-ui/icons\";\nimport LockIcon from '@material-ui/icons/Lock';\nimport MarkdownWrapper from \"../MarkdownWrapper\";\nimport VcardPreview from \"../VcardPreview\";\nimport LocationPreview from \"../LocationPreview\";\nimport ModalImageCors from \"../ModalImageCors\";\nimport MessageOptionsMenu from \"../MessageOptionsMenu\";\nimport whatsBackground from \"../../assets/wa-background.png\";\nimport whatsBackgroundDark from \"../../assets/wa-background-dark.png\";\nimport YouTubePreview from \"../ModalYoutubeCors\";\nimport PdfPreview from \"../PdfPreview\";\nimport { ReplyMessageContext } from \"../../context/ReplyingMessage/ReplyingMessageContext\";\nimport { ForwardMessageContext } from \"../../context/ForwarMessage/ForwardMessageContext\";\nimport AdMetaPreview from \"../AdMetaPreview\";\nimport api from \"../../services/api\";\nimport toastError from \"../../errors/toastError\";\nimport { i18n } from \"../../translate/i18n\";\nimport SelectMessageCheckbox from \"./SelectMessageCheckbox\";\nimport useCompanySettings from \"../../hooks/useSettings/companySettings\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\nimport { QueueSelectedContext } from \"../../context/QueuesSelected/QueuesSelectedContext\";\nimport AudioModal from \"../AudioModal\";\nimport { CircularProgress } from \"@material-ui/core\";\nimport { useParams, useHistory } from 'react-router-dom';\nimport { downloadResource } from \"../../utils\";\nimport Template from \"./templates\";\nimport { usePdfViewer } from \"../../hooks/usePdfViewer\";\n\nconst useStyles = makeStyles((theme) => ({\n  messagesListWrapper: {\n    overflow: \"hidden\",\n    position: \"relative\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    flexGrow: 1,\n    width: \"100%\",\n    minWidth: 300,\n    minHeight: 200,\n  },\n\n  currentTick: {\n    alignItems: \"center\",\n    textAlign: \"center\",\n    alignSelf: \"center\",\n    width: \"95%\",\n    backgroundColor: theme.palette.primary.main,\n    margin: \"10px\",\n    borderRadius: \"10px\",\n    boxShadow: \"1px 5px 10px #b3b3b3\",\n  },\n\n  currentTicktText: {\n    color: theme.palette.primary,\n    fontWeight: 'bold',\n    padding: 8,\n    alignSelf: \"center\",\n    marginLeft: \"0px\",\n  },\n\n  messagesList: {\n    backgroundImage: theme.mode === 'light' ? `url(${whatsBackground})` : `url(${whatsBackgroundDark})`,\n    backgroundColor: theme.mode === 'light' ? \"transparent\" : \"#0b0b0d\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    flexGrow: 1,\n    padding: \"20px 20px 30px 20px\",\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles,\n  },\n  dragElement: {\n    background: 'rgba(255, 255, 255, 0.8)',\n    position: \"absolute\",\n    width: \"100%\",\n    height: \"100%\",\n    zIndex: 999999,\n    textAlign: \"center\",\n    fontSize: \"3em\",\n    border: \"5px dashed #333\",\n    color: '#333',\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  circleLoading: {\n    color: blue[500],\n    position: \"absolute\",\n    opacity: \"70%\",\n    top: 0,\n    left: \"50%\",\n    marginTop: 12,\n  },\n\n  messageLeft: {\n    marginRight: 20,\n    marginTop: 2,\n    minWidth: 100,\n    maxWidth: 600,\n    height: \"auto\",\n    display: \"block\",\n    position: \"relative\",\n    \"&:hover #messageActionsButton\": {\n      display: \"flex\",\n      position: \"absolute\",\n      top: 0,\n      right: 0,\n    },\n\n    whiteSpace: \"pre-wrap\",\n    backgroundColor: theme.mode === 'light' ? \"#ffffff\" : \"#202c33\",\n    color: theme.mode === 'light' ? \"#303030\" : \"#ffffff\",\n    alignSelf: \"flex-start\",\n    borderTopLeftRadius: 0,\n    borderTopRightRadius: 8,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 8,\n    paddingLeft: 5,\n    paddingRight: 5,\n    paddingTop: 5,\n    paddingBottom: 0,\n    boxShadow: theme.mode === 'light' ? \"0 1px 1px #b3b3b3\" : \"0 1px 1px #000000\"\n  },\n\n  quotedContainerLeft: {\n    margin: \"-3px -80px 6px -6px\",\n    overflow: \"hidden\",\n    backgroundColor: theme.mode === 'light' ? \"#f0f0f0\" : \"#1d282f\",\n    borderRadius: \"7.5px\",\n    display: \"flex\",\n    position: \"relative\",\n  },\n\n  quotedMsg: {\n    padding: 10,\n    maxWidth: 300,\n    height: \"auto\",\n    display: \"block\",\n    whiteSpace: \"pre-wrap\",\n    overflow: \"hidden\",\n  },\n\n  quotedSideColorLeft: {\n    flex: \"none\",\n    width: \"4px\",\n    backgroundColor: \"#388aff\",\n  },\n\n  messageRight: {\n    marginLeft: 20,\n    marginTop: 2,\n    minWidth: 100,\n    maxWidth: 600,\n    height: \"auto\",\n    display: \"block\",\n    position: \"relative\",\n    \"&:hover #messageActionsButton\": {\n      display: \"flex\",\n      position: \"absolute\",\n      top: 0,\n      right: 0,\n    },\n    whiteSpace: \"pre-wrap\",\n    backgroundColor: theme.mode === 'light' ? \"#dcf8c6\" : \"#005c4b\",\n    color: theme.mode === 'light' ? \"#303030\" : \"#ffffff\",\n    alignSelf: \"flex-end\",\n    borderTopLeftRadius: 8,\n    borderTopRightRadius: 8,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 0,\n    paddingLeft: 5,\n    paddingRight: 5,\n    paddingTop: 5,\n    paddingBottom: 0,\n    boxShadow: theme.mode === 'light' ? \"0 1px 1px #b3b3b3\" : \"0 1px 1px #000000\"\n  },\n\n  messageRightPrivate: {\n    marginLeft: 20,\n    marginTop: 2,\n    minWidth: 100,\n    maxWidth: 600,\n    height: \"auto\",\n    display: \"block\",\n    position: \"relative\",\n    \"&:hover #messageActionsButton\": {\n      display: \"flex\",\n      position: \"absolute\",\n      top: 0,\n      right: 0,\n    },\n    whiteSpace: \"pre-wrap\",\n    backgroundColor: \"#F0E68C\",\n    color: \"#303030\",\n    alignSelf: \"flex-end\",\n    borderTopLeftRadius: 8,\n    borderTopRightRadius: 8,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 0,\n    paddingLeft: 5,\n    paddingRight: 5,\n    paddingTop: 5,\n    paddingBottom: 0,\n    boxShadow: theme.mode === 'light' ? \"0 1px 1px #b3b3b3\" : \"0 1px 1px #000000\"\n  },\n\n  quotedContainerRight: {\n    margin: \"-3px -80px 6px -6px\",\n    overflowY: \"hidden\",\n    backgroundColor: theme.mode === 'light' ? \"#cfe9ba\" : \"#025144\",\n    borderRadius: \"7.5px\",\n    display: \"flex\",\n    position: \"relative\",\n  },\n\n  quotedMsgRight: {\n    padding: 10,\n    maxWidth: 300,\n    height: \"auto\",\n    whiteSpace: \"pre-wrap\",\n  },\n\n  quotedSideColorRight: {\n    flex: \"none\",\n    width: \"4px\",\n    backgroundColor: \"#35cd96\",\n  },\n\n  messageActionsButton: {\n    display: \"none\",\n    position: \"relative\",\n    color: \"#999\",\n    zIndex: 1,\n    backgroundColor: \"inherit\",\n    opacity: \"90%\",\n    \"&:hover, &.Mui-focusVisible\": { backgroundColor: \"inherit\" },\n  },\n\n  messageContactName: {\n    display: \"flex\",\n    color: \"#6bcbef\",\n    fontWeight: 500,\n  },\n\n  textContentItem: {\n    overflowWrap: \"break-word\",\n    padding: \"3px 80px 6px 6px\",\n  },\n\n  textContentItemDeleted: {\n    fontStyle: \"italic\",\n    color: \"rgba(0, 0, 0, 0.36)\",\n    overflowWrap: \"break-word\",\n    padding: \"3px 80px 6px 6px\",\n  },\n\n  messageMedia: {\n    // âœ… CORREÃ‡ÃƒO: objectFit removido para vÃ­deos funcionarem melhor\n    // objectFit: \"cover\", // Removido pois pode causar problemas em vÃ­deos\n    width: 400,\n    height: \"auto\",\n    borderTopLeftRadius: 8,\n    borderTopRightRadius: 8,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 8,\n    // âœ… CORREÃ‡ÃƒO: Adicionar estilos especÃ­ficos para vÃ­deo\n    \"&[controls]\": {\n      objectFit: \"contain\", // Para vÃ­deos, usar contain em vez de cover\n    }\n  },\n\n  timestamp: {\n    fontSize: 11,\n    position: \"absolute\",\n    bottom: 0,\n    right: 5,\n    color: \"#999\",\n  },\n\n  forwardMessage: {\n    fontSize: 12,\n    fontStyle: \"italic\",\n    position: \"absolute\",\n    top: 0,\n    left: 5,\n    color: \"#999\",\n    display: \"flex\",\n    alignItems: \"center\"\n  },\n\n  dailyTimestamp: {\n    alignItems: \"center\",\n    textAlign: \"center\",\n    alignSelf: \"center\",\n    width: \"110px\",\n    backgroundColor: \"#e1f3fb\",\n    margin: \"10px\",\n    borderRadius: \"10px\",\n    boxShadow: \"0 1px 1px #b3b3b3\",\n  },\n\n  dailyTimestampText: {\n    color: \"#808888\",\n    padding: 8,\n    alignSelf: \"center\",\n    marginLeft: \"0px\",\n  },\n\n  ackIcons: {\n    fontSize: 18,\n    verticalAlign: \"middle\",\n    marginLeft: 4,\n  },\n\n  deletedIcon: {\n    fontSize: 18,\n    verticalAlign: \"middle\",\n    marginRight: 4,\n  },\n\n  ackDoneAllIcon: {\n    color: blue[500],\n    fontSize: 18,\n    verticalAlign: \"middle\",\n    marginLeft: 4,\n  },\n\n  ackPlayedIcon: {\n    color: green[500],\n    fontSize: 18,\n    verticalAlign: \"middle\",\n    marginLeft: 4,\n  },\n  downloadMedia: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    backgroundColor: \"inherit\",\n    padding: 10,\n    color: theme.mode === \"light\" ? theme.palette.light : theme.palette.dark,\n  },\n\n  messageCenter: {\n    marginTop: 5,\n    alignItems: \"center\",\n    verticalAlign: \"center\",\n    alignContent: \"center\",\n    backgroundColor: \"#E1F5FEEB\",\n    fontSize: \"12px\",\n    minWidth: 100,\n    maxWidth: 270,\n    color: \"#272727\",\n    borderTopLeftRadius: 0,\n    borderTopRightRadius: 8,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 8,\n    paddingLeft: 5,\n    paddingRight: 5,\n    paddingTop: 5,\n    paddingBottom: 0,\n    boxShadow: \"0 1px 1px #b3b3b3\",\n  },\n\n  deletedMessage: {\n    color: '#f55d65'\n  }\n}));\n\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_MESSAGES\") {\n    const messages = action.payload;\n    const newMessages = [];\n\n    messages.forEach((message) => {\n\n      const messageIndex = state.findIndex((m) => m.id === message.id);\n      if (messageIndex !== -1) {\n        state[messageIndex] = message;\n      } else {\n        newMessages.push(message);\n      }\n    });\n\n    return [...newMessages, ...state];\n  }\n\n  if (action.type === \"ADD_MESSAGE\") {\n    const newMessage = action.payload;\n    const messageIndex = state.findIndex((m) => m.id === newMessage.id);\n\n    if (messageIndex !== -1) {\n      state[messageIndex] = newMessage;\n    } else {\n      state.push(newMessage);\n    }\n\n    return [...state];\n  }\n\n  if (action.type === \"UPDATE_MESSAGE\") {\n    const messageToUpdate = action.payload;\n    const messageIndex = state.findIndex((m) => m.id === messageToUpdate.id);\n\n    if (messageIndex !== -1) {\n      state[messageIndex] = messageToUpdate;\n    }\n\n    return [...state];\n  }\n\n  if (action.type === \"RESET\") {\n    return [];\n  }\n};\n\nconst MessagesList = ({\n  isGroup,\n  onDrop,\n  whatsappId,\n  queueId,\n  channel,\n  ticketStatus\n}) => {\n  const classes = useStyles();\n  const [messagesList, dispatch] = useReducer(reducer, []);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [hasMore, setHasMore] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const history = useHistory();\n  const lastMessageRef = useRef();\n\n  const [selectedMessage, setSelectedMessage] = useState({});\n  const { setReplyingMessage } = useContext(ReplyMessageContext);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const messageOptionsMenuOpen = Boolean(anchorEl);\n  const { ticketId } = useParams();\n\n  const currentTicketId = useRef(ticketId);\n  const { getAll } = useCompanySettings();\n  const [dragActive, setDragActive] = useState(false);\n  const [dragTimeout, setDragTimeout] = useState(null);\n\n  const [videoLoading, setVideoLoading] = useState(true);\n  const [videoError, setVideoError] = useState(false);\n\n  const [lgpdDeleteMessage, setLGPDDeleteMessage] = useState(false);\n  const { selectedQueuesMessage } = useContext(QueueSelectedContext);\n\n  // Hook simplificado para PDF\n  const {\n    downloadPdf,\n    extractPdfInfoFromMessage,\n    isPdfUrl\n  } = usePdfViewer();\n\n  const { showSelectMessageCheckbox } = useContext(ForwardMessageContext);\n  const { user, socket } = useContext(AuthContext);\n  const companyId = user.companyId;\n\n  useEffect(() => {\n    async function fetchData() {\n      const settings = await getAll(companyId);\n\n      let settinglgpdDeleteMessage;\n      let settingEnableLGPD;\n\n      for (const [key, value] of Object.entries(settings)) {\n        if (key === \"lgpdDeleteMessage\") settinglgpdDeleteMessage = value\n        if (key === \"enableLGPD\") settingEnableLGPD = value\n      }\n      if (settingEnableLGPD === \"enabled\" && settinglgpdDeleteMessage === \"enabled\") {\n        setLGPDDeleteMessage(true);\n      }\n    }\n    fetchData();\n  }, [])\n\n  useEffect(() => {\n    dispatch({ type: \"RESET\" });\n    setPageNumber(1);\n    currentTicketId.current = ticketId;\n  }, [ticketId, selectedQueuesMessage]);\n\n  useEffect(() => {\n    setLoading(true);\n    const delayDebounceFn = setTimeout(() => {\n      const fetchMessages = async () => {\n        if (ticketId === \"undefined\") {\n          history.push(\"/tickets\");\n          return;\n        }\n        if (isNil(ticketId)) return;\n        try {\n          const { data } = await api.get(\"/messages/\" + ticketId, {\n            params: { pageNumber, selectedQueues: JSON.stringify(selectedQueuesMessage) },\n          });\n\n          if (currentTicketId.current === ticketId) {\n            dispatch({ type: \"LOAD_MESSAGES\", payload: data.messages });\n            setHasMore(data.hasMore);\n            setLoading(false);\n            setLoadingMore(false);\n          }\n\n          if (pageNumber === 1 && data.messages.length > 1) {\n            scrollToBottom();\n          }\n        } catch (err) {\n          setLoading(false);\n          toastError(err);\n          setLoadingMore(false);\n        }\n      };\n\n      fetchMessages();\n    }, 500);\n    return () => {\n      clearTimeout(delayDebounceFn);\n    };\n  }, [pageNumber, ticketId, selectedQueuesMessage]);\n\n  useEffect(() => {\n    if (ticketId === \"undefined\") {\n      return;\n    }\n\n    const companyId = user.companyId;\n\n    const connectEventMessagesList = () => {\n      socket.emit(\"joinChatBox\", `${ticketId}`);\n    }\n\n    const onAppMessageMessagesList = (data) => {\n      if (data.action === \"create\" && data.ticket.uuid === ticketId) {\n        dispatch({ type: \"ADD_MESSAGE\", payload: data.message });\n        scrollToBottom();\n      }\n\n      if (data.action === \"update\" && data?.message?.ticket?.uuid === ticketId) {\n        dispatch({ type: \"UPDATE_MESSAGE\", payload: data.message });\n      }\n\n      if (data.action == \"delete\" && data.message.ticket?.uuid === ticketId) {\n        dispatch({ type: \"DELETE_MESSAGE\", payload: data.messageId });\n      }\n    }\n    socket.on(\"connect\", connectEventMessagesList);\n    socket.on(`company-${companyId}-appMessage`, onAppMessageMessagesList);\n\n    return () => {\n      socket.emit(\"joinChatBoxLeave\", `${ticketId}`)\n      socket.off(\"connect\", connectEventMessagesList);\n      socket.off(`company-${companyId}-appMessage`, onAppMessageMessagesList);\n    };\n\n  }, [ticketId]);\n\n  useEffect(() => {\n    return () => {\n      if (dragTimeout) {\n        clearTimeout(dragTimeout);\n      }\n    };\n  }, [dragTimeout]);\n\n  const loadMore = () => {\n    if (loadingMore) return;\n    setLoadingMore(true);\n    setPageNumber((prevPageNumber) => prevPageNumber + 1);\n  };\n\n  const scrollToBottom = () => {\n    setTimeout(() => {\n      if (lastMessageRef.current) {\n        lastMessageRef.current.scrollIntoView({});\n      }\n    }, 100);\n  };\n\n  const handleScroll = (e) => {\n    if (!hasMore) return;\n    const { scrollTop } = e.currentTarget;\n\n    if (scrollTop === 0) {\n      document.getElementById(\"messagesList\").scrollTop = 1;\n    }\n\n    if (loading) {\n      return;\n    }\n\n    if (scrollTop < 50) {\n      loadMore();\n    }\n  };\n\n  const handleOpenMessageOptionsMenu = (e, message) => {\n    setAnchorEl(e.currentTarget);\n    setSelectedMessage(message);\n  };\n\n  const handleCloseMessageOptionsMenu = (e) => {\n    setAnchorEl(null);\n  };\n\n  const hanldeReplyMessage = (e, message) => {\n    setAnchorEl(null);\n    setReplyingMessage(message);\n  };\n\n  const getBasename = (filepath) => {\n    if (!filepath) return '';\n    // Remove query strings e hashes\n    const cleanPath = filepath.split('?')[0].split('#')[0];\n    // Pega o Ãºltimo segmento apÃ³s /\n    const segments = cleanPath.split('/');\n    return segments[segments.length - 1];\n  };\n\n  const checkMessageMedia = (message) => {\n    const isAudioMessage = (message) => {\n      if (message.mediaType === \"audio\") {\n        console.log(\"ðŸŽµ Detectado como Ã¡udio pelo mediaType:\", message.mediaType);\n        return true;\n      }\n\n      if (message.mediaUrl) {\n        const audioExtensions = ['.mp3', '.wav', '.ogg', '.m4a', '.aac', '.webm'];\n        const url = message.mediaUrl.toLowerCase();\n        const hasAudioExtension = audioExtensions.some(ext => url.includes(ext));\n\n        if (hasAudioExtension) {\n          console.log(\"ðŸŽµ Detectado como Ã¡udio pela URL:\", url);\n          return true;\n        }\n      }\n\n      if (message.body && typeof message.body === 'string') {\n        const body = message.body.toLowerCase();\n        const isAudioBody = body.includes('Ã¡udio gravado') ||\n          body.includes('audio_') ||\n          body.includes('ðŸŽµ') ||\n          body.includes('arquivo de Ã¡udio') ||\n          body.includes('mensagem de voz');\n\n        if (isAudioBody) {\n          console.log(\"ðŸŽµ Detectado como Ã¡udio pelo body:\", body);\n          return true;\n        }\n      }\n\n      return false;\n    };\n\n    // Templates\n    if (message.mediaType === \"template\") {\n      return <Template message={message} />;\n    }\n\n    // LocalizaÃ§Ã£o\n    else if (message.mediaType === \"locationMessage\" && message.body.split('|').length >= 2) {\n      let locationParts = message.body.split('|');\n      let imageLocation = locationParts[0];\n      let linkLocation = locationParts[1];\n      let descriptionLocation = locationParts.length > 2 ? locationParts[2] : null;\n\n      return <LocationPreview \n        image={imageLocation} \n        link={linkLocation} \n        description={descriptionLocation} \n      />;\n    }\n\n    // Contatos\n    else if (message.mediaType === \"contactMessage\") {\n      let array = message.body.split(\"\\n\");\n      let obj = [];\n      let contact = \"\";\n      \n      for (let index = 0; index < array.length; index++) {\n        const v = array[index];\n        let values = v.split(\":\");\n        for (let ind = 0; ind < values.length; ind++) {\n          if (values[ind].indexOf(\"+\") !== -1) {\n            obj.push({ number: values[ind] });\n          }\n          if (values[ind].indexOf(\"FN\") !== -1) {\n            contact = values[ind + 1];\n          }\n        }\n      }\n      \n      return <VcardPreview \n        contact={contact} \n        numbers={obj[0]?.number} \n        queueId={message?.ticket?.queueId} \n        whatsappId={message?.ticket?.whatsappId} \n        channel={channel} \n      />;\n    }\n\n    else if (message.mediaType === \"adMetaPreview\") { // Adicionado para renderizar o componente de preview de anÃºncio\n      console.log(\"Entrou no MetaPreview\");\n      // âœ… CORREÃ‡ÃƒO: Parse correto dos dados - formato: image|sourceUrl|title|body|messageUser\n      let [image, sourceUrl, title, body, messageUser] = message.body.split('|');\n      \n      // Fallback para messageUser se nÃ£o estiver presente\n      if (!messageUser || messageUser.trim() === \"\") {\n        messageUser = \"OlÃ¡! Tenho interesse e queria mais informaÃ§Ãµes, por favor.\";\n      }\n      \n      return <AdMetaPreview \n        image={image} \n        sourceUrl={sourceUrl} \n        title={title} \n        body={body} \n        messageUser={messageUser} \n      />;\n    }\n\n    // PDF e Documentos - SÃ“ DOWNLOAD\n    else if (isPdfUrl(message.mediaUrl, message.body, message.mediaType)) {\n      \n      console.log(\"ðŸ“„ Renderizando como documento/PDF:\", message.id);\n      const pdfInfo = extractPdfInfoFromMessage(message);\n\n      return (\n        <PdfPreview\n          url={pdfInfo.url}\n          filename={pdfInfo.filename}\n          size={pdfInfo.size}\n          mediaType={pdfInfo.mediaType}\n          onDownload={(url, name) => {\n            console.log(\"ðŸ“¥ Download PDF solicitado:\", { url, name });\n            downloadPdf(url, name);\n          }}\n        />\n      );\n    }\n\n    // Ãudio\n    else if (isAudioMessage(message)) {\n      console.log(\"ðŸŽµ Renderizando como Ã¡udio:\", message.id);\n      return (\n        <div style={{\n          width: '100%',\n          maxWidth: '300px',\n          padding: '8px',\n          backgroundColor: 'transparent'\n        }}>\n          <AudioModal\n            url={message.mediaUrl}\n            message={message}\n          />\n        </div>\n      );\n    }\n\n    // Imagens\n    else if (message.mediaType === \"image\") {\n      console.log(\"ðŸ–¼ï¸ Renderizando como imagem\");\n      return <ModalImageCors imageUrl={message.mediaUrl} />;\n    }\n\n    // VÃ­deos\n    else if (message.mediaType === \"video\") {\n      console.log(\"ðŸŽ¥ Renderizando como vÃ­deo\");\n      \n      return (\n        <div style={{ maxWidth: \"400px\", width: \"100%\", position: \"relative\" }}>\n          {/* Loading indicator */}\n          {videoLoading && !videoError && (\n            <div style={{\n              position: \"absolute\",\n              top: \"50%\",\n              left: \"50%\",\n              transform: \"translate(-50%, -50%)\",\n              zIndex: 2,\n              display: \"flex\",\n              flexDirection: \"column\",\n              alignItems: \"center\",\n              gap: \"8px\"\n            }}>\n              <CircularProgress size={30} />\n              <Typography variant=\"caption\" color=\"textSecondary\">\n                Carregando vÃ­deo...\n              </Typography>\n            </div>\n          )}\n          \n          {/* VÃ­deo player melhorado */}\n          <video\n            className={classes.messageMedia}\n            src={message.mediaUrl}\n            controls\n            preload=\"metadata\"\n            playsInline\n            style={{ \n              width: \"100%\", \n              height: \"auto\", \n              maxHeight: \"300px\",\n              borderRadius: \"8px\",\n              backgroundColor: \"#f0f0f0\",\n              opacity: videoLoading ? 0.3 : 1,\n              transition: \"opacity 0.3s ease\"\n            }}\n            onLoadStart={() => {\n              console.log(\"â³ Iniciando carregamento do vÃ­deo\");\n              setVideoLoading(true);\n              setVideoError(false);\n            }}\n            onLoadedData={() => {\n              console.log(\"âœ… VÃ­deo carregado e pronto\");\n              setVideoLoading(false);\n            }}\n            onCanPlay={() => {\n              console.log(\"âœ… VÃ­deo pronto para reproduÃ§Ã£o\");\n              setVideoLoading(false);\n            }}\n            onError={(e) => {\n              console.error(\"âŒ Erro ao carregar vÃ­deo:\", e);\n              console.log(\"ðŸ”— URL do vÃ­deo:\", message.mediaUrl);\n              setVideoLoading(false);\n              setVideoError(true);\n            }}\n          >\n            {/* âœ… CORREÃ‡ÃƒO: MÃºltiplos formatos para compatibilidade */}\n            <source src={message.mediaUrl} type=\"video/mp4\" />\n            <source src={message.mediaUrl} type=\"video/webm\" />\n            <source src={message.mediaUrl} type=\"video/ogg\" />\n            \n            {/* Fallback para navegadores antigos */}\n            Seu navegador nÃ£o suporta reproduÃ§Ã£o de vÃ­deo.\n          </video>\n          \n          {/* Error state */}\n          {videoError && (\n            <div style={{ \n              padding: \"20px\", \n              textAlign: \"center\", \n              backgroundColor: \"#f5f5f5\",\n              borderRadius: \"8px\",\n              color: \"#666\",\n              marginTop: \"8px\"\n            }}>\n              <Typography variant=\"body2\" style={{ marginBottom: \"12px\" }}>\n                âŒ Erro ao carregar vÃ­deo\n              </Typography>\n              <Button\n                startIcon={<GetApp />}\n                onClick={() => {\n                  const link = document.createElement('a');\n                  link.href = message.mediaUrl;\n                  link.download = message.body || 'video.mp4';\n                  link.click();\n                }}\n                variant=\"outlined\"\n                size=\"small\"\n              >\n                Baixar VÃ­deo\n              </Button>\n            </div>\n          )}\n        </div>\n      );\n    }\n\n    // Outros tipos de arquivo\n    else if (message.mediaUrl) {\n      console.log(\"ðŸ“Ž Renderizando como download genÃ©rico\");\n      return (\n        <>\n          <div className={classes.downloadMedia}>\n            <Button\n              startIcon={<GetApp />}\n              variant=\"outlined\"\n              onClick={() => downloadPdf(message.mediaUrl, message.body || 'arquivo')}\n            >\n              Download\n            </Button>\n          </div>\n          <Divider />\n        </>\n      );\n    }\n\n    return null;\n  };\n\n  const renderMessageAck = (message) => {\n    if (message.ack === 0) {\n      return <AccessTime fontSize=\"small\" className={classes.ackIcons} />;\n    } else\n      if (message.ack === 1) {\n        return <Done fontSize=\"small\" className={classes.ackIcons} />;\n      } else\n        if (message.ack === 2 || message.ack === 3) {\n          return <DoneAll fontSize=\"small\" className={classes.ackIcons} />;\n        } else\n          if (message.ack === 4) {\n            return <DoneAll fontSize=\"small\" className={message.mediaType === \"audio\" ? classes.ackPlayedIcon : classes.ackDoneAllIcon} />;\n          } else\n            if (message.ack === 5) {\n              return <DoneAll fontSize=\"small\" className={classes.ackDoneAllIcon} />\n            }\n  };\n\n  const renderDailyTimestamps = (message, index) => {\n    const today = format(new Date(), \"dd/MM/yyyy\")\n\n    if (index === 0) {\n      return (\n        <span\n          className={classes.dailyTimestamp}\n          key={`timestamp-${message.id}`}\n        >\n          <div className={classes.dailyTimestampText}>\n            {today === format(parseISO(messagesList[index].createdAt), \"dd/MM/yyyy\") ? \"HOJE\" : format(parseISO(messagesList[index].createdAt), \"dd/MM/yyyy\")}\n          </div>\n        </span>\n      );\n    } else\n      if (index < messagesList.length - 1) {\n        let messageDay = parseISO(messagesList[index].createdAt);\n        let previousMessageDay = parseISO(messagesList[index - 1].createdAt);\n\n        if (!isSameDay(messageDay, previousMessageDay)) {\n          return (\n            <span\n              className={classes.dailyTimestamp}\n              key={`timestamp-${message.id}`}\n            >\n              <div className={classes.dailyTimestampText}>\n                {today === format(parseISO(messagesList[index].createdAt), \"dd/MM/yyyy\") ? \"HOJE\" : format(parseISO(messagesList[index].createdAt), \"dd/MM/yyyy\")}\n              </div>\n            </span>\n          );\n        }\n      } else\n        if (index === messagesList.length - 1) {\n          return (\n            <div\n              key={`ref-${message.id}`}\n              ref={lastMessageRef}\n              style={{ float: \"left\", clear: \"both\" }}\n            />\n          );\n        }\n  };\n\n  const renderTicketsSeparator = (message, index) => {\n    let lastTicket = messagesList[index - 1]?.ticketId;\n    let currentTicket = message.ticketId;\n\n    if (lastTicket !== currentTicket && lastTicket !== undefined) {\n      if (message?.ticket?.queue) {\n        return (\n          <span\n            className={classes.currentTick}\n            key={`timestamp-${message.id}a`}\n          >\n            <div\n              className={classes.currentTicktText}\n              style={{ backgroundColor: message?.ticket?.queue?.color || \"grey\" }}\n            >\n              #{i18n.t(\"ticketsList.called\")} {message?.ticketId} - {message?.ticket?.queue?.name}\n            </div>\n\n          </span>\n        );\n      } else {\n        return (\n          <span\n            className={classes.currentTick}\n            key={`timestamp-${message.id}b`}\n          >\n            <div\n              className={classes.currentTicktText}\n              style={{ backgroundColor: \"grey\" }}\n            >\n              #{i18n.t(\"ticketsList.called\")} {message.ticketId} - {i18n.t(\"ticketsList.noQueue\")}\n            </div>\n\n          </span>\n        );\n      }\n    }\n\n  };\n\n  const renderMessageDivider = (message, index) => {\n    if (index < messagesList.length && index > 0) {\n      let messageUser = messagesList[index].fromMe;\n      let previousMessageUser = messagesList[index - 1].fromMe;\n      if (messageUser !== previousMessageUser) {\n        return (\n\n          <span style={{ marginTop: 16 }} key={`divider-${message.id}`}></span>\n        );\n      }\n    }\n  };\n\n  const renderQuotedMessage = (message) => {\n\n    return (\n      <div\n        className={clsx(classes.quotedContainerLeft, {\n          [classes.quotedContainerRight]: message.fromMe,\n        })}\n      >\n        <span\n          className={clsx(classes.quotedSideColorLeft, {\n            [classes.quotedSideColorRight]: message.quotedMsg?.fromMe,\n          })}\n        ></span>\n        <div className={classes.quotedMsg}>\n          {!message.quotedMsg?.fromMe && (\n            <span className={classes.messageContactName}>\n              {message.quotedMsg?.contact?.name}\n            </span>\n          )}\n\n          {message.quotedMsg.mediaType === \"audio\"\n            && (\n              <div className={classes.downloadMedia}>\n                <AudioModal url={message.quotedMsg.mediaUrl} />\n              </div>\n            )\n          }\n          {message.quotedMsg.mediaType === \"video\"\n            && (\n              <div style={{ maxWidth: \"300px\", width: \"100%\" }}>\n                <video\n                  className={classes.messageMedia}\n                  src={message.quotedMsg.mediaUrl}\n                  controls\n                  preload=\"metadata\"\n                  style={{ \n                    width: \"100%\", \n                    height: \"auto\", \n                    maxHeight: \"200px\",\n                    borderRadius: \"6px\",\n                    backgroundColor: \"#f0f0f0\"\n                  }}\n                  onError={(e) => {\n                    console.error(\"âŒ Erro ao carregar vÃ­deo citado:\", e);\n                  }}\n                >\n                  <source src={message.quotedMsg.mediaUrl} type=\"video/mp4\" />\n                  <source src={message.quotedMsg.mediaUrl} type=\"video/webm\" />\n                  <source src={message.quotedMsg.mediaUrl} type=\"video/ogg\" />\n                  <div style={{ padding: \"10px\", textAlign: \"center\", fontSize: \"12px\", color: \"#999\" }}>\n                    âŒ Erro ao carregar vÃ­deo\n                  </div>\n                </video>\n              </div>\n            )\n          }\n          {message.quotedMsg.mediaType === \"contactMessage\"\n            && (\n              \"Contato\"\n            )\n          }\n          {message.quotedMsg.mediaType === \"application\"\n            && (\n              <div className={classes.downloadMedia}>\n                <Button\n                  startIcon={<GetApp />}\n                  variant=\"outlined\"\n                  target=\"_blank\"\n                  href={message.quotedMsg.mediaUrl}\n                >\n                  Download\n                </Button>\n              </div>\n            )\n          }\n\n          {message.quotedMsg.mediaType === \"image\"\n            && (\n              <ModalImageCors imageUrl={message.quotedMsg.mediaUrl} />)\n            || message.quotedMsg?.body}\n\n          {!message.quotedMsg.mediaType === \"image\" && message.quotedMsg?.body}\n\n        </div>\n      </div>\n    );\n  };\n\n  const handleDrag = event => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (event.type === \"dragenter\" || event.type === \"dragover\") {\n      const hasFiles = event.dataTransfer &&\n        event.dataTransfer.types &&\n        (event.dataTransfer.types.includes('Files') ||\n          event.dataTransfer.types.includes('application/x-moz-file'));\n\n      if (hasFiles) {\n        if (dragTimeout) {\n          clearTimeout(dragTimeout);\n        }\n\n        const timeout = setTimeout(() => {\n          if (event.dataTransfer.items && event.dataTransfer.items.length > 0) {\n            setDragActive(true);\n          }\n        }, 100);\n\n        setDragTimeout(timeout);\n      }\n    } else if (event.type === \"dragleave\") {\n      if (dragTimeout) {\n        clearTimeout(dragTimeout);\n        setDragTimeout(null);\n      }\n\n      const rect = event.currentTarget.getBoundingClientRect();\n      const x = event.clientX;\n      const y = event.clientY;\n\n      if (x < rect.left || x > rect.right || y < rect.top || y > rect.bottom) {\n        setDragActive(false);\n      }\n    }\n  }\n\n  const isYouTubeLink = (url) => {\n    const youtubeRegex = /(?:youtube\\.com\\/(?:[^\\/\\n\\s]+\\/\\S+\\/|(?:v|e(?:mbed)?)\\/|\\S*?[?&]v=)|youtu\\.be\\/)([a-zA-Z0-9_-]{11})/;\n    return youtubeRegex.test(url);\n  };\n\n  const handleDrop = event => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (dragTimeout) {\n      clearTimeout(dragTimeout);\n      setDragTimeout(null);\n    }\n\n    setDragActive(false);\n\n    if (event.dataTransfer.files &&\n      event.dataTransfer.files.length > 0 &&\n      event.dataTransfer.files[0] instanceof File) {\n      if (onDrop) {\n        onDrop(event.dataTransfer.files);\n      }\n    }\n  }\n  const xmlRegex = /<([^>]+)>/g;\n  const boldRegex = /\\*(.*?)\\*/g;\n\n  const formatXml = (xmlString) => {\n    // Verifica se o XML contÃ©m a assinatura com nome do atendente\n    if (boldRegex.test(xmlString)) {\n      // Formata o texto dentro da assinatura em negrito\n      xmlString = xmlString.replace(boldRegex, \"**$1**\");\n    }\n    return xmlString;\n  };\n\n  const renderMessages = () => {\n\n    if (messagesList.length > 0) {\n      const viewMessagesList = messagesList.map((message, index) => {\n        if (message.mediaType === \"call_log\") {\n          return (\n            <React.Fragment key={message.id}>\n              {renderDailyTimestamps(message, index)}\n              {renderTicketsSeparator(message, index)}\n              {renderMessageDivider(message, index)}\n              <div className={classes.messageCenter}>\n                <IconButton\n                  variant=\"contained\"\n                  size=\"small\"\n                  id=\"messageActionsButton\"\n                  disabled={message.isDeleted}\n                  className={classes.messageActionsButton}\n                  onClick={(e) => handleOpenMessageOptionsMenu(e, message)}\n                >\n                  <ExpandMore />\n                </IconButton>\n                {isGroup && (\n                  <span className={classes.messageContactName}>\n                    {message.contact?.name}\n                  </span>\n                )}\n\n                <div>\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 17\" width=\"20\" height=\"17\">\n                    <path fill=\"#df3333\" d=\"M18.2 12.1c-1.5-1.8-5-2.7-8.2-2.7s-6.7 1-8.2 2.7c-.7.8-.3 2.3.2 2.8.2.2.3.3.5.3 1.4 0 3.6-.7 3.6-.7.5-.2.8-.5.8-1v-1.3c.7-1.2 5.4-1.2 6.4-.1l.1.1v1.3c0 .2.1.4.2.6.1.2.3.3.5.4 0 0 2.2.7 3.6.7.2 0 1.4-2 .5-3.1zM5.4 3.2l4.7 4.6 5.8-5.7-.9-.8L10.1 6 6.4 2.3h2.5V1H4.1v4.8h1.3V3.2z\"></path>\n                  </svg> <span>{i18n.t(\"ticketsList.missedCall\")} {format(parseISO(message.createdAt), \"HH:mm\")}</span>\n                </div>\n              </div>\n            </React.Fragment>\n          );\n        }\n\n        if (!message.fromMe) {\n          return (\n            <React.Fragment key={message.id}>\n              {renderDailyTimestamps(message, index)}\n              {renderTicketsSeparator(message, index)}\n              {renderMessageDivider(message, index)}\n              <div\n                className={classes.messageLeft}\n                title={message.queueId && message.queue?.name}\n                onDoubleClick={(e) => hanldeReplyMessage(e, message)}\n              >\n                {showSelectMessageCheckbox && (\n                  <SelectMessageCheckbox\n                    message={message}\n                  />\n                )}\n                <IconButton\n                  variant=\"contained\"\n                  size=\"small\"\n                  id=\"messageActionsButton\"\n                  disabled={message.isDeleted}\n                  className={classes.messageActionsButton}\n                  onClick={(e) => handleOpenMessageOptionsMenu(e, message)}\n                >\n                  <ExpandMore />\n                </IconButton>\n\n                {message.isForwarded && (\n                  <div>\n                    <span className={classes.forwardMessage}\n                    ><Reply style={{ color: \"grey\", transform: 'scaleX(-1)' }} /> Encaminhada\n                    </span>\n                    <br />\n                  </div>\n                )}\n                {isGroup && (\n                  <span className={classes.messageContactName}>\n                    {message.contact?.name}\n                  </span>\n                )}\n                {isYouTubeLink(message.body) && (\n                  <>\n                    <YouTubePreview videoUrl={message.body} />\n                  </>\n                )}\n\n                {!lgpdDeleteMessage && message.isDeleted && (\n                  <div>\n                    <span className={classes.deletedMessage}\n                    >ðŸš« Essa mensagem foi apagada pelo contato &nbsp;\n                    </span>\n                  </div>\n                )}\n\n                {(message.mediaUrl || message.mediaType === \"locationMessage\" || message.mediaType === \"contactMessage\" || message.mediaType === \"template\" || message.mediaType === \"adMetaPreview\"\n                ) && checkMessageMedia(message)}\n\n                <div className={clsx(classes.textContentItem, {\n                  [classes.textContentItemDeleted]: message.isDeleted,\n                })}>\n                  {message.quotedMsg && renderQuotedMessage(message)}\n                  {\n                    message.mediaType !== \"adMetaPreview\" && (\n                      (message.mediaUrl !== null && (message.mediaType === \"image\" || message.mediaType === \"video\") && getBasename(message.mediaUrl).trim() !== message.body.trim()) ||\n                      message.mediaType !== \"audio\" &&\n                      message.mediaType !== \"image\" &&\n                      message.mediaType !== \"video\" &&\n                      message.mediaType != \"reactionMessage\" &&\n                      message.mediaType != \"locationMessage\" &&\n                      message.mediaType !== \"contactMessage\" &&\n                      message.mediaType !== \"template\"\n                    ) && (\n                      <>\n                        {xmlRegex.test(message.body) && (\n                          <span>{message.body}</span>\n\n                        )}\n                        {!xmlRegex.test(message.body) && (\n                          <MarkdownWrapper>{(lgpdDeleteMessage && message.isDeleted) ? \"ðŸš« _Mensagem apagada_ \" :\n                            message.body\n                          }</MarkdownWrapper>)}\n\n                      </>\n\n                    )}\n\n                  {message.quotedMsg && message.mediaType === \"reactionMessage\" && (\n                    <>\n                      <span style={{ marginLeft: \"0px\" }}>\n                        <MarkdownWrapper>\n                          {\"\" + message?.contact?.name + \" reagiu... \" + message.body}\n                        </MarkdownWrapper>\n                      </span>\n                    </>\n                  )}\n\n                  <span className={classes.timestamp}>\n                    {message.isEdited ? \"Editada \" + format(parseISO(message.createdAt), \"HH:mm\") : format(parseISO(message.createdAt), \"HH:mm\")}\n                  </span>\n                </div>\n              </div>\n            </React.Fragment>\n          );\n        } else {\n          return (\n            <React.Fragment key={message.id}>\n              {renderDailyTimestamps(message, index)}\n              {renderTicketsSeparator(message, index)}\n              {renderMessageDivider(message, index)}\n              <div\n                className={message.isPrivate ? classes.messageRightPrivate : classes.messageRight}\n                title={message.queueId && message.queue?.name}\n                onDoubleClick={(e) => hanldeReplyMessage(e, message)}\n              >\n                {showSelectMessageCheckbox && (\n                  <SelectMessageCheckbox\n                    message={message}\n                  />\n                )}\n\n                <IconButton\n                  variant=\"contained\"\n                  size=\"small\"\n                  id=\"messageActionsButton\"\n                  disabled={message.isDeleted}\n                  className={classes.messageActionsButton}\n                  onClick={(e) => handleOpenMessageOptionsMenu(e, message)}\n                >\n                  <ExpandMore />\n                </IconButton>\n                {message.isForwarded && (\n                  <div>\n                    <span className={classes.forwardMessage}\n                    ><Reply style={{ color: \"grey\", transform: 'scaleX(-1)' }} /> Encaminhada\n                    </span>\n                    <br />\n                  </div>\n                )}\n                {isYouTubeLink(message.body) && (\n                  <>\n                    <YouTubePreview videoUrl={message.body} />\n                  </>\n                )}\n                {!lgpdDeleteMessage && message.isDeleted && (\n                  <div>\n                    <span className={classes.deletedMessage}\n                    >ðŸš« Essa mensagem foi apagada &nbsp;\n                    </span>\n                  </div>\n                )}\n                {(message.mediaUrl || message.mediaType === \"locationMessage\" || message.mediaType === \"contactMessage\" || message.mediaType === \"template\"\n                ) && checkMessageMedia(message)}\n                <div\n                  className={clsx(classes.textContentItem, {\n                    [classes.textContentItemDeleted]: message.isDeleted,\n                  })}\n                >\n\n                  {message.quotedMsg && renderQuotedMessage(message)}\n\n                  {\n                    ((message.mediaType === \"image\" || message.mediaType === \"video\") && getBasename(message.mediaUrl) === message.body) ||\n                    (message.mediaType !== \"audio\" && message.mediaType != \"reactionMessage\" && message.mediaType != \"locationMessage\" && message.mediaType !== \"contactMessage\" && message.mediaType !== \"template\") && (\n                      <>\n                        {xmlRegex.test(message.body) && (\n                          <div>{formatXml(message.body)}</div>\n\n                        )}\n                        {!xmlRegex.test(message.body) && (<MarkdownWrapper>{message.body}</MarkdownWrapper>)}\n\n                      </>\n                    )}\n\n                  {message.quotedMsg && message.mediaType === \"reactionMessage\" && (\n                    <>\n                      <span style={{ marginLeft: \"0px\" }}>\n                        <MarkdownWrapper>\n                          {\"VocÃª reagiu... \" + message.body}\n                        </MarkdownWrapper>\n                      </span>\n                    </>\n                  )}\n\n                  <span className={classes.timestamp}>\n                    {message.isEdited ? \"Editada \" + format(parseISO(message.createdAt), \"HH:mm\") : format(parseISO(message.createdAt), \"HH:mm\")}\n                    {renderMessageAck(message)}\n                  </span>\n                </div>\n              </div>\n            </React.Fragment>\n          );\n        }\n      });\n      return viewMessagesList;\n    } else {\n      return <div>Diga olÃ¡ para seu novo contato!</div>;\n    }\n  };\nconst shouldBlurMessages = ticketStatus === \"pending\" && user.allowSeeMessagesInPendingTickets === \"disabled\";\n\n  return (\n    <div className={classes.messagesListWrapper} onDragEnter={handleDrag}>\n      {dragActive && <div className={classes.dragElement} onDragEnter={handleDrag} onDragLeave={handleDrag} onDragOver={handleDrag} onDrop={handleDrop}>Solte o arquivo aqui</div>}\n      <MessageOptionsMenu\n        message={selectedMessage}\n        anchorEl={anchorEl}\n        menuOpen={messageOptionsMenuOpen}\n        handleClose={handleCloseMessageOptionsMenu}\n        isGroup={isGroup}\n        whatsappId={whatsappId}\n        queueId={queueId}\n      />\n      \n\n<div\n  id=\"messagesList\"\n  className={classes.messagesList}\n  onScroll={handleScroll}\n  style={{\n    filter: shouldBlurMessages ? \"blur(4px)\" : \"none\",\n    pointerEvents: shouldBlurMessages ? \"none\" : \"auto\"\n  }}\n>\n  {messagesList.length > 0 ? renderMessages() : []}\n</div>\n\n      {(channel !== \"whatsapp\" && channel !== undefined) && (\n        <div\n          style={{\n            width: \"100%\",\n            display: \"flex\",\n            padding: \"10px\",\n            alignItems: \"center\",\n            backgroundColor: \"#E1F3FB\",\n          }}\n        >\n          {channel === \"facebook\" ? (\n            <Facebook />\n          ) : channel === \"instagram\" ? (\n            <Instagram />\n          ) : (\n            <WhatsApp />\n          )}\n\n          <span>\n            VocÃª tem 24h para responder apÃ³s receber uma mensagem, de acordo\n            com as polÃ­ticas da Meta.\n          </span>\n        </div>\n      )}\n      \n      {loading && (\n        <div>\n          <CircularProgress className={classes.circleLoading} />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MessagesList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}