{"ast":null,"code":"import _objectSpread from\"/home/deploy/atendechatop/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useRef,useState,useContext}from\"react\";import{useParams}from\"react-router-dom\";import{useHistory}from\"react-router-dom\";import{makeStyles}from\"@material-ui/core/styles\";import Paper from\"@material-ui/core/Paper\";import{toast}from\"react-toastify\";import*as XLSX from\"xlsx\";import MainContainer from\"../../components/MainContainer\";import MainHeader from\"../../components/MainHeader\";import Title from\"../../components/Title\";import{Grid,LinearProgress,Typography,Button,Divider,Card,CardHeader,CardContent,Box,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,TablePagination,IconButton,Chip,Avatar,Tooltip}from\"@material-ui/core\";import ArrowBackIcon from\"@material-ui/icons/ArrowBack\";import SendIcon from\"@material-ui/icons/Send\";import PhoneIcon from\"@material-ui/icons/Phone\";import MessageIcon from\"@material-ui/icons/Message\";import ScheduleIcon from\"@material-ui/icons/Schedule\";import EventAvailableIcon from\"@material-ui/icons/EventAvailable\";import DoneIcon from\"@material-ui/icons/Done\";import DoneAllIcon from\"@material-ui/icons/DoneAll\";import CheckCircleIcon from\"@material-ui/icons/CheckCircle\";import ErrorIcon from\"@material-ui/icons/Error\";import WhatsAppIcon from\"@material-ui/icons/WhatsApp\";import ListAltIcon from\"@material-ui/icons/ListAlt\";import PieChartIcon from'@material-ui/icons/PieChart';import BarChartIcon from'@material-ui/icons/BarChart';import GetAppIcon from\"@material-ui/icons/GetApp\";import{useDate}from\"../../hooks/useDate\";import usePlans from\"../../hooks/usePlans\";import{AuthContext}from\"../../context/Auth/AuthContext\";import{format}from\"date-fns\";import{ptBR}from\"date-fns/locale\";import{has,get,isNull}from\"lodash\";import api from\"../../services/api\";import{Chart as ChartJS,CategoryScale,LinearScale,PointElement,LineElement,BarElement,ArcElement,Title as ChartTitle,Tooltip as ChartTooltip,Legend,Filler}from'chart.js';import{Line,Pie,Doughnut}from'react-chartjs-2';// import { SocketContext } from \"../../context/Socket/SocketContext\";\nimport{i18n}from\"../../translate/i18n\";// Registrar componentes do Chart.js\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,PointElement,LineElement,BarElement,ArcElement,ChartTitle,ChartTooltip,Legend,Filler);const useStyles=makeStyles(theme=>({mainPaper:_objectSpread(_objectSpread({flex:1,padding:theme.spacing(2),overflowY:\"scroll\"},theme.scrollbarStyles),{},{marginBottom:theme.spacing(2)}),textRight:{textAlign:\"right\"},tabPanelsContainer:{padding:theme.spacing(2)},summaryCards:{marginTop:theme.spacing(2),marginBottom:theme.spacing(2)},summaryCard:{padding:theme.spacing(2),height:'100%',display:'flex',flexDirection:'column'},cardHeader:{paddingBottom:0},cardIcon:{color:theme.palette.primary.main,fontSize:40,marginBottom:theme.spacing(1)},progressContainer:{padding:theme.spacing(2),marginBottom:theme.spacing(2)},tableContainer:{marginTop:theme.spacing(3)},tableTitle:{margin:theme.spacing(2,0),fontWeight:500},chartContainer:{height:300,marginBottom:theme.spacing(4)},chip:{margin:theme.spacing(0.5)},statusChip:{color:'#fff',fontWeight:'bold'},deliveredChip:{backgroundColor:theme.palette.success.main},pendingChip:{backgroundColor:theme.palette.warning.main},failedChip:{backgroundColor:theme.palette.error.main},pieChartContainer:{height:250,position:'relative',marginTop:theme.spacing(2)},sectionTitle:{fontWeight:500,margin:theme.spacing(2,0)},detailsCard:{marginBottom:theme.spacing(2)},fullWidthGrid:{width:'100%'},avatar:{backgroundColor:theme.palette.primary.main,color:'#fff'}}));const CampaignReport=()=>{var _campaign$whatsapp,_campaign$contactList;const classes=useStyles();const history=useHistory();const{campaignId}=useParams();const[campaign,setCampaign]=useState({});const[validContacts,setValidContacts]=useState(0);const[delivered,setDelivered]=useState(0);const[confirmationRequested,setConfirmationRequested]=useState(0);const[confirmed,setConfirmed]=useState(0);const[percent,setPercent]=useState(0);const[loading,setLoading]=useState(false);const[messageRows,setMessageRows]=useState([]);const[page,setPage]=useState(0);const[rowsPerPage,setRowsPerPage]=useState(10);const[shippingPage,setShippingPage]=useState(1);const[totalShippingPages,setTotalShippingPages]=useState(1);const[uniqueNumbers,setUniqueNumbers]=useState(0);const[failedMessages,setFailedMessages]=useState(0);const[totalMessagesSent,setTotalMessagesSent]=useState(0);const mounted=useRef(true);const{user,socket}=useContext(AuthContext);const{datetimeToClient}=useDate();const{getPlanCompany}=usePlans();// Dados para o gráfico de pizza\nconst[chartData,setChartData]=useState({labels:['Entregues','Aguardando','Falhas'],datasets:[{data:[0,0,0],backgroundColor:['rgba(75, 192, 192, 0.7)','rgba(255, 206, 86, 0.7)','rgba(255, 99, 132, 0.7)'],borderColor:['rgba(75, 192, 192, 1)','rgba(255, 206, 86, 1)','rgba(255, 99, 132, 1)'],borderWidth:1}]});// Opções para o gráfico de pizza\nconst chartOptions={responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'bottom'}}};useEffect(()=>{async function fetchData(){const companyId=user.companyId;const planConfigs=await getPlanCompany(undefined,companyId);if(!planConfigs.plan.useCampaigns){toast.error(\"Esta empresa não possui permissão para acessar essa página! Estamos lhe redirecionando.\");setTimeout(()=>{history.push(\"/\");},1000);}}fetchData();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);useEffect(()=>{if(mounted.current){findCampaign();}return()=>{mounted.current=false;};// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);useEffect(()=>{if(mounted.current){if(has(campaign,\"contactList\")&&has(campaign.contactList,\"contacts\")){const contactList=get(campaign,\"contactList\");const valids=contactList.contacts.filter(c=>c.isWhatsappValid);setValidContacts(valids.length);}else if(has(campaign,\"tagListId\")){// Se estamos usando tags em vez de listas de contato\nsetValidContacts(delivered);// Usamos as entregas como contatos válidos\n}if(has(campaign,\"shipping\")&&Array.isArray(campaign.shipping)){const contacts=get(campaign,\"shipping\");const delivered=contacts.filter(c=>!isNull(c.deliveredAt));const confirmationRequested=contacts.filter(c=>!isNull(c.confirmationRequestedAt));const confirmed=contacts.filter(c=>!isNull(c.deliveredAt)&&!isNull(c.confirmationRequestedAt));setDelivered(delivered.length);setConfirmationRequested(confirmationRequested.length);setConfirmed(confirmed.length);}}},[campaign]);useEffect(()=>{// Evitar divisão por zero\nif(validContacts>0){setPercent(delivered/validContacts*100);}else{setPercent(0);}},[delivered,validContacts]);useEffect(()=>{const companyId=user.companyId;// const socket = socketManager.GetSocket();\nconst onCampaignEvent=data=>{if(data.record.id===+campaignId){setCampaign(data.record);if(data.record.status===\"FINALIZADA\"){setTimeout(()=>{findCampaign();},5000);}}};socket.on(\"company-\".concat(companyId,\"-campaign\"),onCampaignEvent);return()=>{socket.off(\"company-\".concat(companyId,\"-campaign\"),onCampaignEvent);};// eslint-disable-next-line react-hooks/exhaustive-deps\n},[campaignId]);const findCampaign=async()=>{try{setLoading(true);// Buscar dados básicos da campanha (sem shipping para evitar estouro de memória)\nconst{data:campaign}=await api.get(\"/campaigns/\".concat(campaignId));setCampaign(campaign);// Buscar estatísticas separadamente usando o novo endpoint\ntry{const{data:stats}=await api.get(\"/campaigns/\".concat(campaignId,\"/stats\"));setDelivered(stats.deliveredMessages);setValidContacts(stats.totalMessages);// Total da lista/tag\nsetUniqueNumbers(stats.uniqueNumbers);// Destinatários únicos processados\nsetFailedMessages(stats.failedMessages);setTotalMessagesSent(stats.totalMessages);// Total de mensagens (mesmo que total da lista)\n// Atualizar dados do gráfico com estatísticas do servidor\nsetChartData({labels:['Entregues','Aguardando','Falhas'],datasets:[{data:[stats.deliveredMessages,stats.pendingMessages,stats.failedMessages],backgroundColor:['rgba(75, 192, 192, 0.7)','rgba(255, 206, 86, 0.7)','rgba(255, 99, 132, 0.7)'],borderColor:['rgba(75, 192, 192, 1)','rgba(255, 206, 86, 1)','rgba(255, 99, 132, 1)'],borderWidth:1}]});}catch(statsError){console.error(\"Erro ao buscar estatísticas:\",statsError);// Fallback para valores padrão\nsetDelivered(0);setValidContacts(0);setUniqueNumbers(0);setFailedMessages(0);setTotalMessagesSent(0);}// Buscar dados de shipping com paginação usando o novo endpoint\ntry{const{data:shippingResponse}=await api.get(\"/campaigns/\".concat(campaignId,\"/shipping?page=1&pageSize=\").concat(rowsPerPage));if(shippingResponse&&shippingResponse.shipping){const shippingData=shippingResponse.shipping;// Processar dados para a tabela\nconst formattedRows=shippingData.map(item=>({id:item.id,jobId:item.jobId,number:item.number,message:item.message?item.message.substring(0,50)+(item.message.length>50?'...':''):'',fullMessage:item.message||'',deliveredAt:item.deliveredAt?datetimeToClient(item.deliveredAt):null,createdAt:item.createdAt?datetimeToClient(item.createdAt):null,status:item.deliveredAt?'delivered':'pending'}));setMessageRows(formattedRows);// Armazenar informações de paginação\nsetTotalShippingPages(shippingResponse.totalPages||1);setShippingPage(shippingResponse.currentPage||1);}}catch(shippingError){console.error(\"Erro ao buscar dados de envio:\",shippingError);// Manter array vazio em caso de erro\nsetMessageRows([]);}}catch(error){console.error(\"Erro ao buscar campanha:\",error);toast.error(i18n.t(\"campaignReport.fetchError\"));}finally{setLoading(false);}};const formatStatus=val=>{switch(val){case\"INATIVA\":return i18n.t(\"campaignReport.inactive\");case\"PROGRAMADA\":return i18n.t(\"campaignReport.scheduled\");case\"EM_ANDAMENTO\":return i18n.t(\"campaignReport.process\");case\"CANCELADA\":return i18n.t(\"campaignReport.cancelled\");case\"FINALIZADA\":return i18n.t(\"campaignReport.finished\");default:return val;}};// Manipuladores para a paginação da tabela\nconst handleChangePage=(event,newPage)=>{setPage(newPage);};const handleChangeRowsPerPage=event=>{setRowsPerPage(parseInt(event.target.value,10));setPage(0);// Carregar dados com novo tamanho de página\nloadMoreShipping(1,parseInt(event.target.value,10));};// Função para carregar mais dados de shipping\nconst loadMoreShipping=async function(){let newPage=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;let pageSize=arguments.length>1&&arguments[1]!==undefined?arguments[1]:50;try{setLoading(true);const url=\"/campaigns/\".concat(campaignId,\"/shipping?page=\").concat(newPage,\"&pageSize=\").concat(pageSize);const{data:shippingResponse}=await api.get(url);if(shippingResponse&&shippingResponse.shipping){const shippingData=shippingResponse.shipping;// Processar dados para a tabela\nconst formattedRows=shippingData.map(item=>({id:item.id,jobId:item.jobId,number:item.number,message:item.message?item.message.substring(0,50)+(item.message.length>50?'...':''):'',fullMessage:item.message||'',deliveredAt:item.deliveredAt?datetimeToClient(item.deliveredAt):null,createdAt:item.createdAt?datetimeToClient(item.createdAt):null,status:item.deliveredAt?'delivered':'pending'}));setMessageRows(formattedRows);setTotalShippingPages(shippingResponse.totalPages||1);setShippingPage(shippingResponse.currentPage||1);}else{setMessageRows([]);}}catch(error){console.error(\"Erro ao carregar mais dados de envio:\",error);toast.error(\"Erro ao carregar dados de envio\");setMessageRows([]);}finally{setLoading(false);}};// Função para formatar o número de telefone\nconst formatPhoneNumber=number=>{if(!number)return'';// Verifica se é um ID de grupo (normalmente começa com números grandes)\nif(number.length>15){return\"Grupo (\".concat(number.substring(0,6),\"...)\");}// Formata número normal\nif(number.length===12&&number.startsWith('55')){const ddd=number.substring(2,4);const firstPart=number.substring(4,9);const lastPart=number.substring(9);return\"+55 (\".concat(ddd,\") \").concat(firstPart,\"-\").concat(lastPart);}return number;};// Função para obter o status do envio\nconst getMessageStatusChip=status=>{switch(status){case'delivered':return/*#__PURE__*/_jsx(Chip,{label:\"Entregue\",size:\"small\",icon:/*#__PURE__*/_jsx(DoneAllIcon,{fontSize:\"small\"}),className:\"\".concat(classes.statusChip,\" \").concat(classes.deliveredChip)});case'pending':return/*#__PURE__*/_jsx(Chip,{label:\"Pendente\",size:\"small\",icon:/*#__PURE__*/_jsx(ScheduleIcon,{fontSize:\"small\"}),className:\"\".concat(classes.statusChip,\" \").concat(classes.pendingChip)});case'failed':return/*#__PURE__*/_jsx(Chip,{label:\"Falha\",size:\"small\",icon:/*#__PURE__*/_jsx(ErrorIcon,{fontSize:\"small\"}),className:\"\".concat(classes.statusChip,\" \").concat(classes.failedChip)});default:return/*#__PURE__*/_jsx(Chip,{label:\"Desconhecido\",size:\"small\",variant:\"outlined\"});}};// Função para exportar dados para Excel\nconst exportToExcel=async()=>{try{toast.info(\"Gerando relatório Excel, aguarde...\");// Buscar todos os dados de shipping em lotes (máximo 1000 por página)\nlet allShippingData=[];let currentPage=1;let hasMoreData=true;const pageSize=1000;// Limite máximo do backend\nwhile(hasMoreData){const{data:shippingResponse}=await api.get(\"/campaigns/\".concat(campaignId,\"/shipping?page=\").concat(currentPage,\"&pageSize=\").concat(pageSize));if(!shippingResponse||!shippingResponse.shipping){break;}allShippingData=[...allShippingData,...shippingResponse.shipping];// Verificar se há mais páginas\nhasMoreData=currentPage<shippingResponse.totalPages;currentPage++;// Atualizar progresso\ntoast.info(\"Carregando dados... \".concat(allShippingData.length,\" registros encontrados\"));}if(allShippingData.length===0){toast.error(\"Nenhum dado encontrado para exportar\");return;}const shippingData=allShippingData;// Preparar dados para Excel\nconst excelData=[// Cabeçalho\n[\"Relatório de Campanha\",\"\",\"\",\"\",\"\",\"\"],[\"Campanha: \".concat(campaign.name),\"\",\"\",\"\",\"\",\"\"],[\"Data de Gera\\xE7\\xE3o: \".concat(new Date().toLocaleString('pt-BR')),\"\",\"\",\"\",\"\",\"\"],[\"\",\"\",\"\",\"\",\"\",\"\"],// Cabeçalhos das colunas\n[\"ID\",\"Destinatário\",\"Mensagem\",\"Enviado em\",\"Entregue em\",\"Status\"]];// Adicionar dados das mensagens\nshippingData.forEach(item=>{excelData.push([item.jobId||'',item.number||'',item.message||'',item.createdAt?new Date(item.createdAt).toLocaleString('pt-BR'):'',item.deliveredAt?new Date(item.deliveredAt).toLocaleString('pt-BR'):'',item.deliveredAt?'Entregue':'Pendente']);});// Criar workbook e worksheet\nconst wb=XLSX.utils.book_new();const ws=XLSX.utils.aoa_to_sheet(excelData);// Configurar larguras das colunas\nws['!cols']=[{wch:15},// ID\n{wch:20},// Destinatário\n{wch:50},// Mensagem\n{wch:20},// Enviado em\n{wch:20},// Entregue em\n{wch:15}// Status\n];// Mesclar células do cabeçalho\nws['!merges']=[{s:{c:0,r:0},e:{c:5,r:0}},// Título\n{s:{c:0,r:1},e:{c:5,r:1}},// Nome da campanha\n{s:{c:0,r:2},e:{c:5,r:2}}// Data de geração\n];// Adicionar worksheet ao workbook\nXLSX.utils.book_append_sheet(wb,ws,\"Relatório de Campanha\");// Gerar nome do arquivo\nconst fileName=\"relatorio_campanha_\".concat(campaign.name.replace(/[^a-zA-Z0-9]/g,'_'),\"_\").concat(new Date().toISOString().split('T')[0],\".xlsx\");// Fazer download\nXLSX.writeFile(wb,fileName);toast.success(\"Relat\\xF3rio Excel gerado com sucesso! \".concat(shippingData.length,\" registros exportados.\"));}catch(error){console.error(\"Erro ao exportar para Excel:\",error);toast.error(\"Erro ao gerar relatório Excel\");}};return/*#__PURE__*/_jsxs(MainContainer,{children:[/*#__PURE__*/_jsx(MainHeader,{children:/*#__PURE__*/_jsx(Grid,{style:{width:\"99.6%\"},container:true,children:/*#__PURE__*/_jsxs(Grid,{xs:12,item:true,style:{display:\"flex\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"primary\",style:{marginRight:10},onClick:()=>history.push('/campaigns'),startIcon:/*#__PURE__*/_jsx(ArrowBackIcon,{}),children:i18n.t(\"campaignReport.backButton\")}),/*#__PURE__*/_jsxs(Title,{children:[i18n.t(\"campaignReport.title\"),\" \",campaign.name||i18n.t(\"campaignReport.campaign\")]})]})})}),/*#__PURE__*/_jsxs(Paper,{className:classes.mainPaper,variant:\"outlined\",children:[/*#__PURE__*/_jsxs(Box,{mb:2,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",component:\"h2\",gutterBottom:true,children:campaign.name||i18n.t(\"campaignReport.campaign\")}),/*#__PURE__*/_jsx(Chip,{label:formatStatus(campaign.status),color:campaign.status===\"FINALIZADA\"?\"primary\":\"default\",style:{fontWeight:'bold',marginRight:8}})]}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,className:classes.summaryCards,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,lg:3,children:/*#__PURE__*/_jsx(Card,{className:classes.summaryCard,variant:\"outlined\",children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"textSecondary\",gutterBottom:true,children:\"Status de Entrega\"}),/*#__PURE__*/_jsx(Box,{className:classes.pieChartContainer,children:/*#__PURE__*/_jsx(Doughnut,{data:chartData,options:chartOptions})})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,lg:3,children:/*#__PURE__*/_jsx(Card,{className:classes.summaryCard,variant:\"outlined\",children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(SendIcon,{className:classes.cardIcon}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"div\",children:delivered}),/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",children:\"Mensagens Enviadas\"})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,lg:3,children:/*#__PURE__*/_jsx(Card,{className:classes.summaryCard,variant:\"outlined\",children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(PhoneIcon,{className:classes.cardIcon}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"div\",children:uniqueNumbers}),/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",children:\"Destinat\\xE1rios \\xDAnicos\"})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,lg:3,children:/*#__PURE__*/_jsx(Card,{className:classes.summaryCard,variant:\"outlined\",children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(CheckCircleIcon,{className:classes.cardIcon}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"div\",children:delivered}),/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",children:\"Mensagens Entregues\"})]})})})]}),/*#__PURE__*/_jsxs(Box,{className:classes.progressContainer,children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,alignItems:\"center\",children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:true,children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:i18n.t(\"campaignReport.deliver\")})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textPrimary\",children:[delivered,\" de \",totalMessagesSent]})})]}),/*#__PURE__*/_jsx(LinearProgress,{variant:\"determinate\",style:{height:10,borderRadius:5,margin:\"8px 0\"},value:delivered/(totalMessagesSent||1)*100})]}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[campaign.whatsappId&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsx(Card,{variant:\"outlined\",className:classes.detailsCard,children:/*#__PURE__*/_jsx(CardHeader,{avatar:/*#__PURE__*/_jsx(Avatar,{className:classes.avatar,children:/*#__PURE__*/_jsx(WhatsAppIcon,{})}),title:\"Conex\\xE3o WhatsApp\",subheader:((_campaign$whatsapp=campaign.whatsapp)===null||_campaign$whatsapp===void 0?void 0:_campaign$whatsapp.name)||\"Não especificado\"})})}),campaign.tagListId&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsx(Card,{variant:\"outlined\",className:classes.detailsCard,children:/*#__PURE__*/_jsx(CardHeader,{avatar:/*#__PURE__*/_jsx(Avatar,{className:classes.avatar,children:/*#__PURE__*/_jsx(ListAltIcon,{})}),title:\"Tag Utilizada\",subheader:\"ID: \".concat(campaign.tagListId)})})}),campaign.contactListId&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsx(Card,{variant:\"outlined\",className:classes.detailsCard,children:/*#__PURE__*/_jsx(CardHeader,{avatar:/*#__PURE__*/_jsx(Avatar,{className:classes.avatar,children:/*#__PURE__*/_jsx(ListAltIcon,{})}),title:i18n.t(\"campaignReport.contactLists\"),subheader:((_campaign$contactList=campaign.contactList)===null||_campaign$contactList===void 0?void 0:_campaign$contactList.name)||\"Não especificado\"})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsx(Card,{variant:\"outlined\",className:classes.detailsCard,children:/*#__PURE__*/_jsx(CardHeader,{avatar:/*#__PURE__*/_jsx(Avatar,{className:classes.avatar,children:/*#__PURE__*/_jsx(ScheduleIcon,{})}),title:i18n.t(\"campaignReport.schedule\"),subheader:datetimeToClient(campaign.scheduledAt)||\"Não agendado\"})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsx(Card,{variant:\"outlined\",className:classes.detailsCard,children:/*#__PURE__*/_jsx(CardHeader,{avatar:/*#__PURE__*/_jsx(Avatar,{className:classes.avatar,children:/*#__PURE__*/_jsx(EventAvailableIcon,{})}),title:i18n.t(\"campaignReport.conclusion\"),subheader:datetimeToClient(campaign.completedAt)||\"Não concluído\"})})})]}),/*#__PURE__*/_jsxs(Box,{mt:4,children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",mb:2,children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",className:classes.sectionTitle,children:[/*#__PURE__*/_jsx(MessageIcon,{style:{verticalAlign:'middle',marginRight:8}}),\"Detalhes das Mensagens\"]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",startIcon:/*#__PURE__*/_jsx(GetAppIcon,{}),onClick:exportToExcel,style:{borderRadius:20,textTransform:'none',fontWeight:'bold',boxShadow:'0 4px 12px rgba(0,0,0,0.15)',background:'linear-gradient(45deg, #4CAF50 30%, #45a049 90%)','&:hover':{background:'linear-gradient(45deg, #45a049 30%, #4CAF50 90%)',boxShadow:'0 6px 16px rgba(0,0,0,0.2)'}},children:\"Exportar Excel\"})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(TableContainer,{className:classes.tableContainer,children:[/*#__PURE__*/_jsxs(Table,{\"aria-label\":\"tabela de mensagens\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"ID\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Destinat\\xE1rio\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Mensagem\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Enviado em\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Entregue em\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Status\"})]})}),/*#__PURE__*/_jsxs(TableBody,{children:[messageRows.map(row=>/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:row.jobId}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Tooltip,{title:row.number,children:/*#__PURE__*/_jsx(\"span\",{children:formatPhoneNumber(row.number)})})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Tooltip,{title:row.fullMessage,children:/*#__PURE__*/_jsx(\"span\",{children:row.message})})}),/*#__PURE__*/_jsx(TableCell,{children:row.createdAt}),/*#__PURE__*/_jsx(TableCell,{children:row.deliveredAt||'-'}),/*#__PURE__*/_jsx(TableCell,{children:getMessageStatusChip(row.status)})]},row.id)),messageRows.length===0&&/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{colSpan:6,align:\"center\",children:loading?\"Carregando...\":\"Nenhuma mensagem encontrada\"})})]})]}),/*#__PURE__*/_jsx(TablePagination,{rowsPerPageOptions:[10,25,50,100],component:\"div\",count:totalMessagesSent,rowsPerPage:rowsPerPage,page:page,onPageChange:(event,newPage)=>{setPage(newPage);// Calcular qual página de dados carregar do servidor\nconst serverPage=newPage+1;loadMoreShipping(serverPage,rowsPerPage);},onRowsPerPageChange:handleChangeRowsPerPage,labelRowsPerPage:\"Linhas por p\\xE1gina:\",labelDisplayedRows:_ref=>{let{from,to,count}=_ref;return\"\".concat(from,\"-\").concat(to,\" de \").concat(count);}})]})]})]})]});};export default CampaignReport;","map":{"version":3,"names":["React","useEffect","useRef","useState","useContext","useParams","useHistory","makeStyles","Paper","toast","XLSX","MainContainer","MainHeader","Title","Grid","LinearProgress","Typography","Button","Divider","Card","CardHeader","CardContent","Box","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","TablePagination","IconButton","Chip","Avatar","Tooltip","ArrowBackIcon","SendIcon","PhoneIcon","MessageIcon","ScheduleIcon","EventAvailableIcon","DoneIcon","DoneAllIcon","CheckCircleIcon","ErrorIcon","WhatsAppIcon","ListAltIcon","PieChartIcon","BarChartIcon","GetAppIcon","useDate","usePlans","AuthContext","format","ptBR","has","get","isNull","api","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","BarElement","ArcElement","ChartTitle","ChartTooltip","Legend","Filler","Line","Pie","Doughnut","i18n","jsx","_jsx","jsxs","_jsxs","register","useStyles","theme","mainPaper","_objectSpread","flex","padding","spacing","overflowY","scrollbarStyles","marginBottom","textRight","textAlign","tabPanelsContainer","summaryCards","marginTop","summaryCard","height","display","flexDirection","cardHeader","paddingBottom","cardIcon","color","palette","primary","main","fontSize","progressContainer","tableContainer","tableTitle","margin","fontWeight","chartContainer","chip","statusChip","deliveredChip","backgroundColor","success","pendingChip","warning","failedChip","error","pieChartContainer","position","sectionTitle","detailsCard","fullWidthGrid","width","avatar","CampaignReport","_campaign$whatsapp","_campaign$contactList","classes","history","campaignId","campaign","setCampaign","validContacts","setValidContacts","delivered","setDelivered","confirmationRequested","setConfirmationRequested","confirmed","setConfirmed","percent","setPercent","loading","setLoading","messageRows","setMessageRows","page","setPage","rowsPerPage","setRowsPerPage","shippingPage","setShippingPage","totalShippingPages","setTotalShippingPages","uniqueNumbers","setUniqueNumbers","failedMessages","setFailedMessages","totalMessagesSent","setTotalMessagesSent","mounted","user","socket","datetimeToClient","getPlanCompany","chartData","setChartData","labels","datasets","data","borderColor","borderWidth","chartOptions","responsive","maintainAspectRatio","plugins","legend","fetchData","companyId","planConfigs","undefined","plan","useCampaigns","setTimeout","push","current","findCampaign","contactList","valids","contacts","filter","c","isWhatsappValid","length","Array","isArray","shipping","deliveredAt","confirmationRequestedAt","onCampaignEvent","record","id","status","on","concat","off","stats","deliveredMessages","totalMessages","pendingMessages","statsError","console","shippingResponse","shippingData","formattedRows","map","item","jobId","number","message","substring","fullMessage","createdAt","totalPages","currentPage","shippingError","t","formatStatus","val","handleChangePage","event","newPage","handleChangeRowsPerPage","parseInt","target","value","loadMoreShipping","arguments","pageSize","url","formatPhoneNumber","startsWith","ddd","firstPart","lastPart","getMessageStatusChip","label","size","icon","className","variant","exportToExcel","info","allShippingData","hasMoreData","excelData","name","Date","toLocaleString","forEach","wb","utils","book_new","ws","aoa_to_sheet","wch","s","r","e","book_append_sheet","fileName","replace","toISOString","split","writeFile","children","style","container","xs","alignItems","marginRight","onClick","startIcon","mb","component","gutterBottom","md","lg","options","borderRadius","whatsappId","title","subheader","whatsapp","tagListId","contactListId","scheduledAt","completedAt","mt","justifyContent","verticalAlign","textTransform","boxShadow","background","row","colSpan","align","rowsPerPageOptions","count","onPageChange","serverPage","onRowsPerPageChange","labelRowsPerPage","labelDisplayedRows","_ref","from","to"],"sources":["/home/deploy/atendechatop/frontend/src/pages/CampaignReport/index.js"],"sourcesContent":["import React, { useEffect, useRef, useState, useContext } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useHistory } from \"react-router-dom\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { toast } from \"react-toastify\";\nimport * as XLSX from \"xlsx\";\nimport MainContainer from \"../../components/MainContainer\";\nimport MainHeader from \"../../components/MainHeader\";\nimport Title from \"../../components/Title\";\nimport { \n  Grid, \n  LinearProgress, \n  Typography, \n  Button, \n  Divider, \n  Card, \n  CardHeader, \n  CardContent, \n  Box, \n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  TablePagination,\n  IconButton,\n  Chip,\n  Avatar,\n  Tooltip\n} from \"@material-ui/core\";\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\nimport SendIcon from \"@material-ui/icons/Send\";\nimport PhoneIcon from \"@material-ui/icons/Phone\";\nimport MessageIcon from \"@material-ui/icons/Message\";\nimport ScheduleIcon from \"@material-ui/icons/Schedule\";\nimport EventAvailableIcon from \"@material-ui/icons/EventAvailable\";\nimport DoneIcon from \"@material-ui/icons/Done\";\nimport DoneAllIcon from \"@material-ui/icons/DoneAll\";\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\nimport ErrorIcon from \"@material-ui/icons/Error\";\nimport WhatsAppIcon from \"@material-ui/icons/WhatsApp\";\nimport ListAltIcon from \"@material-ui/icons/ListAlt\";\nimport PieChartIcon from '@material-ui/icons/PieChart';\nimport BarChartIcon from '@material-ui/icons/BarChart';\nimport GetAppIcon from \"@material-ui/icons/GetApp\";\nimport { useDate } from \"../../hooks/useDate\";\nimport usePlans from \"../../hooks/usePlans\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\nimport { format } from \"date-fns\";\nimport { ptBR } from \"date-fns/locale\";\nimport { has, get, isNull } from \"lodash\";\nimport api from \"../../services/api\";\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  BarElement,\n  ArcElement,\n  Title as ChartTitle,\n  Tooltip as ChartTooltip,\n  Legend,\n  Filler,\n} from 'chart.js';\nimport { Line, Pie, Doughnut } from 'react-chartjs-2';\n\n// import { SocketContext } from \"../../context/Socket/SocketContext\";\nimport { i18n } from \"../../translate/i18n\";\n\n// Registrar componentes do Chart.js\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  BarElement,\n  ArcElement,\n  ChartTitle,\n  ChartTooltip,\n  Legend,\n  Filler\n);\n\nconst useStyles = makeStyles((theme) => ({\n  mainPaper: {\n    flex: 1,\n    padding: theme.spacing(2),\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles,\n    marginBottom: theme.spacing(2),\n  },\n  textRight: {\n    textAlign: \"right\",\n  },\n  tabPanelsContainer: {\n    padding: theme.spacing(2),\n  },\n  summaryCards: {\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(2),\n  },\n  summaryCard: {\n    padding: theme.spacing(2),\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  cardHeader: {\n    paddingBottom: 0,\n  },\n  cardIcon: {\n    color: theme.palette.primary.main,\n    fontSize: 40,\n    marginBottom: theme.spacing(1),\n  },\n  progressContainer: {\n    padding: theme.spacing(2),\n    marginBottom: theme.spacing(2),\n  },\n  tableContainer: {\n    marginTop: theme.spacing(3),\n  },\n  tableTitle: {\n    margin: theme.spacing(2, 0),\n    fontWeight: 500,\n  },\n  chartContainer: {\n    height: 300,\n    marginBottom: theme.spacing(4),\n  },\n  chip: {\n    margin: theme.spacing(0.5),\n  },\n  statusChip: {\n    color: '#fff',\n    fontWeight: 'bold',\n  },\n  deliveredChip: {\n    backgroundColor: theme.palette.success.main,\n  },\n  pendingChip: {\n    backgroundColor: theme.palette.warning.main,\n  },\n  failedChip: {\n    backgroundColor: theme.palette.error.main,\n  },\n  pieChartContainer: {\n    height: 250,\n    position: 'relative',\n    marginTop: theme.spacing(2),\n  },\n  sectionTitle: {\n    fontWeight: 500,\n    margin: theme.spacing(2, 0),\n  },\n  detailsCard: {\n    marginBottom: theme.spacing(2),\n  },\n  fullWidthGrid: {\n    width: '100%',\n  },\n  avatar: {\n    backgroundColor: theme.palette.primary.main,\n    color: '#fff',\n  },\n}));\n\nconst CampaignReport = () => {\n  const classes = useStyles();\n  const history = useHistory();\n\n  const { campaignId } = useParams();\n\n  const [campaign, setCampaign] = useState({});\n  const [validContacts, setValidContacts] = useState(0);\n  const [delivered, setDelivered] = useState(0);\n  const [confirmationRequested, setConfirmationRequested] = useState(0);\n  const [confirmed, setConfirmed] = useState(0);\n  const [percent, setPercent] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [messageRows, setMessageRows] = useState([]);\n  const [page, setPage] = useState(0);\n  const [rowsPerPage, setRowsPerPage] = useState(10);\n  const [shippingPage, setShippingPage] = useState(1);\n  const [totalShippingPages, setTotalShippingPages] = useState(1);\n  const [uniqueNumbers, setUniqueNumbers] = useState(0);\n  const [failedMessages, setFailedMessages] = useState(0);\n  const [totalMessagesSent, setTotalMessagesSent] = useState(0);\n  const mounted = useRef(true);\n  const { user, socket } = useContext(AuthContext);\n\n  const { datetimeToClient } = useDate();\n  const { getPlanCompany } = usePlans();\n  \n  // Dados para o gráfico de pizza\n  const [chartData, setChartData] = useState({\n    labels: ['Entregues', 'Aguardando', 'Falhas'],\n    datasets: [\n      {\n        data: [0, 0, 0],\n        backgroundColor: [\n          'rgba(75, 192, 192, 0.7)',\n          'rgba(255, 206, 86, 0.7)',\n          'rgba(255, 99, 132, 0.7)',\n        ],\n        borderColor: [\n          'rgba(75, 192, 192, 1)',\n          'rgba(255, 206, 86, 1)',\n          'rgba(255, 99, 132, 1)',\n        ],\n        borderWidth: 1,\n      },\n    ],\n  });\n  \n  // Opções para o gráfico de pizza\n  const chartOptions = {\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n      legend: {\n        position: 'bottom',\n      },\n    },\n  };\n\n  useEffect(() => {\n    async function fetchData() {\n      const companyId = user.companyId;\n      const planConfigs = await getPlanCompany(undefined, companyId);\n      if (!planConfigs.plan.useCampaigns) {\n        toast.error(\"Esta empresa não possui permissão para acessar essa página! Estamos lhe redirecionando.\");\n        setTimeout(() => {\n          history.push(`/`)\n        }, 1000);\n      }\n    }\n    fetchData();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (mounted.current) {\n      findCampaign();\n    }\n\n    return () => {\n      mounted.current = false;\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (mounted.current) {\n      if (has(campaign, \"contactList\") && has(campaign.contactList, \"contacts\")) {\n        const contactList = get(campaign, \"contactList\");\n        const valids = contactList.contacts.filter((c) => c.isWhatsappValid);\n        setValidContacts(valids.length);\n      } else if (has(campaign, \"tagListId\")) {\n        // Se estamos usando tags em vez de listas de contato\n        setValidContacts(delivered); // Usamos as entregas como contatos válidos\n      }\n\n      if (has(campaign, \"shipping\") && Array.isArray(campaign.shipping)) {\n        const contacts = get(campaign, \"shipping\");\n        const delivered = contacts.filter((c) => !isNull(c.deliveredAt));\n        const confirmationRequested = contacts.filter(\n          (c) => !isNull(c.confirmationRequestedAt)\n        );\n        const confirmed = contacts.filter(\n          (c) => !isNull(c.deliveredAt) && !isNull(c.confirmationRequestedAt)\n        );\n        setDelivered(delivered.length);\n        setConfirmationRequested(confirmationRequested.length);\n        setConfirmed(confirmed.length);\n      }\n    }\n  }, [campaign]);\n\n  useEffect(() => {\n    // Evitar divisão por zero\n    if (validContacts > 0) {\n      setPercent((delivered / validContacts) * 100);\n    } else {\n      setPercent(0);\n    }\n  }, [delivered, validContacts]);\n\n  useEffect(() => {\n    const companyId = user.companyId;\n    // const socket = socketManager.GetSocket();\n\n    const onCampaignEvent = (data) => {\n\n      if (data.record.id === +campaignId) {\n        setCampaign(data.record);\n\n        if (data.record.status === \"FINALIZADA\") {\n          setTimeout(() => {\n            findCampaign();\n          }, 5000);\n        }\n      }\n    };\n    socket.on(`company-${companyId}-campaign`, onCampaignEvent);\n\n    return () => {\n      socket.off(`company-${companyId}-campaign`, onCampaignEvent);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [campaignId]);\n\n  const findCampaign = async () => {\n    try {\n      setLoading(true);\n      \n      // Buscar dados básicos da campanha (sem shipping para evitar estouro de memória)\n      const { data: campaign } = await api.get(`/campaigns/${campaignId}`);\n      setCampaign(campaign);\n      \n      // Buscar estatísticas separadamente usando o novo endpoint\n      try {\n        const { data: stats } = await api.get(`/campaigns/${campaignId}/stats`);\n        setDelivered(stats.deliveredMessages);\n        setValidContacts(stats.totalMessages); // Total da lista/tag\n        setUniqueNumbers(stats.uniqueNumbers); // Destinatários únicos processados\n        setFailedMessages(stats.failedMessages);\n        setTotalMessagesSent(stats.totalMessages); // Total de mensagens (mesmo que total da lista)\n        \n        // Atualizar dados do gráfico com estatísticas do servidor\n        setChartData({\n          labels: ['Entregues', 'Aguardando', 'Falhas'],\n          datasets: [\n            {\n              data: [stats.deliveredMessages, stats.pendingMessages, stats.failedMessages],\n              backgroundColor: [\n                'rgba(75, 192, 192, 0.7)',\n                'rgba(255, 206, 86, 0.7)',\n                'rgba(255, 99, 132, 0.7)',\n              ],\n              borderColor: [\n                'rgba(75, 192, 192, 1)',\n                'rgba(255, 206, 86, 1)',\n                'rgba(255, 99, 132, 1)',\n              ],\n              borderWidth: 1,\n            },\n          ],\n        });\n      } catch (statsError) {\n        console.error(\"Erro ao buscar estatísticas:\", statsError);\n        // Fallback para valores padrão\n        setDelivered(0);\n        setValidContacts(0);\n        setUniqueNumbers(0);\n        setFailedMessages(0);\n        setTotalMessagesSent(0);\n      }\n      \n      // Buscar dados de shipping com paginação usando o novo endpoint\n      try {\n        const { data: shippingResponse } = await api.get(`/campaigns/${campaignId}/shipping?page=1&pageSize=${rowsPerPage}`);\n        \n        if (shippingResponse && shippingResponse.shipping) {\n          const shippingData = shippingResponse.shipping;\n          \n          // Processar dados para a tabela\n          const formattedRows = shippingData.map(item => ({\n            id: item.id,\n            jobId: item.jobId,\n            number: item.number,\n            message: item.message ? item.message.substring(0, 50) + (item.message.length > 50 ? '...' : '') : '',\n            fullMessage: item.message || '',\n            deliveredAt: item.deliveredAt ? datetimeToClient(item.deliveredAt) : null,\n            createdAt: item.createdAt ? datetimeToClient(item.createdAt) : null,\n            status: item.deliveredAt ? 'delivered' : 'pending'\n          }));\n          \n          setMessageRows(formattedRows);\n          \n          // Armazenar informações de paginação\n          setTotalShippingPages(shippingResponse.totalPages || 1);\n          setShippingPage(shippingResponse.currentPage || 1);\n        }\n      } catch (shippingError) {\n        console.error(\"Erro ao buscar dados de envio:\", shippingError);\n        // Manter array vazio em caso de erro\n        setMessageRows([]);\n      }\n      \n    } catch (error) {\n      console.error(\"Erro ao buscar campanha:\", error);\n      toast.error(i18n.t(\"campaignReport.fetchError\"));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const formatStatus = (val) => {\n    switch (val) {\n      case \"INATIVA\":\n        return i18n.t(\"campaignReport.inactive\");\n      case \"PROGRAMADA\":\n        return i18n.t(\"campaignReport.scheduled\");\n      case \"EM_ANDAMENTO\":\n        return i18n.t(\"campaignReport.process\");\n      case \"CANCELADA\":\n        return i18n.t(\"campaignReport.cancelled\");\n      case \"FINALIZADA\":\n        return i18n.t(\"campaignReport.finished\");\n      default:\n        return val;\n    }\n  };\n  \n  // Manipuladores para a paginação da tabela\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  const handleChangeRowsPerPage = (event) => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n    // Carregar dados com novo tamanho de página\n    loadMoreShipping(1, parseInt(event.target.value, 10));\n  };\n  \n  // Função para carregar mais dados de shipping\n  const loadMoreShipping = async (newPage = 1, pageSize = 50) => {\n    try {\n      setLoading(true);\n      \n      const url = `/campaigns/${campaignId}/shipping?page=${newPage}&pageSize=${pageSize}`;\n      const { data: shippingResponse } = await api.get(url);\n      \n      if (shippingResponse && shippingResponse.shipping) {\n        const shippingData = shippingResponse.shipping;\n        \n        // Processar dados para a tabela\n        const formattedRows = shippingData.map(item => ({\n          id: item.id,\n          jobId: item.jobId,\n          number: item.number,\n          message: item.message ? item.message.substring(0, 50) + (item.message.length > 50 ? '...' : '') : '',\n          fullMessage: item.message || '',\n          deliveredAt: item.deliveredAt ? datetimeToClient(item.deliveredAt) : null,\n          createdAt: item.createdAt ? datetimeToClient(item.createdAt) : null,\n          status: item.deliveredAt ? 'delivered' : 'pending'\n        }));\n        \n        setMessageRows(formattedRows);\n        setTotalShippingPages(shippingResponse.totalPages || 1);\n        setShippingPage(shippingResponse.currentPage || 1);\n        \n      } else {\n        setMessageRows([]);\n      }\n    } catch (error) {\n      console.error(\"Erro ao carregar mais dados de envio:\", error);\n      toast.error(\"Erro ao carregar dados de envio\");\n      setMessageRows([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  // Função para formatar o número de telefone\n  const formatPhoneNumber = (number) => {\n    if (!number) return '';\n    \n    // Verifica se é um ID de grupo (normalmente começa com números grandes)\n    if (number.length > 15) {\n      return `Grupo (${number.substring(0, 6)}...)`;\n    }\n    \n    // Formata número normal\n    if (number.length === 12 && number.startsWith('55')) {\n      const ddd = number.substring(2, 4);\n      const firstPart = number.substring(4, 9);\n      const lastPart = number.substring(9);\n      return `+55 (${ddd}) ${firstPart}-${lastPart}`;\n    }\n    \n    return number;\n  };\n  \n  // Função para obter o status do envio\n  const getMessageStatusChip = (status) => {\n    switch (status) {\n      case 'delivered':\n        return (\n          <Chip \n            label=\"Entregue\" \n            size=\"small\" \n            icon={<DoneAllIcon fontSize=\"small\" />} \n            className={`${classes.statusChip} ${classes.deliveredChip}`} \n          />\n        );\n      case 'pending':\n        return (\n          <Chip \n            label=\"Pendente\" \n            size=\"small\" \n            icon={<ScheduleIcon fontSize=\"small\" />} \n            className={`${classes.statusChip} ${classes.pendingChip}`} \n          />\n        );\n      case 'failed':\n        return (\n          <Chip \n            label=\"Falha\" \n            size=\"small\" \n            icon={<ErrorIcon fontSize=\"small\" />} \n            className={`${classes.statusChip} ${classes.failedChip}`} \n          />\n        );\n      default:\n        return (\n          <Chip \n            label=\"Desconhecido\" \n            size=\"small\" \n            variant=\"outlined\" \n          />\n        );\n    }\n  };\n\n  // Função para exportar dados para Excel\n  const exportToExcel = async () => {\n    try {\n      toast.info(\"Gerando relatório Excel, aguarde...\");\n      \n      // Buscar todos os dados de shipping em lotes (máximo 1000 por página)\n      let allShippingData = [];\n      let currentPage = 1;\n      let hasMoreData = true;\n      const pageSize = 1000; // Limite máximo do backend\n      \n      while (hasMoreData) {\n        const { data: shippingResponse } = await api.get(`/campaigns/${campaignId}/shipping?page=${currentPage}&pageSize=${pageSize}`);\n        \n        if (!shippingResponse || !shippingResponse.shipping) {\n          break;\n        }\n        \n        allShippingData = [...allShippingData, ...shippingResponse.shipping];\n        \n        // Verificar se há mais páginas\n        hasMoreData = currentPage < shippingResponse.totalPages;\n        currentPage++;\n        \n        // Atualizar progresso\n        toast.info(`Carregando dados... ${allShippingData.length} registros encontrados`);\n      }\n      \n      if (allShippingData.length === 0) {\n        toast.error(\"Nenhum dado encontrado para exportar\");\n        return;\n      }\n\n      const shippingData = allShippingData;\n      \n      // Preparar dados para Excel\n      const excelData = [\n        // Cabeçalho\n        [\"Relatório de Campanha\", \"\", \"\", \"\", \"\", \"\"],\n        [`Campanha: ${campaign.name}`, \"\", \"\", \"\", \"\", \"\"],\n        [`Data de Geração: ${new Date().toLocaleString('pt-BR')}`, \"\", \"\", \"\", \"\", \"\"],\n        [\"\", \"\", \"\", \"\", \"\", \"\"],\n        // Cabeçalhos das colunas\n        [\"ID\", \"Destinatário\", \"Mensagem\", \"Enviado em\", \"Entregue em\", \"Status\"],\n      ];\n\n      // Adicionar dados das mensagens\n      shippingData.forEach(item => {\n        excelData.push([\n          item.jobId || '',\n          item.number || '',\n          item.message || '',\n          item.createdAt ? new Date(item.createdAt).toLocaleString('pt-BR') : '',\n          item.deliveredAt ? new Date(item.deliveredAt).toLocaleString('pt-BR') : '',\n          item.deliveredAt ? 'Entregue' : 'Pendente'\n        ]);\n      });\n\n      // Criar workbook e worksheet\n      const wb = XLSX.utils.book_new();\n      const ws = XLSX.utils.aoa_to_sheet(excelData);\n\n      // Configurar larguras das colunas\n      ws['!cols'] = [\n        { wch: 15 }, // ID\n        { wch: 20 }, // Destinatário\n        { wch: 50 }, // Mensagem\n        { wch: 20 }, // Enviado em\n        { wch: 20 }, // Entregue em\n        { wch: 15 }  // Status\n      ];\n\n      // Mesclar células do cabeçalho\n      ws['!merges'] = [\n        { s: { c: 0, r: 0 }, e: { c: 5, r: 0 } }, // Título\n        { s: { c: 0, r: 1 }, e: { c: 5, r: 1 } }, // Nome da campanha\n        { s: { c: 0, r: 2 }, e: { c: 5, r: 2 } }  // Data de geração\n      ];\n\n      // Adicionar worksheet ao workbook\n      XLSX.utils.book_append_sheet(wb, ws, \"Relatório de Campanha\");\n\n      // Gerar nome do arquivo\n      const fileName = `relatorio_campanha_${campaign.name.replace(/[^a-zA-Z0-9]/g, '_')}_${new Date().toISOString().split('T')[0]}.xlsx`;\n\n      // Fazer download\n      XLSX.writeFile(wb, fileName);\n      \n      toast.success(`Relatório Excel gerado com sucesso! ${shippingData.length} registros exportados.`);\n      \n    } catch (error) {\n      console.error(\"Erro ao exportar para Excel:\", error);\n      toast.error(\"Erro ao gerar relatório Excel\");\n    }\n  };\n\n  return (\n    <MainContainer>\n      <MainHeader>\n        <Grid style={{ width: \"99.6%\" }} container>\n          <Grid xs={12} item style={{ display: \"flex\", alignItems: \"center\" }}>\n            <Button\n              variant=\"outlined\"\n              color=\"primary\"\n              style={{ marginRight: 10 }}\n              onClick={() => history.push('/campaigns')}\n              startIcon={<ArrowBackIcon />}\n            >\n              {i18n.t(\"campaignReport.backButton\")}\n            </Button>\n            <Title>{i18n.t(\"campaignReport.title\")} {campaign.name || i18n.t(\"campaignReport.campaign\")}</Title>\n          </Grid>\n        </Grid>\n      </MainHeader>\n      \n      {/* Card com resumo e status */}\n      <Paper className={classes.mainPaper} variant=\"outlined\">\n        <Box mb={2}>\n          <Typography variant=\"h5\" component=\"h2\" gutterBottom>\n            {campaign.name || i18n.t(\"campaignReport.campaign\")}\n          </Typography>\n          <Chip \n            label={formatStatus(campaign.status)} \n            color={campaign.status === \"FINALIZADA\" ? \"primary\" : \"default\"}\n            style={{ fontWeight: 'bold', marginRight: 8 }}\n          />\n        </Box>\n        \n        <Grid container spacing={3} className={classes.summaryCards}>\n          {/* Card de Status */}\n          <Grid item xs={12} md={6} lg={3}>\n            <Card className={classes.summaryCard} variant=\"outlined\">\n              <CardContent>\n                <Typography variant=\"h6\" color=\"textSecondary\" gutterBottom>\n                  Status de Entrega\n                </Typography>\n                <Box className={classes.pieChartContainer}>\n                  <Doughnut data={chartData} options={chartOptions} />\n                </Box>\n              </CardContent>\n            </Card>\n          </Grid>\n          \n          {/* Cards com estatísticas principais */}\n          <Grid item xs={12} md={6} lg={3}>\n            <Card className={classes.summaryCard} variant=\"outlined\">\n              <CardContent>\n                <SendIcon className={classes.cardIcon} />\n                <Typography variant=\"h4\" component=\"div\">\n                  {delivered}\n                </Typography>\n                <Typography color=\"textSecondary\">\n                  Mensagens Enviadas\n                </Typography>\n              </CardContent>\n            </Card>\n          </Grid>\n          \n          <Grid item xs={12} md={6} lg={3}>\n            <Card className={classes.summaryCard} variant=\"outlined\">\n              <CardContent>\n                <PhoneIcon className={classes.cardIcon} />\n                <Typography variant=\"h4\" component=\"div\">\n                  {uniqueNumbers}\n                </Typography>\n                <Typography color=\"textSecondary\">\n                  Destinatários Únicos\n                </Typography>\n              </CardContent>\n            </Card>\n          </Grid>\n          \n          <Grid item xs={12} md={6} lg={3}>\n            <Card className={classes.summaryCard} variant=\"outlined\">\n              <CardContent>\n                <CheckCircleIcon className={classes.cardIcon} />\n                <Typography variant=\"h4\" component=\"div\">\n                  {delivered}\n                </Typography>\n                <Typography color=\"textSecondary\">\n                  Mensagens Entregues\n                </Typography>\n              </CardContent>\n            </Card>\n          </Grid>\n        </Grid>\n        \n        {/* Barra de progresso */}\n        <Box className={classes.progressContainer}>\n          <Grid container spacing={2} alignItems=\"center\">\n            <Grid item xs>\n              <Typography variant=\"body2\" color=\"textSecondary\">{i18n.t(\"campaignReport.deliver\")}</Typography>\n            </Grid>\n            <Grid item>\n              <Typography variant=\"body2\" color=\"textPrimary\">\n                {delivered} de {totalMessagesSent}\n              </Typography>\n            </Grid>\n          </Grid>\n          <LinearProgress\n            variant=\"determinate\"\n            style={{ height: 10, borderRadius: 5, margin: \"8px 0\" }}\n            value={(delivered / (totalMessagesSent || 1)) * 100}\n          />\n        </Box>\n        \n        {/* Informações adicionais da campanha */}\n        <Grid container spacing={3}>\n          {campaign.whatsappId && (\n            <Grid item xs={12} md={4}>\n              <Card variant=\"outlined\" className={classes.detailsCard}>\n                <CardHeader\n                  avatar={\n                    <Avatar className={classes.avatar}>\n                      <WhatsAppIcon />\n                    </Avatar>\n                  }\n                  title=\"Conexão WhatsApp\"\n                  subheader={campaign.whatsapp?.name || \"Não especificado\"}\n                />\n              </Card>\n            </Grid>\n          )}\n          \n          {campaign.tagListId && (\n            <Grid item xs={12} md={4}>\n              <Card variant=\"outlined\" className={classes.detailsCard}>\n                <CardHeader\n                  avatar={\n                    <Avatar className={classes.avatar}>\n                      <ListAltIcon />\n                    </Avatar>\n                  }\n                  title=\"Tag Utilizada\"\n                  subheader={`ID: ${campaign.tagListId}`}\n                />\n              </Card>\n            </Grid>\n          )}\n          \n          {campaign.contactListId && (\n            <Grid item xs={12} md={4}>\n              <Card variant=\"outlined\" className={classes.detailsCard}>\n                <CardHeader\n                  avatar={\n                    <Avatar className={classes.avatar}>\n                      <ListAltIcon />\n                    </Avatar>\n                  }\n                  title={i18n.t(\"campaignReport.contactLists\")}\n                  subheader={campaign.contactList?.name || \"Não especificado\"}\n                />\n              </Card>\n            </Grid>\n          )}\n          \n          <Grid item xs={12} md={4}>\n            <Card variant=\"outlined\" className={classes.detailsCard}>\n              <CardHeader\n                avatar={\n                  <Avatar className={classes.avatar}>\n                    <ScheduleIcon />\n                  </Avatar>\n                }\n                title={i18n.t(\"campaignReport.schedule\")}\n                subheader={datetimeToClient(campaign.scheduledAt) || \"Não agendado\"}\n              />\n            </Card>\n          </Grid>\n          \n          <Grid item xs={12} md={4}>\n            <Card variant=\"outlined\" className={classes.detailsCard}>\n              <CardHeader\n                avatar={\n                  <Avatar className={classes.avatar}>\n                    <EventAvailableIcon />\n                  </Avatar>\n                }\n                title={i18n.t(\"campaignReport.conclusion\")}\n                subheader={datetimeToClient(campaign.completedAt) || \"Não concluído\"}\n              />\n            </Card>\n          </Grid>\n        </Grid>\n        \n        {/* Seção de detalhes de mensagens */}\n        <Box mt={4}>\n          <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={2}>\n            <Typography variant=\"h6\" className={classes.sectionTitle}>\n              <MessageIcon style={{ verticalAlign: 'middle', marginRight: 8 }} />\n              Detalhes das Mensagens\n            </Typography>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              startIcon={<GetAppIcon />}\n              onClick={exportToExcel}\n              style={{\n                borderRadius: 20,\n                textTransform: 'none',\n                fontWeight: 'bold',\n                boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\n                background: 'linear-gradient(45deg, #4CAF50 30%, #45a049 90%)',\n                '&:hover': {\n                  background: 'linear-gradient(45deg, #45a049 30%, #4CAF50 90%)',\n                  boxShadow: '0 6px 16px rgba(0,0,0,0.2)',\n                }\n              }}\n            >\n              Exportar Excel\n            </Button>\n          </Box>\n          <Divider />\n          \n          <TableContainer className={classes.tableContainer}>\n            <Table aria-label=\"tabela de mensagens\">\n              <TableHead>\n                <TableRow>\n                  <TableCell>ID</TableCell>\n                  <TableCell>Destinatário</TableCell>\n                  <TableCell>Mensagem</TableCell>\n                  <TableCell>Enviado em</TableCell>\n                  <TableCell>Entregue em</TableCell>\n                  <TableCell>Status</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {messageRows.map((row) => (\n                  <TableRow key={row.id}>\n                    <TableCell>{row.jobId}</TableCell>\n                    <TableCell>\n                      <Tooltip title={row.number}>\n                        <span>{formatPhoneNumber(row.number)}</span>\n                      </Tooltip>\n                    </TableCell>\n                    <TableCell>\n                      <Tooltip title={row.fullMessage}>\n                        <span>{row.message}</span>\n                      </Tooltip>\n                    </TableCell>\n                    <TableCell>{row.createdAt}</TableCell>\n                    <TableCell>{row.deliveredAt || '-'}</TableCell>\n                    <TableCell>{getMessageStatusChip(row.status)}</TableCell>\n                  </TableRow>\n                ))}\n                {messageRows.length === 0 && (\n                  <TableRow>\n                    <TableCell colSpan={6} align=\"center\">\n                      {loading ? \"Carregando...\" : \"Nenhuma mensagem encontrada\"}\n                    </TableCell>\n                  </TableRow>\n                )}\n              </TableBody>\n            </Table>\n            <TablePagination\n              rowsPerPageOptions={[10, 25, 50, 100]}\n              component=\"div\"\n              count={totalMessagesSent}\n              rowsPerPage={rowsPerPage}\n              page={page}\n              onPageChange={(event, newPage) => {\n                setPage(newPage);\n                // Calcular qual página de dados carregar do servidor\n                const serverPage = newPage + 1;\n                loadMoreShipping(serverPage, rowsPerPage);\n              }}\n              onRowsPerPageChange={handleChangeRowsPerPage}\n              labelRowsPerPage=\"Linhas por página:\"\n              labelDisplayedRows={({ from, to, count }) => `${from}-${to} de ${count}`}\n            />\n          </TableContainer>\n        </Box>\n      </Paper>\n    </MainContainer>\n  );\n};\n\nexport default CampaignReport;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}