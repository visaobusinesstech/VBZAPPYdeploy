{"ast":null,"code":"import _objectSpread from\"/home/deploy/atendechatop/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useReducer,useContext}from\"react\";import{toast}from\"react-toastify\";import{useHistory}from\"react-router-dom\";import{makeStyles}from\"@material-ui/core/styles\";import Table from\"@material-ui/core/Table\";import TableBody from\"@material-ui/core/TableBody\";import TableCell from\"@material-ui/core/TableCell\";import TableHead from\"@material-ui/core/TableHead\";import TableRow from\"@material-ui/core/TableRow\";import Paper from\"@material-ui/core/Paper\";import Button from\"@material-ui/core/Button\";import Pagination from\"@material-ui/lab/Pagination\";import*as XLSX from\"xlsx\";import api from\"../../services/api\";import TableRowSkeleton from\"../../components/TableRowSkeleton\";import{i18n}from\"../../translate/i18n\";import MainHeader from\"../../components/MainHeader\";import Title from\"../../components/Title\";import MainHeaderButtonsWrapper from\"../../components/MainHeaderButtonsWrapper\";import MainContainer from\"../../components/MainContainer\";import toastError from\"../../errors/toastError\";import{AuthContext}from\"../../context/Auth/AuthContext\";import{Can}from\"../../components/Can\";import{CircularProgress,FormControl,FormControlLabel,Grid,IconButton,InputLabel,MenuItem,Select,Switch,TextField,Tooltip,Typography}from\"@material-ui/core\";import{UsersFilter}from\"../../components/UsersFilter\";import{TagsFilter}from\"../../components/TagsFilter\";import{WhatsappsFilter}from\"../../components/WhatsappsFilter\";import{StatusFilter}from\"../../components/StatusFilter\";import useDashboard from\"../../hooks/useDashboard\";import QueueSelectCustom from\"../../components/QueueSelectCustom\";import moment from\"moment\";import ShowTicketLogModal from\"../../components/ShowTicketLogModal\";import{blue,green}from\"@material-ui/core/colors\";import{Facebook,Forward,History,Instagram,SaveAlt,Visibility,WhatsApp}from\"@material-ui/icons\";import Autocomplete,{createFilterOptions}from\"@material-ui/lab/Autocomplete\";import{Field}from\"formik\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const useStyles=makeStyles(theme=>({mainContainer:{background:theme.palette.fancyBackground},formControl:{display:\"flex\",flexDirection:\"row\",justifyContent:\"center\",alignItems:\"center\"},mainPaper:{flex:1,marginTop:40,borderRadius:20,border:\"0px !important\",marginBottom:40,overflow:\"hidden\"},mainPaperTable:_objectSpread({flex:1,overflow:\"auto\",height:\"68vh\"},theme.scrollbarStylesSoftBig),mainPaperFilter:_objectSpread({flex:1,overflow:\"auto\",height:\"20vh\"},theme.scrollbarStylesSoftBig),mainHeaderBlock:{[theme.breakpoints.down(\"md\")]:{display:\"flex\",flexWrap:\"wrap\"}},filterItem:{width:200,[theme.breakpoints.down(\"md\")]:{width:\"45%\"}}}));const Reports=()=>{const classes=useStyles();const history=useHistory();const{getReport}=useDashboard();const{user}=useContext(AuthContext);const[loading,setLoading]=useState(false);const[pageNumber,setPageNumber]=useState(1);const[pageSize,setPageSize]=useState(10);// Defina o tamanho da página\nconst[searchParam,setSearchParam]=useState(\"\");const[selectedContactId,setSelectedContactId]=useState(null);const[selectedWhatsapp,setSelectedWhatsapp]=useState([]);const[selectedStatus,setSelectedStatus]=useState([]);const[selectedContact,setSelectedContact]=useState(null);// const [tagIds, setTagIds] = useState([]);\nconst[queueIds,setQueueIds]=useState([]);const[userIds,setUserIds]=useState([]);const[options,setOptions]=useState([]);const[dateFrom,setDateFrom]=useState(moment(\"1\",\"D\").format(\"YYYY-MM-DD\"));const[dateTo,setDateTo]=useState(moment().format(\"YYYY-MM-DD\"));const[onlyRated,setOnlyRated]=useState(false);const[totalTickets,setTotalTickets]=useState(0);const[tickets,setTickets]=useState([]);const[openTicketMessageDialog,setOpenTicketMessageDialog]=useState(false);const[ticketOpen,setTicketOpen]=useState(null);const[hasMore,setHasMore]=useState(false);useEffect(()=>{setLoading(true);const delayDebounceFn=setTimeout(()=>{const fetchContacts=async()=>{try{const{data}=await api.get(\"contacts\",{params:{searchParam}});setOptions(data.contacts);setLoading(false);}catch(err){setLoading(false);toastError(err);}};fetchContacts();},500);return()=>clearTimeout(delayDebounceFn);},[searchParam]);// const handleSelectedTags = (selecteds) => {\n//   const tags = selecteds.map((t) => t.id);\n//   setTagIds(tags);\n// };\nconst exportarGridParaExcel=async()=>{setLoading(true);// Define o estado de loading como true durante o carregamento\ntry{const data=await getReport({searchParam,contactId:selectedContactId,whatsappId:JSON.stringify(selectedWhatsapp),// tags: JSON.stringify(tagIds),\nusers:JSON.stringify(userIds),queueIds:JSON.stringify(queueIds),status:JSON.stringify(selectedStatus),// tags: tagIds,\ndateFrom,dateTo,page:1,// Passa o número da página para a API\npageSize:9999999,// Passa o tamanho da página para a API\nonlyRated:onlyRated?\"true\":\"false\"});const ticketsData=data.tickets.map(ticket=>{const formatDate=dateString=>{if(!dateString||dateString===null){return{date:\"\",time:\"\"};}if(dateString.includes(\"/\")&&dateString.includes(\" \")){const[datePart,timePart]=dateString.split(\" \");return{date:datePart,time:timePart};}const date=new Date(dateString);if(isNaN(date.getTime())){return{date:\"\",time:\"\"};}return{date:date.toLocaleDateString(\"pt-BR\"),time:date.toLocaleTimeString(\"pt-BR\")};};const formatSupportTime=timeString=>{if(!timeString)return\"\";if(timeString===\"0\")return\"0min\";const match=timeString.match(/(\\d+)\\s*d,?\\s*(\\d+)\\s*hr?s?\\s*e?\\s*(\\d+)\\s*m/);if(!match)return timeString;const days=parseInt(match[1]);const hours=parseInt(match[2]);const minutes=parseInt(match[3]);let result=\"\";if(days>0)result+=\"\".concat(days,\"d\");if(hours>0)result+=\"\".concat(hours,\"h\");if(minutes>0)result+=\"\".concat(minutes,\"min\");return result||\"0min\";};const createdAtFormatted=formatDate(ticket.createdAt);const closedAtFormatted=formatDate(ticket.closedAt);return{id:ticket.id,Conexão:ticket.whatsappName,Contato:ticket.contactName,Usuário:ticket.userName,Fila:ticket.queueName,Status:ticket.status,ÚltimaMensagem:ticket.lastMessage,DataAbertura:createdAtFormatted.date,HoraAbertura:createdAtFormatted.time,DataFechamento:closedAtFormatted.date,HoraFechamento:closedAtFormatted.time,TempoDeAtendimento:formatSupportTime(ticket.supportTime),nps:ticket.NPS||\"\",ValorDaVenda:ticket.valorVenda!==undefined&&ticket.valorVenda!==null?ticket.valorVenda:\"-\",MotivoDaNaoVenda:ticket.motivoNaoVenda||\"-\",FinalizadoComVenda:ticket.finalizadoComVenda===true?\"Sim\":ticket.finalizadoComVenda===false?\"Não\":\"-\"};});console.log(ticketsData);// RDS.CHAT - preparando os dados aqui...\nconst getTranslation=(key,fallback)=>{const translation=i18n.t(key);return translation!==key?translation:fallback;};const formatDateBR=dateStr=>{if(!dateStr)return getTranslation(\"reports.exportExcel.notInformed\",\"Não informado\");const[year,month,day]=dateStr.split(\"-\");return\"\".concat(day,\"/\").concat(month,\"/\").concat(year);};const translations={title:getTranslation(\"reports.exportExcel.title\",\"Relatórios de Atendimentos\"),startDate:getTranslation(\"reports.exportExcel.startDate\",\"Data inicial\"),endDate:getTranslation(\"reports.exportExcel.endDate\",\"Data final\"),columns:{id:getTranslation(\"reports.exportExcel.columns.id\",\"ID\"),connection:getTranslation(\"reports.exportExcel.columns.connection\",\"Conexão\"),contact:getTranslation(\"reports.exportExcel.columns.contact\",\"Contato\"),user:getTranslation(\"reports.exportExcel.columns.user\",\"Usuário\"),queue:getTranslation(\"reports.exportExcel.columns.queue\",\"Fila\"),status:getTranslation(\"reports.exportExcel.columns.status\",\"Status\"),lastMessage:getTranslation(\"reports.exportExcel.columns.lastMessage\",\"Última Mensagem\"),openDate:getTranslation(\"reports.exportExcel.columns.openDate\",\"Data Abertura\"),openTime:getTranslation(\"reports.exportExcel.columns.openTime\",\"Hora Abertura\"),closeDate:getTranslation(\"reports.exportExcel.columns.closeDate\",\"Data Fechamento\"),closeTime:getTranslation(\"reports.exportExcel.columns.closeTime\",\"Hora Fechamento\"),supportTime:getTranslation(\"reports.exportExcel.columns.supportTime\",\"Tempo de Atendimento\"),nps:getTranslation(\"reports.exportExcel.columns.nps\",\"NPS\"),valorVenda:getTranslation(\"reports.exportExcel.columns.valorVenda\",\"Valor da Venda\"),motivoNaoVenda:getTranslation(\"reports.exportExcel.columns.motivoNaoVenda\",\"Motivo da Não Venda\"),finalizadoComVenda:getTranslation(\"reports.exportExcel.columns.finalizadoComVenda\",\"Finalizado com Venda\")}};const wb=XLSX.utils.book_new();const ws=XLSX.utils.aoa_to_sheet([[translations.title],[\"\".concat(translations.startDate,\": \").concat(formatDateBR(dateFrom))],[\"\".concat(translations.endDate,\": \").concat(formatDateBR(dateTo))],[],[translations.columns.id,translations.columns.connection,translations.columns.contact,translations.columns.user,translations.columns.queue,translations.columns.status,translations.columns.lastMessage,translations.columns.openDate,translations.columns.openTime,translations.columns.closeDate,translations.columns.closeTime,translations.columns.supportTime,translations.columns.nps,translations.columns.valorVenda,translations.columns.motivoNaoVenda,translations.columns.finalizadoComVenda]]);XLSX.utils.sheet_add_json(ws,ticketsData,{origin:\"A6\",skipHeader:true});if(!ws[\"!merges\"])ws[\"!merges\"]=[];ws[\"!merges\"].push({s:{c:0,r:0},e:{c:12,r:0}});if(!ws[\"!cols\"])ws[\"!cols\"]=[];ws[\"!cols\"]=[{wch:8},{wch:15},{wch:25},{wch:20},{wch:15},{wch:12},{wch:30},{wch:12},{wch:12},{wch:12},{wch:12},{wch:18},{wch:8},{wch:15},{wch:15},{wch:15}];if(!ws[\"!rows\"])ws[\"!rows\"]=[];ws[\"!rows\"]=[{hpt:25},{hpt:20},{hpt:20},{hpt:10},{hpt:25}];const range=XLSX.utils.decode_range(ws[\"!ref\"]);for(let rowNum=range.s.r;rowNum<=range.e.r;rowNum++){for(let colNum=range.s.c;colNum<=range.e.c;colNum++){const cellAddress=XLSX.utils.encode_cell({r:rowNum,c:colNum});if(!ws[cellAddress])continue;if(!ws[cellAddress].s)ws[cellAddress].s={};if(rowNum===0){ws[cellAddress].s={font:{bold:true,sz:16,color:{rgb:\"FFFFFF\"}},fill:{fgColor:{rgb:\"4472C4\"}},alignment:{horizontal:\"center\",vertical:\"center\"}};}else if(rowNum===1||rowNum===2){ws[cellAddress].s={font:{bold:true,sz:12},fill:{fgColor:{rgb:\"E7E6E6\"}}};}else if(rowNum===4){ws[cellAddress].s={font:{bold:true,color:{rgb:\"FFFFFF\"}},fill:{fgColor:{rgb:\"70AD47\"}},alignment:{horizontal:\"center\",vertical:\"center\"}};}}}XLSX.utils.book_append_sheet(wb,ws,\"RelatorioDeAtendimentos\");XLSX.writeFile(wb,\"relatorio-de-atendimentos.xlsx\",{cellStyles:true,bookType:\"xlsx\"});setPageNumber(pageNumber);}catch(error){toastError(error);}finally{setLoading(false);}};const handleFilter=async pageNumber=>{setLoading(true);// Define o estado de loading como true durante o carregamento\nconsole.log(onlyRated);try{const data=await getReport({searchParam,contactId:selectedContactId,whatsappId:JSON.stringify(selectedWhatsapp),// tags: JSON.stringify(tagIds),\nusers:JSON.stringify(userIds),queueIds:JSON.stringify(queueIds),status:JSON.stringify(selectedStatus),// tags: tagIds,\ndateFrom,dateTo,page:pageNumber,// Passa o número da página para a API\npageSize:pageSize,// Passa o tamanho da página para a API\nonlyRated:onlyRated?\"true\":\"false\"});setTotalTickets(data.totalTickets.total);// Verifica se há mais resultados para definir hasMore\nsetHasMore(data.tickets.length===pageSize);setTickets(data.tickets);// Se for a primeira página, substitua os tickets\nsetPageNumber(pageNumber);// Atualiza o estado da página atual\n}catch(error){toastError(error);}finally{setLoading(false);// Define o estado de loading como false após o carregamento\n}};const handleSelectedUsers=selecteds=>{const users=selecteds.map(t=>t.id);setUserIds(users);};const handleSelectedWhatsapps=selecteds=>{const whatsapp=selecteds.map(t=>t.id);setSelectedWhatsapp(whatsapp);};const handleSelectedStatus=selecteds=>{const statusFilter=selecteds.map(t=>t.status);setSelectedStatus(statusFilter);};const IconChannel=channel=>{switch(channel){case\"facebook\":return/*#__PURE__*/_jsx(Facebook,{style:{color:\"#3b5998\",verticalAlign:\"middle\"}});case\"instagram\":return/*#__PURE__*/_jsx(Instagram,{style:{color:\"#e1306c\",verticalAlign:\"middle\"}});case\"whatsapp\":return/*#__PURE__*/_jsx(WhatsApp,{style:{color:\"#25d366\",verticalAlign:\"middle\"}});default:return\"error\";}};const renderOption=option=>{if(option.number){return/*#__PURE__*/_jsxs(_Fragment,{children:[IconChannel(option.channel),/*#__PURE__*/_jsxs(Typography,{component:\"span\",style:{fontSize:14,marginLeft:\"10px\",display:\"inline-flex\",alignItems:\"center\",lineHeight:\"2\"},children:[option.name,\" - \",option.number]})]});}else{return\"\".concat(i18n.t(\"newTicketModal.add\"),\" \").concat(option.name);}};const handleSelectOption=(e,newValue)=>{setSelectedContactId(newValue.id);setSearchParam(\"\");};const renderOptionLabel=option=>{if(option.number){return\"\".concat(option.name,\" - \").concat(option.number);}else{return\"\".concat(option.name);}};const filter=createFilterOptions({trim:true});const createAddContactOption=(filterOptions,params)=>{const filtered=filter(filterOptions,params);if(params.inputValue!==\"\"&&!loading&&searchParam.length>=3){filtered.push({name:\"\".concat(params.inputValue)});}return filtered;};const renderContactAutocomplete=()=>{return/*#__PURE__*/_jsx(Grid,{xs:12,item:true,children:/*#__PURE__*/_jsx(Autocomplete,{fullWidth:true,options:options,loading:loading,clearOnBlur:true,autoHighlight:true,freeSolo:true,size:\"small\",clearOnEscape:true,getOptionLabel:renderOptionLabel,renderOption:renderOption,filterOptions:createAddContactOption,onChange:(e,newValue)=>handleSelectOption(e,newValue),renderInput:params=>/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:i18n.t(\"newTicketModal.fieldLabel\"),variant:\"outlined\",autoFocus:true,size:\"small\",onChange:e=>setSearchParam(e.target.value)// onKeyPress={(e, newValue) => handleSelectOption(e, newValue)}\n,InputProps:_objectSpread(_objectSpread({},params.InputProps),{},{endAdornment:/*#__PURE__*/_jsxs(React.Fragment,{children:[loading?/*#__PURE__*/_jsx(CircularProgress,{color:\"inherit\",size:20}):null,params.InputProps.endAdornment]})})}))})});};return/*#__PURE__*/_jsxs(MainContainer,{className:classes.mainContainer,children:[openTicketMessageDialog&&/*#__PURE__*/_jsx(ShowTicketLogModal,{isOpen:openTicketMessageDialog,handleClose:()=>setOpenTicketMessageDialog(false),ticketId:ticketOpen.id}),/*#__PURE__*/_jsx(Title,{children:i18n.t(\"reports.title\")}),/*#__PURE__*/_jsx(MainHeader,{className:classes.mainHeaderFilter,style:{display:\"flex\"},children:/*#__PURE__*/_jsxs(Paper,{className:classes.mainPaperFilter,children:[/*#__PURE__*/_jsx(\"div\",{style:{paddingTop:\"15px\"}}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:1,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:3,xl:3,children:renderContactAutocomplete()}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:3,xl:3,children:/*#__PURE__*/_jsx(WhatsappsFilter,{onFiltered:handleSelectedWhatsapps})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:3,xl:3,children:/*#__PURE__*/_jsx(StatusFilter,{onFiltered:handleSelectedStatus})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:3,xl:3,children:/*#__PURE__*/_jsx(UsersFilter,{onFiltered:handleSelectedUsers})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:3,xl:3,style:{marginTop:\"-13px\"},children:/*#__PURE__*/_jsx(QueueSelectCustom,{selectedQueueIds:queueIds,onChange:values=>setQueueIds(values)})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:3,md:3,children:/*#__PURE__*/_jsx(TextField,{label:i18n.t(\"reports.startDate\"),type:\"date\",value:dateFrom,variant:\"outlined\",fullWidth:true,size:\"small\",onChange:e=>setDateFrom(e.target.value),InputLabelProps:{shrink:true}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:3,md:3,children:/*#__PURE__*/_jsx(TextField,{label:i18n.t(\"reports.endDate\"),type:\"date\",value:dateTo,variant:\"outlined\",fullWidth:true,size:\"small\",onChange:e=>setDateTo(e.target.value),InputLabelProps:{shrink:true}})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:3,md:3,style:{display:\"flex\",justifyContent:\"center\"},children:[/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{color:\"primary\",checked:onlyRated,onChange:()=>setOnlyRated(!onlyRated)}),label:i18n.t(\"reports.buttons.onlyRated\")}),/*#__PURE__*/_jsx(IconButton,{onClick:exportarGridParaExcel,\"aria-label\":\"Exportar para Excel\",children:/*#__PURE__*/_jsx(SaveAlt,{})}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:()=>handleFilter(pageNumber),size:\"small\",children:i18n.t(\"reports.buttons.filter\")})]})]})]})}),/*#__PURE__*/_jsx(Paper,{className:classes.mainPaperTable,variant:\"outlined\",children:/*#__PURE__*/_jsxs(Table,{size:\"small\",id:\"grid-attendants\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:i18n.t(\"reports.table.id\")}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:i18n.t(\"reports.table.whatsapp\")}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:i18n.t(\"reports.table.contact\")}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:i18n.t(\"reports.table.user\")}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:i18n.t(\"reports.table.queue\")}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:i18n.t(\"wallets.wallet\")}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:i18n.t(\"reports.table.status\")}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:i18n.t(\"reports.table.lastMessage\")}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:i18n.t(\"reports.table.dateOpen\")}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:i18n.t(\"reports.table.dateClose\")}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:i18n.t(\"reports.table.supportTime\")}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:i18n.t(\"reports.table.NPS\")}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Valor da Venda\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Motivo da N\\xE3o Venda\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Finalizado com Venda\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:i18n.t(\"reports.table.actions\")})]})}),/*#__PURE__*/_jsx(TableBody,{children:/*#__PURE__*/_jsxs(_Fragment,{children:[tickets.map(ticket=>/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:ticket.id}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:ticket===null||ticket===void 0?void 0:ticket.whatsappName}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:ticket===null||ticket===void 0?void 0:ticket.contactName}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:ticket===null||ticket===void 0?void 0:ticket.userName}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:ticket===null||ticket===void 0?void 0:ticket.queueName}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:(ticket===null||ticket===void 0?void 0:ticket.walletName)||\"-\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:ticket===null||ticket===void 0?void 0:ticket.status}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:ticket===null||ticket===void 0?void 0:ticket.lastMessage}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:ticket===null||ticket===void 0?void 0:ticket.createdAt}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:ticket===null||ticket===void 0?void 0:ticket.closedAt}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:ticket===null||ticket===void 0?void 0:ticket.supportTime}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:ticket===null||ticket===void 0?void 0:ticket.NPS}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:(ticket===null||ticket===void 0?void 0:ticket.valorVenda)!==undefined&&(ticket===null||ticket===void 0?void 0:ticket.valorVenda)!==null?ticket.valorVenda:\"-\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:(ticket===null||ticket===void 0?void 0:ticket.motivoNaoVenda)||\"-\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:(ticket===null||ticket===void 0?void 0:ticket.finalizadoComVenda)===true?\"Sim\":(ticket===null||ticket===void 0?void 0:ticket.finalizadoComVenda)===false?\"Não\":\"-\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsxs(Typography,{noWrap:true,component:\"span\",variant:\"body2\",color:\"textPrimary\",children:[/*#__PURE__*/_jsx(Tooltip,{title:\"Logs do Ticket\",children:/*#__PURE__*/_jsx(History,{onClick:()=>{setOpenTicketMessageDialog(true);setTicketOpen(ticket);},fontSize:\"small\",style:{color:blue[700],cursor:\"pointer\",marginLeft:10,verticalAlign:\"middle\"}})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Acessar Ticket\",children:/*#__PURE__*/_jsx(Forward,{onClick:()=>{history.push(\"/tickets/\".concat(ticket.uuid));},fontSize:\"small\",style:{color:green[700],cursor:\"pointer\",marginLeft:10,verticalAlign:\"middle\"}})})]})})]},ticket.id)),loading&&/*#__PURE__*/_jsx(TableRowSkeleton,{avatar:true,columns:3})]})})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Grid,{container:true,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:10,md:10,children:/*#__PURE__*/_jsx(Pagination,{count:Math.ceil(totalTickets/pageSize)// Calcula o nmero total de páginas com base no nmero total de tickets e no tamanho da página\n,page:pageNumber// Define a página atual\n,onChange:(event,value)=>handleFilter(value)// Função de callback para mudanças de página\n})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:2,md:2,children:/*#__PURE__*/_jsxs(FormControl,{margin:\"dense\",variant:\"outlined\",fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:i18n.t(\"tickets.search.ticketsPerPage\")}),/*#__PURE__*/_jsxs(Select,{labelId:\"dialog-select-prompt-label\",id:\"dialog-select-prompt\",name:\"pageSize\",value:pageSize,onChange:e=>{setPageSize(e.target.value);},label:i18n.t(\"tickets.search.ticketsPerPage\"),fullWidth:true,MenuProps:{anchorOrigin:{vertical:\"center\",horizontal:\"left\"},transformOrigin:{vertical:\"center\",horizontal:\"left\"},getContentAnchorEl:null},children:[/*#__PURE__*/_jsx(MenuItem,{value:5,children:\"5\"}),/*#__PURE__*/_jsx(MenuItem,{value:10,children:\"10\"}),/*#__PURE__*/_jsx(MenuItem,{value:20,children:\"20\"}),/*#__PURE__*/_jsx(MenuItem,{value:50,children:\"50\"})]})]})})]})})]});};export default Reports;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}