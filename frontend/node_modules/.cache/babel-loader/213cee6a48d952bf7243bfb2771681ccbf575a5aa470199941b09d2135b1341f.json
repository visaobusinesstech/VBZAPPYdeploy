{"ast":null,"code":"import _objectSpread from\"/home/deploy/codigologlow/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useReducer,useContext,useRef}from\"react\";import{toast}from\"react-toastify\";import{useHistory}from\"react-router-dom\";import{makeStyles}from\"@material-ui/core/styles\";import Table from\"@material-ui/core/Table\";import TableBody from\"@material-ui/core/TableBody\";import TableCell from\"@material-ui/core/TableCell\";import TableHead from\"@material-ui/core/TableHead\";import TableRow from\"@material-ui/core/TableRow\";import Paper from\"@material-ui/core/Paper\";import Button from\"@material-ui/core/Button\";import Avatar from\"@material-ui/core/Avatar\";import SearchIcon from\"@material-ui/icons/Search\";import TextField from\"@material-ui/core/TextField\";import InputAdornment from\"@material-ui/core/InputAdornment\";import IconButton from\"@material-ui/core/IconButton\";import DeleteOutlineIcon from\"@material-ui/icons/DeleteOutline\";import EditIcon from\"@material-ui/icons/Edit\";import AccountBalanceWalletIcon from\"@material-ui/icons/AccountBalanceWallet\";import PersonIcon from\"@material-ui/icons/Person\";import QueueIcon from\"@material-ui/icons/Queue\";import api from\"../../services/api\";import TableRowSkeleton from\"../../components/TableRowSkeleton\";import ConfirmationModal from\"../../components/ConfirmationModal/\";import{i18n}from\"../../translate/i18n\";import MainHeader from\"../../components/MainHeader\";import Title from\"../../components/Title\";import MainHeaderButtonsWrapper from\"../../components/MainHeaderButtonsWrapper\";import MainContainer from\"../../components/MainContainer\";import toastError from\"../../errors/toastError\";import{AuthContext}from\"../../context/Auth/AuthContext\";import{Can}from\"../../components/Can\";import FormControl from\"@material-ui/core/FormControl\";import InputLabel from\"@material-ui/core/InputLabel\";import Select from\"@material-ui/core/Select\";import MenuItem from\"@material-ui/core/MenuItem\";import Dialog from\"@material-ui/core/Dialog\";import DialogTitle from\"@material-ui/core/DialogTitle\";import DialogContent from\"@material-ui/core/DialogContent\";import DialogActions from\"@material-ui/core/DialogActions\";import Autocomplete from\"@material-ui/lab/Autocomplete\";import CircularProgress from\"@material-ui/core/CircularProgress\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const reducer=(state,action)=>{if(action.type===\"LOAD_WALLETS\"){const wallets=action.payload;const newWallets=[];wallets.forEach(wallet=>{const walletIndex=state.findIndex(w=>w.id===wallet.id);if(walletIndex!==-1){state[walletIndex]=wallet;}else{newWallets.push(wallet);}});return[...state,...newWallets];}if(action.type===\"UPDATE_WALLET\"){const wallet=action.payload;const walletIndex=state.findIndex(w=>w.id===wallet.id);if(walletIndex!==-1){state[walletIndex]=wallet;return[...state];}else{return[wallet,...state];}}if(action.type===\"DELETE_WALLET\"){const walletId=action.payload;return state.filter(w=>w.id!==walletId);}if(action.type===\"RESET\"){return[];}};const useStyles=makeStyles(theme=>({mainPaper:_objectSpread({flex:1,padding:theme.spacing(1),overflowY:\"scroll\"},theme.scrollbarStyles),tableRow:{\"&:hover\":{backgroundColor:theme.palette.action.hover}},avatar:{width:theme.spacing(4),height:theme.spacing(4)},filterContainer:{display:\"flex\",gap:theme.spacing(2),marginBottom:theme.spacing(2),alignItems:\"center\"},formControl:{minWidth:200},dialogContent:{minWidth:400}}));const Wallets=()=>{const classes=useStyles();const history=useHistory();const{user}=useContext(AuthContext);const[loading,setLoading]=useState(false);const[pageNumber,setPageNumber]=useState(1);const[searchParam,setSearchParam]=useState(\"\");const[wallets,dispatch]=useReducer(reducer,[]);const[selectedUserId,setSelectedUserId]=useState(\"\");const[users,setUsers]=useState([]);const[loadingUsers,setLoadingUsers]=useState(false);const[deletingWallet,setDeletingWallet]=useState(null);const[confirmOpen,setConfirmOpen]=useState(false);const[hasMore,setHasMore]=useState(false);const[editModalOpen,setEditModalOpen]=useState(false);const[editingWallet,setEditingWallet]=useState(null);const[selectedUser,setSelectedUser]=useState(null);const[selectedQueue,setSelectedQueue]=useState(null);const[queues,setQueues]=useState([]);const[loadingQueues,setLoadingQueues]=useState(false);useEffect(()=>{dispatch({type:\"RESET\"});setPageNumber(1);},[searchParam,selectedUserId]);useEffect(()=>{fetchUsers();},[]);useEffect(()=>{setLoading(true);const delayDebounceFn=setTimeout(()=>{const fetchWallets=async()=>{try{const{data}=await api.get(\"/contacts/wallets\",{params:{searchParam,pageNumber,userId:selectedUserId||undefined}});dispatch({type:\"LOAD_WALLETS\",payload:data.wallets});setHasMore(data.hasMore);setLoading(false);}catch(err){toastError(err);}};fetchWallets();},500);return()=>clearTimeout(delayDebounceFn);},[searchParam,pageNumber,selectedUserId]);const fetchUsers=async()=>{setLoadingUsers(true);try{const{data}=await api.get(\"/users/\");setUsers(data.users);}catch(err){toastError(err);}finally{setLoadingUsers(false);}};const handleSearch=event=>{setSearchParam(event.target.value);};const handleUserChange=event=>{setSelectedUserId(event.target.value);};const handleDeleteWallet=async walletId=>{try{// Encontra a carteira para obter o contactId\nconst wallet=wallets.find(w=>w.id===walletId);if(!wallet){toast.error(\"Carteira não encontrada\");return;}await api.delete(\"/contacts/wallet/\".concat(wallet.contactId));dispatch({type:\"DELETE_WALLET\",payload:walletId});toast.success(i18n.t(\"wallets.deleteSuccess\"));}catch(err){toastError(err);}};const handleOpenEditModal=wallet=>{setEditingWallet(wallet);setSelectedUser({id:wallet.userId,name:wallet.userName});setSelectedQueue(wallet.queueId);setQueues([{id:wallet.queueId,name:wallet.queueName}]);setEditModalOpen(true);};const handleCloseEditModal=()=>{setEditModalOpen(false);setEditingWallet(null);setSelectedUser(null);setSelectedQueue(null);setQueues([]);};const handleSaveEdit=async()=>{if(!selectedUser||!selectedQueue){toast.error(i18n.t(\"wallets.selectUserAndQueue\"));return;}try{var _queues$find;await api.put(\"/contacts/wallet/\".concat(editingWallet.contactId),{wallets:{userId:selectedUser.id,queueId:selectedQueue}});// Atualiza a lista\nconst updatedWallet=_objectSpread(_objectSpread({},editingWallet),{},{userId:selectedUser.id,userName:selectedUser.name,queueId:selectedQueue,queueName:((_queues$find=queues.find(q=>q.id===selectedQueue))===null||_queues$find===void 0?void 0:_queues$find.name)||\"\"});dispatch({type:\"UPDATE_WALLET\",payload:updatedWallet});toast.success(i18n.t(\"wallets.updateSuccess\"));handleCloseEditModal();}catch(err){toastError(err);}};const loadMore=()=>{setPageNumber(prevState=>prevState+1);};const handleScroll=e=>{if(!hasMore||loading)return;const{scrollTop,scrollHeight,clientHeight}=e.currentTarget;if(scrollHeight-(scrollTop+100)<clientHeight){loadMore();}};const formatPhoneNumber=number=>{if(!number)return\"\";const cleaned=number.replace(/\\D/g,\"\");const match=cleaned.match(/^(\\d{2})(\\d{2})(\\d{5})(\\d{4})$/);if(match){return\"+\".concat(match[1],\" (\").concat(match[2],\") \").concat(match[3],\"-\").concat(match[4]);}return number;};return/*#__PURE__*/_jsxs(MainContainer,{children:[/*#__PURE__*/_jsxs(MainHeader,{children:[/*#__PURE__*/_jsx(Title,{children:i18n.t(\"wallets.title\")}),/*#__PURE__*/_jsx(MainHeaderButtonsWrapper,{children:/*#__PURE__*/_jsx(TextField,{placeholder:i18n.t(\"wallets.searchPlaceholder\"),type:\"search\",value:searchParam,onChange:handleSearch,InputProps:{startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(SearchIcon,{style:{color:\"gray\"}})})},size:\"small\"})})]}),/*#__PURE__*/_jsxs(Paper,{className:classes.mainPaper,variant:\"outlined\",onScroll:handleScroll,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.filterContainer,children:/*#__PURE__*/_jsxs(FormControl,{className:classes.formControl,children:[/*#__PURE__*/_jsx(InputLabel,{children:i18n.t(\"wallets.filterByUser\")}),/*#__PURE__*/_jsxs(Select,{value:selectedUserId,onChange:handleUserChange,disabled:loadingUsers,children:[/*#__PURE__*/_jsx(MenuItem,{value:\"\",children:/*#__PURE__*/_jsx(\"em\",{children:i18n.t(\"wallets.allUsers\")})}),users.map(user=>/*#__PURE__*/_jsx(MenuItem,{value:user.id,children:user.name},user.id))]})]})}),/*#__PURE__*/_jsxs(Table,{size:\"small\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{padding:\"checkbox\"}),/*#__PURE__*/_jsx(TableCell,{children:i18n.t(\"wallets.contact\")}),/*#__PURE__*/_jsx(TableCell,{children:i18n.t(\"wallets.user\")}),/*#__PURE__*/_jsx(TableCell,{children:i18n.t(\"wallets.queue\")}),/*#__PURE__*/_jsx(TableCell,{children:i18n.t(\"wallets.phone\")}),/*#__PURE__*/_jsx(TableCell,{children:i18n.t(\"wallets.email\")}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:i18n.t(\"wallets.actions\")})]})}),/*#__PURE__*/_jsxs(TableBody,{children:[wallets.map(wallet=>/*#__PURE__*/_jsxs(TableRow,{className:classes.tableRow,children:[/*#__PURE__*/_jsx(TableCell,{padding:\"checkbox\",children:/*#__PURE__*/_jsx(Avatar,{className:classes.avatar,children:wallet.contactName?wallet.contactName.charAt(0).toUpperCase():\"?\"})}),/*#__PURE__*/_jsx(TableCell,{children:wallet.contactName}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:8},children:[/*#__PURE__*/_jsx(PersonIcon,{fontSize:\"small\"}),wallet.userName]})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:8},children:[/*#__PURE__*/_jsx(QueueIcon,{fontSize:\"small\"}),wallet.queueName]})}),/*#__PURE__*/_jsx(TableCell,{children:formatPhoneNumber(wallet.contactNumber)}),/*#__PURE__*/_jsx(TableCell,{children:wallet.contactEmail}),/*#__PURE__*/_jsxs(TableCell,{align:\"center\",children:[/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:()=>handleOpenEditModal(wallet),children:/*#__PURE__*/_jsx(EditIcon,{})}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:()=>{setDeletingWallet(wallet);setConfirmOpen(true);},children:/*#__PURE__*/_jsx(DeleteOutlineIcon,{})})]})]},wallet.id)),loading&&/*#__PURE__*/_jsx(TableRowSkeleton,{avatar:true,columns:7})]})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:editModalOpen,onClose:handleCloseEditModal,maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:i18n.t(\"wallets.editWallet\")}),/*#__PURE__*/_jsxs(DialogContent,{className:classes.dialogContent,children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:16},children:/*#__PURE__*/_jsx(Autocomplete,{value:selectedUser,onChange:(e,newValue)=>{setSelectedUser(newValue);if(newValue&&newValue.queues){setQueues(newValue.queues);if(newValue.queues.length===1){setSelectedQueue(newValue.queues[0].id);}else{setSelectedQueue(null);}}else{setQueues([]);setSelectedQueue(null);}},options:users,getOptionLabel:option=>option.name,loading:loadingUsers,renderInput:params=>/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:i18n.t(\"wallets.selectUser\"),variant:\"outlined\",fullWidth:true,InputProps:_objectSpread(_objectSpread({},params.InputProps),{},{endAdornment:/*#__PURE__*/_jsxs(_Fragment,{children:[loadingUsers?/*#__PURE__*/_jsx(CircularProgress,{color:\"inherit\",size:20}):null,params.InputProps.endAdornment]})})}))})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,variant:\"outlined\",children:[/*#__PURE__*/_jsx(InputLabel,{children:i18n.t(\"wallets.selectQueue\")}),/*#__PURE__*/_jsx(Select,{value:selectedQueue||\"\",onChange:e=>setSelectedQueue(e.target.value),label:i18n.t(\"wallets.selectQueue\"),children:queues.map(queue=>/*#__PURE__*/_jsx(MenuItem,{value:queue.id,children:queue.name},queue.id))})]})})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleCloseEditModal,color:\"secondary\",children:i18n.t(\"wallets.cancel\")}),/*#__PURE__*/_jsx(Button,{onClick:handleSaveEdit,color:\"primary\",variant:\"contained\",children:i18n.t(\"wallets.save\")})]})]}),/*#__PURE__*/_jsx(ConfirmationModal,{title:i18n.t(\"wallets.confirmDeleteTitle\"),open:confirmOpen,onClose:setConfirmOpen,onConfirm:()=>{handleDeleteWallet(deletingWallet.id);setConfirmOpen(false);},children:i18n.t(\"wallets.confirmDeleteMessage\")})]});};export default Wallets;","map":{"version":3,"names":["React","useState","useEffect","useReducer","useContext","useRef","toast","useHistory","makeStyles","Table","TableBody","TableCell","TableHead","TableRow","Paper","Button","Avatar","SearchIcon","TextField","InputAdornment","IconButton","DeleteOutlineIcon","EditIcon","AccountBalanceWalletIcon","PersonIcon","QueueIcon","api","TableRowSkeleton","ConfirmationModal","i18n","MainHeader","Title","MainHeaderButtonsWrapper","MainContainer","toastError","AuthContext","Can","FormControl","InputLabel","Select","MenuItem","Dialog","DialogTitle","DialogContent","DialogActions","Autocomplete","CircularProgress","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","reducer","state","action","type","wallets","payload","newWallets","forEach","wallet","walletIndex","findIndex","w","id","push","walletId","filter","useStyles","theme","mainPaper","_objectSpread","flex","padding","spacing","overflowY","scrollbarStyles","tableRow","backgroundColor","palette","hover","avatar","width","height","filterContainer","display","gap","marginBottom","alignItems","formControl","minWidth","dialogContent","Wallets","classes","history","user","loading","setLoading","pageNumber","setPageNumber","searchParam","setSearchParam","dispatch","selectedUserId","setSelectedUserId","users","setUsers","loadingUsers","setLoadingUsers","deletingWallet","setDeletingWallet","confirmOpen","setConfirmOpen","hasMore","setHasMore","editModalOpen","setEditModalOpen","editingWallet","setEditingWallet","selectedUser","setSelectedUser","selectedQueue","setSelectedQueue","queues","setQueues","loadingQueues","setLoadingQueues","fetchUsers","delayDebounceFn","setTimeout","fetchWallets","data","get","params","userId","undefined","err","clearTimeout","handleSearch","event","target","value","handleUserChange","handleDeleteWallet","find","error","delete","concat","contactId","success","t","handleOpenEditModal","name","userName","queueId","queueName","handleCloseEditModal","handleSaveEdit","_queues$find","put","updatedWallet","q","loadMore","prevState","handleScroll","e","scrollTop","scrollHeight","clientHeight","currentTarget","formatPhoneNumber","number","cleaned","replace","match","children","placeholder","onChange","InputProps","startAdornment","position","style","color","size","className","variant","onScroll","disabled","map","align","contactName","charAt","toUpperCase","fontSize","contactNumber","contactEmail","onClick","columns","open","onClose","maxWidth","fullWidth","newValue","length","options","getOptionLabel","option","renderInput","label","endAdornment","queue","title","onConfirm"],"sources":["/home/deploy/codigologlow/frontend/src/pages/Wallets/index.js"],"sourcesContent":["import React, { useState, useEffect, useReducer, useContext, useRef } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { useHistory } from \"react-router-dom\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport AccountBalanceWalletIcon from \"@material-ui/icons/AccountBalanceWallet\";\nimport PersonIcon from \"@material-ui/icons/Person\";\nimport QueueIcon from \"@material-ui/icons/Queue\";\n\nimport api from \"../../services/api\";\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\nimport ConfirmationModal from \"../../components/ConfirmationModal/\";\nimport { i18n } from \"../../translate/i18n\";\nimport MainHeader from \"../../components/MainHeader\";\nimport Title from \"../../components/Title\";\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\nimport MainContainer from \"../../components/MainContainer\";\nimport toastError from \"../../errors/toastError\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\nimport { Can } from \"../../components/Can\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport Select from \"@material-ui/core/Select\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_WALLETS\") {\n    const wallets = action.payload;\n    const newWallets = [];\n\n    wallets.forEach((wallet) => {\n      const walletIndex = state.findIndex((w) => w.id === wallet.id);\n      if (walletIndex !== -1) {\n        state[walletIndex] = wallet;\n      } else {\n        newWallets.push(wallet);\n      }\n    });\n\n    return [...state, ...newWallets];\n  }\n\n  if (action.type === \"UPDATE_WALLET\") {\n    const wallet = action.payload;\n    const walletIndex = state.findIndex((w) => w.id === wallet.id);\n\n    if (walletIndex !== -1) {\n      state[walletIndex] = wallet;\n      return [...state];\n    } else {\n      return [wallet, ...state];\n    }\n  }\n\n  if (action.type === \"DELETE_WALLET\") {\n    const walletId = action.payload;\n    return state.filter((w) => w.id !== walletId);\n  }\n\n  if (action.type === \"RESET\") {\n    return [];\n  }\n};\n\nconst useStyles = makeStyles((theme) => ({\n  mainPaper: {\n    flex: 1,\n    padding: theme.spacing(1),\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles,\n  },\n  tableRow: {\n    \"&:hover\": {\n      backgroundColor: theme.palette.action.hover,\n    },\n  },\n  avatar: {\n    width: theme.spacing(4),\n    height: theme.spacing(4),\n  },\n  filterContainer: {\n    display: \"flex\",\n    gap: theme.spacing(2),\n    marginBottom: theme.spacing(2),\n    alignItems: \"center\",\n  },\n  formControl: {\n    minWidth: 200,\n  },\n  dialogContent: {\n    minWidth: 400,\n  },\n}));\n\nconst Wallets = () => {\n  const classes = useStyles();\n  const history = useHistory();\n  const { user } = useContext(AuthContext);\n\n  const [loading, setLoading] = useState(false);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [searchParam, setSearchParam] = useState(\"\");\n  const [wallets, dispatch] = useReducer(reducer, []);\n  const [selectedUserId, setSelectedUserId] = useState(\"\");\n  const [users, setUsers] = useState([]);\n  const [loadingUsers, setLoadingUsers] = useState(false);\n  const [deletingWallet, setDeletingWallet] = useState(null);\n  const [confirmOpen, setConfirmOpen] = useState(false);\n  const [hasMore, setHasMore] = useState(false);\n  const [editModalOpen, setEditModalOpen] = useState(false);\n  const [editingWallet, setEditingWallet] = useState(null);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [selectedQueue, setSelectedQueue] = useState(null);\n  const [queues, setQueues] = useState([]);\n  const [loadingQueues, setLoadingQueues] = useState(false);\n\n  useEffect(() => {\n    dispatch({ type: \"RESET\" });\n    setPageNumber(1);\n  }, [searchParam, selectedUserId]);\n\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n\n  useEffect(() => {\n    setLoading(true);\n    const delayDebounceFn = setTimeout(() => {\n      const fetchWallets = async () => {\n        try {\n          const { data } = await api.get(\"/contacts/wallets\", {\n            params: {\n              searchParam,\n              pageNumber,\n              userId: selectedUserId || undefined,\n            },\n          });\n          dispatch({ type: \"LOAD_WALLETS\", payload: data.wallets });\n          setHasMore(data.hasMore);\n          setLoading(false);\n        } catch (err) {\n          toastError(err);\n        }\n      };\n\n      fetchWallets();\n    }, 500);\n    return () => clearTimeout(delayDebounceFn);\n  }, [searchParam, pageNumber, selectedUserId]);\n\n  const fetchUsers = async () => {\n    setLoadingUsers(true);\n    try {\n      const { data } = await api.get(\"/users/\");\n      setUsers(data.users);\n    } catch (err) {\n      toastError(err);\n    } finally {\n      setLoadingUsers(false);\n    }\n  };\n\n  const handleSearch = (event) => {\n    setSearchParam(event.target.value);\n  };\n\n  const handleUserChange = (event) => {\n    setSelectedUserId(event.target.value);\n  };\n\n  const handleDeleteWallet = async (walletId) => {\n    try {\n      // Encontra a carteira para obter o contactId\n      const wallet = wallets.find(w => w.id === walletId);\n      if (!wallet) {\n        toast.error(\"Carteira não encontrada\");\n        return;\n      }\n      \n      await api.delete(`/contacts/wallet/${wallet.contactId}`);\n      dispatch({ type: \"DELETE_WALLET\", payload: walletId });\n      toast.success(i18n.t(\"wallets.deleteSuccess\"));\n    } catch (err) {\n      toastError(err);\n    }\n  };\n\n  const handleOpenEditModal = (wallet) => {\n    setEditingWallet(wallet);\n    setSelectedUser({\n      id: wallet.userId,\n      name: wallet.userName,\n    });\n    setSelectedQueue(wallet.queueId);\n    setQueues([{ id: wallet.queueId, name: wallet.queueName }]);\n    setEditModalOpen(true);\n  };\n\n  const handleCloseEditModal = () => {\n    setEditModalOpen(false);\n    setEditingWallet(null);\n    setSelectedUser(null);\n    setSelectedQueue(null);\n    setQueues([]);\n  };\n\n  const handleSaveEdit = async () => {\n    if (!selectedUser || !selectedQueue) {\n      toast.error(i18n.t(\"wallets.selectUserAndQueue\"));\n      return;\n    }\n\n    try {\n      await api.put(`/contacts/wallet/${editingWallet.contactId}`, {\n        wallets: {\n          userId: selectedUser.id,\n          queueId: selectedQueue,\n        },\n      });\n\n      // Atualiza a lista\n      const updatedWallet = {\n        ...editingWallet,\n        userId: selectedUser.id,\n        userName: selectedUser.name,\n        queueId: selectedQueue,\n        queueName: queues.find(q => q.id === selectedQueue)?.name || \"\",\n      };\n      dispatch({ type: \"UPDATE_WALLET\", payload: updatedWallet });\n\n      toast.success(i18n.t(\"wallets.updateSuccess\"));\n      handleCloseEditModal();\n    } catch (err) {\n      toastError(err);\n    }\n  };\n\n  const loadMore = () => {\n    setPageNumber((prevState) => prevState + 1);\n  };\n\n  const handleScroll = (e) => {\n    if (!hasMore || loading) return;\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\n      loadMore();\n    }\n  };\n\n  const formatPhoneNumber = (number) => {\n    if (!number) return \"\";\n    const cleaned = number.replace(/\\D/g, \"\");\n    const match = cleaned.match(/^(\\d{2})(\\d{2})(\\d{5})(\\d{4})$/);\n    if (match) {\n      return `+${match[1]} (${match[2]}) ${match[3]}-${match[4]}`;\n    }\n    return number;\n  };\n\n  return (\n    <MainContainer>\n      <MainHeader>\n        <Title>\n          {/* <AccountBalanceWalletIcon /> */}\n          {i18n.t(\"wallets.title\")}\n        </Title>\n        <MainHeaderButtonsWrapper>\n          <TextField\n            placeholder={i18n.t(\"wallets.searchPlaceholder\")}\n            type=\"search\"\n            value={searchParam}\n            onChange={handleSearch}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <SearchIcon style={{ color: \"gray\" }} />\n                </InputAdornment>\n              ),\n            }}\n            size=\"small\"\n          />\n        </MainHeaderButtonsWrapper>\n      </MainHeader>\n\n      <Paper className={classes.mainPaper} variant=\"outlined\" onScroll={handleScroll}>\n        <div className={classes.filterContainer}>\n          <FormControl className={classes.formControl}>\n            <InputLabel>{i18n.t(\"wallets.filterByUser\")}</InputLabel>\n            <Select\n              value={selectedUserId}\n              onChange={handleUserChange}\n              disabled={loadingUsers}\n            >\n              <MenuItem value=\"\">\n                <em>{i18n.t(\"wallets.allUsers\")}</em>\n              </MenuItem>\n              {users.map((user) => (\n                <MenuItem key={user.id} value={user.id}>\n                  {user.name}\n                </MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n        </div>\n\n        <Table size=\"small\">\n          <TableHead>\n            <TableRow>\n              <TableCell padding=\"checkbox\" />\n              <TableCell>{i18n.t(\"wallets.contact\")}</TableCell>\n              <TableCell>{i18n.t(\"wallets.user\")}</TableCell>\n              <TableCell>{i18n.t(\"wallets.queue\")}</TableCell>\n              <TableCell>{i18n.t(\"wallets.phone\")}</TableCell>\n              <TableCell>{i18n.t(\"wallets.email\")}</TableCell>\n              <TableCell align=\"center\">{i18n.t(\"wallets.actions\")}</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {wallets.map((wallet) => (\n              <TableRow key={wallet.id} className={classes.tableRow}>\n                <TableCell padding=\"checkbox\">\n                  <Avatar className={classes.avatar}>\n                    {wallet.contactName ? wallet.contactName.charAt(0).toUpperCase() : \"?\"}\n                  </Avatar>\n                </TableCell>\n                <TableCell>{wallet.contactName}</TableCell>\n                <TableCell>\n                  <div style={{ display: \"flex\", alignItems: \"center\", gap: 8 }}>\n                    <PersonIcon fontSize=\"small\" />\n                    {wallet.userName}\n                  </div>\n                </TableCell>\n                <TableCell>\n                  <div style={{ display: \"flex\", alignItems: \"center\", gap: 8 }}>\n                    <QueueIcon fontSize=\"small\" />\n                    {wallet.queueName}\n                  </div>\n                </TableCell>\n                <TableCell>{formatPhoneNumber(wallet.contactNumber)}</TableCell>\n                <TableCell>{wallet.contactEmail}</TableCell>\n                <TableCell align=\"center\">\n                  <IconButton\n                    size=\"small\"\n                    onClick={() => handleOpenEditModal(wallet)}\n                  >\n                    <EditIcon />\n                  </IconButton>\n                  <IconButton\n                    size=\"small\"\n                    onClick={() => {\n                      setDeletingWallet(wallet);\n                      setConfirmOpen(true);\n                    }}\n                  >\n                    <DeleteOutlineIcon />\n                  </IconButton>\n                </TableCell>\n              </TableRow>\n            ))}\n            {loading && <TableRowSkeleton avatar columns={7} />}\n          </TableBody>\n        </Table>\n      </Paper>\n\n      {/* Modal de Edição */}\n      <Dialog open={editModalOpen} onClose={handleCloseEditModal} maxWidth=\"sm\" fullWidth>\n        <DialogTitle>{i18n.t(\"wallets.editWallet\")}</DialogTitle>\n        <DialogContent className={classes.dialogContent}>\n          <div style={{ marginBottom: 16 }}>\n            <Autocomplete\n              value={selectedUser}\n              onChange={(e, newValue) => {\n                setSelectedUser(newValue);\n                if (newValue && newValue.queues) {\n                  setQueues(newValue.queues);\n                  if (newValue.queues.length === 1) {\n                    setSelectedQueue(newValue.queues[0].id);\n                  } else {\n                    setSelectedQueue(null);\n                  }\n                } else {\n                  setQueues([]);\n                  setSelectedQueue(null);\n                }\n              }}\n              options={users}\n              getOptionLabel={(option) => option.name}\n              loading={loadingUsers}\n              renderInput={(params) => (\n                <TextField\n                  {...params}\n                  label={i18n.t(\"wallets.selectUser\")}\n                  variant=\"outlined\"\n                  fullWidth\n                  InputProps={{\n                    ...params.InputProps,\n                    endAdornment: (\n                      <>\n                        {loadingUsers ? <CircularProgress color=\"inherit\" size={20} /> : null}\n                        {params.InputProps.endAdornment}\n                      </>\n                    ),\n                  }}\n                />\n              )}\n            />\n          </div>\n          <div>\n            <FormControl fullWidth variant=\"outlined\">\n              <InputLabel>{i18n.t(\"wallets.selectQueue\")}</InputLabel>\n              <Select\n                value={selectedQueue || \"\"}\n                onChange={(e) => setSelectedQueue(e.target.value)}\n                label={i18n.t(\"wallets.selectQueue\")}\n              >\n                {queues.map((queue) => (\n                  <MenuItem key={queue.id} value={queue.id}>\n                    {queue.name}\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n          </div>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleCloseEditModal} color=\"secondary\">\n            {i18n.t(\"wallets.cancel\")}\n          </Button>\n          <Button onClick={handleSaveEdit} color=\"primary\" variant=\"contained\">\n            {i18n.t(\"wallets.save\")}\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* Modal de Confirmação */}\n      <ConfirmationModal\n        title={i18n.t(\"wallets.confirmDeleteTitle\")}\n        open={confirmOpen}\n        onClose={setConfirmOpen}\n        onConfirm={() => {\n          handleDeleteWallet(deletingWallet.id);\n          setConfirmOpen(false);\n        }}\n      >\n        {i18n.t(\"wallets.confirmDeleteMessage\")}\n      </ConfirmationModal>\n    </MainContainer>\n  );\n};\n\nexport default Wallets; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}