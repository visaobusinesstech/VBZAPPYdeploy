{"ast":null,"code":"import React,{useContext,useEffect,useState}from\"react\";import{makeStyles,Modal,Backdrop,Fade,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,Paper,IconButton}from\"@material-ui/core\";import DeleteIcon from\"@material-ui/icons/Delete\";import CloseIcon from\"@material-ui/icons/Close\";import api from\"../../services/api\";import{AuthContext}from\"../../context/Auth/AuthContext\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const useStyles=makeStyles(theme=>({modal:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},paper:{backgroundColor:theme.palette.background.paper,boxShadow:theme.shadows[5],padding:theme.spacing(2,4,3),borderRadius:\"8px\",overflow:\"auto\",maxHeight:\"80vh\"},closeButton:{position:\"absolute\",top:theme.spacing(1),right:theme.spacing(1)}}));const handleRemoveContactTag=async(contactId,tagId)=>{await api.delete(\"/tags-contacts/\".concat(tagId,\"/\").concat(contactId));};const ContactTagListModal=_ref=>{let{open,onClose,tag}=_ref;const classes=useStyles();const[tagList,setTagList]=useState(tag.contacts);const{user,socket}=useContext(AuthContext);useEffect(()=>{console.log(\"tagList\",tagList);},[tagList]);useEffect(()=>{// const socket = socketManager.GetSocket(user.companyId, user.id);\nconst onCompanyTags=data=>{if(data.action===\"update\"||data.action===\"create\"){var _data$tag,_data$tag$contacts,_data$tag2,_data$tag2$contacts;if(data.tag.id===tag.id&&((_data$tag=data.tag)===null||_data$tag===void 0?void 0:(_data$tag$contacts=_data$tag.contacts)===null||_data$tag$contacts===void 0?void 0:_data$tag$contacts.length)>0){setTagList(data.tag.contacts);}if(data.tag.id===tag.id&&((_data$tag2=data.tag)===null||_data$tag2===void 0?void 0:(_data$tag2$contacts=_data$tag2.contacts)===null||_data$tag2$contacts===void 0?void 0:_data$tag2$contacts.length)===0){setTagList([]);onClose();}}};socket.on(\"company\".concat(user.companyId,\"-tag\"),onCompanyTags);return()=>{socket.off(\"company\".concat(user.companyId,\"-tag\"),onCompanyTags);};},[]);// DependÃªncia do estado auxiliar updateFlag\nreturn tagList.length>0?/*#__PURE__*/_jsx(Modal,{className:classes.modal,open:open,onClose:onClose,closeAfterTransition:true,BackdropComponent:Backdrop,BackdropProps:{timeout:500},children:/*#__PURE__*/_jsx(Fade,{in:open,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.paper,children:[/*#__PURE__*/_jsx(IconButton,{className:classes.closeButton,onClick:onClose,children:/*#__PURE__*/_jsx(CloseIcon,{})}),/*#__PURE__*/_jsxs(\"h2\",{id:\"transition-modal-title\",children:[tag.name,\" - Contatos\"]}),/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"ID\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Nome\"}),/*#__PURE__*/_jsx(TableCell,{children:\"N\\xFAmero\"}),/*#__PURE__*/_jsx(TableCell,{children:\"A\\xE7\\xF5es\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:tagList===null||tagList===void 0?void 0:tagList.map(contact=>/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:contact.id}),/*#__PURE__*/_jsx(TableCell,{children:contact.name}),/*#__PURE__*/_jsx(TableCell,{children:contact.number}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(IconButton,{onClick:()=>handleRemoveContactTag(contact.id,tag.id),children:/*#__PURE__*/_jsx(DeleteIcon,{})})})]},contact.id))})]})})]})})}):/*#__PURE__*/_jsx(_Fragment,{});};export default ContactTagListModal;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}