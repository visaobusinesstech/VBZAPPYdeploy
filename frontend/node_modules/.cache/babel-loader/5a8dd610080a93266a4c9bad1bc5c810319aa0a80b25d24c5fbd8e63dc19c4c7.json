{"ast":null,"code":"import _objectSpread from\"/home/deploy/atendechatop/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useContext,useState,useEffect,useRef,useCallback}from\"react\";import{useHistory}from\"react-router-dom\";import{Can}from\"../Can\";import{makeStyles}from\"@material-ui/core/styles\";import{IconButton,Menu,CircularProgress}from\"@material-ui/core\";import{DeviceHubOutlined,History,MoreVert,PictureAsPdf,SwapHorizOutlined,AccountBalanceWallet,FileCopy as FileCopyIcon,FlashOn,Add}from\"@material-ui/icons\";import{v4 as uuidv4}from\"uuid\";import{i18n}from\"../../translate/i18n\";import api from\"../../services/api\";// import TicketOptionsMenu from \"../TicketOptionsMenu\";\nimport ButtonWithSpinner from\"../ButtonWithSpinner\";import toastError from\"../../errors/toastError\";import usePlans from\"../../hooks/usePlans\";import{AuthContext}from\"../../context/Auth/AuthContext\";import{TicketsContext}from\"../../context/Tickets/TicketsContext\";import Tooltip from\"@material-ui/core/Tooltip\";import ConfirmationModal from\"../ConfirmationModal\";import*as Yup from\"yup\";import{Formik,Form}from\"formik\";import Dialog from\"@material-ui/core/Dialog\";import DialogTitle from\"@material-ui/core/DialogTitle\";import DialogActions from\"@material-ui/core/DialogActions\";import Button from\"@material-ui/core/Button\";import TransferTicketModalCustom from\"../TransferTicketModalCustom\";import AcceptTicketWithouSelectQueue from\"../AcceptTicketWithoutQueueModal\";import NewTicketModal from\"../NewTicketModal\";//icones\nimport HighlightOffIcon from\"@material-ui/icons/HighlightOff\";import UndoIcon from\"@material-ui/icons/Undo\";import ScheduleModal from\"../ScheduleModal\";import MenuItem from\"@material-ui/core/MenuItem\";import{Switch}from\"@material-ui/core\";import ShowTicketOpen from\"../ShowTicketOpenModal\";import{toast}from\"react-toastify\";import useCompanySettings from\"../../hooks/useSettings/companySettings\";import ShowTicketLogModal from\"../../components/ShowTicketLogModal\";import TicketMessagesDialog from\"../TicketMessagesDialog\";import{useTheme}from\"@material-ui/styles\";import html2pdf from\"html2pdf.js\";import FinalizacaoVendaModal from\"../FinalizacaoVendaModal\";import QuickMessageModal from\"../QuickMessageModal\";import{Phone}from\"@material-ui/icons\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const useStyles=makeStyles(theme=>({actionButtons:{marginRight:6,maxWidth:\"100%\",flex:\"none\",alignSelf:\"center\",marginLeft:\"auto\",// flexBasis: \"50%\",\ndisplay:\"flex\",\"& > *\":{margin:theme.spacing(1)}},bottomButtonVisibilityIcon:{padding:1,color:theme.mode===\"light\"?theme.palette.primary.main:\"#FFF\"},botoes:{display:\"flex\",padding:\"15px\",justifyContent:\"flex-end\",maxWidth:\"100%\"// alignItems: \"center\"\n}}));const SessionSchema=Yup.object().shape({ratingId:Yup.string().required(\"AvaliaÃ§Ã£o obrigatÃ³ria\")});const TicketActionButtonsCustom=_ref=>{var _ticket$contact3;let{ticket,contact,onQuickMessageSelect// , showSelectMessageCheckbox,\n// selectedMessages,\n// forwardMessageModalOpen,\n// setForwardMessageModalOpen\n}=_ref;const classes=useStyles();const theme=useTheme();const history=useHistory();const isMounted=useRef(true);const[loading,setLoading]=useState(false);const{user}=useContext(AuthContext);const{setCurrentTicket,setTabOpen}=useContext(TicketsContext);const[open,setOpen]=React.useState(false);const formRef=React.useRef(null);const[confirmationOpen,setConfirmationOpen]=useState(false);const[transferTicketModalOpen,setTransferTicketModalOpen]=useState(false);const[newTicketModalOpen,setNewTicketModalOpen]=useState(false);const[scheduleModalOpen,setScheduleModalOpen]=useState(false);const[contactId,setContactId]=useState(null);const[acceptTicketWithouSelectQueueOpen,setAcceptTicketWithouSelectQueueOpen]=useState(false);const[showTicketLogOpen,setShowTicketLogOpen]=useState(false);const[openTicketMessageDialog,setOpenTicketMessageDialog]=useState(false);const[disableBot,setDisableBot]=useState(ticket.contact.disableBot);const[showSchedules,setShowSchedules]=useState(false);const[enableIntegration,setEnableIntegration]=useState(ticket.useIntegration);const[openAlert,setOpenAlert]=useState(false);const[userTicketOpen,setUserTicketOpen]=useState(\"\");const[queueTicketOpen,setQueueTicketOpen]=useState(\"\");const[logTicket,setLogTicket]=useState([]);const[showWavoipCall,setShowWavoipCall]=useState(false);const{get:getSetting}=useCompanySettings();const{getPlanCompany}=usePlans();const[anchorEl,setAnchorEl]=useState(null);const[menuOpen,setMenuOpen]=useState(false);const[showTestButton,setShowTestButton]=useState(false);const[exportedToPDF,setExportedToPDF]=useState(false);const[linkingWallet,setLinkingWallet]=useState(false);const[openFinalizacaoVenda,setOpenFinalizacaoVenda]=useState(false);const[ticketDataToFinalize,setTicketDataToFinalize]=useState(null);const[showFinalizacaoOptions,setShowFinalizacaoOptions]=useState(false);const[finalizacaoTipo,setFinalizacaoTipo]=useState(null);// 'semDespedida' ou 'comDespedida'\nconst[directTicketsToWallets,setDirectTicketsToWallets]=useState(false);// Estados para copiar telefone e respostas rÃ¡pidas\nconst[quickMessageModalOpen,setQuickMessageModalOpen]=useState(false);console.log(\"DEBUG user:\",user);console.log(\"DEBUG user.finalizacaoComValorVendaAtiva:\",user===null||user===void 0?void 0:user.finalizacaoComValorVendaAtiva);useEffect(()=>{fetchData();checkWhatsAppTriggerIntegration();fetchDirectTicketsToWalletsSetting();// Cleanup function to set isMounted to false when the component unmounts\nreturn()=>{isMounted.current=false;};},[]);useEffect(()=>{console.log(\"DEBUG openFinalizacaoVenda:\",openFinalizacaoVenda);},[openFinalizacaoVenda]);useEffect(()=>{console.log(\"DEBUG open (modal avaliaÃ§Ã£o):\",open);},[open]);const fetchData=async()=>{const companyId=user.companyId;const planConfigs=await getPlanCompany(undefined,companyId);console.log(\"DEBUG planConfigs:\",planConfigs);if(isMounted.current){setShowSchedules(planConfigs.plan.useSchedules);setShowWavoipCall(planConfigs.plan.wavoip);setOpenTicketMessageDialog(false);setDisableBot(ticket.contact.disableBot);setShowTicketLogOpen(false);}};const checkWhatsAppTriggerIntegration=async()=>{try{const{data}=await api.get(\"/whatsapp/\".concat(ticket.whatsappId));if(isMounted.current){setShowTestButton(data.triggerIntegrationOnClose===true);}}catch(err){console.error(err);if(isMounted.current){setShowTestButton(false);}}};const fetchDirectTicketsToWalletsSetting=async()=>{try{const setting=await getSetting({column:\"DirectTicketsToWallets\"});if(isMounted.current){setDirectTicketsToWallets(setting.DirectTicketsToWallets);}}catch(err){console.error(err);if(isMounted.current){setDirectTicketsToWallets(false);}}};// FunÃ§Ã£o para copiar telefone\nconst handleCopyPhone=async()=>{try{if(!(contact!==null&&contact!==void 0&&contact.number)){toast.error(i18n.t(\"ticketInfo.noPhone\"));return;}// Remove todos os caracteres nÃ£o numÃ©ricos e copia o nÃºmero puro\nconst phoneNumber=contact.number.replace(/\\D/g,'');// Verifica se tem pelo menos 8 dÃ­gitos (nÃºmero mÃ­nimo vÃ¡lido)\nif(phoneNumber.length>=8){await navigator.clipboard.writeText(phoneNumber);toast.success(i18n.t(\"ticketInfo.phonecopied\"));}else{toast.error(i18n.t(\"ticketInfo.invalidPhoneFormat\"));}}catch(err){console.error('Erro ao copiar telefone:',err);toast.error(i18n.t(\"ticketInfo.copyError\"));}};// FunÃ§Ãµes para respostas rÃ¡pidas\nconst handleOpenQuickMessageModal=()=>{setQuickMessageModalOpen(true);};const handleCloseQuickMessageModal=()=>{setQuickMessageModalOpen(false);};const handleQuickMessageSelect=useCallback(selectedMessage=>{console.log(\"ðŸŽ¯ Resposta rÃ¡pida selecionada:\",selectedMessage);handleCloseQuickMessageModal();if(selectedMessage.mediaPath){const event=new CustomEvent('insertQuickMessage',{detail:{quickMessage:{id:selectedMessage.id,message:selectedMessage.message||\"\",shortcode:selectedMessage.shortcode||\"\",mediaPath:selectedMessage.mediaPath,mediaType:selectedMessage.mediaType,value:selectedMessage.message||\"\"}},bubbles:false});window.dispatchEvent(event);}else{// Para texto, tambÃ©m usar evento\nconst event=new CustomEvent('insertQuickMessage',{detail:{quickMessage:{id:selectedMessage.id,message:selectedMessage.message||\"\",shortcode:selectedMessage.shortcode||\"\",mediaPath:null,mediaType:null,value:selectedMessage.message||\"\"}},bubbles:false});window.dispatchEvent(event);}},[]);const handleClickOpen=async e=>{const setting=await getSetting({column:\"requiredTag\"});if((setting===null||setting===void 0?void 0:setting.requiredTag)===\"enabled\"){//verificar se tem uma tag\ntry{const contactTags=await api.get(\"/contactTags/\".concat(ticket.contact.id));if(!contactTags.data.tags){toast.warning(i18n.t(\"messagesList.header.buttons.requiredTag\"));}else{setOpen(true);// handleUpdateTicketStatus(e, \"closed\", user?.id);\n}}catch(err){toastError(err);}}else{setOpen(true);// handleUpdateTicketStatus(e, \"closed\", user?.id);\n}};const handleClose=()=>{formRef.current.resetForm();setOpen(false);};const handleCloseAlert=()=>{setOpenAlert(false);setLoading(false);};const handleOpenAcceptTicketWithouSelectQueue=async()=>{setAcceptTicketWithouSelectQueueOpen(true);};const handleMenu=event=>{setAnchorEl(event.currentTarget);setMenuOpen(true);};const handleCloseMenu=()=>{setAnchorEl(null);setMenuOpen(false);};const handleOpenTransferModal=e=>{setTransferTicketModalOpen(true);if(typeof handleClose==\"function\")handleClose();};const handleOpenConfirmationModal=e=>{setConfirmationOpen(true);if(typeof handleClose==\"function\")handleClose();};const handleCloseTicketWithoutFarewellMsg=async()=>{setLoading(true);try{await api.put(\"/tickets/\".concat(ticket.id),{status:\"closed\",userId:(user===null||user===void 0?void 0:user.id)||null,sendFarewellMessage:false,amountUsedBotQueues:0});setLoading(false);history.push(\"/tickets\");}catch(err){setLoading(false);toastError(err);}};const handleExportPDF=async()=>{setOpenTicketMessageDialog(true);handleCloseMenu();};const handleEnableIntegration=async()=>{setLoading(true);try{await api.put(\"/tickets/\".concat(ticket.id),{useIntegration:!enableIntegration});setEnableIntegration(!enableIntegration);setLoading(false);}catch(err){setLoading(false);toastError(err);}};const handleShowLogTicket=async()=>{setShowTicketLogOpen(true);};const handleContactToggleDisableBot=async()=>{const{id}=ticket.contact;try{const{data}=await api.put(\"/contacts/toggleDisableBot/\".concat(id));ticket.contact.disableBot=data.disableBot;setDisableBot(data.disableBot);}catch(err){toastError(err);}};const handleCloseTransferTicketModal=()=>{setTransferTicketModalOpen(false);};const handleOpenNewTicketModal=()=>{setNewTicketModalOpen(true);};const handleCloseNewTicketModal=newTicket=>{setNewTicketModalOpen(false);if(newTicket){// Se um novo ticket foi criado, redirecionar para ele\nsetCurrentTicket({id:newTicket.id,uuid:newTicket.uuid,code:uuidv4()});history.push(\"/tickets/\".concat(newTicket.uuid));}};const handleDeleteTicket=async()=>{try{await api.delete(\"/tickets/\".concat(ticket.id));history.push(\"/tickets\");}catch(err){toastError(err);}};const handleSendMessage=async id=>{let setting;try{setting=await getSetting({column:\"greetingAcceptedMessage\"});}catch(err){toastError(err);}if(!setting.greetingAcceptedMessage){toast.warning(i18n.t(\"messagesList.header.buttons.greetingAcceptedMessage\"));return;}const msg=\"\".concat(setting.greetingAcceptedMessage);//`{{ms}} *{{name}}*, ${i18n.t(\"mainDrawer.appBar.user.myName\")} *${user?.name}* ${i18n.t(\"mainDrawer.appBar.user.continuity\")}.`;\nconst message={read:1,fromMe:true,mediaUrl:\"\",body:\"\".concat(msg.trim())};try{await api.post(\"/messages/\".concat(id),message);}catch(err){toastError(err);}};const handleUpdateTicketStatus=async(e,status,userId)=>{setLoading(true);try{var _setting,_ticket$whatsapp;await api.put(\"/tickets/\".concat(ticket.id),{status:status,userId:userId||null});let setting;try{setting=await getSetting({column:\"sendGreetingAccepted\"});}catch(err){toastError(err);}if(((_setting=setting)===null||_setting===void 0?void 0:_setting.sendGreetingAccepted)===\"enabled\"&&(!ticket.isGroup||((_ticket$whatsapp=ticket.whatsapp)===null||_ticket$whatsapp===void 0?void 0:_ticket$whatsapp.groupAsTicket)===\"enabled\")&&ticket.status===\"pending\"){handleSendMessage(ticket.id);}if(isMounted.current){setLoading(false);}if(status===\"open\"||status===\"group\"){setCurrentTicket(_objectSpread(_objectSpread({},ticket),{},{code:\"#\"+status}));setTimeout(()=>{history.push(\"/tickets\");},0);setTimeout(()=>{history.push(\"/tickets/\".concat(ticket.uuid));setTabOpen(status);},10);}else{setCurrentTicket({id:null,code:null});history.push(\"/tickets\");}}catch(err){if(isMounted.current){setLoading(false);}toastError(err);}};const handleAcepptTicket=async id=>{setLoading(true);try{const otherTicket=await api.put(\"/tickets/\".concat(id),{status:ticket.isGroup?\"group\":\"open\",userId:user===null||user===void 0?void 0:user.id});if(otherTicket.data.id!==ticket.id){if(otherTicket.data.userId!==(user===null||user===void 0?void 0:user.id)){if(isMounted.current){setOpenAlert(true);setUserTicketOpen(otherTicket.data.user.name);setQueueTicketOpen(otherTicket.data.queue.name);setTabOpen(otherTicket.isGroup?\"group\":\"open\");}}else{if(isMounted.current){setLoading(false);setTabOpen(otherTicket.isGroup?\"group\":\"open\");}history.push(\"/tickets/\".concat(otherTicket.data.uuid));}}else{if(isMounted.current){setLoading(false);}history.push(\"/tickets\");setTimeout(()=>{history.push(\"/tickets/\".concat(ticket.uuid));setTabOpen(ticket.isGroup?\"group\":\"open\");},1000);}}catch(err){if(isMounted.current){setLoading(false);}toastError(err);}};//Wavoip historic\nconst saveHistoricalLink=async payload=>{console.log('payload request historical',JSON.stringify(payload));const callHistorical=await api.post(\"/call/historical/wavoip\",payload);};//Wavoip conect\nconst handleOpenWavoipCall=async()=>{var _ticket$whatsapp2,_ticket$contact;if(!(ticket!==null&&ticket!==void 0&&(_ticket$whatsapp2=ticket.whatsapp)!==null&&_ticket$whatsapp2!==void 0&&_ticket$whatsapp2.wavoip)||!(ticket!==null&&ticket!==void 0&&(_ticket$contact=ticket.contact)!==null&&_ticket$contact!==void 0&&_ticket$contact.number)){toastError(\"Erro: Token ou nÃºmero de telefone nÃ£o disponÃ­vel.\");return;}const token=ticket.whatsapp.wavoip;const phone=ticket.contact.number.replace(/\\D/g,\"\");const name=ticket.contact.name;const url=\"https://app.wavoip.com/call?token=\".concat(token,\"&phone=\").concat(phone,\"&name=\").concat(name,\"&start_if_ready=true&close_after_call=true\");try{var _ticket$user,_ticket$whatsapp3,_ticket$contact2,_ticket$company;await saveHistoricalLink({\"user_id\":(ticket===null||ticket===void 0?void 0:(_ticket$user=ticket.user)===null||_ticket$user===void 0?void 0:_ticket$user.id)||null,\"token_wavoip\":token,\"whatsapp_id\":(ticket===null||ticket===void 0?void 0:(_ticket$whatsapp3=ticket.whatsapp)===null||_ticket$whatsapp3===void 0?void 0:_ticket$whatsapp3.id)||null,\"contact_id\":(ticket===null||ticket===void 0?void 0:(_ticket$contact2=ticket.contact)===null||_ticket$contact2===void 0?void 0:_ticket$contact2.id)||null,\"company_id\":(ticket===null||ticket===void 0?void 0:(_ticket$company=ticket.company)===null||_ticket$company===void 0?void 0:_ticket$company.id)||null,\"phone_to\":phone,\"name\":name,\"url\":url,\"createdAt\":new Date()});}catch(e){console.log('erro ao tentar salvar historico',e);}window.open(url,\"wavoip\",\"toolbar=no,scrollbars=no,resizable=no,top=500,left=500,width=500,height=700\");};const handleExportToPDF=()=>{const messagesListElement=document.getElementById(\"messagesList\");const headerElement=document.getElementById(\"TicketHeader\");const pdfOptions={margin:1,filename:\"\".concat(i18n.t(\"whatsappModalRel.form.reportFilename\")).concat(ticket.id,\".pdf\"),image:{type:\"jpeg\",quality:0.98},html2canvas:{scale:2},jsPDF:{unit:\"mm\",format:\"a4\",orientation:\"portrait\"}};if(messagesListElement&&headerElement){const headerClone=headerElement.cloneNode(true);const messagesListClone=messagesListElement.cloneNode(true);const containerElement=document.createElement(\"div\");containerElement.appendChild(headerClone);containerElement.appendChild(messagesListClone);return html2pdf().from(containerElement).set(pdfOptions).output(\"blob\");}else{toast.error(i18n.t(\"whatsappModalRel.form.elementNotFoundForExport\"));return null;}};const handleTestButton=async()=>{try{var _ticket$whatsapp4,_ticket$queue;if(ticket!==null&&ticket!==void 0&&(_ticket$whatsapp4=ticket.whatsapp)!==null&&_ticket$whatsapp4!==void 0&&_ticket$whatsapp4.integrationTypeId){const{data:integration}=await api.get(\"/queueIntegration/\".concat(ticket.whatsapp.integrationTypeId));if(integration){var _ticket$lastMessage;await api.post(\"/queueIntegration/testsession\",{integrationId:ticket.whatsapp.integrationTypeId,ticketId:ticket.id,contactId:ticket.contactId,body:((_ticket$lastMessage=ticket.lastMessage)===null||_ticket$lastMessage===void 0?void 0:_ticket$lastMessage.body)||\"\",status:\"closed\"});if(isMounted.current){toast.success(i18n.t(\"ticketList.success.integrationTriggered\"));}}}await handleUpdateTicketStatus(null,\"closed\",user===null||user===void 0?void 0:user.id,ticket===null||ticket===void 0?void 0:(_ticket$queue=ticket.queue)===null||_ticket$queue===void 0?void 0:_ticket$queue.id);if(isMounted.current){handleClose();}}catch(err){toastError(err);}};const handleLinkToWallet=async()=>{if(!ticket.contactId){toast.error(i18n.t(\"contactModal.saveFirst\"));return;}setLinkingWallet(true);try{if(!user.queues||user.queues.length===0){toast.error(i18n.t(\"contactModal.walletError\"));return;}// Usa a primeira fila do usuÃ¡rio\nconst userQueue=user.queues[0];await api.put(\"/contacts/wallet/\".concat(ticket.contactId),{wallets:{userId:user.id,queueId:ticket.queueId||userQueue.id}});toast.success(i18n.t(\"contactModal.walletLinked\"));}catch(err){toastError(err);}finally{setLinkingWallet(false);}};const handleFinalizarTicket=async tipo=>{if(user.finalizacaoComValorVendaAtiva===true||user.finalizacaoComValorVendaAtiva===\"true\"){setFinalizacaoTipo(tipo);setOpenFinalizacaoVenda(true);}else{if(tipo===\"semDespedida\"){handleCloseTicketWithoutFarewellMsg();}else{var _ticket$queue2;handleUpdateTicketStatus(null,\"closed\",user===null||user===void 0?void 0:user.id,ticket===null||ticket===void 0?void 0:(_ticket$queue2=ticket.queue)===null||_ticket$queue2===void 0?void 0:_ticket$queue2.id);}}};const handleClickResolver=()=>{console.log(\"DEBUG handleClickResolver chamado\");if(user.finalizacaoComValorVendaAtiva===true||user.finalizacaoComValorVendaAtiva===\"true\"){setFinalizacaoTipo(\"comDespedida\");setOpenFinalizacaoVenda(true);}else{setOpen(true);}};const handleUpdateTicketStatusWithData=async(ticketData,sendFarewellMessage,finalizacaoMessage)=>{try{await api.put(\"/tickets/\".concat(ticket.id),_objectSpread(_objectSpread({},ticketData),{},{sendFarewellMessage,finalizacaoMessage}));toast.success(\"Ticket finalizado com sucesso!\");// Atualize o estado conforme necessÃ¡rio\n}catch(err){toastError(err);}};// Tooltip dinÃ¢mico para copiar telefone\nconst getCopyPhoneTooltip=()=>{const usePrefixWhenCopy=localStorage.getItem('usePrefixWhenCopy')==='true';const prefix=localStorage.getItem('contactCopyPrefix')||'';let copyTooltip=i18n.t(\"ticketInfo.copyPhone\");if(usePrefixWhenCopy&&prefix){copyTooltip=\"Copiar telefone com prefixo (\".concat(prefix,\")\");}return copyTooltip;};return/*#__PURE__*/_jsxs(_Fragment,{children:[openAlert&&/*#__PURE__*/_jsx(ShowTicketOpen,{isOpen:openAlert,handleClose:handleCloseAlert,user:userTicketOpen,queue:queueTicketOpen}),acceptTicketWithouSelectQueueOpen&&/*#__PURE__*/_jsx(AcceptTicketWithouSelectQueue,{modalOpen:acceptTicketWithouSelectQueueOpen,onClose:e=>setAcceptTicketWithouSelectQueueOpen(false),ticketId:ticket.id,ticket:ticket}),showTicketLogOpen&&/*#__PURE__*/_jsx(ShowTicketLogModal,{isOpen:showTicketLogOpen,handleClose:e=>setShowTicketLogOpen(false),ticketId:ticket.id}),openTicketMessageDialog&&/*#__PURE__*/_jsx(TicketMessagesDialog,{open:openTicketMessageDialog,handleClose:()=>setOpenTicketMessageDialog(false),ticketId:ticket.id}),quickMessageModalOpen&&/*#__PURE__*/_jsx(QuickMessageModal,{open:quickMessageModalOpen,onClose:handleCloseQuickMessageModal,onSelect:handleQuickMessageSelect,companyId:user===null||user===void 0?void 0:user.companyId,userId:user===null||user===void 0?void 0:user.id}),newTicketModalOpen&&/*#__PURE__*/_jsx(NewTicketModal,{modalOpen:newTicketModalOpen,onClose:handleCloseNewTicketModal,initialContact:contact}),/*#__PURE__*/_jsxs(\"div\",{className:classes.actionButtons,children:[showWavoipCall&&/*#__PURE__*/_jsx(IconButton,{color:\"secondary\",onClick:handleOpenWavoipCall,children:/*#__PURE__*/_jsx(Phone,{})}),ticket.status===\"closed\"&&/*#__PURE__*/_jsx(ButtonWithSpinner,{loading:loading,startIcon:/*#__PURE__*/_jsx(Add,{}),size:\"small\",onClick:handleOpenNewTicketModal,children:\"Criar Novo Ticket\"}),(ticket.status===\"open\"||ticket.status===\"group\")&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(IconButton,{className:classes.bottomButtonVisibilityIcon,onClick:handleCopyPhone,disabled:!(contact!==null&&contact!==void 0&&contact.number),children:/*#__PURE__*/_jsx(Tooltip,{title:getCopyPhoneTooltip(),children:/*#__PURE__*/_jsx(FileCopyIcon,{})})}),/*#__PURE__*/_jsx(IconButton,{className:classes.bottomButtonVisibilityIcon,onClick:handleOpenQuickMessageModal,children:/*#__PURE__*/_jsx(Tooltip,{title:i18n.t(\"ticketInfo.quickMessages\"),children:/*#__PURE__*/_jsx(FlashOn,{})})}),/*#__PURE__*/_jsx(IconButton,{className:classes.bottomButtonVisibilityIcon,children:/*#__PURE__*/_jsx(Tooltip,{title:i18n.t(\"messagesList.header.buttons.resolve\"),children:/*#__PURE__*/_jsx(HighlightOffIcon,{onClick:handleClickResolver})})}),/*#__PURE__*/_jsx(IconButton,{className:classes.bottomButtonVisibilityIcon,children:/*#__PURE__*/_jsx(Tooltip,{title:i18n.t(\"tickets.buttons.returnQueue\"),children:/*#__PURE__*/_jsx(UndoIcon// color=\"primary\"\n,{onClick:e=>handleUpdateTicketStatus(e,\"pending\",null)})})}),/*#__PURE__*/_jsx(IconButton,{className:classes.bottomButtonVisibilityIcon,children:/*#__PURE__*/_jsx(Tooltip,{title:\"Transferir Ticket\",children:/*#__PURE__*/_jsx(SwapHorizOutlined// color=\"primary\"\n,{onClick:handleOpenTransferModal})})}),directTicketsToWallets&&!((_ticket$contact3=ticket.contact)!==null&&_ticket$contact3!==void 0&&_ticket$contact3.contactWallets&&ticket.contact.contactWallets.length>0)&&/*#__PURE__*/_jsx(IconButton,{className:classes.bottomButtonVisibilityIcon,onClick:handleLinkToWallet,disabled:linkingWallet,children:/*#__PURE__*/_jsx(Tooltip,{title:\"Vincular \\xE0 minha carteira\",children:linkingWallet?/*#__PURE__*/_jsx(CircularProgress,{size:20}):/*#__PURE__*/_jsx(AccountBalanceWallet,{})})})]}),/*#__PURE__*/_jsx(MenuItem,{className:classes.bottomButtonVisibilityIcon,children:/*#__PURE__*/_jsx(Tooltip,{title:i18n.t(\"contactModal.form.chatBotContact\"),children:/*#__PURE__*/_jsx(Switch,{size:\"small\"// color=\"primary\"\n,checked:disableBot,onChange:()=>handleContactToggleDisableBot()})})}),confirmationOpen&&/*#__PURE__*/_jsx(ConfirmationModal,{title:\"\".concat(i18n.t(\"ticketOptionsMenu.confirmationModal.title\"),\" #\").concat(ticket.id,\"?\"),open:confirmationOpen,onClose:setConfirmationOpen,onConfirm:handleDeleteTicket,children:i18n.t(\"ticketOptionsMenu.confirmationModal.message\")}),transferTicketModalOpen&&/*#__PURE__*/_jsx(TransferTicketModalCustom,{modalOpen:transferTicketModalOpen,onClose:handleCloseTransferTicketModal,ticketid:ticket.id,ticket:ticket})]}),ticket.status===\"pending\"&&(ticket.queueId===null||ticket.queueId===undefined)&&/*#__PURE__*/_jsx(ButtonWithSpinner,{loading:loading,size:\"small\",variant:\"contained\",onClick:e=>handleOpenAcceptTicketWithouSelectQueue(),children:i18n.t(\"messagesList.header.buttons.accept\")}),ticket.status===\"pending\"&&ticket.queueId!==null&&/*#__PURE__*/_jsx(ButtonWithSpinner,{loading:loading,size:\"small\",variant:\"contained\"// color=\"primary\"\n,onClick:e=>handleUpdateTicketStatus(e,\"open\",user===null||user===void 0?void 0:user.id),children:i18n.t(\"messagesList.header.buttons.accept\")}),/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"account of current user\",\"aria-controls\":\"menu-appbar\",\"aria-haspopup\":\"true\",onClick:handleMenu,color:\"inherit\",style:{paddingHorizontal:3,paddingTop:10},children:/*#__PURE__*/_jsx(MoreVert,{style:{fontSize:16,padding:0}})}),/*#__PURE__*/_jsxs(Menu,{id:\"menu-appbar\",anchorEl:anchorEl,getContentAnchorEl:null,anchorOrigin:{vertical:\"bottom\",horizontal:\"right\"},keepMounted:true,transformOrigin:{vertical:\"top\",horizontal:\"right\"},open:menuOpen,onClose:handleCloseMenu,children:[/*#__PURE__*/_jsx(MenuItem,{onClick:handleOpenConfirmationModal,children:/*#__PURE__*/_jsx(Can,{role:user.profile,perform:\"ticket-options:deleteTicket\",yes:()=>i18n.t(\"tickets.buttons.deleteTicket\")})}),/*#__PURE__*/_jsx(MenuItem,{onClick:handleEnableIntegration,children:enableIntegration===true?i18n.t(\"messagesList.header.buttons.disableIntegration\"):i18n.t(\"messagesList.header.buttons.enableIntegration\")}),/*#__PURE__*/_jsx(MenuItem,{onClick:handleShowLogTicket,children:i18n.t(\"messagesList.header.buttons.logTicket\")}),/*#__PURE__*/_jsx(MenuItem,{onClick:handleExportPDF,children:i18n.t(\"ticketsList.buttons.exportAsPDF\")})]})]}),/*#__PURE__*/_jsx(_Fragment,{children:(!user.finalizacaoComValorVendaAtiva||user.finalizacaoComValorVendaAtiva===false||user.finalizacaoComValorVendaAtiva===\"false\")&&/*#__PURE__*/_jsx(Formik,{enableReinitialize:true,validationSchema:SessionSchema,innerRef:formRef,onSubmit:(values,actions)=>{setTimeout(()=>{actions.setSubmitting(false);actions.resetForm();},400);},children:_ref2=>{let{values,touched,errors,isSubmitting,setFieldValue,resetForm}=_ref2;return/*#__PURE__*/_jsx(Dialog,{open:open,onClose:handleClose,\"aria-labelledby\":\"alert-dialog-title\",\"aria-describedby\":\"alert-dialog-description\",children:/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsxs(DialogActions,{className:classes.botoes,children:[/*#__PURE__*/_jsx(Button,{onClick:()=>handleFinalizarTicket(\"semDespedida\"),style:{background:theme.palette.primary.main,color:\"white\"},children:i18n.t(\"messagesList.header.dialogRatingWithoutFarewellMsg\")}),/*#__PURE__*/_jsx(Button,{onClick:()=>handleFinalizarTicket(\"comDespedida\"),style:{background:theme.palette.primary.main,color:\"white\"},children:i18n.t(\"messagesList.header.dialogRatingCancel\")}),showTestButton&&/*#__PURE__*/_jsx(Button,{onClick:handleTestButton,style:{background:theme.palette.primary.main,color:\"white\"},children:i18n.t(\"whatsappModalRel.form.resolveAndTriggerIntegration\")})]})})});}})}),openFinalizacaoVenda&&(console.log(\"DEBUG JSX: Renderizando FinalizacaoVendaModal\"),/*#__PURE__*/_jsx(FinalizacaoVendaModal,{open:openFinalizacaoVenda,onClose:()=>setOpenFinalizacaoVenda(false),ticket:ticket,onFinalizar:ticketData=>{setOpenFinalizacaoVenda(false);setTicketDataToFinalize(ticketData);setShowFinalizacaoOptions(true);}})),showFinalizacaoOptions&&/*#__PURE__*/_jsxs(Dialog,{open:showFinalizacaoOptions,onClose:()=>setShowFinalizacaoOptions(false),\"aria-labelledby\":\"finalizacao-options-title\",children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"finalizacao-options-title\",children:\"Como deseja finalizar?\"}),/*#__PURE__*/_jsxs(DialogActions,{className:classes.botoes,children:[/*#__PURE__*/_jsx(Button,{onClick:async()=>{setShowFinalizacaoOptions(false);await handleUpdateTicketStatusWithData(ticketDataToFinalize,false,null);},style:{background:theme.palette.primary.main,color:\"white\"},children:i18n.t(\"messagesList.header.dialogRatingWithoutFarewellMsg\")}),/*#__PURE__*/_jsx(Button,{onClick:async()=>{setShowFinalizacaoOptions(false);await handleUpdateTicketStatusWithData(ticketDataToFinalize,true,null);},style:{background:theme.palette.primary.main,color:\"white\"},children:i18n.t(\"messagesList.header.dialogRatingCancel\")})]})]})]});};export default TicketActionButtonsCustom;","map":{"version":3,"names":["React","useContext","useState","useEffect","useRef","useCallback","useHistory","Can","makeStyles","IconButton","Menu","CircularProgress","DeviceHubOutlined","History","MoreVert","PictureAsPdf","SwapHorizOutlined","AccountBalanceWallet","FileCopy","FileCopyIcon","FlashOn","Add","v4","uuidv4","i18n","api","ButtonWithSpinner","toastError","usePlans","AuthContext","TicketsContext","Tooltip","ConfirmationModal","Yup","Formik","Form","Dialog","DialogTitle","DialogActions","Button","TransferTicketModalCustom","AcceptTicketWithouSelectQueue","NewTicketModal","HighlightOffIcon","UndoIcon","ScheduleModal","MenuItem","Switch","ShowTicketOpen","toast","useCompanySettings","ShowTicketLogModal","TicketMessagesDialog","useTheme","html2pdf","FinalizacaoVendaModal","QuickMessageModal","Phone","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","useStyles","theme","actionButtons","marginRight","maxWidth","flex","alignSelf","marginLeft","display","margin","spacing","bottomButtonVisibilityIcon","padding","color","mode","palette","primary","main","botoes","justifyContent","SessionSchema","object","shape","ratingId","string","required","TicketActionButtonsCustom","_ref","_ticket$contact3","ticket","contact","onQuickMessageSelect","classes","history","isMounted","loading","setLoading","user","setCurrentTicket","setTabOpen","open","setOpen","formRef","confirmationOpen","setConfirmationOpen","transferTicketModalOpen","setTransferTicketModalOpen","newTicketModalOpen","setNewTicketModalOpen","scheduleModalOpen","setScheduleModalOpen","contactId","setContactId","acceptTicketWithouSelectQueueOpen","setAcceptTicketWithouSelectQueueOpen","showTicketLogOpen","setShowTicketLogOpen","openTicketMessageDialog","setOpenTicketMessageDialog","disableBot","setDisableBot","showSchedules","setShowSchedules","enableIntegration","setEnableIntegration","useIntegration","openAlert","setOpenAlert","userTicketOpen","setUserTicketOpen","queueTicketOpen","setQueueTicketOpen","logTicket","setLogTicket","showWavoipCall","setShowWavoipCall","get","getSetting","getPlanCompany","anchorEl","setAnchorEl","menuOpen","setMenuOpen","showTestButton","setShowTestButton","exportedToPDF","setExportedToPDF","linkingWallet","setLinkingWallet","openFinalizacaoVenda","setOpenFinalizacaoVenda","ticketDataToFinalize","setTicketDataToFinalize","showFinalizacaoOptions","setShowFinalizacaoOptions","finalizacaoTipo","setFinalizacaoTipo","directTicketsToWallets","setDirectTicketsToWallets","quickMessageModalOpen","setQuickMessageModalOpen","console","log","finalizacaoComValorVendaAtiva","fetchData","checkWhatsAppTriggerIntegration","fetchDirectTicketsToWalletsSetting","current","companyId","planConfigs","undefined","plan","useSchedules","wavoip","data","concat","whatsappId","triggerIntegrationOnClose","err","error","setting","column","DirectTicketsToWallets","handleCopyPhone","number","t","phoneNumber","replace","length","navigator","clipboard","writeText","success","handleOpenQuickMessageModal","handleCloseQuickMessageModal","handleQuickMessageSelect","selectedMessage","mediaPath","event","CustomEvent","detail","quickMessage","id","message","shortcode","mediaType","value","bubbles","window","dispatchEvent","handleClickOpen","e","requiredTag","contactTags","tags","warning","handleClose","resetForm","handleCloseAlert","handleOpenAcceptTicketWithouSelectQueue","handleMenu","currentTarget","handleCloseMenu","handleOpenTransferModal","handleOpenConfirmationModal","handleCloseTicketWithoutFarewellMsg","put","status","userId","sendFarewellMessage","amountUsedBotQueues","push","handleExportPDF","handleEnableIntegration","handleShowLogTicket","handleContactToggleDisableBot","handleCloseTransferTicketModal","handleOpenNewTicketModal","handleCloseNewTicketModal","newTicket","uuid","code","handleDeleteTicket","delete","handleSendMessage","greetingAcceptedMessage","msg","read","fromMe","mediaUrl","body","trim","post","handleUpdateTicketStatus","_setting","_ticket$whatsapp","sendGreetingAccepted","isGroup","whatsapp","groupAsTicket","_objectSpread","setTimeout","handleAcepptTicket","otherTicket","name","queue","saveHistoricalLink","payload","JSON","stringify","callHistorical","handleOpenWavoipCall","_ticket$whatsapp2","_ticket$contact","token","phone","url","_ticket$user","_ticket$whatsapp3","_ticket$contact2","_ticket$company","company","Date","handleExportToPDF","messagesListElement","document","getElementById","headerElement","pdfOptions","filename","image","type","quality","html2canvas","scale","jsPDF","unit","format","orientation","headerClone","cloneNode","messagesListClone","containerElement","createElement","appendChild","from","set","output","handleTestButton","_ticket$whatsapp4","_ticket$queue","integrationTypeId","integration","_ticket$lastMessage","integrationId","ticketId","lastMessage","handleLinkToWallet","queues","userQueue","wallets","queueId","handleFinalizarTicket","tipo","_ticket$queue2","handleClickResolver","handleUpdateTicketStatusWithData","ticketData","finalizacaoMessage","getCopyPhoneTooltip","usePrefixWhenCopy","localStorage","getItem","prefix","copyTooltip","children","isOpen","modalOpen","onClose","onSelect","initialContact","className","onClick","startIcon","size","disabled","title","contactWallets","checked","onChange","onConfirm","ticketid","variant","style","paddingHorizontal","paddingTop","fontSize","getContentAnchorEl","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","role","profile","perform","yes","enableReinitialize","validationSchema","innerRef","onSubmit","values","actions","setSubmitting","_ref2","touched","errors","isSubmitting","setFieldValue","background","onFinalizar"],"sources":["/home/deploy/atendechatop/frontend/src/components/TicketActionButtonsCustom/index.js"],"sourcesContent":["import React, { useContext, useState, useEffect, useRef, useCallback } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nimport { Can } from \"../Can\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { IconButton, Menu, CircularProgress } from \"@material-ui/core\";\nimport {\n  DeviceHubOutlined,\n  History,\n  MoreVert,\n  PictureAsPdf,\n  SwapHorizOutlined,\n  AccountBalanceWallet,\n  FileCopy as FileCopyIcon,\n  FlashOn,\n  Add,\n} from \"@material-ui/icons\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nimport { i18n } from \"../../translate/i18n\";\nimport api from \"../../services/api\";\n// import TicketOptionsMenu from \"../TicketOptionsMenu\";\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\nimport toastError from \"../../errors/toastError\";\nimport usePlans from \"../../hooks/usePlans\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\nimport { TicketsContext } from \"../../context/Tickets/TicketsContext\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport ConfirmationModal from \"../ConfirmationModal\";\nimport * as Yup from \"yup\";\nimport { Formik, Form } from \"formik\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\n\nimport Button from \"@material-ui/core/Button\";\nimport TransferTicketModalCustom from \"../TransferTicketModalCustom\";\nimport AcceptTicketWithouSelectQueue from \"../AcceptTicketWithoutQueueModal\";\nimport NewTicketModal from \"../NewTicketModal\";\n\n//icones\nimport HighlightOffIcon from \"@material-ui/icons/HighlightOff\";\nimport UndoIcon from \"@material-ui/icons/Undo\";\n\nimport ScheduleModal from \"../ScheduleModal\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport { Switch } from \"@material-ui/core\";\nimport ShowTicketOpen from \"../ShowTicketOpenModal\";\nimport { toast } from \"react-toastify\";\nimport useCompanySettings from \"../../hooks/useSettings/companySettings\";\nimport ShowTicketLogModal from \"../../components/ShowTicketLogModal\";\nimport TicketMessagesDialog from \"../TicketMessagesDialog\";\nimport { useTheme } from \"@material-ui/styles\";\nimport html2pdf from \"html2pdf.js\";\nimport FinalizacaoVendaModal from \"../FinalizacaoVendaModal\";\nimport QuickMessageModal from \"../QuickMessageModal\";\nimport { Phone } from \"@material-ui/icons\";\n\nconst useStyles = makeStyles((theme) => ({\n  actionButtons: {\n    marginRight: 6,\n    maxWidth: \"100%\",\n    flex: \"none\",\n    alignSelf: \"center\",\n    marginLeft: \"auto\",\n    // flexBasis: \"50%\",\n    display: \"flex\",\n    \"& > *\": {\n      margin: theme.spacing(1),\n    },\n  },\n  bottomButtonVisibilityIcon: {\n    padding: 1,\n    color: theme.mode === \"light\" ? theme.palette.primary.main : \"#FFF\",\n  },\n  botoes: {\n    display: \"flex\",\n    padding: \"15px\",\n    justifyContent: \"flex-end\",\n    maxWidth: \"100%\",\n    // alignItems: \"center\"\n  },\n}));\n\nconst SessionSchema = Yup.object().shape({\n  ratingId: Yup.string().required(\"AvaliaÃ§Ã£o obrigatÃ³ria\"),\n});\n\nconst TicketActionButtonsCustom = ({\n  ticket,\n  contact,\n  onQuickMessageSelect,\n  // , showSelectMessageCheckbox,\n  // selectedMessages,\n  // forwardMessageModalOpen,\n  // setForwardMessageModalOpen\n}) => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const history = useHistory();\n  const isMounted = useRef(true);\n  const [loading, setLoading] = useState(false);\n  const { user } = useContext(AuthContext);\n  const { setCurrentTicket, setTabOpen } = useContext(TicketsContext);\n  const [open, setOpen] = React.useState(false);\n  const formRef = React.useRef(null);\n  const [confirmationOpen, setConfirmationOpen] = useState(false);\n  const [transferTicketModalOpen, setTransferTicketModalOpen] = useState(false);\n  const [newTicketModalOpen, setNewTicketModalOpen] = useState(false);\n  const [scheduleModalOpen, setScheduleModalOpen] = useState(false);\n  const [contactId, setContactId] = useState(null);\n  const [\n    acceptTicketWithouSelectQueueOpen,\n    setAcceptTicketWithouSelectQueueOpen,\n  ] = useState(false);\n  const [showTicketLogOpen, setShowTicketLogOpen] = useState(false);\n  const [openTicketMessageDialog, setOpenTicketMessageDialog] = useState(false);\n  const [disableBot, setDisableBot] = useState(ticket.contact.disableBot);\n\n  const [showSchedules, setShowSchedules] = useState(false);\n  const [enableIntegration, setEnableIntegration] = useState(\n    ticket.useIntegration\n  );\n\n  const [openAlert, setOpenAlert] = useState(false);\n  const [userTicketOpen, setUserTicketOpen] = useState(\"\");\n  const [queueTicketOpen, setQueueTicketOpen] = useState(\"\");\n  const [logTicket, setLogTicket] = useState([]);\n\n  const [showWavoipCall, setShowWavoipCall] = useState(false);\n\n  const { get: getSetting } = useCompanySettings();\n  const { getPlanCompany } = usePlans();\n\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [menuOpen, setMenuOpen] = useState(false);\n\n  const [showTestButton, setShowTestButton] = useState(false);\n  const [exportedToPDF, setExportedToPDF] = useState(false);\n  const [linkingWallet, setLinkingWallet] = useState(false);\n\n  const [openFinalizacaoVenda, setOpenFinalizacaoVenda] = useState(false);\n  const [ticketDataToFinalize, setTicketDataToFinalize] = useState(null);\n  const [showFinalizacaoOptions, setShowFinalizacaoOptions] = useState(false);\n  const [finalizacaoTipo, setFinalizacaoTipo] = useState(null); // 'semDespedida' ou 'comDespedida'\n  const [directTicketsToWallets, setDirectTicketsToWallets] = useState(false);\n\n  // Estados para copiar telefone e respostas rÃ¡pidas\n  const [quickMessageModalOpen, setQuickMessageModalOpen] = useState(false);\n\n  console.log(\"DEBUG user:\", user);\n  console.log(\n    \"DEBUG user.finalizacaoComValorVendaAtiva:\",\n    user?.finalizacaoComValorVendaAtiva\n  );\n\n  useEffect(() => {\n    fetchData();\n    checkWhatsAppTriggerIntegration();\n    fetchDirectTicketsToWalletsSetting();\n\n    // Cleanup function to set isMounted to false when the component unmounts\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n\n  useEffect(() => {\n    console.log(\"DEBUG openFinalizacaoVenda:\", openFinalizacaoVenda);\n  }, [openFinalizacaoVenda]);\n\n  useEffect(() => {\n    console.log(\"DEBUG open (modal avaliaÃ§Ã£o):\", open);\n  }, [open]);\n\n  const fetchData = async () => {\n    const companyId = user.companyId;\n    const planConfigs = await getPlanCompany(undefined, companyId);\n\n    console.log(\"DEBUG planConfigs:\", planConfigs);\n    \n    if (isMounted.current) {\n      setShowSchedules(planConfigs.plan.useSchedules);\n      setShowWavoipCall(planConfigs.plan.wavoip);\n      setOpenTicketMessageDialog(false);\n      setDisableBot(ticket.contact.disableBot);\n      setShowTicketLogOpen(false);\n    }\n  };\n\n  const checkWhatsAppTriggerIntegration = async () => {\n    try {\n      const { data } = await api.get(`/whatsapp/${ticket.whatsappId}`);\n      if (isMounted.current) {\n        setShowTestButton(data.triggerIntegrationOnClose === true);\n      }\n    } catch (err) {\n      console.error(err);\n      if (isMounted.current) {\n        setShowTestButton(false);\n      }\n    }\n  };\n\n  const fetchDirectTicketsToWalletsSetting = async () => {\n    try {\n      const setting = await getSetting({\n        column: \"DirectTicketsToWallets\"\n      });\n      if (isMounted.current) {\n        setDirectTicketsToWallets(setting.DirectTicketsToWallets);\n      }\n    } catch (err) {\n      console.error(err);\n      if (isMounted.current) {\n        setDirectTicketsToWallets(false);\n      }\n    }\n  };\n\n  // FunÃ§Ã£o para copiar telefone\n  const handleCopyPhone = async () => {\n    try {\n      if (!contact?.number) {\n        toast.error(i18n.t(\"ticketInfo.noPhone\"));\n        return;\n      }\n\n      // Remove todos os caracteres nÃ£o numÃ©ricos e copia o nÃºmero puro\n      const phoneNumber = contact.number.replace(/\\D/g, '');\n\n      // Verifica se tem pelo menos 8 dÃ­gitos (nÃºmero mÃ­nimo vÃ¡lido)\n      if (phoneNumber.length >= 8) {\n        await navigator.clipboard.writeText(phoneNumber);\n        toast.success(i18n.t(\"ticketInfo.phonecopied\"));\n      } else {\n        toast.error(i18n.t(\"ticketInfo.invalidPhoneFormat\"));\n      }\n    } catch (err) {\n      console.error('Erro ao copiar telefone:', err);\n      toast.error(i18n.t(\"ticketInfo.copyError\"));\n    }\n  };\n\n  // FunÃ§Ãµes para respostas rÃ¡pidas\n  const handleOpenQuickMessageModal = () => {\n    setQuickMessageModalOpen(true);\n  };\n\n  const handleCloseQuickMessageModal = () => {\n    setQuickMessageModalOpen(false);\n  };\n\n  const handleQuickMessageSelect = useCallback((selectedMessage) => {\n    console.log(\"ðŸŽ¯ Resposta rÃ¡pida selecionada:\", selectedMessage);\n\n    handleCloseQuickMessageModal();\n\n    if (selectedMessage.mediaPath) {\n      const event = new CustomEvent('insertQuickMessage', {\n        detail: {\n          quickMessage: {\n            id: selectedMessage.id,\n            message: selectedMessage.message || \"\",\n            shortcode: selectedMessage.shortcode || \"\",\n            mediaPath: selectedMessage.mediaPath,\n            mediaType: selectedMessage.mediaType,\n            value: selectedMessage.message || \"\"\n          }\n        },\n        bubbles: false\n      });\n\n      window.dispatchEvent(event);\n    } else {\n      // Para texto, tambÃ©m usar evento\n      const event = new CustomEvent('insertQuickMessage', {\n        detail: {\n          quickMessage: {\n            id: selectedMessage.id,\n            message: selectedMessage.message || \"\",\n            shortcode: selectedMessage.shortcode || \"\",\n            mediaPath: null,\n            mediaType: null,\n            value: selectedMessage.message || \"\"\n          }\n        },\n        bubbles: false\n      });\n\n      window.dispatchEvent(event);\n    }\n  }, []);\n\n  const handleClickOpen = async (e) => {\n    const setting = await getSetting({\n      column: \"requiredTag\",\n    });\n\n    if (setting?.requiredTag === \"enabled\") {\n      //verificar se tem uma tag\n      try {\n        const contactTags = await api.get(`/contactTags/${ticket.contact.id}`);\n        if (!contactTags.data.tags) {\n          toast.warning(i18n.t(\"messagesList.header.buttons.requiredTag\"));\n        } else {\n          setOpen(true);\n          // handleUpdateTicketStatus(e, \"closed\", user?.id);\n        }\n      } catch (err) {\n        toastError(err);\n      }\n    } else {\n      setOpen(true);\n      // handleUpdateTicketStatus(e, \"closed\", user?.id);\n    }\n  };\n\n  const handleClose = () => {\n    formRef.current.resetForm();\n    setOpen(false);\n  };\n\n  const handleCloseAlert = () => {\n    setOpenAlert(false);\n    setLoading(false);\n  };\n  const handleOpenAcceptTicketWithouSelectQueue = async () => {\n    setAcceptTicketWithouSelectQueueOpen(true);\n  };\n\n  const handleMenu = (event) => {\n    setAnchorEl(event.currentTarget);\n    setMenuOpen(true);\n  };\n\n  const handleCloseMenu = () => {\n    setAnchorEl(null);\n    setMenuOpen(false);\n  };\n\n  const handleOpenTransferModal = (e) => {\n    setTransferTicketModalOpen(true);\n    if (typeof handleClose == \"function\") handleClose();\n  };\n\n  const handleOpenConfirmationModal = (e) => {\n    setConfirmationOpen(true);\n    if (typeof handleClose == \"function\") handleClose();\n  };\n\n  const handleCloseTicketWithoutFarewellMsg = async () => {\n    setLoading(true);\n    try {\n      await api.put(`/tickets/${ticket.id}`, {\n        status: \"closed\",\n        userId: user?.id || null,\n        sendFarewellMessage: false,\n        amountUsedBotQueues: 0,\n      });\n\n      setLoading(false);\n      history.push(\"/tickets\");\n    } catch (err) {\n      setLoading(false);\n      toastError(err);\n    }\n  };\n\n  const handleExportPDF = async () => {\n    setOpenTicketMessageDialog(true);\n    handleCloseMenu();\n  };\n\n  const handleEnableIntegration = async () => {\n    setLoading(true);\n    try {\n      await api.put(`/tickets/${ticket.id}`, {\n        useIntegration: !enableIntegration,\n      });\n      setEnableIntegration(!enableIntegration);\n\n      setLoading(false);\n    } catch (err) {\n      setLoading(false);\n      toastError(err);\n    }\n  };\n\n  const handleShowLogTicket = async () => {\n    setShowTicketLogOpen(true);\n  };\n\n  const handleContactToggleDisableBot = async () => {\n    const { id } = ticket.contact;\n\n    try {\n      const { data } = await api.put(`/contacts/toggleDisableBot/${id}`);\n      ticket.contact.disableBot = data.disableBot;\n      setDisableBot(data.disableBot);\n    } catch (err) {\n      toastError(err);\n    }\n  };\n\n  const handleCloseTransferTicketModal = () => {\n    setTransferTicketModalOpen(false);\n  };\n\n  const handleOpenNewTicketModal = () => {\n    setNewTicketModalOpen(true);\n  };\n\n  const handleCloseNewTicketModal = (newTicket) => {\n    setNewTicketModalOpen(false);\n    if (newTicket) {\n      // Se um novo ticket foi criado, redirecionar para ele\n      setCurrentTicket({ id: newTicket.id, uuid: newTicket.uuid, code: uuidv4() });\n      history.push(`/tickets/${newTicket.uuid}`);\n    }\n  };\n\n  const handleDeleteTicket = async () => {\n    try {\n      await api.delete(`/tickets/${ticket.id}`);\n      history.push(\"/tickets\");\n    } catch (err) {\n      toastError(err);\n    }\n  };\n\n  const handleSendMessage = async (id) => {\n    let setting;\n\n    try {\n      setting = await getSetting({\n        column: \"greetingAcceptedMessage\",\n      });\n    } catch (err) {\n      toastError(err);\n    }\n    if (!setting.greetingAcceptedMessage) {\n      toast.warning(\n        i18n.t(\"messagesList.header.buttons.greetingAcceptedMessage\")\n      );\n      return;\n    }\n    const msg = `${setting.greetingAcceptedMessage}`; //`{{ms}} *{{name}}*, ${i18n.t(\"mainDrawer.appBar.user.myName\")} *${user?.name}* ${i18n.t(\"mainDrawer.appBar.user.continuity\")}.`;\n    const message = {\n      read: 1,\n      fromMe: true,\n      mediaUrl: \"\",\n      body: `${msg.trim()}`,\n    };\n    try {\n      await api.post(`/messages/${id}`, message);\n    } catch (err) {\n      toastError(err);\n    }\n  };\n\n  const handleUpdateTicketStatus = async (e, status, userId) => {\n    setLoading(true);\n    try {\n      await api.put(`/tickets/${ticket.id}`, {\n        status: status,\n        userId: userId || null,\n      });\n\n      let setting;\n\n      try {\n        setting = await getSetting({\n          column: \"sendGreetingAccepted\",\n        });\n      } catch (err) {\n        toastError(err);\n      }\n\n      if (\n        setting?.sendGreetingAccepted === \"enabled\" &&\n        (!ticket.isGroup || ticket.whatsapp?.groupAsTicket === \"enabled\") &&\n        ticket.status === \"pending\"\n      ) {\n        handleSendMessage(ticket.id);\n      }\n\n      if (isMounted.current) {\n        setLoading(false);\n      }\n\n      if (status === \"open\" || status === \"group\") {\n        setCurrentTicket({ ...ticket, code: \"#\" + status });\n        setTimeout(() => {\n          history.push(\"/tickets\");\n        }, 0);\n\n        setTimeout(() => {\n          history.push(`/tickets/${ticket.uuid}`);\n          setTabOpen(status);\n        }, 10);\n      } else {\n        setCurrentTicket({ id: null, code: null });\n        history.push(\"/tickets\");\n      }\n    } catch (err) {\n      if (isMounted.current) {\n        setLoading(false);\n      }\n      toastError(err);\n    }\n  };\n\n  const handleAcepptTicket = async (id) => {\n    setLoading(true);\n    try {\n      const otherTicket = await api.put(`/tickets/${id}`, {\n        status: ticket.isGroup ? \"group\" : \"open\",\n        userId: user?.id,\n      });\n      if (otherTicket.data.id !== ticket.id) {\n        if (otherTicket.data.userId !== user?.id) {\n          if (isMounted.current) {\n            setOpenAlert(true);\n            setUserTicketOpen(otherTicket.data.user.name);\n            setQueueTicketOpen(otherTicket.data.queue.name);\n            setTabOpen(otherTicket.isGroup ? \"group\" : \"open\");\n          }\n        } else {\n          if (isMounted.current) {\n            setLoading(false);\n            setTabOpen(otherTicket.isGroup ? \"group\" : \"open\");\n          }\n          history.push(`/tickets/${otherTicket.data.uuid}`);\n        }\n      } else {\n        if (isMounted.current) {\n          setLoading(false);\n        }\n        history.push(\"/tickets\");\n        setTimeout(() => {\n          history.push(`/tickets/${ticket.uuid}`);\n          setTabOpen(ticket.isGroup ? \"group\" : \"open\");\n        }, 1000);\n      }\n    } catch (err) {\n      if (isMounted.current) {\n        setLoading(false);\n      }\n      toastError(err);\n    }\n  };\n\n  //Wavoip historic\n  const saveHistoricalLink = async (payload) => {\n    console.log('payload request historical', JSON.stringify(payload));\n    const callHistorical = await api.post(`/call/historical/wavoip`, payload);\n  }\n  //Wavoip conect\n  const handleOpenWavoipCall = async () => {\n    if (!ticket?.whatsapp?.wavoip || !ticket?.contact?.number) {\n      toastError(\"Erro: Token ou nÃºmero de telefone nÃ£o disponÃ­vel.\");\n      return;\n    }\n\n    const token = ticket.whatsapp.wavoip;\n    const phone = ticket.contact.number.replace(/\\D/g, \"\");\n    const name = ticket.contact.name;\n    const url = `https://app.wavoip.com/call?token=${token}&phone=${phone}&name=${name}&start_if_ready=true&close_after_call=true`;\n\n    try {\n      await saveHistoricalLink({\n        \"user_id\": ticket?.user?.id || null,\n        \"token_wavoip\": token,\n        \"whatsapp_id\": ticket?.whatsapp?.id || null,\n        \"contact_id\": ticket?.contact?.id || null,\n        \"company_id\": ticket?.company?.id || null,\n        \"phone_to\": phone,\n        \"name\": name,\n        \"url\": url,\n        \"createdAt\": new Date()\n      });\n\n    } catch (e) {\n      console.log('erro ao tentar salvar historico', e)\n    }\n\n    window.open(url, \"wavoip\", \"toolbar=no,scrollbars=no,resizable=no,top=500,left=500,width=500,height=700\");\n  };\n\n  const handleExportToPDF = () => {\n    const messagesListElement = document.getElementById(\"messagesList\");\n    const headerElement = document.getElementById(\"TicketHeader\");\n\n    const pdfOptions = {\n      margin: 1,\n      filename: `${i18n.t(\"whatsappModalRel.form.reportFilename\")}${ticket.id\n        }.pdf`,\n      image: { type: \"jpeg\", quality: 0.98 },\n      html2canvas: { scale: 2 },\n      jsPDF: { unit: \"mm\", format: \"a4\", orientation: \"portrait\" },\n    };\n\n    if (messagesListElement && headerElement) {\n      const headerClone = headerElement.cloneNode(true);\n      const messagesListClone = messagesListElement.cloneNode(true);\n\n      const containerElement = document.createElement(\"div\");\n      containerElement.appendChild(headerClone);\n      containerElement.appendChild(messagesListClone);\n\n      return html2pdf().from(containerElement).set(pdfOptions).output(\"blob\");\n    } else {\n      toast.error(i18n.t(\"whatsappModalRel.form.elementNotFoundForExport\"));\n      return null;\n    }\n  };\n\n  const handleTestButton = async () => {\n    try {\n      if (ticket?.whatsapp?.integrationTypeId) {\n        const { data: integration } = await api.get(\n          `/queueIntegration/${ticket.whatsapp.integrationTypeId}`\n        );\n\n        if (integration) {\n          await api.post(`/queueIntegration/testsession`, {\n            integrationId: ticket.whatsapp.integrationTypeId,\n            ticketId: ticket.id,\n            contactId: ticket.contactId,\n            body: ticket.lastMessage?.body || \"\",\n            status: \"closed\",\n          });\n\n          if (isMounted.current) {\n            toast.success(i18n.t(\"ticketList.success.integrationTriggered\"));\n          }\n        }\n      }\n\n      await handleUpdateTicketStatus(\n        null,\n        \"closed\",\n        user?.id,\n        ticket?.queue?.id\n      );\n\n      if (isMounted.current) {\n        handleClose();\n      }\n    } catch (err) {\n      toastError(err);\n    }\n  };\n\n  const handleLinkToWallet = async () => {\n    if (!ticket.contactId) {\n      toast.error(i18n.t(\"contactModal.saveFirst\"));\n      return;\n    }\n\n    setLinkingWallet(true);\n    try {\n      if (!user.queues || user.queues.length === 0) {\n        toast.error(i18n.t(\"contactModal.walletError\"));\n        return;\n      }\n\n      // Usa a primeira fila do usuÃ¡rio\n      const userQueue = user.queues[0];\n\n      await api.put(`/contacts/wallet/${ticket.contactId}`, {\n        wallets: {\n          userId: user.id,\n          queueId: ticket.queueId || userQueue.id,\n        },\n      });\n\n      toast.success(i18n.t(\"contactModal.walletLinked\"));\n    } catch (err) {\n      toastError(err);\n    } finally {\n      setLinkingWallet(false);\n    }\n  };\n\n  const handleFinalizarTicket = async (tipo) => {\n    if (\n      user.finalizacaoComValorVendaAtiva === true ||\n      user.finalizacaoComValorVendaAtiva === \"true\"\n    ) {\n      setFinalizacaoTipo(tipo);\n      setOpenFinalizacaoVenda(true);\n    } else {\n      if (tipo === \"semDespedida\") {\n        handleCloseTicketWithoutFarewellMsg();\n      } else {\n        handleUpdateTicketStatus(null, \"closed\", user?.id, ticket?.queue?.id);\n      }\n    }\n  };\n\n  const handleClickResolver = () => {\n    console.log(\"DEBUG handleClickResolver chamado\");\n    if (\n      user.finalizacaoComValorVendaAtiva === true ||\n      user.finalizacaoComValorVendaAtiva === \"true\"\n    ) {\n      setFinalizacaoTipo(\"comDespedida\");\n      setOpenFinalizacaoVenda(true);\n    } else {\n      setOpen(true);\n    }\n  };\n\n  const handleUpdateTicketStatusWithData = async (\n    ticketData,\n    sendFarewellMessage,\n    finalizacaoMessage\n  ) => {\n    try {\n      await api.put(`/tickets/${ticket.id}`, {\n        ...ticketData,\n        sendFarewellMessage,\n        finalizacaoMessage,\n      });\n      toast.success(\"Ticket finalizado com sucesso!\");\n      // Atualize o estado conforme necessÃ¡rio\n    } catch (err) {\n      toastError(err);\n    }\n  };\n\n  // Tooltip dinÃ¢mico para copiar telefone\n  const getCopyPhoneTooltip = () => {\n    const usePrefixWhenCopy = localStorage.getItem('usePrefixWhenCopy') === 'true';\n    const prefix = localStorage.getItem('contactCopyPrefix') || '';\n\n    let copyTooltip = i18n.t(\"ticketInfo.copyPhone\");\n    if (usePrefixWhenCopy && prefix) {\n      copyTooltip = `Copiar telefone com prefixo (${prefix})`;\n    }\n    return copyTooltip;\n  };\n\n  return (\n    <>\n      {openAlert && (\n        <ShowTicketOpen\n          isOpen={openAlert}\n          handleClose={handleCloseAlert}\n          user={userTicketOpen}\n          queue={queueTicketOpen}\n        />\n      )}\n      {acceptTicketWithouSelectQueueOpen && (\n        <AcceptTicketWithouSelectQueue\n          modalOpen={acceptTicketWithouSelectQueueOpen}\n          onClose={(e) => setAcceptTicketWithouSelectQueueOpen(false)}\n          ticketId={ticket.id}\n          ticket={ticket}\n        />\n      )}\n      {showTicketLogOpen && (\n        <ShowTicketLogModal\n          isOpen={showTicketLogOpen}\n          handleClose={(e) => setShowTicketLogOpen(false)}\n          ticketId={ticket.id}\n        />\n      )}\n      {openTicketMessageDialog && (\n        <TicketMessagesDialog\n          open={openTicketMessageDialog}\n          handleClose={() => setOpenTicketMessageDialog(false)}\n          ticketId={ticket.id}\n        />\n      )}\n\n      {quickMessageModalOpen && (\n        <QuickMessageModal\n          open={quickMessageModalOpen}\n          onClose={handleCloseQuickMessageModal}\n          onSelect={handleQuickMessageSelect}\n          companyId={user?.companyId}\n          userId={user?.id}\n        />\n      )}\n\n      {newTicketModalOpen && (\n        <NewTicketModal\n          modalOpen={newTicketModalOpen}\n          onClose={handleCloseNewTicketModal}\n          initialContact={contact}\n        />\n      )}\n\n      <div className={classes.actionButtons}>\n        {showWavoipCall && (\n          <IconButton color=\"secondary\" onClick={handleOpenWavoipCall}>\n            <Phone />\n          </IconButton>\n        )}\n        {ticket.status === \"closed\" && (\n          <ButtonWithSpinner\n            loading={loading}\n            startIcon={<Add />}\n            size=\"small\"\n            onClick={handleOpenNewTicketModal}\n          >\n            Criar Novo Ticket\n          </ButtonWithSpinner>\n        )}\n        {/* <IconButton\n                    className={classes.bottomButtonVisibilityIcon}\n                    onClick={handleShowLogTicket}\n                >\n                    <Tooltip title={i18n.t(\"messagesList.header.buttons.logTicket\")}>\n                        <History />\n\n                    </Tooltip>\n                </IconButton> */}\n        {(ticket.status === \"open\" || ticket.status === \"group\") && (\n          <>\n            {/* {!showSelectMessageCheckbox ? ( */}\n            <>\n              {/* <IconButton\n                                className={classes.bottomButtonVisibilityIcon}\n                                onClick={handleEnableIntegration}\n                            >\n                                <Tooltip title={i18n.t(\"messagesList.header.buttons.enableIntegration\")}>\n                                    {enableIntegration === true ? <DeviceHubOutlined style={{ color: \"green\" }} /> : <DeviceHubOutlined />}\n\n                                </Tooltip>\n                            </IconButton> */}\n\n              {/* Ãcone para copiar telefone */}\n              <IconButton\n                className={classes.bottomButtonVisibilityIcon}\n                onClick={handleCopyPhone}\n                disabled={!contact?.number}\n              >\n                <Tooltip title={getCopyPhoneTooltip()}>\n                  <FileCopyIcon />\n                </Tooltip>\n              </IconButton>\n\n              {/* Ãcone para respostas rÃ¡pidas */}\n              <IconButton\n                className={classes.bottomButtonVisibilityIcon}\n                onClick={handleOpenQuickMessageModal}\n              >\n                <Tooltip title={i18n.t(\"ticketInfo.quickMessages\")}>\n                  <FlashOn />\n                </Tooltip>\n              </IconButton>\n\n              <IconButton className={classes.bottomButtonVisibilityIcon}>\n                <Tooltip title={i18n.t(\"messagesList.header.buttons.resolve\")}>\n                  <HighlightOffIcon onClick={handleClickResolver} />\n                </Tooltip>\n              </IconButton>\n\n              <IconButton className={classes.bottomButtonVisibilityIcon}>\n                <Tooltip title={i18n.t(\"tickets.buttons.returnQueue\")}>\n                  <UndoIcon\n                    // color=\"primary\"\n                    onClick={(e) =>\n                      handleUpdateTicketStatus(e, \"pending\", null)\n                    }\n                  />\n                </Tooltip>\n              </IconButton>\n\n              <IconButton className={classes.bottomButtonVisibilityIcon}>\n                <Tooltip title=\"Transferir Ticket\">\n                  <SwapHorizOutlined\n                    // color=\"primary\"\n                    onClick={handleOpenTransferModal}\n                  />\n                </Tooltip>\n              </IconButton>\n\n              {/* BotÃ£o de vincular Ã  carteira sÃ³ aparece se NÃƒO houver carteira vinculada E se a configuraÃ§Ã£o DirectTicketsToWallets estiver ativa */}\n              {directTicketsToWallets && !(\n                ticket.contact?.contactWallets &&\n                ticket.contact.contactWallets.length > 0\n              ) && (\n                  <IconButton\n                    className={classes.bottomButtonVisibilityIcon}\n                    onClick={handleLinkToWallet}\n                    disabled={linkingWallet}\n                  >\n                    <Tooltip title=\"Vincular Ã  minha carteira\">\n                      {linkingWallet ? (\n                        <CircularProgress size={20} />\n                      ) : (\n                        <AccountBalanceWallet />\n                      )}\n                    </Tooltip>\n                  </IconButton>\n                )}\n            </>\n\n            {/* {showSchedules && (\n                            <>\n                                <IconButton className={classes.bottomButtonVisibilityIcon}>\n                                    <Tooltip title={i18n.t(\"tickets.buttons.scredule\")}>\n                                        <EventIcon\n                                            // color=\"primary\"\n                                            onClick={handleOpenScheduleModal}\n                                        />\n                                    </Tooltip>\n                                </IconButton>\n                            </>\n                        )} */}\n\n            <MenuItem className={classes.bottomButtonVisibilityIcon}>\n              <Tooltip title={i18n.t(\"contactModal.form.chatBotContact\")}>\n                <Switch\n                  size=\"small\"\n                  // color=\"primary\"\n                  checked={disableBot}\n                  onChange={() => handleContactToggleDisableBot()}\n                />\n              </Tooltip>\n            </MenuItem>\n\n            {confirmationOpen && (\n              <ConfirmationModal\n                title={`${i18n.t(\n                  \"ticketOptionsMenu.confirmationModal.title\"\n                )} #${ticket.id}?`}\n                open={confirmationOpen}\n                onClose={setConfirmationOpen}\n                onConfirm={handleDeleteTicket}\n              >\n                {i18n.t(\"ticketOptionsMenu.confirmationModal.message\")}\n              </ConfirmationModal>\n            )}\n            {transferTicketModalOpen && (\n              <TransferTicketModalCustom\n                modalOpen={transferTicketModalOpen}\n                onClose={handleCloseTransferTicketModal}\n                ticketid={ticket.id}\n                ticket={ticket}\n              />\n            )}\n          </>\n        )}\n        {ticket.status === \"pending\" &&\n          (ticket.queueId === null || ticket.queueId === undefined) && (\n            <ButtonWithSpinner\n              loading={loading}\n              size=\"small\"\n              variant=\"contained\"\n              onClick={(e) => handleOpenAcceptTicketWithouSelectQueue()}\n            >\n              {i18n.t(\"messagesList.header.buttons.accept\")}\n            </ButtonWithSpinner>\n          )}\n        {ticket.status === \"pending\" && ticket.queueId !== null && (\n          <ButtonWithSpinner\n            loading={loading}\n            size=\"small\"\n            variant=\"contained\"\n            // color=\"primary\"\n            onClick={(e) => handleUpdateTicketStatus(e, \"open\", user?.id)}\n          >\n            {i18n.t(\"messagesList.header.buttons.accept\")}\n          </ButtonWithSpinner>\n        )}\n        <IconButton\n          aria-label=\"account of current user\"\n          aria-controls=\"menu-appbar\"\n          aria-haspopup=\"true\"\n          onClick={handleMenu}\n          color=\"inherit\"\n          style={{ paddingHorizontal: 3, paddingTop: 10 }}\n        >\n          <MoreVert style={{ fontSize: 16, padding: 0 }} />\n        </IconButton>\n        <Menu\n          id=\"menu-appbar\"\n          anchorEl={anchorEl}\n          getContentAnchorEl={null}\n          anchorOrigin={{\n            vertical: \"bottom\",\n            horizontal: \"right\",\n          }}\n          keepMounted\n          transformOrigin={{\n            vertical: \"top\",\n            horizontal: \"right\",\n          }}\n          open={menuOpen}\n          onClose={handleCloseMenu}\n        >\n          <MenuItem onClick={handleOpenConfirmationModal}>\n            <Can\n              role={user.profile}\n              perform=\"ticket-options:deleteTicket\"\n              yes={() => i18n.t(\"tickets.buttons.deleteTicket\")}\n            />\n          </MenuItem>\n          <MenuItem onClick={handleEnableIntegration}>\n            {enableIntegration === true\n              ? i18n.t(\"messagesList.header.buttons.disableIntegration\")\n              : i18n.t(\"messagesList.header.buttons.enableIntegration\")}\n          </MenuItem>\n          <MenuItem onClick={handleShowLogTicket}>\n            {i18n.t(\"messagesList.header.buttons.logTicket\")}\n          </MenuItem>\n          <MenuItem onClick={handleExportPDF}>\n            {i18n.t(\"ticketsList.buttons.exportAsPDF\")}\n          </MenuItem>\n        </Menu>\n      </div>\n      <>\n        {(!user.finalizacaoComValorVendaAtiva ||\n          user.finalizacaoComValorVendaAtiva === false ||\n          user.finalizacaoComValorVendaAtiva === \"false\") && (\n            <Formik\n              enableReinitialize={true}\n              validationSchema={SessionSchema}\n              innerRef={formRef}\n              onSubmit={(values, actions) => {\n                setTimeout(() => {\n                  actions.setSubmitting(false);\n                  actions.resetForm();\n                }, 400);\n              }}\n            >\n              {({\n                values,\n                touched,\n                errors,\n                isSubmitting,\n                setFieldValue,\n                resetForm,\n              }) => (\n                <Dialog\n                  open={open}\n                  onClose={handleClose}\n                  aria-labelledby=\"alert-dialog-title\"\n                  aria-describedby=\"alert-dialog-description\"\n                >\n                  <Form>\n                    <DialogActions className={classes.botoes}>\n                      <Button\n                        onClick={() => handleFinalizarTicket(\"semDespedida\")}\n                        style={{\n                          background: theme.palette.primary.main,\n                          color: \"white\",\n                        }}\n                      >\n                        {i18n.t(\n                          \"messagesList.header.dialogRatingWithoutFarewellMsg\"\n                        )}\n                      </Button>\n\n                      <Button\n                        onClick={() => handleFinalizarTicket(\"comDespedida\")}\n                        style={{\n                          background: theme.palette.primary.main,\n                          color: \"white\",\n                        }}\n                      >\n                        {i18n.t(\"messagesList.header.dialogRatingCancel\")}\n                      </Button>\n\n                      {showTestButton && (\n                        <Button\n                          onClick={handleTestButton}\n                          style={{\n                            background: theme.palette.primary.main,\n                            color: \"white\",\n                          }}\n                        >\n                          {i18n.t(\n                            \"whatsappModalRel.form.resolveAndTriggerIntegration\"\n                          )}\n                        </Button>\n                      )}\n                    </DialogActions>\n                  </Form>\n                </Dialog>\n              )}\n            </Formik>\n          )}\n      </>\n      {openFinalizacaoVenda &&\n        (console.log(\"DEBUG JSX: Renderizando FinalizacaoVendaModal\"),\n          (\n            <FinalizacaoVendaModal\n              open={openFinalizacaoVenda}\n              onClose={() => setOpenFinalizacaoVenda(false)}\n              ticket={ticket}\n              onFinalizar={(ticketData) => {\n                setOpenFinalizacaoVenda(false);\n                setTicketDataToFinalize(ticketData);\n                setShowFinalizacaoOptions(true);\n              }}\n            />\n          ))}\n      {showFinalizacaoOptions && (\n        <Dialog\n          open={showFinalizacaoOptions}\n          onClose={() => setShowFinalizacaoOptions(false)}\n          aria-labelledby=\"finalizacao-options-title\"\n        >\n          <DialogTitle id=\"finalizacao-options-title\">\n            Como deseja finalizar?\n          </DialogTitle>\n          <DialogActions className={classes.botoes}>\n            <Button\n              onClick={async () => {\n                setShowFinalizacaoOptions(false);\n                await handleUpdateTicketStatusWithData(\n                  ticketDataToFinalize,\n                  false,\n                  null\n                );\n              }}\n              style={{ background: theme.palette.primary.main, color: \"white\" }}\n            >\n              {i18n.t(\"messagesList.header.dialogRatingWithoutFarewellMsg\")}\n            </Button>\n            <Button\n              onClick={async () => {\n                setShowFinalizacaoOptions(false);\n                await handleUpdateTicketStatusWithData(\n                  ticketDataToFinalize,\n                  true,\n                  null\n                );\n              }}\n              style={{ background: theme.palette.primary.main, color: \"white\" }}\n            >\n              {i18n.t(\"messagesList.header.dialogRatingCancel\")}\n            </Button>\n          </DialogActions>\n        </Dialog>\n      )}\n    </>\n  );\n};\n\nexport default TicketActionButtonsCustom;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}