{"ast":null,"code":"import _objectSpread from\"/home/deploy/codigologlow/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from\"react\";import{Box,Button,TextField,IconButton,Autocomplete,Grid,Typography,Dialog,DialogTitle,DialogContent,DialogActions,Alert,Chip,FormControl,InputLabel,Select,MenuItem}from\"@mui/material\";import HttpIcon from\"@mui/icons-material/Http\";import PlayArrowIcon from\"@mui/icons-material/PlayArrow\";import SaveAltIcon from\"@mui/icons-material/SaveAlt\";import AddCircleOutlineIcon from\"@mui/icons-material/AddCircleOutline\";import DeleteOutlineIcon from\"@mui/icons-material/DeleteOutline\";import ContentCopyIcon from\"@mui/icons-material/ContentCopy\";import SettingsIcon from\"@mui/icons-material/Settings\";import TipsAndUpdatesIcon from\"@mui/icons-material/TipsAndUpdates\";import LinearScaleIcon from\"@mui/icons-material/LinearScale\";import OpenInFullIcon from\"@mui/icons-material/OpenInFull\";import CloseIcon from\"@mui/icons-material/Close\";import WebhookIcon from\"@mui/icons-material/Webhook\";import AceEditor from\"react-ace\";import\"ace-builds/src-noconflict/mode-json\";import\"ace-builds/src-noconflict/theme-github\";import ReactJson from\"react-json-view\";import axios from\"axios\";import{Handle}from\"react-flow-renderer\";import{useNodeStorage}from\"../../../stores/useNodeStorage\";import{toast}from\"react-toastify\";import api from\"../../../services/api\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function getPaths(obj){let prefix=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"\";let paths=[];for(let key in obj){const currentPath=prefix?\"\".concat(prefix,\".\").concat(key):key;paths.push(currentPath);if(obj[key]!==null&&typeof obj[key]===\"object\"){paths=paths.concat(getPaths(obj[key],currentPath));}}return paths;}const HttpRequestNode=/*#__PURE__*/React.memo(_ref=>{let{data,id,selected}=_ref;// Estados existentes\nconst[url,setUrl]=useState((data===null||data===void 0?void 0:data.url)||\"\");const[method,setMethod]=useState((data===null||data===void 0?void 0:data.method)||\"GET\");const[requestBody,setRequestBody]=useState((data===null||data===void 0?void 0:data.requestBody)||\"{}\");const[headersString,setHeadersString]=useState((data===null||data===void 0?void 0:data.headersString)||\"\");const[queryParams,setQueryParams]=useState((data===null||data===void 0?void 0:data.queryParams)||[]);const[saveVariables,setSaveVariables]=useState((data===null||data===void 0?void 0:data.saveVariables)||[]);const[timeout,setTimeout]=useState((data===null||data===void 0?void 0:data.timeout)||10000);const[savedStatus,setSavedStatus]=useState('');const[response,setResponse]=useState(null);const[jsonPaths,setJsonPaths]=useState([]);const[showAdvanced,setShowAdvanced]=useState(false);const[showMapping,setShowMapping]=useState(saveVariables&&saveVariables.length>0);const[showSavePopup,setShowSavePopup]=useState(false);const[showFullEditor,setShowFullEditor]=useState(false);const[showFullResponse,setShowFullResponse]=useState(false);// Novos estados para presets\nconst[presets,setPresets]=useState([]);const[selectedPreset,setSelectedPreset]=useState(null);const[presetMode,setPresetMode]=useState(false);const[loadingPresets,setLoadingPresets]=useState(false);const storageItems=useNodeStorage();// Carregar presets disponíveis para a empresa\nuseEffect(()=>{loadPresets();},[]);const loadPresets=async()=>{try{setLoadingPresets(true);// A API já filtra por companyId baseado no token JWT\nconst response=await api.get('/preset-webhooks?isActive=true&includeSystem=true');setPresets(response.data.presets||[]);}catch(error){console.error('Erro ao carregar presets:',error);}finally{setLoadingPresets(false);}};const handlePresetChange=async(event,preset)=>{if(!preset){setSelectedPreset(null);setPresetMode(false);return;}try{setSelectedPreset(preset);setPresetMode(true);// Aplicar configuração do preset\nconst config=preset.configuration;setUrl(config.url||\"\");setMethod(config.method||\"GET\");setHeadersString(config.headers?JSON.stringify(config.headers,null,2):\"\");setQueryParams(config.queryParams||[]);setRequestBody(config.requestBody||\"{}\");setTimeout(config.timeout||30000);// Configurar variáveis de resposta do preset\nif(config.responseVariables&&config.responseVariables.length>0){const mappedVariables=config.responseVariables.map(rv=>({path:rv.path,variable:rv.variableName}));setSaveVariables(mappedVariables);setShowMapping(true);}// Atualizar dados do node\ndata.url=config.url||\"\";data.method=config.method||\"GET\";data.headersString=config.headers?JSON.stringify(config.headers,null,2):\"\";data.queryParams=config.queryParams||[];data.requestBody=config.requestBody||\"{}\";data.responseVariables=config.responseVariables||[];data.timeout=config.timeout||30000;data.presetId=preset.id;data.presetName=preset.name;data.presetProvider=preset.provider;}catch(error){console.error('Erro ao aplicar preset:',error);toast.error('Erro ao aplicar configuração do preset');}};const clearPreset=()=>{setSelectedPreset(null);setPresetMode(false);data.presetId=null;data.presetName=null;data.presetProvider=null;};const updateNodeData=useCallback(()=>{data.url=url;data.method=method;data.requestBody=requestBody;data.headersString=headersString;data.queryParams=queryParams;data.timeout=timeout;if(saveVariables&&saveVariables.length>0){data.saveVariables=saveVariables.map(item=>({path:item.path,variable:item.variable}));data.responseVariables=saveVariables.map(item=>({path:item.path,variableName:item.variable}));}else{data.saveVariables=[];data.responseVariables=[];}if(!data.responseVariables||!Array.isArray(data.responseVariables)){var _data$saveVariables;data.responseVariables=((_data$saveVariables=data.saveVariables)===null||_data$saveVariables===void 0?void 0:_data$saveVariables.map(item=>({path:item.path,variableName:item.variable})))||[];}if(!data.saveVariables||!Array.isArray(data.saveVariables)){var _data$responseVariabl;data.saveVariables=((_data$responseVariabl=data.responseVariables)===null||_data$responseVariabl===void 0?void 0:_data$responseVariabl.map(item=>({path:item.path,variable:item.variableName})))||[];}},[url,method,requestBody,headersString,queryParams,saveVariables,data,timeout]);useEffect(()=>{if(saveVariables&&saveVariables.length>0&&!showMapping){setShowMapping(true);}},[saveVariables,showMapping]);useEffect(()=>{let timer;if(showSavePopup){timer=setTimeout(()=>{setShowSavePopup(false);},3000);}return()=>clearTimeout(timer);},[showSavePopup]);const hasBody=[\"POST\",\"PUT\",\"DELETE\"].includes(method);let customHeaders={};try{customHeaders=headersString?JSON.parse(headersString):{};}catch(err){}useEffect(()=>{if(response&&typeof response===\"object\"){setJsonPaths(getPaths(response));}else{setJsonPaths([]);}},[response]);const buildUrlWithParams=useCallback(function(){let baseUrl=arguments.length>0&&arguments[0]!==undefined?arguments[0]:url;if(!queryParams.length)return baseUrl;const processedParams=queryParams.map(param=>{let value=param.value;if(window.flowVariables&&value.includes('${')){const regex=/\\${([^}]+)}/g;value=value.replace(regex,(match,varName)=>{return window.flowVariables[varName]!==undefined?window.flowVariables[varName]:match;});}return{key:param.key,value};});const queryString=processedParams.filter(param=>param.key&&param.value).map(param=>\"\".concat(encodeURIComponent(param.key),\"=\").concat(encodeURIComponent(param.value))).join(\"&\");return queryString?\"\".concat(baseUrl,\"?\").concat(queryString):baseUrl;},[url,queryParams]);const addQueryParam=useCallback(()=>setQueryParams([...queryParams,{key:\"\",value:\"\"}]),[queryParams]);const updateQueryParam=useCallback((index,field,value)=>{const newParams=[...queryParams];newParams[index][field]=value;setQueryParams(newParams);},[queryParams]);const removeQueryParam=useCallback(index=>setQueryParams(queryParams.filter((_,i)=>i!==index)),[queryParams]);const addSaveVariable=useCallback(()=>setSaveVariables([...saveVariables,{path:\"\",variable:\"\"}]),[saveVariables]);const updateSaveVariable=useCallback((index,field,value)=>{const newVars=[...saveVariables];newVars[index][field]=value;setSaveVariables(newVars);},[saveVariables]);const removeSaveVariable=useCallback(index=>setSaveVariables(saveVariables.filter((_,i)=>i!==index)),[saveVariables]);useEffect(()=>{updateNodeData();},[url,method,requestBody,headersString,queryParams,saveVariables,timeout,updateNodeData]);const testRequest=useCallback(async()=>{try{let processedUrl=url;if(window.flowVariables&&url.includes('${')){const regex=/\\${([^}]+)}/g;processedUrl=url.replace(regex,(match,varName)=>{return window.flowVariables[varName]!==undefined?window.flowVariables[varName]:match;});}let processedRequestBody;const finalUrl=buildUrlWithParams(processedUrl);const config={method,url:finalUrl,headers:_objectSpread({\"Content-Type\":\"application/json\"},customHeaders),timeout:timeout};if(hasBody){try{processedRequestBody=requestBody;if(window.flowVariables&&requestBody.includes('${')){const regex=/\\${([^}]+)}/g;processedRequestBody=requestBody.replace(regex,(match,varName)=>{return window.flowVariables[varName]!==undefined?JSON.stringify(window.flowVariables[varName]):match;});}config.data=JSON.parse(processedRequestBody||\"{}\");}catch(err){config.data=processedRequestBody;}}const res=await axios(config);setResponse(res.data);if(window.setFlowVariable){window.setFlowVariable('apiResponse',res.data);}if(saveVariables.length>0){const variablesToProcess=[...saveVariables];const responseVariables=variablesToProcess.map(item=>({path:item.path,variableName:item.variable}));for(let index=0;index<responseVariables.length;index++){const extractor=responseVariables[index];if(extractor&&extractor.path&&extractor.variableName){const parts=extractor.path.split(\".\");let valueToSave=res.data;let currentPath='';let pathValid=true;for(let part of parts){currentPath=currentPath?\"\".concat(currentPath,\".\").concat(part):part;if(valueToSave&&typeof valueToSave==='object'&&part in valueToSave){valueToSave=valueToSave[part];}else{pathValid=false;break;}}if(pathValid&&valueToSave!==undefined&&valueToSave!==null){data[extractor.variableName]=valueToSave;if(window.setFlowVariable){window.setFlowVariable(extractor.variableName,valueToSave);const event=new CustomEvent('flowVariableUpdate',{detail:{name:extractor.variableName,value:valueToSave}});window.dispatchEvent(event);}else{if(!window.flowVariables)window.flowVariables={};window.flowVariables[extractor.variableName]=valueToSave;const event=new CustomEvent('flowVariableUpdate',{detail:{name:extractor.variableName,value:valueToSave}});window.dispatchEvent(event);}}}}data.responseVariables=responseVariables;data.saveVariables=variablesToProcess;updateNodeData();}}catch(error){setResponse(error.response?error.response.data:\"Erro na requisição\");if(window.setFlowVariable){window.setFlowVariable('apiError',error.response?error.response.data:error.message);}}},[url,buildUrlWithParams,method,requestBody,customHeaders,hasBody,saveVariables,timeout,data]);return/*#__PURE__*/_jsxs(Box,{sx:{backgroundColor:\"#fff\",borderRadius:2,boxShadow:2,p:3,width:320,display:\"flex\",flexDirection:\"column\",gap:2,position:\"relative\"},children:[/*#__PURE__*/_jsx(Handle,{type:\"target\",position:\"left\",id:\"httpRequest-in\",style:{left:-8,top:\"50%\",transform:\"translateY(-50%)\",background:\"#555\",width:12,height:12}}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\"},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",gap:1},children:[/*#__PURE__*/_jsx(HttpIcon,{fontSize:\"small\",sx:{color:'#1976d2'}}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",fontWeight:\"bold\",children:\"Requisi\\xE7\\xE3o HTTP\"})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",gap:1},children:[/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:()=>{storageItems.setNodesStorage(id);storageItems.setAct(\"duplicate\");},children:/*#__PURE__*/_jsx(ContentCopyIcon,{fontSize:\"small\"})}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:()=>{storageItems.setNodesStorage(id);storageItems.setAct(\"delete\");},children:/*#__PURE__*/_jsx(DeleteOutlineIcon,{fontSize:\"small\"})})]})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",flexDirection:\"column\",gap:1},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",gap:1},children:[/*#__PURE__*/_jsx(WebhookIcon,{fontSize:\"small\",sx:{color:'#9c27b0'}}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",fontWeight:\"bold\",children:\"Webhooks Pr\\xE9-configurados\"})]}),/*#__PURE__*/_jsx(Autocomplete,{options:presets,getOptionLabel:option=>\"\".concat(option.name,\" (\").concat(option.provider,\")\"),value:selectedPreset,onChange:handlePresetChange,loading:loadingPresets,renderInput:params=>/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Selecionar preset\",size:\"small\",placeholder:\"Escolha uma configura\\xE7\\xE3o pronta...\"})),renderOption:(props,option)=>/*#__PURE__*/_jsx(Box,_objectSpread(_objectSpread({component:\"li\"},props),{},{children:/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",fontWeight:\"bold\",children:option.name}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"textSecondary\",children:option.description}),/*#__PURE__*/_jsxs(Box,{sx:{mt:0.5},children:[/*#__PURE__*/_jsx(Chip,{label:option.provider.toUpperCase(),size:\"small\",color:\"primary\",variant:\"outlined\"}),option.isSystem&&/*#__PURE__*/_jsx(Chip,{label:\"SISTEMA\",size:\"small\",color:\"secondary\",variant:\"outlined\",sx:{ml:0.5}})]})]})})),clearOnEscape:true}),presetMode&&selectedPreset&&/*#__PURE__*/_jsxs(Alert,{severity:\"info\",action:/*#__PURE__*/_jsx(Button,{size:\"small\",onClick:clearPreset,children:\"Remover\"}),children:[\"Usando preset: \",/*#__PURE__*/_jsx(\"strong\",{children:selectedPreset.name})]})]}),/*#__PURE__*/_jsx(TextField,{label:presetMode?\"URL (do preset)\":\"URL\",variant:\"outlined\",size:\"small\",value:url,onChange:e=>{setUrl(e.target.value);data.url=e.target.value;},fullWidth:true,placeholder:\"https://api.exemplo.com/webhook\",helperText:presetMode?\"Você pode editar a URL base do preset se necessário\":\"\",disabled:presetMode&&(selectedPreset===null||selectedPreset===void 0?void 0:selectedPreset.isSystem)// Só permite editar se não for preset do sistema\n}),/*#__PURE__*/_jsx(Autocomplete,{options:[\"GET\",\"POST\",\"PUT\",\"DELETE\"],value:method,onChange:(event,newValue)=>{if(newValue){setMethod(newValue);data.method=newValue;}},renderInput:params=>/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"M\\xE9todo\",size:\"small\"})),disabled:presetMode&&(selectedPreset===null||selectedPreset===void 0?void 0:selectedPreset.isSystem),clearOnEscape:true}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(PlayArrowIcon,{}),onClick:testRequest,disabled:!url,sx:{bgcolor:\"#2e7d32\",\"&:hover\":{bgcolor:\"#1b5e20\"},textTransform:\"none\"},children:\"Testar Requisi\\xE7\\xE3o\"}),response&&/*#__PURE__*/_jsxs(Box,{sx:{mt:1},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",fontWeight:\"bold\",mb:1,children:\"Resposta da API:\"}),/*#__PURE__*/_jsx(Box,{sx:{maxHeight:150,overflow:\"auto\",border:1,borderColor:\"grey.300\",borderRadius:1,p:1,bgcolor:\"grey.50\"},children:typeof response===\"object\"?/*#__PURE__*/_jsx(ReactJson,{src:response,theme:\"rjv-default\",displayDataTypes:false,displayObjectSize:false,enableClipboard:false,collapsed:1,name:false}):/*#__PURE__*/_jsx(Typography,{variant:\"body2\",fontFamily:\"monospace\",children:String(response)})}),/*#__PURE__*/_jsx(Button,{size:\"small\",onClick:()=>setShowFullResponse(true),sx:{mt:1,textTransform:\"none\"},children:\"Ver resposta completa\"})]}),/*#__PURE__*/_jsx(Button,{variant:\"text\",size:\"small\",onClick:()=>setShowAdvanced(!showAdvanced),sx:{textTransform:\"none\",alignSelf:\"flex-start\"},children:/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",gap:0.5},children:[/*#__PURE__*/_jsx(SettingsIcon,{fontSize:\"small\"}),showAdvanced?\"Ocultar avançado\":\"Mostrar avançado\"]})}),showAdvanced&&/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",flexDirection:\"column\",gap:1},children:[presetMode&&/*#__PURE__*/_jsx(Alert,{severity:\"warning\",sx:{mb:1},children:\"Configura\\xE7\\xF5es avan\\xE7adas podem sobrescrever as configura\\xE7\\xF5es do preset\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",fontWeight:\"bold\",children:\"Timeout (ms)\"}),/*#__PURE__*/_jsx(TextField,{type:\"number\",size:\"small\",value:timeout,onChange:e=>setTimeout(parseInt(e.target.value)||10000),inputProps:{min:1000,max:60000},fullWidth:true}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",fontWeight:\"bold\",children:\"Par\\xE2metros de Query\"}),queryParams.map((param,index)=>/*#__PURE__*/_jsxs(Grid,{container:true,spacing:1,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:5,children:/*#__PURE__*/_jsx(TextField,{size:\"small\",label:\"Chave\",value:param.key,onChange:e=>updateQueryParam(index,\"key\",e.target.value),fullWidth:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:5,children:/*#__PURE__*/_jsx(TextField,{size:\"small\",label:\"Valor\",value:param.value,onChange:e=>updateQueryParam(index,\"value\",e.target.value),fullWidth:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:2,sx:{display:\"flex\",alignItems:\"center\"},children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:()=>removeQueryParam(index),children:/*#__PURE__*/_jsx(DeleteOutlineIcon,{fontSize:\"small\"})})})]},index)),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",size:\"small\",startIcon:/*#__PURE__*/_jsx(AddCircleOutlineIcon,{}),onClick:addQueryParam,sx:{textTransform:\"none\",width:\"100%\"},children:\"Adicionar Par\\xE2metro\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",fontWeight:\"bold\",mt:1,children:\"Cabe\\xE7alhos (JSON)\"}),/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",size:\"small\",multiline:true,minRows:2,value:headersString,onChange:e=>setHeadersString(e.target.value),placeholder:\"{\\\"Authorization\\\": \\\"Bearer token\\\", \\\"Custom-Header\\\": \\\"XYZ\\\"}\",fullWidth:true}),hasBody&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",fontWeight:\"bold\",mt:1,children:\"Corpo da requisi\\xE7\\xE3o (JSON)\"}),/*#__PURE__*/_jsxs(Box,{sx:{position:'relative'},children:[/*#__PURE__*/_jsx(AceEditor,{mode:\"json\",theme:\"github\",name:\"requestBodyEditor\",fontSize:12,showPrintMargin:false,showGutter:true,highlightActiveLine:true,width:\"100%\",height:\"100px\",value:requestBody,onChange:value=>setRequestBody(value),setOptions:{useWorker:false,tabSize:2},style:{borderRadius:4,border:\"1px solid #ddd\"}}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:()=>setShowFullEditor(true),sx:{position:'absolute',right:5,top:5,bgcolor:'rgba(255,255,255,0.8)','&:hover':{bgcolor:'rgba(255,255,255,0.9)'}},children:/*#__PURE__*/_jsx(OpenInFullIcon,{fontSize:\"small\"})})]}),/*#__PURE__*/_jsxs(Dialog,{open:showFullEditor,onClose:()=>setShowFullEditor(false),maxWidth:\"md\",fullWidth:true,children:[/*#__PURE__*/_jsxs(DialogTitle,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Editar corpo da requisi\\xE7\\xE3o\"}),/*#__PURE__*/_jsx(IconButton,{onClick:()=>setShowFullEditor(false),children:/*#__PURE__*/_jsx(CloseIcon,{})})]}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(AceEditor,{mode:\"json\",theme:\"github\",name:\"requestBodyEditorFull\",fontSize:14,showPrintMargin:false,showGutter:true,highlightActiveLine:true,width:\"100%\",height:\"400px\",value:requestBody,onChange:value=>setRequestBody(value),setOptions:{useWorker:false,tabSize:2},style:{borderRadius:4,border:\"1px solid #ddd\"}})}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:()=>setShowFullEditor(false),children:\"Fechar\"})})]})]})]}),/*#__PURE__*/_jsxs(Button,{variant:\"outlined\",size:\"small\",startIcon:/*#__PURE__*/_jsx(LinearScaleIcon,{}),onClick:()=>setShowMapping(!showMapping),sx:{textTransform:\"none\",borderColor:\"#673ab7\",color:\"#673ab7\",\"&:hover\":{borderColor:\"#5e35b1\",bgcolor:\"rgba(103, 58, 183, 0.04)\"}},children:[showMapping?\"Ocultar\":\"Mapear\",\" Vari\\xE1veis da Resposta\"]}),showMapping&&/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",flexDirection:\"column\",gap:1.5},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",fontWeight:\"bold\",color:\"#673ab7\",children:\"Mapear dados da resposta para vari\\xE1veis\"}),saveVariables.map((variable,index)=>/*#__PURE__*/_jsxs(Grid,{container:true,spacing:1,alignItems:\"center\",children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:5,children:/*#__PURE__*/_jsx(Autocomplete,{options:jsonPaths,freeSolo:true,size:\"small\",value:variable.path,onChange:(_,newValue)=>updateSaveVariable(index,\"path\",newValue||\"\"),renderInput:params=>/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Caminho\",placeholder:\"ex: data.user.id\",size:\"small\"}))})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:5,children:/*#__PURE__*/_jsx(TextField,{size:\"small\",label:\"Nome da vari\\xE1vel\",value:variable.variable,onChange:e=>updateSaveVariable(index,\"variable\",e.target.value),placeholder:\"ex: userId\",fullWidth:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:2,sx:{display:\"flex\",alignItems:\"center\"},children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:()=>removeSaveVariable(index),sx:{color:\"#f44336\"},children:/*#__PURE__*/_jsx(DeleteOutlineIcon,{fontSize:\"small\"})})})]},index)),/*#__PURE__*/_jsx(Button,{variant:\"contained\",size:\"small\",startIcon:/*#__PURE__*/_jsx(AddCircleOutlineIcon,{}),onClick:addSaveVariable,sx:{bgcolor:\"#673ab7\",\"&:hover\":{bgcolor:\"#5e35b1\",boxShadow:'0 4px 8px rgba(103, 58, 183, 0.3)'},boxShadow:'0 2px 4px rgba(103, 58, 183, 0.2)',borderRadius:2,py:1,mb:2,fontSize:'0.9rem',fontWeight:500,letterSpacing:'0.2px'},children:\"Adicionar vari\\xE1vel\"}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"flex-start\",gap:1.5,mt:2,p:2,borderRadius:2,bgcolor:'rgba(255, 193, 7, 0.08)',border:'1px solid rgba(255, 193, 7, 0.2)',transition:'all 0.2s ease','&:hover':{boxShadow:'0 2px 8px rgba(0,0,0,0.05)',bgcolor:'rgba(255, 193, 7, 0.1)'}},children:[/*#__PURE__*/_jsx(TipsAndUpdatesIcon,{fontSize:\"small\",sx:{color:'#f57c00',mt:0.3}}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{color:'text.primary',fontWeight:500,fontSize:'0.8rem',display:'block',mb:0.5},children:\"Dicas \\xFAteis:\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",color:\"text.secondary\",sx:{display:'block',mb:1,lineHeight:1.4},children:[\"\\u2022 A resposta completa da API \\xE9 salva automaticamente na vari\\xE1vel global \",/*#__PURE__*/_jsx(\"strong\",{children:\"apiResponse\"})]}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",color:\"text.secondary\",display:\"block\",mt:1,children:[\"Voc\\xEA pode usar $\",\"{nomeDaVariavel}\",\" no URL e corpo da requisi\\xE7\\xE3o para incluir valores de vari\\xE1veis.\"]})]})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:showFullResponse,onClose:()=>setShowFullResponse(false),maxWidth:\"lg\",fullWidth:true,children:[/*#__PURE__*/_jsxs(DialogTitle,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Resposta completa da API\"}),/*#__PURE__*/_jsx(IconButton,{onClick:()=>setShowFullResponse(false),children:/*#__PURE__*/_jsx(CloseIcon,{})})]}),/*#__PURE__*/_jsx(DialogContent,{children:response&&typeof response===\"object\"?/*#__PURE__*/_jsx(ReactJson,{src:response,theme:\"rjv-default\",displayDataTypes:true,displayObjectSize:true,enableClipboard:true,collapsed:false,name:\"response\",style:{padding:\"15px\",borderRadius:\"8px\",backgroundColor:\"#f8f9fa\"}}):/*#__PURE__*/_jsx(Box,{sx:{fontFamily:\"monospace\",whiteSpace:\"pre-wrap\",bgcolor:\"#f8f9fa\",p:2,borderRadius:1,border:\"1px solid #dee2e6\"},children:String(response)})}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:()=>setShowFullResponse(false),children:\"Fechar\"})})]}),showSavePopup&&/*#__PURE__*/_jsxs(Box,{sx:{position:'absolute',top:-40,right:0,bgcolor:'success.main',color:'white',px:2,py:1,borderRadius:1,fontSize:'0.875rem',zIndex:1000,display:'flex',alignItems:'center',gap:1},children:[/*#__PURE__*/_jsx(SaveAltIcon,{fontSize:\"small\"}),\"Configura\\xE7\\xE3o salva!\"]}),/*#__PURE__*/_jsx(Handle,{type:\"source\",position:\"right\",id:\"httpRequest-out\",style:{right:-8,top:\"50%\",transform:\"translateY(-50%)\",background:\"#555\",width:12,height:12}})]});});export default HttpRequestNode;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}