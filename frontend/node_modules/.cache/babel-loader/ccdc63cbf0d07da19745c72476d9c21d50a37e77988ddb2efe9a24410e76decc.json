{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import*as Yup from\"yup\";import{Formik,Form,Field}from\"formik\";import{toast}from\"react-toastify\";import{makeStyles}from\"@material-ui/core/styles\";import{green}from\"@material-ui/core/colors\";import Button from\"@material-ui/core/Button\";import TextField from\"@material-ui/core/TextField\";import CircularProgress from\"@material-ui/core/CircularProgress\";import{i18n}from\"../../translate/i18n\";import api from\"../../services/api\";import toastError from\"../../errors/toastError\";import{Grid}from\"@material-ui/core\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const useStyles=makeStyles(theme=>({root:{display:\"flex\",flexWrap:\"wrap\"},textField:{marginRight:theme.spacing(1),flex:1},extraAttr:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\"},btnWrapper:{position:\"relative\"},buttonProgress:{color:green[500],position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12},textCenter:{backgroundColor:'red'}}));const ContactSchema=Yup.object().shape({name:Yup.string().min(2,\"Too Short!\").max(50,\"Too Long!\").required(\"Required\"),number:Yup.string().min(8,\"Too Short!\").max(50,\"Too Long!\"),email:Yup.string().email(\"Invalid email\")});export function ContactForm(_ref){let{initialContact,onSave,onCancel}=_ref;const classes=useStyles();const[contact,setContact]=useState(initialContact);useEffect(()=>{setContact(initialContact);},[initialContact]);const handleSaveContact=async values=>{try{if(contact.id){await api.put(\"/contacts/\".concat(contact.id),values);}else{const{data}=await api.post(\"/contacts\",values);if(onSave){onSave(data);}}toast.success(i18n.t(\"contactModal.success\"));}catch(err){toastError(err);}};return/*#__PURE__*/_jsx(Formik,{initialValues:contact,enableReinitialize:true,validationSchema:ContactSchema,onSubmit:(values,actions)=>{setTimeout(()=>{handleSaveContact(values);actions.setSubmitting(false);},400);},children:_ref2=>{let{values,errors,touched,isSubmitting}=_ref2;return/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:1,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Field,{as:TextField,label:i18n.t(\"contactModal.form.name\"),name:\"name\",autoFocus:true,error:touched.name&&Boolean(errors.name),helperText:touched.name&&errors.name,variant:\"outlined\",margin:\"dense\",className:classes.textField,fullWidth:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Field,{as:TextField,label:i18n.t(\"contactModal.form.number\"),name:\"number\",error:touched.number&&Boolean(errors.number),helperText:touched.number&&errors.number,placeholder:\"5513912344321\",variant:\"outlined\",margin:\"dense\",fullWidth:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Field,{as:TextField,label:i18n.t(\"contactModal.form.email\"),name:\"email\",error:touched.email&&Boolean(errors.email),helperText:touched.email&&errors.email,placeholder:\"Email address\",fullWidth:true,margin:\"dense\",variant:\"outlined\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,spacing:1,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:1,children:[/*#__PURE__*/_jsx(Grid,{xs:6,item:true,children:/*#__PURE__*/_jsx(Button,{onClick:onCancel,color:\"secondary\",disabled:isSubmitting,variant:\"outlined\",fullWidth:true,children:i18n.t(\"contactModal.buttons.cancel\")})}),/*#__PURE__*/_jsx(Grid,{classes:classes.textCenter,xs:6,item:true,children:/*#__PURE__*/_jsxs(Button,{type:\"submit\",color:\"primary\",disabled:isSubmitting,variant:\"contained\",className:classes.btnWrapper,fullWidth:true,children:[contact.id?\"\".concat(i18n.t(\"contactModal.buttons.okEdit\")):\"\".concat(i18n.t(\"contactModal.buttons.okAdd\")),isSubmitting&&/*#__PURE__*/_jsx(CircularProgress,{size:24,className:classes.buttonProgress})]})})]})})]})});}});}","map":{"version":3,"names":["React","useState","useEffect","Yup","Formik","Form","Field","toast","makeStyles","green","Button","TextField","CircularProgress","i18n","api","toastError","Grid","jsx","_jsx","jsxs","_jsxs","useStyles","theme","root","display","flexWrap","textField","marginRight","spacing","flex","extraAttr","justifyContent","alignItems","btnWrapper","position","buttonProgress","color","top","left","marginTop","marginLeft","textCenter","backgroundColor","ContactSchema","object","shape","name","string","min","max","required","number","email","ContactForm","_ref","initialContact","onSave","onCancel","classes","contact","setContact","handleSaveContact","values","id","put","concat","data","post","success","t","err","initialValues","enableReinitialize","validationSchema","onSubmit","actions","setTimeout","setSubmitting","children","_ref2","errors","touched","isSubmitting","container","item","xs","as","label","autoFocus","error","Boolean","helperText","variant","margin","className","fullWidth","placeholder","onClick","disabled","type","size"],"sources":["/home/deploy/codigologlow/frontend/src/components/ContactForm/index.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nimport * as Yup from \"yup\";\nimport { Formik, Form, Field } from \"formik\";\nimport { toast } from \"react-toastify\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { green } from \"@material-ui/core/colors\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nimport { i18n } from \"../../translate/i18n\";\n\nimport api from \"../../services/api\";\nimport toastError from \"../../errors/toastError\";\nimport { Grid } from \"@material-ui/core\";\n\nconst useStyles = makeStyles(theme => ({\n\troot: {\n\t\tdisplay: \"flex\",\n\t\tflexWrap: \"wrap\",\n\t},\n\ttextField: {\n\t\tmarginRight: theme.spacing(1),\n\t\tflex: 1,\n\t},\n\n\textraAttr: {\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"center\",\n\t\talignItems: \"center\",\n\t},\n\n\tbtnWrapper: {\n\t\tposition: \"relative\",\n\t},\n\n\tbuttonProgress: {\n\t\tcolor: green[500],\n\t\tposition: \"absolute\",\n\t\ttop: \"50%\",\n\t\tleft: \"50%\",\n\t\tmarginTop: -12,\n\t\tmarginLeft: -12,\n\t},\n\n    textCenter: {\n        backgroundColor: 'red'\n    }\n}));\n\nconst ContactSchema = Yup.object().shape({\n\tname: Yup.string()\n\t\t.min(2, \"Too Short!\")\n\t\t.max(50, \"Too Long!\")\n\t\t.required(\"Required\"),\n\tnumber: Yup.string().min(8, \"Too Short!\").max(50, \"Too Long!\"),\n\temail: Yup.string().email(\"Invalid email\"),\n});\n\nexport function ContactForm ({ initialContact, onSave, onCancel }) {\n\tconst classes = useStyles();\n\n\tconst [contact, setContact] = useState(initialContact);\n\n    useEffect(() => {\n        setContact(initialContact);\n    }, [initialContact]);\n\n\tconst handleSaveContact = async values => {\n\t\ttry {\n\t\t\tif (contact.id) {\n\t\t\t\tawait api.put(`/contacts/${contact.id}`, values);\n\t\t\t} else {\n\t\t\t\tconst { data } = await api.post(\"/contacts\", values);\n\t\t\t\tif (onSave) {\n\t\t\t\t\tonSave(data);\n\t\t\t\t}\n\t\t\t}\n\t\t\ttoast.success(i18n.t(\"contactModal.success\"));\n\t\t} catch (err) {\n\t\t\ttoastError(err);\n\t\t}\n\t};\n\n    return (\n        <Formik\n            initialValues={contact}\n            enableReinitialize={true}\n            validationSchema={ContactSchema}\n            onSubmit={(values, actions) => {\n                setTimeout(() => {\n                    handleSaveContact(values);\n                    actions.setSubmitting(false);\n                }, 400);\n            }}\n        >\n            {({ values, errors, touched, isSubmitting }) => (\n                <Form>\n                    <Grid container spacing={1}>\n                        {/* <Grid item xs={12}>\n                            <Typography variant=\"subtitle1\" gutterBottom>\n                                {i18n.t(\"contactModal.form.mainInfo\")}\n                            </Typography>\n                        </Grid> */}\n                        <Grid item xs={12}>\n                            <Field\n                                as={TextField}\n                                label={i18n.t(\"contactModal.form.name\")}\n                                name=\"name\"\n                                autoFocus\n                                error={touched.name && Boolean(errors.name)}\n                                helperText={touched.name && errors.name}\n                                variant=\"outlined\"\n                                margin=\"dense\"\n                                className={classes.textField}\n                                fullWidth\n                            />\n                        </Grid>\n                        <Grid item xs={12}>\n                            <Field\n                                as={TextField}\n                                label={i18n.t(\"contactModal.form.number\")}\n                                name=\"number\"\n                                error={touched.number && Boolean(errors.number)}\n                                helperText={touched.number && errors.number}\n                                placeholder=\"5513912344321\"\n                                variant=\"outlined\"\n                                margin=\"dense\"\n                                fullWidth\n                            />\n                        </Grid>\n                        <Grid item xs={12}>\n                            <Field\n                                as={TextField}\n                                label={i18n.t(\"contactModal.form.email\")}\n                                name=\"email\"\n                                error={touched.email && Boolean(errors.email)}\n                                helperText={touched.email && errors.email}\n                                placeholder=\"Email address\"\n                                fullWidth\n                                margin=\"dense\"\n                                variant=\"outlined\"\n                            />\n                        </Grid>\n                        <Grid item xs={12} spacing={1}>\n                            <Grid container spacing={1}>\n                                <Grid xs={6} item>\n                                    <Button\n                                        onClick={onCancel}\n                                        color=\"secondary\"\n                                        disabled={isSubmitting}\n                                        variant=\"outlined\"\n                                        fullWidth\n                                    >\n                                        {i18n.t(\"contactModal.buttons.cancel\")}\n                                    </Button>\n                                </Grid>\n                                <Grid classes={classes.textCenter} xs={6} item>\n                                    <Button\n                                        type=\"submit\"\n                                        color=\"primary\"\n                                        disabled={isSubmitting}\n                                        variant=\"contained\"\n                                        className={classes.btnWrapper}\n                                        fullWidth\n                                    >\n                                        {contact.id\n                                            ? `${i18n.t(\"contactModal.buttons.okEdit\")}`\n                                            : `${i18n.t(\"contactModal.buttons.okAdd\")}`}\n                                        {isSubmitting && (\n                                            <CircularProgress\n                                                size={24}\n                                                className={classes.buttonProgress}\n                                            />\n                                        )}\n                                    </Button>\n                                </Grid>\n                            </Grid>\n                        </Grid>\n                    </Grid>\n                </Form>\n            )}\n        </Formik>\n    )\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAElD,MAAO,GAAK,CAAAC,GAAG,KAAM,KAAK,CAC1B,OAASC,MAAM,CAAEC,IAAI,CAAEC,KAAK,KAAQ,QAAQ,CAC5C,OAASC,KAAK,KAAQ,gBAAgB,CAEtC,OAASC,UAAU,KAAQ,0BAA0B,CACrD,OAASC,KAAK,KAAQ,0BAA0B,CAChD,MAAO,CAAAC,MAAM,KAAM,0BAA0B,CAC7C,MAAO,CAAAC,SAAS,KAAM,6BAA6B,CACnD,MAAO,CAAAC,gBAAgB,KAAM,oCAAoC,CAEjE,OAASC,IAAI,KAAQ,sBAAsB,CAE3C,MAAO,CAAAC,GAAG,KAAM,oBAAoB,CACpC,MAAO,CAAAC,UAAU,KAAM,yBAAyB,CAChD,OAASC,IAAI,KAAQ,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEzC,KAAM,CAAAC,SAAS,CAAGb,UAAU,CAACc,KAAK,GAAK,CACtCC,IAAI,CAAE,CACLC,OAAO,CAAE,MAAM,CACfC,QAAQ,CAAE,MACX,CAAC,CACDC,SAAS,CAAE,CACVC,WAAW,CAAEL,KAAK,CAACM,OAAO,CAAC,CAAC,CAAC,CAC7BC,IAAI,CAAE,CACP,CAAC,CAEDC,SAAS,CAAE,CACVN,OAAO,CAAE,MAAM,CACfO,cAAc,CAAE,QAAQ,CACxBC,UAAU,CAAE,QACb,CAAC,CAEDC,UAAU,CAAE,CACXC,QAAQ,CAAE,UACX,CAAC,CAEDC,cAAc,CAAE,CACfC,KAAK,CAAE3B,KAAK,CAAC,GAAG,CAAC,CACjByB,QAAQ,CAAE,UAAU,CACpBG,GAAG,CAAE,KAAK,CACVC,IAAI,CAAE,KAAK,CACXC,SAAS,CAAE,CAAC,EAAE,CACdC,UAAU,CAAE,CAAC,EACd,CAAC,CAEEC,UAAU,CAAE,CACRC,eAAe,CAAE,KACrB,CACJ,CAAC,CAAC,CAAC,CAEH,KAAM,CAAAC,aAAa,CAAGxC,GAAG,CAACyC,MAAM,CAAC,CAAC,CAACC,KAAK,CAAC,CACxCC,IAAI,CAAE3C,GAAG,CAAC4C,MAAM,CAAC,CAAC,CAChBC,GAAG,CAAC,CAAC,CAAE,YAAY,CAAC,CACpBC,GAAG,CAAC,EAAE,CAAE,WAAW,CAAC,CACpBC,QAAQ,CAAC,UAAU,CAAC,CACtBC,MAAM,CAAEhD,GAAG,CAAC4C,MAAM,CAAC,CAAC,CAACC,GAAG,CAAC,CAAC,CAAE,YAAY,CAAC,CAACC,GAAG,CAAC,EAAE,CAAE,WAAW,CAAC,CAC9DG,KAAK,CAAEjD,GAAG,CAAC4C,MAAM,CAAC,CAAC,CAACK,KAAK,CAAC,eAAe,CAC1C,CAAC,CAAC,CAEF,MAAO,SAAS,CAAAC,WAAWA,CAAAC,IAAA,CAAwC,IAAtC,CAAEC,cAAc,CAAEC,MAAM,CAAEC,QAAS,CAAC,CAAAH,IAAA,CAChE,KAAM,CAAAI,OAAO,CAAGrC,SAAS,CAAC,CAAC,CAE3B,KAAM,CAACsC,OAAO,CAAEC,UAAU,CAAC,CAAG3D,QAAQ,CAACsD,cAAc,CAAC,CAEnDrD,SAAS,CAAC,IAAM,CACZ0D,UAAU,CAACL,cAAc,CAAC,CAC9B,CAAC,CAAE,CAACA,cAAc,CAAC,CAAC,CAEvB,KAAM,CAAAM,iBAAiB,CAAG,KAAM,CAAAC,MAAM,EAAI,CACzC,GAAI,CACH,GAAIH,OAAO,CAACI,EAAE,CAAE,CACf,KAAM,CAAAjD,GAAG,CAACkD,GAAG,cAAAC,MAAA,CAAcN,OAAO,CAACI,EAAE,EAAID,MAAM,CAAC,CACjD,CAAC,IAAM,CACN,KAAM,CAAEI,IAAK,CAAC,CAAG,KAAM,CAAApD,GAAG,CAACqD,IAAI,CAAC,WAAW,CAAEL,MAAM,CAAC,CACpD,GAAIN,MAAM,CAAE,CACXA,MAAM,CAACU,IAAI,CAAC,CACb,CACD,CACA3D,KAAK,CAAC6D,OAAO,CAACvD,IAAI,CAACwD,CAAC,CAAC,sBAAsB,CAAC,CAAC,CAC9C,CAAE,MAAOC,GAAG,CAAE,CACbvD,UAAU,CAACuD,GAAG,CAAC,CAChB,CACD,CAAC,CAEE,mBACIpD,IAAA,CAACd,MAAM,EACHmE,aAAa,CAAEZ,OAAQ,CACvBa,kBAAkB,CAAE,IAAK,CACzBC,gBAAgB,CAAE9B,aAAc,CAChC+B,QAAQ,CAAEA,CAACZ,MAAM,CAAEa,OAAO,GAAK,CAC3BC,UAAU,CAAC,IAAM,CACbf,iBAAiB,CAACC,MAAM,CAAC,CACzBa,OAAO,CAACE,aAAa,CAAC,KAAK,CAAC,CAChC,CAAC,CAAE,GAAG,CAAC,CACX,CAAE,CAAAC,QAAA,CAEDC,KAAA,MAAC,CAAEjB,MAAM,CAAEkB,MAAM,CAAEC,OAAO,CAAEC,YAAa,CAAC,CAAAH,KAAA,oBACvC7D,IAAA,CAACb,IAAI,EAAAyE,QAAA,cACD1D,KAAA,CAACJ,IAAI,EAACmE,SAAS,MAACvD,OAAO,CAAE,CAAE,CAAAkD,QAAA,eAMvB5D,IAAA,CAACF,IAAI,EAACoE,IAAI,MAACC,EAAE,CAAE,EAAG,CAAAP,QAAA,cACd5D,IAAA,CAACZ,KAAK,EACFgF,EAAE,CAAE3E,SAAU,CACd4E,KAAK,CAAE1E,IAAI,CAACwD,CAAC,CAAC,wBAAwB,CAAE,CACxCvB,IAAI,CAAC,MAAM,CACX0C,SAAS,MACTC,KAAK,CAAER,OAAO,CAACnC,IAAI,EAAI4C,OAAO,CAACV,MAAM,CAAClC,IAAI,CAAE,CAC5C6C,UAAU,CAAEV,OAAO,CAACnC,IAAI,EAAIkC,MAAM,CAAClC,IAAK,CACxC8C,OAAO,CAAC,UAAU,CAClBC,MAAM,CAAC,OAAO,CACdC,SAAS,CAAEpC,OAAO,CAAChC,SAAU,CAC7BqE,SAAS,MACZ,CAAC,CACA,CAAC,cACP7E,IAAA,CAACF,IAAI,EAACoE,IAAI,MAACC,EAAE,CAAE,EAAG,CAAAP,QAAA,cACd5D,IAAA,CAACZ,KAAK,EACFgF,EAAE,CAAE3E,SAAU,CACd4E,KAAK,CAAE1E,IAAI,CAACwD,CAAC,CAAC,0BAA0B,CAAE,CAC1CvB,IAAI,CAAC,QAAQ,CACb2C,KAAK,CAAER,OAAO,CAAC9B,MAAM,EAAIuC,OAAO,CAACV,MAAM,CAAC7B,MAAM,CAAE,CAChDwC,UAAU,CAAEV,OAAO,CAAC9B,MAAM,EAAI6B,MAAM,CAAC7B,MAAO,CAC5C6C,WAAW,CAAC,eAAe,CAC3BJ,OAAO,CAAC,UAAU,CAClBC,MAAM,CAAC,OAAO,CACdE,SAAS,MACZ,CAAC,CACA,CAAC,cACP7E,IAAA,CAACF,IAAI,EAACoE,IAAI,MAACC,EAAE,CAAE,EAAG,CAAAP,QAAA,cACd5D,IAAA,CAACZ,KAAK,EACFgF,EAAE,CAAE3E,SAAU,CACd4E,KAAK,CAAE1E,IAAI,CAACwD,CAAC,CAAC,yBAAyB,CAAE,CACzCvB,IAAI,CAAC,OAAO,CACZ2C,KAAK,CAAER,OAAO,CAAC7B,KAAK,EAAIsC,OAAO,CAACV,MAAM,CAAC5B,KAAK,CAAE,CAC9CuC,UAAU,CAAEV,OAAO,CAAC7B,KAAK,EAAI4B,MAAM,CAAC5B,KAAM,CAC1C4C,WAAW,CAAC,eAAe,CAC3BD,SAAS,MACTF,MAAM,CAAC,OAAO,CACdD,OAAO,CAAC,UAAU,CACrB,CAAC,CACA,CAAC,cACP1E,IAAA,CAACF,IAAI,EAACoE,IAAI,MAACC,EAAE,CAAE,EAAG,CAACzD,OAAO,CAAE,CAAE,CAAAkD,QAAA,cAC1B1D,KAAA,CAACJ,IAAI,EAACmE,SAAS,MAACvD,OAAO,CAAE,CAAE,CAAAkD,QAAA,eACvB5D,IAAA,CAACF,IAAI,EAACqE,EAAE,CAAE,CAAE,CAACD,IAAI,MAAAN,QAAA,cACb5D,IAAA,CAACR,MAAM,EACHuF,OAAO,CAAExC,QAAS,CAClBrB,KAAK,CAAC,WAAW,CACjB8D,QAAQ,CAAEhB,YAAa,CACvBU,OAAO,CAAC,UAAU,CAClBG,SAAS,MAAAjB,QAAA,CAERjE,IAAI,CAACwD,CAAC,CAAC,6BAA6B,CAAC,CAClC,CAAC,CACP,CAAC,cACPnD,IAAA,CAACF,IAAI,EAAC0C,OAAO,CAAEA,OAAO,CAACjB,UAAW,CAAC4C,EAAE,CAAE,CAAE,CAACD,IAAI,MAAAN,QAAA,cAC1C1D,KAAA,CAACV,MAAM,EACHyF,IAAI,CAAC,QAAQ,CACb/D,KAAK,CAAC,SAAS,CACf8D,QAAQ,CAAEhB,YAAa,CACvBU,OAAO,CAAC,WAAW,CACnBE,SAAS,CAAEpC,OAAO,CAACzB,UAAW,CAC9B8D,SAAS,MAAAjB,QAAA,EAERnB,OAAO,CAACI,EAAE,IAAAE,MAAA,CACFpD,IAAI,CAACwD,CAAC,CAAC,6BAA6B,CAAC,KAAAJ,MAAA,CACrCpD,IAAI,CAACwD,CAAC,CAAC,4BAA4B,CAAC,CAAE,CAC9Ca,YAAY,eACThE,IAAA,CAACN,gBAAgB,EACbwF,IAAI,CAAE,EAAG,CACTN,SAAS,CAAEpC,OAAO,CAACvB,cAAe,CACrC,CACJ,EACG,CAAC,CACP,CAAC,EACL,CAAC,CACL,CAAC,EACL,CAAC,CACL,CAAC,EACV,CACG,CAAC,CAEjB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}