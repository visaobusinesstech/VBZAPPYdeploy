{"ast":null,"code":"import _objectSpread from\"/home/deploy/atendechatop/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"/home/deploy/atendechatop/frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";const _excluded=[\"component\",\"isPrivate\"];import React,{useContext}from\"react\";import{Route as RouterRoute,Redirect}from\"react-router-dom\";import moment from\"moment\";import{AuthContext}from\"../context/Auth/AuthContext\";import BackdropLoading from\"../components/BackdropLoading\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const Route=_ref=>{let{component:Component,isPrivate=false}=_ref,rest=_objectWithoutProperties(_ref,_excluded);const{isAuth,loading,user}=useContext(AuthContext);// Verificar se a empresa está vencida\nconst isCompanyExpired=()=>{if(!user||!user.company||user.company.id===1){return false;// Empresa ID 1 nunca expira\n}const dueDate=user.company.dueDate;if(!dueDate)return false;// Comparar apenas as datas (sem horas) para permitir acesso até 23h59 do dia do vencimento\nconst hojeInicio=moment().startOf('day');const vencimentoInicio=moment(dueDate).startOf('day');// Empresa está vencida apenas após o dia do vencimento\nreturn hojeInicio.isAfter(vencimentoInicio,'day');};if(!isAuth&&isPrivate){return/*#__PURE__*/_jsxs(_Fragment,{children:[loading&&/*#__PURE__*/_jsx(BackdropLoading,{}),/*#__PURE__*/_jsx(Redirect,{to:{pathname:\"/login\",state:{from:rest.location}}})]});}if(isAuth&&!isPrivate){return/*#__PURE__*/_jsxs(_Fragment,{children:[loading&&/*#__PURE__*/_jsx(BackdropLoading,{}),/*#__PURE__*/_jsx(Redirect,{to:{pathname:\"/\",state:{from:rest.location}}}),\";\"]});}// Se está autenticado e a empresa está vencida\nif(isAuth&&isPrivate&&isCompanyExpired()){// Permite acesso apenas ao /financeiro-aberto\nif(rest.path!==\"/financeiro-aberto\"){return/*#__PURE__*/_jsxs(_Fragment,{children:[loading&&/*#__PURE__*/_jsx(BackdropLoading,{}),/*#__PURE__*/_jsx(Redirect,{to:{pathname:\"/financeiro-aberto\",state:{from:rest.location}}})]});}}return/*#__PURE__*/_jsxs(_Fragment,{children:[loading&&/*#__PURE__*/_jsx(BackdropLoading,{}),/*#__PURE__*/_jsx(RouterRoute,_objectSpread(_objectSpread({},rest),{},{component:Component}))]});};export default Route;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}