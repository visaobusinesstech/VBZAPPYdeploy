{"ast":null,"code":"import _objectSpread from\"/home/deploy/atendechatop/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useContext,useRef,useEffect}from\"react\";import{Dialog,DialogTitle,DialogActions,Button,TextField,Stack,Typography,Select,MenuItem,FormControl,InputLabel,Checkbox,IconButton,Box,Autocomplete,ListItemText,Divider,Alert,Chip}from\"@mui/material\";import{Add as AddIcon,Delete as DeleteIcon,Help as HelpIcon}from\"@mui/icons-material\";import{makeStyles}from\"@mui/styles\";import{green,red}from\"@mui/material/colors\";import{AuthContext}from\"../../context/Auth/AuthContext\";import{i18n}from\"../../translate/i18n\";import api from\"../../services/api\";import{toast}from\"react-toastify\";import{Fragment as _Fragment,jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const useStyles=makeStyles(theme=>({root:{display:\"flex\",flexWrap:\"wrap\"},textField:{marginRight:8,flex:1},btnWrapper:{position:\"relative\"},buttonProgress:{color:green[500],position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12},online:{color:green[500]},offline:{color:red[500]},phraseContainer:{border:\"1px solid #e0e0e0\",borderRadius:\"8px\",padding:\"16px\",marginBottom:\"8px\",backgroundColor:\"#fafafa\"},addButton:{alignSelf:'flex-start',marginTop:\"8px\"},whatsappChip:{margin:\"2px\"}}));const CampaignModalPhrase=_ref=>{let{open,onClose,FlowCampaignId,onSave}=_ref;const classes=useStyles();const isMounted=useRef(true);const{user}=useContext(AuthContext);const companyId=user===null||user===void 0?void 0:user.companyId;// Estados básicos\nconst[campaignEditable,setCampaignEditable]=useState(true);const[loading,setLoading]=useState(false);const[active,setActive]=useState(true);// Estados do formulário\nconst[dataItem,setDataItem]=useState({name:\"\"});const[dataItemError,setDataItemError]=useState({name:false,flowId:false,phrases:false,whatsappIds:false// NOVA VALIDAÇÃO\n});// Estado para múltiplas frases\nconst[phrases,setPhrases]=useState([{text:\"\",type:\"exact\"}]);// Estados para flows e whatsapp\nconst[flowSelected,setFlowSelected]=useState(null);const[flowsData,setFlowsData]=useState([]);const[flowsDataComplete,setFlowsDataComplete]=useState([]);// ALTERAÇÃO: Estado para múltiplas conexões\nconst[selectedWhatsapps,setSelectedWhatsapps]=useState([]);const[whatsApps,setWhatsApps]=useState([]);// Buscar flows\nconst getFlows=async()=>{try{const flows=await api.get(\"/flowbuilder\");if(isMounted.current){setFlowsDataComplete(flows.data.flows||[]);setFlowsData((flows.data.flows||[]).map(flow=>flow.name));}return flows.data.flows||[];}catch(error){console.error(\"Erro ao buscar flows:\",error);if(isMounted.current){toast.error(\"Erro ao carregar fluxos\");}return[];}};// Buscar WhatsApps\nconst getWhatsApps=async()=>{try{const response=await api.get(\"/whatsapp\");if(isMounted.current){setWhatsApps(response.data||[]);}}catch(error){console.error(\"Erro ao buscar WhatsApps:\",error);if(isMounted.current){toast.error(\"Erro ao carregar conexões\");}}};// Carregar dados se for edição\nconst detailsPhrase=async flows=>{if(!FlowCampaignId||!isMounted.current)return;setLoading(true);try{console.log(\"Buscando dados da campanha ID: \".concat(FlowCampaignId));const response=await api.get(\"/flowcampaign/\".concat(FlowCampaignId));console.log(\"Resposta da API detailsPhrase:\",response.data);const details=response.data;if(!isMounted.current)return;// Preencher nome da campanha\nsetDataItem({name:details.name||\"\"});// Preencher status\nsetActive(details.status!==false);// ALTERAÇÃO: Preencher WhatsApps selecionados (múltiplos)\nif(details.whatsappIds&&Array.isArray(details.whatsappIds)){setSelectedWhatsapps(details.whatsappIds);}else if(details.whatsappId){// Compatibilidade com formato antigo\nsetSelectedWhatsapps([details.whatsappId]);}// Processar frases\nlet parsedPhrases=[];try{if(details.phrase){if(typeof details.phrase==='string'){try{const parsed=JSON.parse(details.phrase);if(Array.isArray(parsed)){parsedPhrases=parsed;}else{parsedPhrases=[{text:details.phrase,type:'exact'}];}}catch(_unused){parsedPhrases=[{text:details.phrase,type:'exact'}];}}else if(Array.isArray(details.phrase)){parsedPhrases=details.phrase;}else if(typeof details.phrase==='object'){parsedPhrases=[details.phrase];}}parsedPhrases=parsedPhrases.map(phrase=>({text:phrase.text||phrase,type:phrase.type||'exact'}));if(parsedPhrases.length===0){parsedPhrases=[{text:\"\",type:\"exact\"}];}console.log(\"Frases processadas:\",parsedPhrases);setPhrases(parsedPhrases);}catch(error){console.error(\"Erro ao processar frases:\",error);setPhrases([{text:\"\",type:\"exact\"}]);}// Selecionar flow\nif(details.flowId&&flows&&flows.length>0){const foundFlow=flows.find(flow=>flow.id===details.flowId);if(foundFlow){console.log(\"Flow encontrado:\",foundFlow.name);setFlowSelected(foundFlow.name);}else{console.warn(\"Flow não encontrado para ID:\",details.flowId);}}}catch(error){console.error(\"Erro ao carregar detalhes:\",error);if(isMounted.current){toast.error(\"Erro ao carregar dados da campanha\");}}finally{if(isMounted.current){setLoading(false);}}};// Resetar estados quando modal abre/fecha\nconst resetForm=()=>{setDataItem({name:\"\"});setPhrases([{text:\"\",type:\"exact\"}]);setFlowSelected(null);setSelectedWhatsapps([]);// ALTERAÇÃO: Resetar array\nsetActive(true);clearErrors();};// Inicialização\nuseEffect(()=>{isMounted.current=true;const initData=async()=>{if(open){console.log(\"Modal aberto. FlowCampaignId:\",FlowCampaignId);resetForm();const flows=await getFlows();await getWhatsApps();if(FlowCampaignId){await detailsPhrase(flows);}}};initData();return()=>{isMounted.current=false;};},[open,FlowCampaignId]);// Função para adicionar nova frase\nconst addPhraseField=()=>{setPhrases(prevPhrases=>[...prevPhrases,{text:\"\",type:\"exact\"}]);};// Função para remover frase\nconst removePhraseField=index=>{if(phrases.length>1){setPhrases(prevPhrases=>prevPhrases.filter((_,i)=>i!==index));}};// Função para atualizar frase específica\nconst updatePhrase=(index,field,value)=>{setPhrases(prevPhrases=>{const newPhrases=[...prevPhrases];if(newPhrases[index]){newPhrases[index]=_objectSpread(_objectSpread({},newPhrases[index]),{},{[field]:value});}return newPhrases;});};// Validação\nconst validateForm=()=>{const errors={name:!dataItem.name.trim(),flowId:!flowSelected,phrases:phrases.length===0||phrases.some(p=>!p.text.trim()),whatsappIds:selectedWhatsapps.length===0// NOVA VALIDAÇÃO\n};setDataItemError(errors);return!Object.values(errors).some(error=>error);};// Limpar erros\nconst clearErrors=()=>{setDataItemError({name:false,flowId:false,phrases:false,whatsappIds:false});};// Handler para mudanças no campo nome\nconst handleNameChange=event=>{const value=event.target.value;setDataItem(prev=>_objectSpread(_objectSpread({},prev),{},{name:value}));if(value.trim()&&dataItemError.name){setDataItemError(prev=>_objectSpread(_objectSpread({},prev),{},{name:false}));}};// NOVA FUNÇÃO: Handler para mudanças na seleção de WhatsApps\nconst handleWhatsappChange=event=>{const value=event.target.value;setSelectedWhatsapps(typeof value==='string'?value.split(','):value);if(value.length>0&&dataItemError.whatsappIds){setDataItemError(prev=>_objectSpread(_objectSpread({},prev),{},{whatsappIds:false}));}};// Salvar\nconst handleSave=async()=>{if(!validateForm()){toast.error(\"Por favor, preencha todos os campos obrigatórios\");return;}setLoading(true);try{var _flowsDataComplete$fi;const flowIdSelected=(_flowsDataComplete$fi=flowsDataComplete.find(flow=>flow.name===flowSelected))===null||_flowsDataComplete$fi===void 0?void 0:_flowsDataComplete$fi.id;if(!flowIdSelected){toast.error(\"Fluxo selecionado não encontrado\");return;}// Filtrar frases vazias\nconst validPhrases=phrases.filter(p=>p.text.trim());const payload=_objectSpread({name:dataItem.name.trim(),flowId:flowIdSelected,phrases:validPhrases,whatsappIds:selectedWhatsapps,// ALTERAÇÃO: Enviar array\nstatus:active},FlowCampaignId&&{id:FlowCampaignId});console.log(\"Payload para salvar:\",payload);if(FlowCampaignId){await api.put(\"/flowcampaign\",payload);toast.success(\"Campanha atualizada com sucesso!\");}else{await api.post(\"/flowcampaign\",payload);toast.success(\"Campanha criada com sucesso!\");}onSave&&onSave();handleClose();}catch(error){console.error(\"Erro ao salvar:\",error);toast.error(\"Erro ao salvar campanha\");}finally{if(isMounted.current){setLoading(false);}}};// Fechar modal\nconst handleClose=()=>{if(!isMounted.current)return;resetForm();onClose();};// Verificação de segurança antes de renderizar\nif(!user||!companyId){return null;}return/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:handleClose,fullWidth:true,maxWidth:\"md\",scroll:\"paper\",disableEscapeKeyDown:loading,children:[/*#__PURE__*/_jsx(DialogTitle,{children:campaignEditable?/*#__PURE__*/_jsx(_Fragment,{children:FlowCampaignId?\"\".concat(i18n.t(\"campaignsPhrase.editCampaignWithFlowByPhrase\")):\"\".concat(i18n.t(\"campaignsPhrase.newCampaignWithFlowByPhrase\"))}):/*#__PURE__*/_jsx(_Fragment,{children:\"\".concat(i18n.t(\"campaigns.dialog.readonly\"))})}),!loading&&/*#__PURE__*/_jsxs(Stack,{sx:{padding:\"24px\",gap:\"20px\"},children:[/*#__PURE__*/_jsxs(Stack,{gap:1,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",fontWeight:500,children:i18n.t(\"campaignsPhrase.phraseTriggerName\")}),/*#__PURE__*/_jsx(TextField,{label:\"Nome da campanha\",name:\"name\",variant:\"outlined\",error:dataItemError.name,value:dataItem.name,margin:\"dense\",onChange:handleNameChange,className:classes.textField,style:{width:\"100%\"},helperText:dataItemError.name?\"Nome é obrigatório\":\"\",disabled:loading})]}),/*#__PURE__*/_jsxs(Stack,{gap:1,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",fontWeight:500,children:i18n.t(\"campaignsPhrase.chooseAStream\")}),/*#__PURE__*/_jsx(Autocomplete,{value:flowSelected,onChange:(event,newValue)=>{setFlowSelected(newValue);if(newValue&&dataItemError.flowId){setDataItemError(prev=>_objectSpread(_objectSpread({},prev),{},{flowId:false}));}},options:flowsData,disabled:loading,renderInput:params=>/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Selecione um fluxo\",variant:\"outlined\",error:dataItemError.flowId,helperText:dataItemError.flowId?\"Fluxo é obrigatório\":\"\"})),style:{width:\"100%\"}})]}),/*#__PURE__*/_jsxs(Stack,{gap:1,children:[/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",fontWeight:500,children:[i18n.t(\"campaignsPhrase.selectAConnection\"),\" (M\\xFAltiplas)\"]}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,variant:\"outlined\",error:dataItemError.whatsappIds,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Conex\\xF5es WhatsApp\"}),/*#__PURE__*/_jsx(Select,{multiple:true,value:selectedWhatsapps,onChange:handleWhatsappChange,label:\"Conex\\xF5es WhatsApp\",disabled:loading,renderValue:selected=>/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexWrap:'wrap',gap:0.5},children:selected.map(whatsappId=>{const whatsapp=whatsApps.find(w=>w.id===whatsappId);return/*#__PURE__*/_jsx(Chip,{label:whatsapp?whatsapp.name:\"ID: \".concat(whatsappId),className:classes.whatsappChip,size:\"small\",color:(whatsapp===null||whatsapp===void 0?void 0:whatsapp.status)===\"CONNECTED\"?\"success\":\"default\"},whatsappId);})}),children:(whatsApps===null||whatsApps===void 0?void 0:whatsApps.length)>0&&whatsApps.map(whatsapp=>/*#__PURE__*/_jsxs(MenuItem,{value:whatsapp.id,children:[/*#__PURE__*/_jsx(Checkbox,{checked:selectedWhatsapps.indexOf(whatsapp.id)>-1}),/*#__PURE__*/_jsx(ListItemText,{primary:/*#__PURE__*/_jsxs(Typography,{component:\"span\",style:{fontSize:14},children:[whatsapp.name,\" \\xA0\",/*#__PURE__*/_jsxs(\"span\",{className:whatsapp.status===\"CONNECTED\"?classes.online:classes.offline,children:[\"(\",whatsapp.status,\")\"]})]})})]},whatsapp.id))}),dataItemError.whatsappIds&&/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"error\",sx:{mt:1,ml:2},children:\"Pelo menos uma conex\\xE3o deve ser selecionada\"})]}),selectedWhatsapps.length>0&&/*#__PURE__*/_jsx(Alert,{severity:\"info\",sx:{mt:1},children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[/*#__PURE__*/_jsxs(\"strong\",{children:[selectedWhatsapps.length,\" conex\\xE3o(\\xF5es) selecionada(s):\"]}),/*#__PURE__*/_jsx(\"br\",{}),\"A campanha ser\\xE1 executada quando qualquer uma dessas conex\\xF5es receber mensagens que fa\\xE7am match com as frases configuradas.\"]})})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(Stack,{gap:2,children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",gap:1,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",fontWeight:500,children:\"Frases/Palavras que disparam o fluxo\"}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",children:/*#__PURE__*/_jsx(HelpIcon,{fontSize:\"small\"})})]}),/*#__PURE__*/_jsx(Alert,{severity:\"info\",sx:{mb:2},children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Correspond\\xEAncia Exata:\"}),\" A mensagem deve ser id\\xEAntica \\xE0 frase configurada.\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Correspond\\xEAncia Parcial:\"}),\" A frase pode estar contida em qualquer parte da mensagem.\"]})}),phrases.map((phrase,index)=>/*#__PURE__*/_jsx(Box,{className:classes.phraseContainer,children:/*#__PURE__*/_jsxs(Stack,{direction:\"row\",gap:2,alignItems:\"flex-start\",children:[/*#__PURE__*/_jsx(TextField,{label:\"Frase \".concat(index+1),value:phrase.text,onChange:e=>{updatePhrase(index,'text',e.target.value);if(e.target.value.trim()&&dataItemError.phrases){setDataItemError(prev=>_objectSpread(_objectSpread({},prev),{},{phrases:false}));}},variant:\"outlined\",fullWidth:true,placeholder:\"Digite a frase ou palavra-chave\",error:dataItemError.phrases&&!phrase.text.trim(),helperText:dataItemError.phrases&&!phrase.text.trim()?\"Frase é obrigatória\":\"\",disabled:loading}),/*#__PURE__*/_jsxs(FormControl,{sx:{minWidth:140},children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Tipo\"}),/*#__PURE__*/_jsxs(Select,{value:phrase.type,onChange:e=>updatePhrase(index,'type',e.target.value),label:\"Tipo\",disabled:loading,children:[/*#__PURE__*/_jsx(MenuItem,{value:\"exact\",children:\"Exata\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"partial\",children:\"Parcial\"})]})]}),phrases.length>1&&/*#__PURE__*/_jsx(IconButton,{onClick:()=>removePhraseField(index),color:\"error\",sx:{mt:1},disabled:loading,children:/*#__PURE__*/_jsx(DeleteIcon,{})})]})},index)),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(AddIcon,{}),onClick:addPhraseField,className:classes.addButton,disabled:loading,children:\"Adicionar Frase\"})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",gap:2,alignItems:\"center\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",fontWeight:500,children:i18n.t(\"campaignsPhrase.status\")}),/*#__PURE__*/_jsx(Checkbox,{checked:active,onChange:()=>setActive(prev=>!prev),disabled:loading}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:active?\"Ativa\":\"Inativa\"})]})]}),/*#__PURE__*/_jsxs(DialogActions,{sx:{padding:\"16px 24px\"},children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:handleClose,disabled:loading,children:i18n.t(\"campaignsPhrase.cancel\")}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:handleSave,disabled:loading,children:loading?\"Salvando...\":FlowCampaignId?\"Atualizar\":\"Criar\"})]})]});};export default CampaignModalPhrase;","map":{"version":3,"names":["React","useState","useContext","useRef","useEffect","Dialog","DialogTitle","DialogActions","Button","TextField","Stack","Typography","Select","MenuItem","FormControl","InputLabel","Checkbox","IconButton","Box","Autocomplete","ListItemText","Divider","Alert","Chip","Add","AddIcon","Delete","DeleteIcon","Help","HelpIcon","makeStyles","green","red","AuthContext","i18n","api","toast","Fragment","_Fragment","jsx","_jsx","jsxs","_jsxs","useStyles","theme","root","display","flexWrap","textField","marginRight","flex","btnWrapper","position","buttonProgress","color","top","left","marginTop","marginLeft","online","offline","phraseContainer","border","borderRadius","padding","marginBottom","backgroundColor","addButton","alignSelf","whatsappChip","margin","CampaignModalPhrase","_ref","open","onClose","FlowCampaignId","onSave","classes","isMounted","user","companyId","campaignEditable","setCampaignEditable","loading","setLoading","active","setActive","dataItem","setDataItem","name","dataItemError","setDataItemError","flowId","phrases","whatsappIds","setPhrases","text","type","flowSelected","setFlowSelected","flowsData","setFlowsData","flowsDataComplete","setFlowsDataComplete","selectedWhatsapps","setSelectedWhatsapps","whatsApps","setWhatsApps","getFlows","flows","get","current","data","map","flow","error","console","getWhatsApps","response","detailsPhrase","log","concat","details","status","Array","isArray","whatsappId","parsedPhrases","phrase","parsed","JSON","parse","_unused","length","foundFlow","find","id","warn","resetForm","clearErrors","initData","addPhraseField","prevPhrases","removePhraseField","index","filter","_","i","updatePhrase","field","value","newPhrases","_objectSpread","validateForm","errors","trim","some","p","Object","values","handleNameChange","event","target","prev","handleWhatsappChange","split","handleSave","_flowsDataComplete$fi","flowIdSelected","validPhrases","payload","put","success","post","handleClose","fullWidth","maxWidth","scroll","disableEscapeKeyDown","children","t","sx","gap","variant","fontWeight","label","onChange","className","style","width","helperText","disabled","newValue","options","renderInput","params","multiple","renderValue","selected","whatsapp","w","size","checked","indexOf","primary","component","fontSize","mt","ml","severity","alignItems","mb","direction","e","placeholder","minWidth","onClick","startIcon"],"sources":["/home/deploy/atendechatop/frontend/src/components/CampaignModalPhrase/index.js"],"sourcesContent":["import React, { useState, useContext, useRef, useEffect } from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogActions,\n  Button,\n  TextField,\n  Stack,\n  Typography,\n  Select,\n  MenuItem,\n  FormControl,\n  InputLabel,\n  Checkbox,\n  IconButton,\n  Box,\n  Autocomplete,\n  ListItemText,\n  Divider,\n  Alert,\n  Chip\n} from \"@mui/material\";\nimport {\n  Add as AddIcon,\n  Delete as DeleteIcon,\n  Help as HelpIcon\n} from \"@mui/icons-material\";\nimport { makeStyles } from \"@mui/styles\";\nimport { green, red } from \"@mui/material/colors\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\nimport { i18n } from \"../../translate/i18n\";\nimport api from \"../../services/api\";\nimport { toast } from \"react-toastify\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n  },\n  textField: {\n    marginRight: 8,\n    flex: 1,\n  },\n  btnWrapper: {\n    position: \"relative\",\n  },\n  buttonProgress: {\n    color: green[500],\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n    marginTop: -12,\n    marginLeft: -12,\n  },\n  online: {\n    color: green[500],\n  },\n  offline: {\n    color: red[500],\n  },\n  phraseContainer: {\n    border: \"1px solid #e0e0e0\",\n    borderRadius: \"8px\",\n    padding: \"16px\",\n    marginBottom: \"8px\",\n    backgroundColor: \"#fafafa\"\n  },\n  addButton: {\n    alignSelf: 'flex-start',\n    marginTop: \"8px\"\n  },\n  whatsappChip: {\n    margin: \"2px\"\n  }\n}));\n\nconst CampaignModalPhrase = ({ open, onClose, FlowCampaignId, onSave }) => {\n  const classes = useStyles();\n  const isMounted = useRef(true);\n  const { user } = useContext(AuthContext);\n  \n  const companyId = user?.companyId;\n\n  // Estados básicos\n  const [campaignEditable, setCampaignEditable] = useState(true);\n  const [loading, setLoading] = useState(false);\n  const [active, setActive] = useState(true);\n\n  // Estados do formulário\n  const [dataItem, setDataItem] = useState({\n    name: \"\",\n  });\n\n  const [dataItemError, setDataItemError] = useState({\n    name: false,\n    flowId: false,\n    phrases: false,\n    whatsappIds: false, // NOVA VALIDAÇÃO\n  });\n\n  // Estado para múltiplas frases\n  const [phrases, setPhrases] = useState([\n    { text: \"\", type: \"exact\" }\n  ]);\n\n  // Estados para flows e whatsapp\n  const [flowSelected, setFlowSelected] = useState(null);\n  const [flowsData, setFlowsData] = useState([]);\n  const [flowsDataComplete, setFlowsDataComplete] = useState([]);\n  \n  // ALTERAÇÃO: Estado para múltiplas conexões\n  const [selectedWhatsapps, setSelectedWhatsapps] = useState([]);\n  const [whatsApps, setWhatsApps] = useState([]);\n\n  // Buscar flows\n  const getFlows = async () => {\n    try {\n      const flows = await api.get(\"/flowbuilder\");\n      if (isMounted.current) {\n        setFlowsDataComplete(flows.data.flows || []);\n        setFlowsData((flows.data.flows || []).map((flow) => flow.name));\n      }\n      return flows.data.flows || [];\n    } catch (error) {\n      console.error(\"Erro ao buscar flows:\", error);\n      if (isMounted.current) {\n        toast.error(\"Erro ao carregar fluxos\");\n      }\n      return [];\n    }\n  };\n\n  // Buscar WhatsApps\n  const getWhatsApps = async () => {\n    try {\n      const response = await api.get(\"/whatsapp\");\n      if (isMounted.current) {\n        setWhatsApps(response.data || []);\n      }\n    } catch (error) {\n      console.error(\"Erro ao buscar WhatsApps:\", error);\n      if (isMounted.current) {\n        toast.error(\"Erro ao carregar conexões\");\n      }\n    }\n  };\n\n  // Carregar dados se for edição\n  const detailsPhrase = async (flows) => {\n    if (!FlowCampaignId || !isMounted.current) return;\n    \n    setLoading(true);\n    try {\n      console.log(`Buscando dados da campanha ID: ${FlowCampaignId}`);\n      const response = await api.get(`/flowcampaign/${FlowCampaignId}`);\n      console.log(\"Resposta da API detailsPhrase:\", response.data);\n      \n      const details = response.data;\n      \n      if (!isMounted.current) return;\n      \n      // Preencher nome da campanha\n      setDataItem({\n        name: details.name || \"\",\n      });\n      \n      // Preencher status\n      setActive(details.status !== false);\n      \n      // ALTERAÇÃO: Preencher WhatsApps selecionados (múltiplos)\n      if (details.whatsappIds && Array.isArray(details.whatsappIds)) {\n        setSelectedWhatsapps(details.whatsappIds);\n      } else if (details.whatsappId) {\n        // Compatibilidade com formato antigo\n        setSelectedWhatsapps([details.whatsappId]);\n      }\n      \n      // Processar frases\n      let parsedPhrases = [];\n      try {\n        if (details.phrase) {\n          if (typeof details.phrase === 'string') {\n            try {\n              const parsed = JSON.parse(details.phrase);\n              if (Array.isArray(parsed)) {\n                parsedPhrases = parsed;\n              } else {\n                parsedPhrases = [{ text: details.phrase, type: 'exact' }];\n              }\n            } catch {\n              parsedPhrases = [{ text: details.phrase, type: 'exact' }];\n            }\n          } else if (Array.isArray(details.phrase)) {\n            parsedPhrases = details.phrase;\n          } else if (typeof details.phrase === 'object') {\n            parsedPhrases = [details.phrase];\n          }\n        }\n        \n        parsedPhrases = parsedPhrases.map(phrase => ({\n          text: phrase.text || phrase,\n          type: phrase.type || 'exact'\n        }));\n        \n        if (parsedPhrases.length === 0) {\n          parsedPhrases = [{ text: \"\", type: \"exact\" }];\n        }\n        \n        console.log(\"Frases processadas:\", parsedPhrases);\n        setPhrases(parsedPhrases);\n      } catch (error) {\n        console.error(\"Erro ao processar frases:\", error);\n        setPhrases([{ text: \"\", type: \"exact\" }]);\n      }\n      \n      // Selecionar flow\n      if (details.flowId && flows && flows.length > 0) {\n        const foundFlow = flows.find((flow) => flow.id === details.flowId);\n        if (foundFlow) {\n          console.log(\"Flow encontrado:\", foundFlow.name);\n          setFlowSelected(foundFlow.name);\n        } else {\n          console.warn(\"Flow não encontrado para ID:\", details.flowId);\n        }\n      }\n      \n    } catch (error) {\n      console.error(\"Erro ao carregar detalhes:\", error);\n      if (isMounted.current) {\n        toast.error(\"Erro ao carregar dados da campanha\");\n      }\n    } finally {\n      if (isMounted.current) {\n        setLoading(false);\n      }\n    }\n  };\n\n  // Resetar estados quando modal abre/fecha\n  const resetForm = () => {\n    setDataItem({ name: \"\" });\n    setPhrases([{ text: \"\", type: \"exact\" }]);\n    setFlowSelected(null);\n    setSelectedWhatsapps([]); // ALTERAÇÃO: Resetar array\n    setActive(true);\n    clearErrors();\n  };\n\n  // Inicialização\n  useEffect(() => {\n    isMounted.current = true;\n    \n    const initData = async () => {\n      if (open) {\n        console.log(\"Modal aberto. FlowCampaignId:\", FlowCampaignId);\n        \n        resetForm();\n        \n        const flows = await getFlows();\n        await getWhatsApps();\n        \n        if (FlowCampaignId) {\n          await detailsPhrase(flows);\n        }\n      }\n    };\n    \n    initData();\n\n    return () => {\n      isMounted.current = false;\n    };\n  }, [open, FlowCampaignId]);\n\n  // Função para adicionar nova frase\n  const addPhraseField = () => {\n    setPhrases(prevPhrases => [...prevPhrases, { text: \"\", type: \"exact\" }]);\n  };\n\n  // Função para remover frase\n  const removePhraseField = (index) => {\n    if (phrases.length > 1) {\n      setPhrases(prevPhrases => prevPhrases.filter((_, i) => i !== index));\n    }\n  };\n\n  // Função para atualizar frase específica\n  const updatePhrase = (index, field, value) => {\n    setPhrases(prevPhrases => {\n      const newPhrases = [...prevPhrases];\n      if (newPhrases[index]) {\n        newPhrases[index] = { ...newPhrases[index], [field]: value };\n      }\n      return newPhrases;\n    });\n  };\n\n  // Validação\n  const validateForm = () => {\n    const errors = {\n      name: !dataItem.name.trim(),\n      flowId: !flowSelected,\n      phrases: phrases.length === 0 || phrases.some(p => !p.text.trim()),\n      whatsappIds: selectedWhatsapps.length === 0 // NOVA VALIDAÇÃO\n    };\n    \n    setDataItemError(errors);\n    return !Object.values(errors).some(error => error);\n  };\n\n  // Limpar erros\n  const clearErrors = () => {\n    setDataItemError({\n      name: false,\n      flowId: false,\n      phrases: false,\n      whatsappIds: false,\n    });\n  };\n\n  // Handler para mudanças no campo nome\n  const handleNameChange = (event) => {\n    const value = event.target.value;\n    setDataItem(prev => ({ ...prev, name: value }));\n    \n    if (value.trim() && dataItemError.name) {\n      setDataItemError(prev => ({ ...prev, name: false }));\n    }\n  };\n\n  // NOVA FUNÇÃO: Handler para mudanças na seleção de WhatsApps\n  const handleWhatsappChange = (event) => {\n    const value = event.target.value;\n    setSelectedWhatsapps(typeof value === 'string' ? value.split(',') : value);\n    \n    if (value.length > 0 && dataItemError.whatsappIds) {\n      setDataItemError(prev => ({ ...prev, whatsappIds: false }));\n    }\n  };\n\n  // Salvar\n  const handleSave = async () => {\n    if (!validateForm()) {\n      toast.error(\"Por favor, preencha todos os campos obrigatórios\");\n      return;\n    }\n\n    setLoading(true);\n    \n    try {\n      const flowIdSelected = flowsDataComplete.find(flow => flow.name === flowSelected)?.id;\n      \n      if (!flowIdSelected) {\n        toast.error(\"Fluxo selecionado não encontrado\");\n        return;\n      }\n\n      // Filtrar frases vazias\n      const validPhrases = phrases.filter(p => p.text.trim());\n      \n      const payload = {\n        name: dataItem.name.trim(),\n        flowId: flowIdSelected,\n        phrases: validPhrases,\n        whatsappIds: selectedWhatsapps, // ALTERAÇÃO: Enviar array\n        status: active,\n        ...(FlowCampaignId && { id: FlowCampaignId })\n      };\n\n      console.log(\"Payload para salvar:\", payload);\n\n      if (FlowCampaignId) {\n        await api.put(\"/flowcampaign\", payload);\n        toast.success(\"Campanha atualizada com sucesso!\");\n      } else {\n        await api.post(\"/flowcampaign\", payload);\n        toast.success(\"Campanha criada com sucesso!\");\n      }\n\n      onSave && onSave();\n      handleClose();\n      \n    } catch (error) {\n      console.error(\"Erro ao salvar:\", error);\n      toast.error(\"Erro ao salvar campanha\");\n    } finally {\n      if (isMounted.current) {\n        setLoading(false);\n      }\n    }\n  };\n\n  // Fechar modal\n  const handleClose = () => {\n    if (!isMounted.current) return;\n    \n    resetForm();\n    onClose();\n  };\n\n  // Verificação de segurança antes de renderizar\n  if (!user || !companyId) {\n    return null;\n  }\n\n  return (\n    <Dialog\n      open={open}\n      onClose={handleClose}\n      fullWidth\n      maxWidth=\"md\"\n      scroll=\"paper\"\n      disableEscapeKeyDown={loading}\n    >\n      <DialogTitle>\n        {campaignEditable ? (\n          <>\n            {FlowCampaignId\n              ? `${i18n.t(\"campaignsPhrase.editCampaignWithFlowByPhrase\")}`\n              : `${i18n.t(\"campaignsPhrase.newCampaignWithFlowByPhrase\")}`}\n          </>\n        ) : (\n          <>{`${i18n.t(\"campaigns.dialog.readonly\")}`}</>\n        )}\n      </DialogTitle>\n\n      {!loading && (\n        <Stack sx={{ padding: \"24px\", gap: \"20px\" }}>\n          {/* Nome da Campanha */}\n          <Stack gap={1}>\n            <Typography variant=\"subtitle1\" fontWeight={500}>\n              {i18n.t(\"campaignsPhrase.phraseTriggerName\")}\n            </Typography>\n            <TextField\n              label=\"Nome da campanha\"\n              name=\"name\"\n              variant=\"outlined\"\n              error={dataItemError.name}\n              value={dataItem.name}\n              margin=\"dense\"\n              onChange={handleNameChange}\n              className={classes.textField}\n              style={{ width: \"100%\" }}\n              helperText={dataItemError.name ? \"Nome é obrigatório\" : \"\"}\n              disabled={loading}\n            />\n          </Stack>\n\n          {/* Seleção do Fluxo */}\n          <Stack gap={1}>\n            <Typography variant=\"subtitle1\" fontWeight={500}>\n              {i18n.t(\"campaignsPhrase.chooseAStream\")}\n            </Typography>\n            <Autocomplete\n              value={flowSelected}\n              onChange={(event, newValue) => {\n                setFlowSelected(newValue);\n                if (newValue && dataItemError.flowId) {\n                  setDataItemError(prev => ({ ...prev, flowId: false }));\n                }\n              }}\n              options={flowsData}\n              disabled={loading}\n              renderInput={(params) => (\n                <TextField\n                  {...params}\n                  label=\"Selecione um fluxo\"\n                  variant=\"outlined\"\n                  error={dataItemError.flowId}\n                  helperText={dataItemError.flowId ? \"Fluxo é obrigatório\" : \"\"}\n                />\n              )}\n              style={{ width: \"100%\" }}\n            />\n          </Stack>\n\n          {/* ALTERAÇÃO: Seleção de Múltiplas Conexões WhatsApp */}\n          <Stack gap={1}>\n            <Typography variant=\"subtitle1\" fontWeight={500}>\n              {i18n.t(\"campaignsPhrase.selectAConnection\")} (Múltiplas)\n            </Typography>\n            <FormControl fullWidth variant=\"outlined\" error={dataItemError.whatsappIds}>\n              <InputLabel>Conexões WhatsApp</InputLabel>\n              <Select\n                multiple\n                value={selectedWhatsapps}\n                onChange={handleWhatsappChange}\n                label=\"Conexões WhatsApp\"\n                disabled={loading}\n                renderValue={(selected) => (\n                  <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\n                    {selected.map((whatsappId) => {\n                      const whatsapp = whatsApps.find(w => w.id === whatsappId);\n                      return (\n                        <Chip \n                          key={whatsappId} \n                          label={whatsapp ? whatsapp.name : `ID: ${whatsappId}`}\n                          className={classes.whatsappChip}\n                          size=\"small\"\n                          color={whatsapp?.status === \"CONNECTED\" ? \"success\" : \"default\"}\n                        />\n                      );\n                    })}\n                  </Box>\n                )}\n              >\n                {whatsApps?.length > 0 &&\n                  whatsApps.map((whatsapp) => (\n                    <MenuItem key={whatsapp.id} value={whatsapp.id}>\n                      <Checkbox checked={selectedWhatsapps.indexOf(whatsapp.id) > -1} />\n                      <ListItemText\n                        primary={\n                          <Typography component=\"span\" style={{ fontSize: 14 }}>\n                            {whatsapp.name} &nbsp;\n                            <span\n                              className={\n                                whatsapp.status === \"CONNECTED\"\n                                  ? classes.online\n                                  : classes.offline\n                              }\n                            >\n                              ({whatsapp.status})\n                            </span>\n                          </Typography>\n                        }\n                      />\n                    </MenuItem>\n                  ))}\n              </Select>\n              {dataItemError.whatsappIds && (\n                <Typography variant=\"caption\" color=\"error\" sx={{ mt: 1, ml: 2 }}>\n                  Pelo menos uma conexão deve ser selecionada\n                </Typography>\n              )}\n            </FormControl>\n            \n            {/* Informação sobre conexões selecionadas */}\n            {selectedWhatsapps.length > 0 && (\n              <Alert severity=\"info\" sx={{ mt: 1 }}>\n                <Typography variant=\"body2\">\n                  <strong>{selectedWhatsapps.length} conexão(ões) selecionada(s):</strong><br/>\n                  A campanha será executada quando qualquer uma dessas conexões receber mensagens que façam match com as frases configuradas.\n                </Typography>\n              </Alert>\n            )}\n          </Stack>\n\n          <Divider />\n\n          {/* Seção de Frases Múltiplas */}\n          <Stack gap={2}>\n            <Box display=\"flex\" alignItems=\"center\" gap={1}>\n              <Typography variant=\"subtitle1\" fontWeight={500}>\n                Frases/Palavras que disparam o fluxo\n              </Typography>\n              <IconButton size=\"small\">\n                <HelpIcon fontSize=\"small\" />\n              </IconButton>\n            </Box>\n            \n            <Alert severity=\"info\" sx={{ mb: 2 }}>\n              <Typography variant=\"body2\">\n                <strong>Correspondência Exata:</strong> A mensagem deve ser idêntica à frase configurada.<br/>\n                <strong>Correspondência Parcial:</strong> A frase pode estar contida em qualquer parte da mensagem.\n              </Typography>\n            </Alert>\n\n            {phrases.map((phrase, index) => (\n              <Box key={index} className={classes.phraseContainer}>\n                <Stack direction=\"row\" gap={2} alignItems=\"flex-start\">\n                  <TextField\n                    label={`Frase ${index + 1}`}\n                    value={phrase.text}\n                    onChange={(e) => {\n                      updatePhrase(index, 'text', e.target.value);\n                      if (e.target.value.trim() && dataItemError.phrases) {\n                        setDataItemError(prev => ({ ...prev, phrases: false }));\n                      }\n                    }}\n                    variant=\"outlined\"\n                    fullWidth\n                    placeholder=\"Digite a frase ou palavra-chave\"\n                    error={dataItemError.phrases && !phrase.text.trim()}\n                    helperText={\n                      dataItemError.phrases && !phrase.text.trim() \n                        ? \"Frase é obrigatória\" \n                        : \"\"\n                    }\n                    disabled={loading}\n                  />\n                  \n                  <FormControl sx={{ minWidth: 140 }}>\n                    <InputLabel>Tipo</InputLabel>\n                    <Select\n                      value={phrase.type}\n                      onChange={(e) => updatePhrase(index, 'type', e.target.value)}\n                      label=\"Tipo\"\n                      disabled={loading}\n                    >\n                      <MenuItem value=\"exact\">Exata</MenuItem>\n                      <MenuItem value=\"partial\">Parcial</MenuItem>\n                    </Select>\n                  </FormControl>\n                  \n                  {phrases.length > 1 && (\n                    <IconButton \n                      onClick={() => removePhraseField(index)}\n                      color=\"error\"\n                      sx={{ mt: 1 }}\n                      disabled={loading}\n                    >\n                      <DeleteIcon />\n                    </IconButton>\n                  )}\n                </Stack>\n              </Box>\n            ))}\n            \n            <Button\n              variant=\"outlined\"\n              startIcon={<AddIcon />}\n              onClick={addPhraseField}\n              className={classes.addButton}\n              disabled={loading}\n            >\n              Adicionar Frase\n            </Button>\n          </Stack>\n\n          <Divider />\n\n          {/* Status */}\n          <Stack direction=\"row\" gap={2} alignItems=\"center\">\n            <Typography variant=\"subtitle1\" fontWeight={500}>\n              {i18n.t(\"campaignsPhrase.status\")}\n            </Typography>\n            <Checkbox\n              checked={active}\n              onChange={() => setActive(prev => !prev)}\n              disabled={loading}\n            />\n            <Typography variant=\"body2\" color=\"textSecondary\">\n              {active ? \"Ativa\" : \"Inativa\"}\n            </Typography>\n          </Stack>\n        </Stack>\n      )}\n\n      <DialogActions sx={{ padding: \"16px 24px\" }}>\n        <Button\n          variant=\"outlined\"\n          onClick={handleClose}\n          disabled={loading}\n        >\n          {i18n.t(\"campaignsPhrase.cancel\")}\n        </Button>\n        \n        <Button\n          variant=\"contained\"\n          onClick={handleSave}\n          disabled={loading}\n        >\n          {loading ? \"Salvando...\" : FlowCampaignId ? \"Atualizar\" : \"Criar\"}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default CampaignModalPhrase;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}