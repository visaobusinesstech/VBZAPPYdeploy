{"ast":null,"code":"import _objectSpread from\"/home/deploy/atendechatop/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/pages/Contacts/index.js (versão corrigida)\nimport React,{useState,useEffect,useReducer,useContext,useRef}from\"react\";import{toast}from\"react-toastify\";import{useHistory}from\"react-router-dom\";import{makeStyles}from\"@material-ui/core/styles\";import Table from\"@material-ui/core/Table\";import TableBody from\"@material-ui/core/TableBody\";import TableCell from\"@material-ui/core/TableCell\";import TableHead from\"@material-ui/core/TableHead\";import TableRow from\"@material-ui/core/TableRow\";import Paper from\"@material-ui/core/Paper\";import Button from\"@material-ui/core/Button\";import Avatar from\"@material-ui/core/Avatar\";import Dialog from\"@material-ui/core/Dialog\";import DialogContent from\"@material-ui/core/DialogContent\";import DialogTitle from\"@material-ui/core/DialogTitle\";import{Facebook,Instagram,WhatsApp,Close}from\"@material-ui/icons\";import SearchIcon from\"@material-ui/icons/Search\";import TextField from\"@material-ui/core/TextField\";import InputAdornment from\"@material-ui/core/InputAdornment\";import IconButton from\"@material-ui/core/IconButton\";import DeleteOutlineIcon from\"@material-ui/icons/DeleteOutline\";import EditIcon from\"@material-ui/icons/Edit\";import CheckCircleIcon from\"@material-ui/icons/CheckCircle\";import CancelIcon from\"@material-ui/icons/Cancel\";import BlockIcon from\"@material-ui/icons/Block\";import Checkbox from\"@material-ui/core/Checkbox\";import Toolbar from\"@material-ui/core/Toolbar\";import Typography from\"@material-ui/core/Typography\";import Tooltip from\"@material-ui/core/Tooltip\";import{alpha}from\"@material-ui/core/styles\";import api from\"../../services/api\";import TableRowSkeleton from\"../../components/TableRowSkeleton\";import ContactModal from\"../../components/ContactModal\";import ConfirmationModal from\"../../components/ConfirmationModal/\";import ContactDeleteConfirmModal from\"../../components/ContactDeleteConfirmModal\";import{i18n}from\"../../translate/i18n\";import MainHeader from\"../../components/MainHeader\";import Title from\"../../components/Title\";import MainHeaderButtonsWrapper from\"../../components/MainHeaderButtonsWrapper\";import MainContainer from\"../../components/MainContainer\";import toastError from\"../../errors/toastError\";import{AuthContext}from\"../../context/Auth/AuthContext\";import{Can}from\"../../components/Can\";import NewTicketModal from\"../../components/NewTicketModal\";import{TagsFilter}from\"../../components/TagsFilter\";import PopupState,{bindTrigger,bindMenu}from\"material-ui-popup-state\";import formatSerializedId from\"../../utils/formatSerializedId\";import{v4 as uuidv4}from\"uuid\";import{ArrowDropDown,Backup,ContactPhone,DeleteSweep}from\"@material-ui/icons\";import{Menu,MenuItem}from\"@material-ui/core\";import ContactImportWpModal from\"../../components/ContactImportWpModal\";import useCompanySettings from\"../../hooks/useSettings/companySettings\";import{TicketsContext}from\"../../context/Tickets/TicketsContext\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const reducer=(state,action)=>{if(action.type===\"LOAD_CONTACTS\"){const contacts=action.payload;const newContacts=[];contacts.forEach(contact=>{const contactIndex=state.findIndex(c=>c.id===contact.id);if(contactIndex!==-1){state[contactIndex]=contact;}else{newContacts.push(contact);}});return[...state,...newContacts];}if(action.type===\"UPDATE_CONTACTS\"){const contact=action.payload;const contactIndex=state.findIndex(c=>c.id===contact.id);if(contactIndex!==-1){state[contactIndex]=contact;return[...state];}else{return[contact,...state];}}if(action.type===\"DELETE_CONTACT\"){const contactId=action.payload;const contactIndex=state.findIndex(c=>c.id===contactId);if(contactIndex!==-1){state.splice(contactIndex,1);}return[...state];}if(action.type===\"BULK_DELETE_CONTACTS\"){const contactIds=action.payload;return state.filter(contact=>!contactIds.includes(contact.id));}if(action.type===\"DELETE_ALL_CONTACTS\"){const{excludeIds=[]}=action.payload;return state.filter(contact=>excludeIds.includes(contact.id));}if(action.type===\"RESET\"){return[];}if(action.type===\"SET_TOTAL_COUNT\"){// Não altera o estado, mas permite rastrear o total\nreturn state;}};const useStyles=makeStyles(theme=>({mainPaper:_objectSpread({flex:1,padding:theme.spacing(1),overflowY:\"scroll\"},theme.scrollbarStyles),avatarCell:{width:'60px',padding:theme.spacing(1)},idCell:{width:'80px'},checkboxCell:{width:'48px',padding:theme.spacing(0,1)},clickableAvatar:{cursor:'pointer',transition:'transform 0.2s ease-in-out','&:hover':{transform:'scale(1.1)'}},imageDialog:{'& .MuiDialog-paper':{maxWidth:'500px',maxHeight:'500px'}},dialogTitle:{display:'flex',justifyContent:'space-between',alignItems:'center',paddingBottom:theme.spacing(1)},profileImage:{width:'100%',height:'auto',maxWidth:'400px',maxHeight:'400px',objectFit:'contain'},toolbar:{paddingLeft:theme.spacing(2),paddingRight:theme.spacing(1),backgroundColor:alpha(theme.palette.primary.main,0.12),minHeight:48},toolbarHighlight:{backgroundColor:alpha(theme.palette.primary.main,0.25)},toolbarTitle:{flex:'1 1 100%',fontWeight:600},bulkActions:{display:'flex',gap:theme.spacing(1)}}));const Contacts=()=>{const classes=useStyles();const history=useHistory();const{user,socket}=useContext(AuthContext);const[loading,setLoading]=useState(false);const[pageNumber,setPageNumber]=useState(1);const[searchParam,setSearchParam]=useState(\"\");const[contacts,dispatch]=useReducer(reducer,[]);const[selectedContactId,setSelectedContactId]=useState(null);const[contactModalOpen,setContactModalOpen]=useState(false);const[totalContactsCount,setTotalContactsCount]=useState(0);// Estados para seleção múltipla\nconst[selectedContacts,setSelectedContacts]=useState(new Set());const[selectAllMode,setSelectAllMode]=useState(false);// true = todos da empresa, false = apenas da página\nconst[importContactModalOpen,setImportContactModalOpen]=useState(false);const[deletingContact,setDeletingContact]=useState(null);const[ImportContacts,setImportContacts]=useState(null);const[blockingContact,setBlockingContact]=useState(null);const[unBlockingContact,setUnBlockingContact]=useState(null);const[confirmOpen,setConfirmOpen]=useState(false);const[exportContact,setExportContact]=useState(false);const[confirmChatsOpen,setConfirmChatsOpen]=useState(false);const[hasMore,setHasMore]=useState(false);const[newTicketModalOpen,setNewTicketModalOpen]=useState(false);const[contactTicket,setContactTicket]=useState({});// Estados para exclusão múltipla com confirmação tipada\nconst[deleteConfirmModalOpen,setDeleteConfirmModalOpen]=useState(false);const[deleteType,setDeleteType]=useState('');// 'selected' ou 'all'\nconst fileUploadRef=useRef(null);const[selectedTags,setSelectedTags]=useState([]);const{setCurrentTicket}=useContext(TicketsContext);// Estados para o modal de imagem\nconst[imageModalOpen,setImageModalOpen]=useState(false);const[selectedImage,setSelectedImage]=useState('');const[selectedContactName,setSelectedContactName]=useState('');const{getAll:getAllSettings}=useCompanySettings();const[hideNum,setHideNum]=useState(false);const[enableLGPD,setEnableLGPD]=useState(false);useEffect(()=>{async function fetchData(){const settingList=await getAllSettings(user.companyId);for(const[key,value]of Object.entries(settingList)){if(key===\"enableLGPD\")setEnableLGPD(value===\"enabled\");if(key===\"lgpdHideNumber\")setHideNum(value===\"enabled\");}}fetchData();},[]);// Funções para seleção múltipla CORRIGIDAS\nconst handleSelectContact=contactId=>{const newSelected=new Set(selectedContacts);if(newSelected.has(contactId)){newSelected.delete(contactId);}else{newSelected.add(contactId);}setSelectedContacts(newSelected);setSelectAllMode(false);// Desativa modo \"todos da empresa\" quando seleciona individualmente\n};const handleSelectAllContacts=()=>{if(selectAllMode){// Se já está em modo \"todos\", desmarcar tudo\nsetSelectedContacts(new Set());setSelectAllMode(false);}else{// Verificar se todos da página atual estão selecionados\nconst currentPageIds=contacts.map(contact=>contact.id);const allCurrentSelected=currentPageIds.every(id=>selectedContacts.has(id));if(allCurrentSelected&&selectedContacts.size===currentPageIds.length){// Se todos da página estão selecionados, ativar modo \"todos da empresa\"\nsetSelectAllMode(true);setSelectedContacts(new Set());// Limpar seleção individual\n}else{// Selecionar todos da página atual\nsetSelectedContacts(new Set(currentPageIds));setSelectAllMode(false);}}};// Limpar seleção quando contatos mudam\nuseEffect(()=>{setSelectedContacts(new Set());setSelectAllMode(false);},[searchParam,selectedTags]);// Função para obter contagem correta\nconst getSelectedCount=()=>{if(selectAllMode){return totalContactsCount;}return selectedContacts.size;};// Função para obter texto do botão\nconst getSelectionButtonText=()=>{if(selectAllMode){return\"Excluir Todos (\".concat(totalContactsCount,\")\");}if(selectedContacts.size>0){return\"Excluir Selecionados (\".concat(selectedContacts.size,\")\");}return\"Excluir\";};// Funções para exclusão múltipla CORRIGIDAS\nconst handleBulkDeleteClick=()=>{if(selectAllMode){setDeleteType('all');}else if(selectedContacts.size>0){setDeleteType('selected');}else{toast.warning(\"Selecione pelo menos um contato para excluir\");return;}setDeleteConfirmModalOpen(true);};const handleBulkDeleteConfirm=async()=>{try{if(deleteType==='all'){await api.delete(\"/contacts/all\",{data:{confirmation:\"DELETE_ALL_CONTACTS\",excludeIds:[]}});toast.success(\"Todos os \".concat(totalContactsCount,\" contatos foram exclu\\xEDdos\"));}else{const contactIds=Array.from(selectedContacts);await api.post(\"/contacts/bulk-delete\",{contactIds});toast.success(\"\".concat(contactIds.length,\" contatos exclu\\xEDdos com sucesso\"));}// Resetar seleções\nsetSelectedContacts(new Set());setSelectAllMode(false);// Atualizar lista\nsetSearchParam(\"\");setPageNumber(1);}catch(err){toastError(err);}finally{setDeleteConfirmModalOpen(false);setDeleteType('');}};const handleDeleteAllClick=()=>{setDeleteType('all');setDeleteConfirmModalOpen(true);};// Função para abrir modal da imagem\nconst handleOpenImageModal=(imageUrl,contactName)=>{setSelectedImage(imageUrl);setSelectedContactName(contactName);setImageModalOpen(true);};// Função para fechar modal da imagem\nconst handleCloseImageModal=()=>{setImageModalOpen(false);setSelectedImage('');setSelectedContactName('');};const handleImportExcel=async()=>{try{const formData=new FormData();formData.append(\"file\",fileUploadRef.current.files[0]);await api.request({url:\"/contacts/upload\",method:\"POST\",data:formData});history.go(0);}catch(err){toastError(err);}};useEffect(()=>{dispatch({type:\"RESET\"});setPageNumber(1);},[searchParam,selectedTags]);useEffect(()=>{setLoading(true);const delayDebounceFn=setTimeout(()=>{const fetchContacts=async()=>{try{const{data}=await api.get(\"/contacts/\",{params:{searchParam,pageNumber,contactTag:JSON.stringify(selectedTags)}});dispatch({type:\"LOAD_CONTACTS\",payload:data.contacts});setHasMore(data.hasMore);setTotalContactsCount(data.count);// Armazenar contagem total\nsetLoading(false);}catch(err){toastError(err);}};fetchContacts();},500);return()=>clearTimeout(delayDebounceFn);},[searchParam,pageNumber,selectedTags]);useEffect(()=>{const companyId=user.companyId;const onContactEvent=data=>{if(data.action===\"update\"||data.action===\"create\"){dispatch({type:\"UPDATE_CONTACTS\",payload:data.contact});}if(data.action===\"delete\"){dispatch({type:\"DELETE_CONTACT\",payload:+data.contactId});setTotalContactsCount(prev=>Math.max(0,prev-1));}if(data.action===\"bulk-delete\"){dispatch({type:\"BULK_DELETE_CONTACTS\",payload:data.contactIds});setTotalContactsCount(prev=>Math.max(0,prev-data.contactIds.length));}if(data.action===\"delete-all\"){dispatch({type:\"DELETE_ALL_CONTACTS\",payload:{excludeIds:data.excludeIds}});setTotalContactsCount(data.excludeIds.length);}};socket.on(\"company-\".concat(companyId,\"-contact\"),onContactEvent);return()=>{socket.off(\"company-\".concat(companyId,\"-contact\"),onContactEvent);};},[socket]);const handleSelectTicket=ticket=>{const code=uuidv4();const{id,uuid}=ticket;setCurrentTicket({id,uuid,code});};const handleCloseOrOpenTicket=ticket=>{setNewTicketModalOpen(false);if(ticket!==undefined&&ticket.uuid!==undefined){handleSelectTicket(ticket);history.push(\"/tickets/\".concat(ticket.uuid));}};const handleSelectedTags=selecteds=>{const tags=selecteds.map(t=>t.id);setSelectedTags(tags);};const handleSearch=event=>{setSearchParam(event.target.value.toLowerCase());};const handleOpenContactModal=()=>{setSelectedContactId(null);setContactModalOpen(true);};const handleCloseContactModal=()=>{setSelectedContactId(null);setContactModalOpen(false);};const hadleEditContact=contactId=>{setSelectedContactId(contactId);setContactModalOpen(true);};const handleDeleteContact=async contactId=>{try{await api.delete(\"/contacts/\".concat(contactId));toast.success(i18n.t(\"contacts.toasts.deleted\"));}catch(err){toastError(err);}setDeletingContact(null);setSearchParam(\"\");setPageNumber(1);};const handleBlockContact=async contactId=>{try{await api.put(\"/contacts/block/\".concat(contactId),{active:false});toast.success(\"Contato bloqueado\");}catch(err){toastError(err);}setDeletingContact(null);setSearchParam(\"\");setPageNumber(1);setBlockingContact(null);};const handleUnBlockContact=async contactId=>{try{await api.put(\"/contacts/block/\".concat(contactId),{active:true});toast.success(\"Contato desbloqueado\");}catch(err){toastError(err);}setDeletingContact(null);setSearchParam(\"\");setPageNumber(1);setUnBlockingContact(null);};const handleimportContact=async()=>{try{await api.post(\"/contacts/import\");history.go(0);setImportContacts(false);}catch(err){toastError(err);setImportContacts(false);}};const handleimportChats=async()=>{try{await api.post(\"/contacts/import/chats\");history.go(0);}catch(err){toastError(err);}};const loadMore=()=>{setPageNumber(prevState=>prevState+1);};const handleScroll=e=>{if(!hasMore||loading)return;const{scrollTop,scrollHeight,clientHeight}=e.currentTarget;if(scrollHeight-(scrollTop+100)<clientHeight){loadMore();}};// Determinar qual ação de confirmação executar para modais simples\nconst getConfirmAction=()=>{if(deletingContact)return()=>handleDeleteContact(deletingContact.id);if(blockingContact)return()=>handleBlockContact(blockingContact.id);if(unBlockingContact)return()=>handleUnBlockContact(unBlockingContact.id);if(ImportContacts)return handleimportContact;return handleImportExcel;};// Determinar título do modal de confirmação simples\nconst getConfirmTitle=()=>{if(deletingContact)return\"\".concat(i18n.t(\"contacts.confirmationModal.deleteTitle\"),\" \").concat(deletingContact.name,\"?\");if(blockingContact)return\"Bloquear Contato \".concat(blockingContact.name,\"?\");if(unBlockingContact)return\"Desbloquear Contato \".concat(unBlockingContact.name,\"?\");if(ImportContacts)return i18n.t(\"contacts.confirmationModal.importTitlte\");return i18n.t(\"contactListItems.confirmationModal.importTitlte\");};// Determinar mensagem do modal de confirmação simples\nconst getConfirmMessage=()=>{if(exportContact)return i18n.t(\"contacts.confirmationModal.exportContact\");if(deletingContact)return i18n.t(\"contacts.confirmationModal.deleteMessage\");if(blockingContact)return i18n.t(\"contacts.confirmationModal.blockContact\");if(unBlockingContact)return i18n.t(\"contacts.confirmationModal.unblockContact\");if(ImportContacts)return i18n.t(\"contacts.confirmationModal.importMessage\");return i18n.t(\"contactListItems.confirmationModal.importMessage\");};const selectedCount=getSelectedCount();const isAnyContactSelected=selectAllMode||selectedContacts.size>0;// Status do checkbox \"selecionar todos\"\nconst selectAllCheckboxStatus=()=>{if(selectAllMode)return{checked:true,indeterminate:false};const currentPageIds=contacts.map(contact=>contact.id);const selectedInCurrentPage=currentPageIds.filter(id=>selectedContacts.has(id)).length;if(selectedInCurrentPage===0){return{checked:false,indeterminate:false};}else if(selectedInCurrentPage===currentPageIds.length){return{checked:true,indeterminate:false};}else{return{checked:false,indeterminate:true};}};const checkboxStatus=selectAllCheckboxStatus();return/*#__PURE__*/_jsxs(MainContainer,{className:classes.mainContainer,children:[/*#__PURE__*/_jsx(NewTicketModal,{modalOpen:newTicketModalOpen,initialContact:contactTicket,onClose:ticket=>{handleCloseOrOpenTicket(ticket);}}),/*#__PURE__*/_jsx(ContactModal,{open:contactModalOpen,onClose:handleCloseContactModal,\"aria-labelledby\":\"form-dialog-title\",contactId:selectedContactId}),/*#__PURE__*/_jsx(ContactDeleteConfirmModal,{open:deleteConfirmModalOpen,onClose:()=>setDeleteConfirmModalOpen(false),onConfirm:handleBulkDeleteConfirm,deleteType:deleteType,selectedCount:selectedContacts.size,totalCount:totalContactsCount}),/*#__PURE__*/_jsxs(Dialog,{open:imageModalOpen,onClose:handleCloseImageModal,className:classes.imageDialog,maxWidth:\"md\",children:[/*#__PURE__*/_jsxs(DialogTitle,{className:classes.dialogTitle,children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Foto de Perfil - \",selectedContactName]}),/*#__PURE__*/_jsx(IconButton,{onClick:handleCloseImageModal,size:\"small\",children:/*#__PURE__*/_jsx(Close,{})})]}),/*#__PURE__*/_jsx(DialogContent,{children:selectedImage?/*#__PURE__*/_jsx(\"img\",{src:selectedImage,alt:\"Foto de perfil de \".concat(selectedContactName),className:classes.profileImage,onError:e=>{e.target.style.display='none';}}):/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'center',height:'200px',color:'#666'},children:\"Imagem n\\xE3o dispon\\xEDvel\"})})]}),/*#__PURE__*/_jsx(ConfirmationModal,{title:getConfirmTitle(),open:confirmOpen,onClose:setConfirmOpen,onConfirm:getConfirmAction(),children:getConfirmMessage()}),/*#__PURE__*/_jsx(ConfirmationModal,{title:i18n.t(\"contacts.confirmationModal.importChat\"),open:confirmChatsOpen,onClose:setConfirmChatsOpen,onConfirm:e=>handleimportChats(),children:i18n.t(\"contacts.confirmationModal.wantImport\")}),/*#__PURE__*/_jsxs(MainHeader,{children:[/*#__PURE__*/_jsxs(Title,{children:[i18n.t(\"contacts.title\"),\" (\",totalContactsCount,\")\",isAnyContactSelected&&/*#__PURE__*/_jsxs(\"span\",{style:{color:'#f50057',marginLeft:8},children:[\"- \",selectedCount,\" selecionado(s) \",selectAllMode&&'(TODOS)']})]}),/*#__PURE__*/_jsxs(MainHeaderButtonsWrapper,{children:[/*#__PURE__*/_jsx(TagsFilter,{onFiltered:handleSelectedTags}),/*#__PURE__*/_jsx(TextField,{placeholder:i18n.t(\"contacts.searchPlaceholder\"),type:\"search\",value:searchParam,onChange:handleSearch,InputProps:{startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(SearchIcon,{color:\"secondary\"})})}}),isAnyContactSelected&&/*#__PURE__*/_jsx(\"div\",{className:classes.bulkActions,children:/*#__PURE__*/_jsx(Tooltip,{title:selectAllMode?\"Excluir todos os contatos\":\"Excluir contatos selecionados\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",startIcon:/*#__PURE__*/_jsx(DeleteOutlineIcon,{}),onClick:handleBulkDeleteClick,children:getSelectionButtonText()})})}),/*#__PURE__*/_jsx(PopupState,{variant:\"popover\",popupId:\"demo-popup-menu\",children:popupState=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(Button,_objectSpread(_objectSpread({variant:\"contained\",color:\"primary\"},bindTrigger(popupState)),{},{children:[i18n.t(\"contacts.menu.importexport\"),/*#__PURE__*/_jsx(ArrowDropDown,{})]})),/*#__PURE__*/_jsxs(Menu,_objectSpread(_objectSpread({},bindMenu(popupState)),{},{children:[/*#__PURE__*/_jsxs(MenuItem,{onClick:()=>{setConfirmOpen(true);setImportContacts(true);popupState.close();},children:[/*#__PURE__*/_jsx(ContactPhone,{fontSize:\"small\",color:\"primary\",style:{marginRight:10}}),i18n.t(\"contacts.menu.importYourPhone\")]}),/*#__PURE__*/_jsxs(MenuItem,{onClick:()=>{setImportContactModalOpen(true);},children:[/*#__PURE__*/_jsx(Backup,{fontSize:\"small\",color:\"primary\",style:{marginRight:10}}),i18n.t(\"contacts.menu.importToExcel\")]}),/*#__PURE__*/_jsx(Can,{role:user.profile,perform:\"contacts-page:deleteAllContacts\",yes:()=>/*#__PURE__*/_jsxs(MenuItem,{onClick:()=>{handleDeleteAllClick();popupState.close();},style:{color:'#f44336'},children:[/*#__PURE__*/_jsx(DeleteSweep,{fontSize:\"small\",style:{marginRight:10,color:'#f44336'}}),\"Excluir Todos os Contatos\"]})})]}))]})}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:handleOpenContactModal,children:i18n.t(\"contacts.buttons.add\")})]})]}),importContactModalOpen&&/*#__PURE__*/_jsx(ContactImportWpModal,{isOpen:importContactModalOpen,handleClose:()=>setImportContactModalOpen(false),selectedTags:selectedTags,hideNum:hideNum,userProfile:user.profile}),/*#__PURE__*/_jsxs(Paper,{className:classes.mainPaper,variant:\"outlined\",onScroll:handleScroll,children:[/*#__PURE__*/_jsx(\"input\",{style:{display:\"none\"},id:\"upload\",name:\"file\",type:\"file\",accept:\".xls,.xlsx\",onChange:()=>{setConfirmOpen(true);},ref:fileUploadRef}),isAnyContactSelected&&/*#__PURE__*/_jsxs(Toolbar,{className:\"\".concat(classes.toolbar,\" \").concat(classes.toolbarHighlight),children:[/*#__PURE__*/_jsxs(Typography,{className:classes.toolbarTitle,color:\"inherit\",variant:\"subtitle1\",children:[selectedCount,\" contato(s) selecionado(s) \",selectAllMode&&'(TODOS OS CONTATOS)']}),/*#__PURE__*/_jsxs(\"div\",{className:classes.bulkActions,children:[/*#__PURE__*/_jsx(Tooltip,{title:\"Cancelar sele\\xE7\\xE3o\",children:/*#__PURE__*/_jsx(Button,{size:\"small\",onClick:()=>{setSelectedContacts(new Set());setSelectAllMode(false);},children:\"Cancelar\"})}),/*#__PURE__*/_jsx(Tooltip,{title:selectAllMode?\"Excluir todos os contatos\":\"Excluir selecionados\",children:/*#__PURE__*/_jsx(IconButton,{color:\"inherit\",onClick:handleBulkDeleteClick,children:/*#__PURE__*/_jsx(DeleteOutlineIcon,{})})})]})]}),/*#__PURE__*/_jsxs(Table,{size:\"small\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{className:classes.checkboxCell,children:/*#__PURE__*/_jsx(Checkbox,{indeterminate:checkboxStatus.indeterminate,checked:checkboxStatus.checked,onChange:handleSelectAllContacts,disabled:contacts.length===0,inputProps:{'aria-label':'Selecionar todos os contatos'}})}),/*#__PURE__*/_jsx(TableCell,{className:classes.idCell,children:\"ID\"}),/*#__PURE__*/_jsx(TableCell,{className:classes.avatarCell,align:\"center\",children:\"Foto\"}),/*#__PURE__*/_jsx(TableCell,{children:i18n.t(\"contacts.table.name\")}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:i18n.t(\"contacts.table.whatsapp\")}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:i18n.t(\"contacts.table.email\")}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Status\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:i18n.t(\"contacts.table.wallet\")}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:i18n.t(\"contacts.table.actions\")})]})}),/*#__PURE__*/_jsx(TableBody,{children:/*#__PURE__*/_jsxs(_Fragment,{children:[contacts.map(contact=>{var _formatSerializedId,_contact$number,_contact$contactWalle;const isSelected=selectAllMode||selectedContacts.has(contact.id);return/*#__PURE__*/_jsxs(TableRow,{selected:isSelected,children:[/*#__PURE__*/_jsx(TableCell,{className:classes.checkboxCell,children:/*#__PURE__*/_jsx(Checkbox,{checked:isSelected,onChange:()=>handleSelectContact(contact.id),disabled:selectAllMode,inputProps:{'aria-label':\"Selecionar contato \".concat(contact.name)}})}),/*#__PURE__*/_jsx(TableCell,{className:classes.idCell,children:contact.id}),/*#__PURE__*/_jsx(TableCell,{className:classes.avatarCell,align:\"center\",children:/*#__PURE__*/_jsx(Avatar,{src:\"\".concat(contact===null||contact===void 0?void 0:contact.urlPicture),className:classes.clickableAvatar,onClick:()=>handleOpenImageModal(contact===null||contact===void 0?void 0:contact.urlPicture,contact.name)})}),/*#__PURE__*/_jsx(TableCell,{children:contact.name}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:enableLGPD&&hideNum&&user.profile===\"user\"?contact.isGroup?contact.number:formatSerializedId(contact===null||contact===void 0?void 0:contact.number)===null?contact.number.slice(0,-6)+\"**-**\"+(contact===null||contact===void 0?void 0:contact.number.slice(-2)):((_formatSerializedId=formatSerializedId(contact===null||contact===void 0?void 0:contact.number))===null||_formatSerializedId===void 0?void 0:_formatSerializedId.slice(0,-6))+\"**-**\"+(contact===null||contact===void 0?void 0:(_contact$number=contact.number)===null||_contact$number===void 0?void 0:_contact$number.slice(-2)):contact.isGroup?contact.number:formatSerializedId(contact===null||contact===void 0?void 0:contact.number)}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:contact.email}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:contact.active?/*#__PURE__*/_jsx(CheckCircleIcon,{style:{color:\"green\"},fontSize:\"small\"}):/*#__PURE__*/_jsx(CancelIcon,{style:{color:\"red\"},fontSize:\"small\"})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:contact.contactWallets&&contact.contactWallets.length>0?((_contact$contactWalle=contact.contactWallets[0].wallet)===null||_contact$contactWalle===void 0?void 0:_contact$contactWalle.name)||\"Usuário não encontrado\":\"Não atribuído\"}),/*#__PURE__*/_jsxs(TableCell,{align:\"center\",children:[/*#__PURE__*/_jsxs(IconButton,{size:\"small\",disabled:!contact.active,onClick:()=>{setContactTicket(contact);setNewTicketModalOpen(true);},children:[contact.channel===\"whatsapp\"&&/*#__PURE__*/_jsx(WhatsApp,{style:{color:\"green\"}}),contact.channel===\"instagram\"&&/*#__PURE__*/_jsx(Instagram,{style:{color:\"purple\"}}),contact.channel===\"facebook\"&&/*#__PURE__*/_jsx(Facebook,{style:{color:\"blue\"}})]}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:()=>hadleEditContact(contact.id),children:/*#__PURE__*/_jsx(EditIcon,{color:\"secondary\"})}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:contact.active?()=>{setConfirmOpen(true);setBlockingContact(contact);}:()=>{setConfirmOpen(true);setUnBlockingContact(contact);},children:contact.active?/*#__PURE__*/_jsx(BlockIcon,{color:\"secondary\"}):/*#__PURE__*/_jsx(CheckCircleIcon,{color:\"secondary\"})}),/*#__PURE__*/_jsx(Can,{role:user.profile,perform:\"contacts-page:deleteContact\",yes:()=>/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:e=>{setConfirmOpen(true);setDeletingContact(contact);},children:/*#__PURE__*/_jsx(DeleteOutlineIcon,{color:\"secondary\"})})})]})]},contact.id);}),loading&&/*#__PURE__*/_jsx(TableRowSkeleton,{avatar:true,columns:9})]})})]})]})]});};export default Contacts;","map":{"version":3,"names":["React","useState","useEffect","useReducer","useContext","useRef","toast","useHistory","makeStyles","Table","TableBody","TableCell","TableHead","TableRow","Paper","Button","Avatar","Dialog","DialogContent","DialogTitle","Facebook","Instagram","WhatsApp","Close","SearchIcon","TextField","InputAdornment","IconButton","DeleteOutlineIcon","EditIcon","CheckCircleIcon","CancelIcon","BlockIcon","Checkbox","Toolbar","Typography","Tooltip","alpha","api","TableRowSkeleton","ContactModal","ConfirmationModal","ContactDeleteConfirmModal","i18n","MainHeader","Title","MainHeaderButtonsWrapper","MainContainer","toastError","AuthContext","Can","NewTicketModal","TagsFilter","PopupState","bindTrigger","bindMenu","formatSerializedId","v4","uuidv4","ArrowDropDown","Backup","ContactPhone","DeleteSweep","Menu","MenuItem","ContactImportWpModal","useCompanySettings","TicketsContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","reducer","state","action","type","contacts","payload","newContacts","forEach","contact","contactIndex","findIndex","c","id","push","contactId","splice","contactIds","filter","includes","excludeIds","useStyles","theme","mainPaper","_objectSpread","flex","padding","spacing","overflowY","scrollbarStyles","avatarCell","width","idCell","checkboxCell","clickableAvatar","cursor","transition","transform","imageDialog","maxWidth","maxHeight","dialogTitle","display","justifyContent","alignItems","paddingBottom","profileImage","height","objectFit","toolbar","paddingLeft","paddingRight","backgroundColor","palette","primary","main","minHeight","toolbarHighlight","toolbarTitle","fontWeight","bulkActions","gap","Contacts","classes","history","user","socket","loading","setLoading","pageNumber","setPageNumber","searchParam","setSearchParam","dispatch","selectedContactId","setSelectedContactId","contactModalOpen","setContactModalOpen","totalContactsCount","setTotalContactsCount","selectedContacts","setSelectedContacts","Set","selectAllMode","setSelectAllMode","importContactModalOpen","setImportContactModalOpen","deletingContact","setDeletingContact","ImportContacts","setImportContacts","blockingContact","setBlockingContact","unBlockingContact","setUnBlockingContact","confirmOpen","setConfirmOpen","exportContact","setExportContact","confirmChatsOpen","setConfirmChatsOpen","hasMore","setHasMore","newTicketModalOpen","setNewTicketModalOpen","contactTicket","setContactTicket","deleteConfirmModalOpen","setDeleteConfirmModalOpen","deleteType","setDeleteType","fileUploadRef","selectedTags","setSelectedTags","setCurrentTicket","imageModalOpen","setImageModalOpen","selectedImage","setSelectedImage","selectedContactName","setSelectedContactName","getAll","getAllSettings","hideNum","setHideNum","enableLGPD","setEnableLGPD","fetchData","settingList","companyId","key","value","Object","entries","handleSelectContact","newSelected","has","delete","add","handleSelectAllContacts","currentPageIds","map","allCurrentSelected","every","size","length","getSelectedCount","getSelectionButtonText","concat","handleBulkDeleteClick","warning","handleBulkDeleteConfirm","data","confirmation","success","Array","from","post","err","handleDeleteAllClick","handleOpenImageModal","imageUrl","contactName","handleCloseImageModal","handleImportExcel","formData","FormData","append","current","files","request","url","method","go","delayDebounceFn","setTimeout","fetchContacts","get","params","contactTag","JSON","stringify","count","clearTimeout","onContactEvent","prev","Math","max","on","off","handleSelectTicket","ticket","code","uuid","handleCloseOrOpenTicket","undefined","handleSelectedTags","selecteds","tags","t","handleSearch","event","target","toLowerCase","handleOpenContactModal","handleCloseContactModal","hadleEditContact","handleDeleteContact","handleBlockContact","put","active","handleUnBlockContact","handleimportContact","handleimportChats","loadMore","prevState","handleScroll","e","scrollTop","scrollHeight","clientHeight","currentTarget","getConfirmAction","getConfirmTitle","name","getConfirmMessage","selectedCount","isAnyContactSelected","selectAllCheckboxStatus","checked","indeterminate","selectedInCurrentPage","checkboxStatus","className","mainContainer","children","modalOpen","initialContact","onClose","open","onConfirm","totalCount","onClick","src","alt","onError","style","color","title","marginLeft","onFiltered","placeholder","onChange","InputProps","startAdornment","position","variant","startIcon","popupId","popupState","close","fontSize","marginRight","role","profile","perform","yes","isOpen","handleClose","userProfile","onScroll","accept","ref","disabled","inputProps","align","_formatSerializedId","_contact$number","_contact$contactWalle","isSelected","selected","urlPicture","isGroup","number","slice","email","contactWallets","wallet","channel","avatar","columns"],"sources":["/home/deploy/atendechatop/frontend/src/pages/Contacts/index.js"],"sourcesContent":["// src/pages/Contacts/index.js (versão corrigida)\nimport React, {\n  useState,\n  useEffect,\n  useReducer,\n  useContext,\n  useRef,\n} from \"react\";\nimport { toast } from \"react-toastify\";\nimport { useHistory } from \"react-router-dom\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport { Facebook, Instagram, WhatsApp, Close } from \"@material-ui/icons\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\nimport CancelIcon from \"@material-ui/icons/Cancel\";\nimport BlockIcon from \"@material-ui/icons/Block\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport { alpha } from \"@material-ui/core/styles\";\n\nimport api from \"../../services/api\";\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\nimport ContactModal from \"../../components/ContactModal\";\nimport ConfirmationModal from \"../../components/ConfirmationModal/\";\nimport ContactDeleteConfirmModal from \"../../components/ContactDeleteConfirmModal\";\n\nimport { i18n } from \"../../translate/i18n\";\nimport MainHeader from \"../../components/MainHeader\";\nimport Title from \"../../components/Title\";\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\nimport MainContainer from \"../../components/MainContainer\";\nimport toastError from \"../../errors/toastError\";\n\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\nimport { Can } from \"../../components/Can\";\nimport NewTicketModal from \"../../components/NewTicketModal\";\nimport { TagsFilter } from \"../../components/TagsFilter\";\nimport PopupState, { bindTrigger, bindMenu } from \"material-ui-popup-state\";\nimport formatSerializedId from \"../../utils/formatSerializedId\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nimport { ArrowDropDown, Backup, ContactPhone, DeleteSweep } from \"@material-ui/icons\";\nimport { Menu, MenuItem } from \"@material-ui/core\";\n\nimport ContactImportWpModal from \"../../components/ContactImportWpModal\";\nimport useCompanySettings from \"../../hooks/useSettings/companySettings\";\nimport { TicketsContext } from \"../../context/Tickets/TicketsContext\";\n\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_CONTACTS\") {\n    const contacts = action.payload;\n    const newContacts = [];\n\n    contacts.forEach((contact) => {\n      const contactIndex = state.findIndex((c) => c.id === contact.id);\n      if (contactIndex !== -1) {\n        state[contactIndex] = contact;\n      } else {\n        newContacts.push(contact);\n      }\n    });\n\n    return [...state, ...newContacts];\n  }\n\n  if (action.type === \"UPDATE_CONTACTS\") {\n    const contact = action.payload;\n    const contactIndex = state.findIndex((c) => c.id === contact.id);\n\n    if (contactIndex !== -1) {\n      state[contactIndex] = contact;\n      return [...state];\n    } else {\n      return [contact, ...state];\n    }\n  }\n\n  if (action.type === \"DELETE_CONTACT\") {\n    const contactId = action.payload;\n    const contactIndex = state.findIndex((c) => c.id === contactId);\n    if (contactIndex !== -1) {\n      state.splice(contactIndex, 1);\n    }\n    return [...state];\n  }\n\n  if (action.type === \"BULK_DELETE_CONTACTS\") {\n    const contactIds = action.payload;\n    return state.filter(contact => !contactIds.includes(contact.id));\n  }\n\n  if (action.type === \"DELETE_ALL_CONTACTS\") {\n    const { excludeIds = [] } = action.payload;\n    return state.filter(contact => excludeIds.includes(contact.id));\n  }\n\n  if (action.type === \"RESET\") {\n    return [];\n  }\n\n  if (action.type === \"SET_TOTAL_COUNT\") {\n    // Não altera o estado, mas permite rastrear o total\n    return state;\n  }\n};\n\nconst useStyles = makeStyles((theme) => ({\n  mainPaper: {\n    flex: 1,\n    padding: theme.spacing(1),\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles,\n  },\n  avatarCell: {\n    width: '60px',\n    padding: theme.spacing(1),\n  },\n  idCell: {\n    width: '80px',\n  },\n  checkboxCell: {\n    width: '48px',\n    padding: theme.spacing(0, 1),\n  },\n  clickableAvatar: {\n    cursor: 'pointer',\n    transition: 'transform 0.2s ease-in-out',\n    '&:hover': {\n      transform: 'scale(1.1)',\n    },\n  },\n  imageDialog: {\n    '& .MuiDialog-paper': {\n      maxWidth: '500px',\n      maxHeight: '500px',\n    },\n  },\n  dialogTitle: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingBottom: theme.spacing(1),\n  },\n  profileImage: {\n    width: '100%',\n    height: 'auto',\n    maxWidth: '400px',\n    maxHeight: '400px',\n    objectFit: 'contain',\n  },\n  toolbar: {\n    paddingLeft: theme.spacing(2),\n    paddingRight: theme.spacing(1),\n    backgroundColor: alpha(theme.palette.primary.main, 0.12),\n    minHeight: 48,\n  },\n  toolbarHighlight: {\n    backgroundColor: alpha(theme.palette.primary.main, 0.25),\n  },\n  toolbarTitle: {\n    flex: '1 1 100%',\n    fontWeight: 600,\n  },\n  bulkActions: {\n    display: 'flex',\n    gap: theme.spacing(1),\n  },\n}));\n\nconst Contacts = () => {\n  const classes = useStyles();\n  const history = useHistory();\n  const { user, socket } = useContext(AuthContext);\n\n  const [loading, setLoading] = useState(false);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [searchParam, setSearchParam] = useState(\"\");\n  const [contacts, dispatch] = useReducer(reducer, []);\n  const [selectedContactId, setSelectedContactId] = useState(null);\n  const [contactModalOpen, setContactModalOpen] = useState(false);\n  const [totalContactsCount, setTotalContactsCount] = useState(0);\n\n  // Estados para seleção múltipla\n  const [selectedContacts, setSelectedContacts] = useState(new Set());\n  const [selectAllMode, setSelectAllMode] = useState(false); // true = todos da empresa, false = apenas da página\n\n  const [importContactModalOpen, setImportContactModalOpen] = useState(false);\n  const [deletingContact, setDeletingContact] = useState(null);\n  const [ImportContacts, setImportContacts] = useState(null);\n  const [blockingContact, setBlockingContact] = useState(null);\n  const [unBlockingContact, setUnBlockingContact] = useState(null);\n  const [confirmOpen, setConfirmOpen] = useState(false);\n  const [exportContact, setExportContact] = useState(false);\n  const [confirmChatsOpen, setConfirmChatsOpen] = useState(false);\n  const [hasMore, setHasMore] = useState(false);\n  const [newTicketModalOpen, setNewTicketModalOpen] = useState(false);\n  const [contactTicket, setContactTicket] = useState({});\n  \n  // Estados para exclusão múltipla com confirmação tipada\n  const [deleteConfirmModalOpen, setDeleteConfirmModalOpen] = useState(false);\n  const [deleteType, setDeleteType] = useState(''); // 'selected' ou 'all'\n  \n  const fileUploadRef = useRef(null);\n  const [selectedTags, setSelectedTags] = useState([]);\n  const { setCurrentTicket } = useContext(TicketsContext);\n\n  // Estados para o modal de imagem\n  const [imageModalOpen, setImageModalOpen] = useState(false);\n  const [selectedImage, setSelectedImage] = useState('');\n  const [selectedContactName, setSelectedContactName] = useState('');\n\n  const { getAll: getAllSettings } = useCompanySettings();\n  const [hideNum, setHideNum] = useState(false);\n  const [enableLGPD, setEnableLGPD] = useState(false);\n  \n  useEffect(() => {\n    async function fetchData() {\n      const settingList = await getAllSettings(user.companyId);\n\n      for (const [key, value] of Object.entries(settingList)) {\n        if (key === \"enableLGPD\") setEnableLGPD(value === \"enabled\");\n        if (key === \"lgpdHideNumber\") setHideNum(value === \"enabled\");\n      }\n    }\n    fetchData();\n  }, []);\n\n  // Funções para seleção múltipla CORRIGIDAS\n  const handleSelectContact = (contactId) => {\n    const newSelected = new Set(selectedContacts);\n    if (newSelected.has(contactId)) {\n      newSelected.delete(contactId);\n    } else {\n      newSelected.add(contactId);\n    }\n    setSelectedContacts(newSelected);\n    setSelectAllMode(false); // Desativa modo \"todos da empresa\" quando seleciona individualmente\n  };\n\n  const handleSelectAllContacts = () => {\n    if (selectAllMode) {\n      // Se já está em modo \"todos\", desmarcar tudo\n      setSelectedContacts(new Set());\n      setSelectAllMode(false);\n    } else {\n      // Verificar se todos da página atual estão selecionados\n      const currentPageIds = contacts.map(contact => contact.id);\n      const allCurrentSelected = currentPageIds.every(id => selectedContacts.has(id));\n      \n      if (allCurrentSelected && selectedContacts.size === currentPageIds.length) {\n        // Se todos da página estão selecionados, ativar modo \"todos da empresa\"\n        setSelectAllMode(true);\n        setSelectedContacts(new Set()); // Limpar seleção individual\n      } else {\n        // Selecionar todos da página atual\n        setSelectedContacts(new Set(currentPageIds));\n        setSelectAllMode(false);\n      }\n    }\n  };\n\n  // Limpar seleção quando contatos mudam\n  useEffect(() => {\n    setSelectedContacts(new Set());\n    setSelectAllMode(false);\n  }, [searchParam, selectedTags]);\n\n  // Função para obter contagem correta\n  const getSelectedCount = () => {\n    if (selectAllMode) {\n      return totalContactsCount;\n    }\n    return selectedContacts.size;\n  };\n\n  // Função para obter texto do botão\n  const getSelectionButtonText = () => {\n    if (selectAllMode) {\n      return `Excluir Todos (${totalContactsCount})`;\n    }\n    if (selectedContacts.size > 0) {\n      return `Excluir Selecionados (${selectedContacts.size})`;\n    }\n    return \"Excluir\";\n  };\n\n  // Funções para exclusão múltipla CORRIGIDAS\n  const handleBulkDeleteClick = () => {\n    if (selectAllMode) {\n      setDeleteType('all');\n    } else if (selectedContacts.size > 0) {\n      setDeleteType('selected');\n    } else {\n      toast.warning(\"Selecione pelo menos um contato para excluir\");\n      return;\n    }\n    setDeleteConfirmModalOpen(true);\n  };\n\n  const handleBulkDeleteConfirm = async () => {\n    try {\n      if (deleteType === 'all') {\n        await api.delete(\"/contacts/all\", {\n          data: {\n            confirmation: \"DELETE_ALL_CONTACTS\",\n            excludeIds: []\n          }\n        });\n        toast.success(`Todos os ${totalContactsCount} contatos foram excluídos`);\n      } else {\n        const contactIds = Array.from(selectedContacts);\n        await api.post(\"/contacts/bulk-delete\", { contactIds });\n        toast.success(`${contactIds.length} contatos excluídos com sucesso`);\n      }\n      \n      // Resetar seleções\n      setSelectedContacts(new Set());\n      setSelectAllMode(false);\n      \n      // Atualizar lista\n      setSearchParam(\"\");\n      setPageNumber(1);\n      \n    } catch (err) {\n      toastError(err);\n    } finally {\n      setDeleteConfirmModalOpen(false);\n      setDeleteType('');\n    }\n  };\n\n  const handleDeleteAllClick = () => {\n    setDeleteType('all');\n    setDeleteConfirmModalOpen(true);\n  };\n\n  // Função para abrir modal da imagem\n  const handleOpenImageModal = (imageUrl, contactName) => {\n    setSelectedImage(imageUrl);\n    setSelectedContactName(contactName);\n    setImageModalOpen(true);\n  };\n\n  // Função para fechar modal da imagem\n  const handleCloseImageModal = () => {\n    setImageModalOpen(false);\n    setSelectedImage('');\n    setSelectedContactName('');\n  };\n\n  const handleImportExcel = async () => {\n    try {\n      const formData = new FormData();\n      formData.append(\"file\", fileUploadRef.current.files[0]);\n      await api.request({\n        url: `/contacts/upload`,\n        method: \"POST\",\n        data: formData,\n      });\n      history.go(0);\n    } catch (err) {\n      toastError(err);\n    }\n  };\n\n  useEffect(() => {\n    dispatch({ type: \"RESET\" });\n    setPageNumber(1);\n  }, [searchParam, selectedTags]);\n\n  useEffect(() => {\n    setLoading(true);\n    const delayDebounceFn = setTimeout(() => {\n      const fetchContacts = async () => {\n        try {\n          const { data } = await api.get(\"/contacts/\", {\n            params: {\n              searchParam,\n              pageNumber,\n              contactTag: JSON.stringify(selectedTags),\n            },\n          });\n          dispatch({ type: \"LOAD_CONTACTS\", payload: data.contacts });\n          setHasMore(data.hasMore);\n          setTotalContactsCount(data.count); // Armazenar contagem total\n          setLoading(false);\n        } catch (err) {\n          toastError(err);\n        }\n      };\n      fetchContacts();\n    }, 500);\n    return () => clearTimeout(delayDebounceFn);\n  }, [searchParam, pageNumber, selectedTags]);\n\n  useEffect(() => {\n    const companyId = user.companyId;\n\n    const onContactEvent = (data) => {\n      if (data.action === \"update\" || data.action === \"create\") {\n        dispatch({ type: \"UPDATE_CONTACTS\", payload: data.contact });\n      }\n\n      if (data.action === \"delete\") {\n        dispatch({ type: \"DELETE_CONTACT\", payload: +data.contactId });\n        setTotalContactsCount(prev => Math.max(0, prev - 1));\n      }\n\n      if (data.action === \"bulk-delete\") {\n        dispatch({ type: \"BULK_DELETE_CONTACTS\", payload: data.contactIds });\n        setTotalContactsCount(prev => Math.max(0, prev - data.contactIds.length));\n      }\n\n      if (data.action === \"delete-all\") {\n        dispatch({ type: \"DELETE_ALL_CONTACTS\", payload: { excludeIds: data.excludeIds } });\n        setTotalContactsCount(data.excludeIds.length);\n      }\n    };\n    \n    socket.on(`company-${companyId}-contact`, onContactEvent);\n\n    return () => {\n      socket.off(`company-${companyId}-contact`, onContactEvent);\n    };\n  }, [socket]);\n\n  const handleSelectTicket = (ticket) => {\n    const code = uuidv4();\n    const { id, uuid } = ticket;\n    setCurrentTicket({ id, uuid, code });\n  };\n\n  const handleCloseOrOpenTicket = (ticket) => {\n    setNewTicketModalOpen(false);\n    if (ticket !== undefined && ticket.uuid !== undefined) {\n      handleSelectTicket(ticket);\n      history.push(`/tickets/${ticket.uuid}`);\n    }\n  };\n\n  const handleSelectedTags = (selecteds) => {\n    const tags = selecteds.map((t) => t.id);\n    setSelectedTags(tags);\n  };\n\n  const handleSearch = (event) => {\n    setSearchParam(event.target.value.toLowerCase());\n  };\n\n  const handleOpenContactModal = () => {\n    setSelectedContactId(null);\n    setContactModalOpen(true);\n  };\n\n  const handleCloseContactModal = () => {\n    setSelectedContactId(null);\n    setContactModalOpen(false);\n  };\n\n  const hadleEditContact = (contactId) => {\n    setSelectedContactId(contactId);\n    setContactModalOpen(true);\n  };\n\n  const handleDeleteContact = async (contactId) => {\n    try {\n      await api.delete(`/contacts/${contactId}`);\n      toast.success(i18n.t(\"contacts.toasts.deleted\"));\n    } catch (err) {\n      toastError(err);\n    }\n    setDeletingContact(null);\n    setSearchParam(\"\");\n    setPageNumber(1);\n  };\n\n  const handleBlockContact = async (contactId) => {\n    try {\n      await api.put(`/contacts/block/${contactId}`, { active: false });\n      toast.success(\"Contato bloqueado\");\n    } catch (err) {\n      toastError(err);\n    }\n    setDeletingContact(null);\n    setSearchParam(\"\");\n    setPageNumber(1);\n    setBlockingContact(null);\n  };\n\n  const handleUnBlockContact = async (contactId) => {\n    try {\n      await api.put(`/contacts/block/${contactId}`, { active: true });\n      toast.success(\"Contato desbloqueado\");\n    } catch (err) {\n      toastError(err);\n    }\n    setDeletingContact(null);\n    setSearchParam(\"\");\n    setPageNumber(1);\n    setUnBlockingContact(null);\n  };\n\n  const handleimportContact = async () => {\n    try {\n      await api.post(\"/contacts/import\");\n      history.go(0);\n      setImportContacts(false);\n    } catch (err) {\n      toastError(err);\n      setImportContacts(false);\n    }\n  };\n\n  const handleimportChats = async () => {\n    try {\n      await api.post(\"/contacts/import/chats\");\n      history.go(0);\n    } catch (err) {\n      toastError(err);\n    }\n  };\n\n  const loadMore = () => {\n    setPageNumber((prevState) => prevState + 1);\n  };\n\n  const handleScroll = (e) => {\n    if (!hasMore || loading) return;\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\n      loadMore();\n    }\n  };\n\n  // Determinar qual ação de confirmação executar para modais simples\n  const getConfirmAction = () => {\n    if (deletingContact) return () => handleDeleteContact(deletingContact.id);\n    if (blockingContact) return () => handleBlockContact(blockingContact.id);\n    if (unBlockingContact) return () => handleUnBlockContact(unBlockingContact.id);\n    if (ImportContacts) return handleimportContact;\n    return handleImportExcel;\n  };\n\n  // Determinar título do modal de confirmação simples\n  const getConfirmTitle = () => {\n    if (deletingContact) return `${i18n.t(\"contacts.confirmationModal.deleteTitle\")} ${deletingContact.name}?`;\n    if (blockingContact) return `Bloquear Contato ${blockingContact.name}?`;\n    if (unBlockingContact) return `Desbloquear Contato ${unBlockingContact.name}?`;\n    if (ImportContacts) return i18n.t(\"contacts.confirmationModal.importTitlte\");\n    return i18n.t(\"contactListItems.confirmationModal.importTitlte\");\n  };\n\n  // Determinar mensagem do modal de confirmação simples\n  const getConfirmMessage = () => {\n    if (exportContact) return i18n.t(\"contacts.confirmationModal.exportContact\");\n    if (deletingContact) return i18n.t(\"contacts.confirmationModal.deleteMessage\");\n    if (blockingContact) return i18n.t(\"contacts.confirmationModal.blockContact\");\n    if (unBlockingContact) return i18n.t(\"contacts.confirmationModal.unblockContact\");\n    if (ImportContacts) return i18n.t(\"contacts.confirmationModal.importMessage\");\n    return i18n.t(\"contactListItems.confirmationModal.importMessage\");\n  };\n\n  const selectedCount = getSelectedCount();\n  const isAnyContactSelected = selectAllMode || selectedContacts.size > 0;\n\n  // Status do checkbox \"selecionar todos\"\n  const selectAllCheckboxStatus = () => {\n    if (selectAllMode) return { checked: true, indeterminate: false };\n    \n    const currentPageIds = contacts.map(contact => contact.id);\n    const selectedInCurrentPage = currentPageIds.filter(id => selectedContacts.has(id)).length;\n    \n    if (selectedInCurrentPage === 0) {\n      return { checked: false, indeterminate: false };\n    } else if (selectedInCurrentPage === currentPageIds.length) {\n      return { checked: true, indeterminate: false };\n    } else {\n      return { checked: false, indeterminate: true };\n    }\n  };\n\n  const checkboxStatus = selectAllCheckboxStatus();\n\n  return (\n    <MainContainer className={classes.mainContainer}>\n      <NewTicketModal\n        modalOpen={newTicketModalOpen}\n        initialContact={contactTicket}\n        onClose={(ticket) => {\n          handleCloseOrOpenTicket(ticket);\n        }}\n      />\n      <ContactModal\n        open={contactModalOpen}\n        onClose={handleCloseContactModal}\n        aria-labelledby=\"form-dialog-title\"\n        contactId={selectedContactId}\n      ></ContactModal>\n      \n      {/* Modal de confirmação tipada para exclusão */}\n      <ContactDeleteConfirmModal\n        open={deleteConfirmModalOpen}\n        onClose={() => setDeleteConfirmModalOpen(false)}\n        onConfirm={handleBulkDeleteConfirm}\n        deleteType={deleteType}\n        selectedCount={selectedContacts.size}\n        totalCount={totalContactsCount}\n      />\n      \n      {/* Modal para visualizar imagem de perfil */}\n      <Dialog\n        open={imageModalOpen}\n        onClose={handleCloseImageModal}\n        className={classes.imageDialog}\n        maxWidth=\"md\"\n      >\n        <DialogTitle className={classes.dialogTitle}>\n          <span>Foto de Perfil - {selectedContactName}</span>\n          <IconButton onClick={handleCloseImageModal} size=\"small\">\n            <Close />\n          </IconButton>\n        </DialogTitle>\n        <DialogContent>\n          {selectedImage ? (\n            <img\n              src={selectedImage}\n              alt={`Foto de perfil de ${selectedContactName}`}\n              className={classes.profileImage}\n              onError={(e) => {\n                e.target.style.display = 'none';\n              }}\n            />\n          ) : (\n            <div style={{ \n              display: 'flex', \n              justifyContent: 'center', \n              alignItems: 'center', \n              height: '200px',\n              color: '#666'\n            }}>\n              Imagem não disponível\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n\n      {/* Modal de confirmação simples para outras ações */}\n      <ConfirmationModal\n        title={getConfirmTitle()}\n        open={confirmOpen}\n        onClose={setConfirmOpen}\n        onConfirm={getConfirmAction()}\n      >\n        {getConfirmMessage()}\n      </ConfirmationModal>\n      \n      <ConfirmationModal\n        title={i18n.t(\"contacts.confirmationModal.importChat\")}\n        open={confirmChatsOpen}\n        onClose={setConfirmChatsOpen}\n        onConfirm={(e) => handleimportChats()}\n      >\n        {i18n.t(\"contacts.confirmationModal.wantImport\")}\n      </ConfirmationModal>\n\n      <MainHeader>\n        <Title>\n          {i18n.t(\"contacts.title\")} ({totalContactsCount})\n          {isAnyContactSelected && (\n            <span style={{ color: '#f50057', marginLeft: 8 }}>\n              - {selectedCount} selecionado(s) {selectAllMode && '(TODOS)'}\n            </span>\n          )}\n        </Title>\n        <MainHeaderButtonsWrapper>\n          <TagsFilter onFiltered={handleSelectedTags} />\n          <TextField\n            placeholder={i18n.t(\"contacts.searchPlaceholder\")}\n            type=\"search\"\n            value={searchParam}\n            onChange={handleSearch}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <SearchIcon color=\"secondary\" />\n                </InputAdornment>\n              ),\n            }}\n          />\n          \n          {/* Botões de ação em lote */}\n          {isAnyContactSelected && (\n            <div className={classes.bulkActions}>\n              <Tooltip title={selectAllMode ? \"Excluir todos os contatos\" : \"Excluir contatos selecionados\"}>\n                <Button\n                  variant=\"contained\"\n                  color=\"secondary\"\n                  startIcon={<DeleteOutlineIcon />}\n                  onClick={handleBulkDeleteClick}\n                >\n                  {getSelectionButtonText()}\n                </Button>\n              </Tooltip>\n            </div>\n          )}\n\n          <PopupState variant=\"popover\" popupId=\"demo-popup-menu\">\n            {(popupState) => (\n              <React.Fragment>\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  {...bindTrigger(popupState)}\n                >\n                  {i18n.t(\"contacts.menu.importexport\")}\n                  <ArrowDropDown />\n                </Button>\n                <Menu {...bindMenu(popupState)}>\n                  <MenuItem\n                    onClick={() => {\n                      setConfirmOpen(true);\n                      setImportContacts(true);\n                      popupState.close();\n                    }}\n                  >\n                    <ContactPhone\n                      fontSize=\"small\"\n                      color=\"primary\"\n                      style={{ marginRight: 10 }}\n                    />\n                    {i18n.t(\"contacts.menu.importYourPhone\")}\n                  </MenuItem>\n                  <MenuItem\n                    onClick={() => {\n                      setImportContactModalOpen(true);\n                    }}\n                  >\n                    <Backup\n                      fontSize=\"small\"\n                      color=\"primary\"\n                      style={{ marginRight: 10 }}\n                    />\n                    {i18n.t(\"contacts.menu.importToExcel\")}\n                  </MenuItem>\n                  <Can\n                    role={user.profile}\n                    perform=\"contacts-page:deleteAllContacts\"\n                    yes={() => (\n                      <MenuItem\n                        onClick={() => {\n                          handleDeleteAllClick();\n                          popupState.close();\n                        }}\n                        style={{ color: '#f44336' }}\n                      >\n                        <DeleteSweep\n                          fontSize=\"small\"\n                          style={{ marginRight: 10, color: '#f44336' }}\n                        />\n                        Excluir Todos os Contatos\n                      </MenuItem>\n                    )}\n                  />\n                </Menu>\n              </React.Fragment>\n            )}\n          </PopupState>\n          \n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={handleOpenContactModal}\n          >\n            {i18n.t(\"contacts.buttons.add\")}\n          </Button>\n        </MainHeaderButtonsWrapper>\n      </MainHeader>\n\n      {importContactModalOpen && (\n        <ContactImportWpModal\n          isOpen={importContactModalOpen}\n          handleClose={() => setImportContactModalOpen(false)}\n          selectedTags={selectedTags}\n          hideNum={hideNum}\n          userProfile={user.profile}\n        />\n      )}\n\n      <Paper\n        className={classes.mainPaper}\n        variant=\"outlined\"\n        onScroll={handleScroll}\n      >\n        <input\n          style={{ display: \"none\" }}\n          id=\"upload\"\n          name=\"file\"\n          type=\"file\"\n          accept=\".xls,.xlsx\"\n          onChange={() => {\n            setConfirmOpen(true);\n          }}\n          ref={fileUploadRef}\n        />\n\n        {/* Toolbar para ações em lote */}\n        {isAnyContactSelected && (\n          <Toolbar className={`${classes.toolbar} ${classes.toolbarHighlight}`}>\n            <Typography className={classes.toolbarTitle} color=\"inherit\" variant=\"subtitle1\">\n              {selectedCount} contato(s) selecionado(s) {selectAllMode && '(TODOS OS CONTATOS)'}\n            </Typography>\n            <div className={classes.bulkActions}>\n              <Tooltip title=\"Cancelar seleção\">\n                <Button\n                  size=\"small\"\n                  onClick={() => {\n                    setSelectedContacts(new Set());\n                    setSelectAllMode(false);\n                  }}\n                >\n                  Cancelar\n                </Button>\n              </Tooltip>\n              <Tooltip title={selectAllMode ? \"Excluir todos os contatos\" : \"Excluir selecionados\"}>\n                <IconButton\n                  color=\"inherit\"\n                  onClick={handleBulkDeleteClick}\n                >\n                  <DeleteOutlineIcon />\n                </IconButton>\n              </Tooltip>\n            </div>\n          </Toolbar>\n        )}\n\n        <Table size=\"small\">\n          <TableHead>\n            <TableRow>\n              <TableCell className={classes.checkboxCell}>\n                <Checkbox\n                  indeterminate={checkboxStatus.indeterminate}\n                  checked={checkboxStatus.checked}\n                  onChange={handleSelectAllContacts}\n                  disabled={contacts.length === 0}\n                  inputProps={{ 'aria-label': 'Selecionar todos os contatos' }}\n                />\n              </TableCell>\n              <TableCell className={classes.idCell}>ID</TableCell>\n              <TableCell className={classes.avatarCell} align=\"center\">Foto</TableCell>\n              <TableCell>{i18n.t(\"contacts.table.name\")}</TableCell>\n              <TableCell align=\"center\">\n                {i18n.t(\"contacts.table.whatsapp\")}\n              </TableCell>\n              <TableCell align=\"center\">\n                {i18n.t(\"contacts.table.email\")}\n              </TableCell>\n              <TableCell align=\"center\">{\"Status\"}</TableCell>\n              <TableCell align=\"center\">{i18n.t(\"contacts.table.wallet\")}</TableCell>\n              <TableCell align=\"center\">\n                {i18n.t(\"contacts.table.actions\")}\n              </TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            <>\n              {contacts.map((contact) => {\n                const isSelected = selectAllMode || selectedContacts.has(contact.id);\n                \n                return (\n                  <TableRow \n                    key={contact.id}\n                    selected={isSelected}\n                  >\n                    <TableCell className={classes.checkboxCell}>\n                      <Checkbox\n                        checked={isSelected}\n                        onChange={() => handleSelectContact(contact.id)}\n                        disabled={selectAllMode}\n                        inputProps={{ 'aria-label': `Selecionar contato ${contact.name}` }}\n                      />\n                    </TableCell>\n                    <TableCell className={classes.idCell}>{contact.id}</TableCell>\n                    <TableCell className={classes.avatarCell} align=\"center\">\n                      <Avatar \n                        src={`${contact?.urlPicture}`}\n                        className={classes.clickableAvatar}\n                        onClick={() => handleOpenImageModal(contact?.urlPicture, contact.name)}\n                      />\n                    </TableCell>\n                    <TableCell>{contact.name}</TableCell>\n                    <TableCell align=\"center\">\n                      {enableLGPD && hideNum && user.profile === \"user\"\n                        ? contact.isGroup\n                          ? contact.number\n                          : formatSerializedId(contact?.number) === null\n                          ? contact.number.slice(0, -6) +\n                            \"**-**\" +\n                            contact?.number.slice(-2)\n                          : formatSerializedId(contact?.number)?.slice(0, -6) +\n                            \"**-**\" +\n                            contact?.number?.slice(-2)\n                        : contact.isGroup\n                        ? contact.number\n                        : formatSerializedId(contact?.number)}\n                    </TableCell>\n                    <TableCell align=\"center\">{contact.email}</TableCell>\n                    <TableCell align=\"center\">\n                      {contact.active ? (\n                        <CheckCircleIcon\n                          style={{ color: \"green\" }}\n                          fontSize=\"small\"\n                        />\n                      ) : (\n                        <CancelIcon style={{ color: \"red\" }} fontSize=\"small\" />\n                      )}\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      {contact.contactWallets && contact.contactWallets.length > 0 \n                        ? contact.contactWallets[0].wallet?.name || \"Usuário não encontrado\"\n                        : \"Não atribuído\"}\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      <IconButton\n                        size=\"small\"\n                        disabled={!contact.active}\n                        onClick={() => {\n                          setContactTicket(contact);\n                          setNewTicketModalOpen(true);\n                        }}\n                      >\n                        {contact.channel === \"whatsapp\" && (\n                          <WhatsApp style={{ color: \"green\" }} />\n                        )}\n                        {contact.channel === \"instagram\" && (\n                          <Instagram style={{ color: \"purple\" }} />\n                        )}\n                        {contact.channel === \"facebook\" && (\n                          <Facebook style={{ color: \"blue\" }} />\n                        )}\n                      </IconButton>\n\n                      <IconButton\n                        size=\"small\"\n                        onClick={() => hadleEditContact(contact.id)}\n                      >\n                        <EditIcon color=\"secondary\" />\n                      </IconButton>\n                      <IconButton\n                        size=\"small\"\n                        onClick={\n                          contact.active\n                            ? () => {\n                                setConfirmOpen(true);\n                                setBlockingContact(contact);\n                              }\n                            : () => {\n                                setConfirmOpen(true);\n                                setUnBlockingContact(contact);\n                              }\n                        }\n                      >\n                        {contact.active ? (\n                          <BlockIcon color=\"secondary\" />\n                        ) : (\n                          <CheckCircleIcon color=\"secondary\" />\n                        )}\n                      </IconButton>\n                      <Can\n                        role={user.profile}\n                        perform=\"contacts-page:deleteContact\"\n                        yes={() => (\n                          <IconButton\n                            size=\"small\"\n                            onClick={(e) => {\n                              setConfirmOpen(true);\n                              setDeletingContact(contact);\n                            }}\n                          >\n                            <DeleteOutlineIcon color=\"secondary\" />\n                          </IconButton>\n                        )}\n                      />\n                    </TableCell>\n                  </TableRow>\n                );\n              })}\n              {loading && <TableRowSkeleton avatar columns={9} />}\n            </>\n          </TableBody>\n        </Table>\n      </Paper>\n    </MainContainer>\n  );\n};\n\nexport default Contacts;"],"mappings":"uHAAA;AACA,MAAO,CAAAA,KAAK,EACVC,QAAQ,CACRC,SAAS,CACTC,UAAU,CACVC,UAAU,CACVC,MAAM,KACD,OAAO,CACd,OAASC,KAAK,KAAQ,gBAAgB,CACtC,OAASC,UAAU,KAAQ,kBAAkB,CAE7C,OAASC,UAAU,KAAQ,0BAA0B,CACrD,MAAO,CAAAC,KAAK,KAAM,yBAAyB,CAC3C,MAAO,CAAAC,SAAS,KAAM,6BAA6B,CACnD,MAAO,CAAAC,SAAS,KAAM,6BAA6B,CACnD,MAAO,CAAAC,SAAS,KAAM,6BAA6B,CACnD,MAAO,CAAAC,QAAQ,KAAM,4BAA4B,CACjD,MAAO,CAAAC,KAAK,KAAM,yBAAyB,CAC3C,MAAO,CAAAC,MAAM,KAAM,0BAA0B,CAC7C,MAAO,CAAAC,MAAM,KAAM,0BAA0B,CAC7C,MAAO,CAAAC,MAAM,KAAM,0BAA0B,CAC7C,MAAO,CAAAC,aAAa,KAAM,iCAAiC,CAC3D,MAAO,CAAAC,WAAW,KAAM,+BAA+B,CACvD,OAASC,QAAQ,CAAEC,SAAS,CAAEC,QAAQ,CAAEC,KAAK,KAAQ,oBAAoB,CACzE,MAAO,CAAAC,UAAU,KAAM,2BAA2B,CAClD,MAAO,CAAAC,SAAS,KAAM,6BAA6B,CACnD,MAAO,CAAAC,cAAc,KAAM,kCAAkC,CAC7D,MAAO,CAAAC,UAAU,KAAM,8BAA8B,CACrD,MAAO,CAAAC,iBAAiB,KAAM,kCAAkC,CAChE,MAAO,CAAAC,QAAQ,KAAM,yBAAyB,CAC9C,MAAO,CAAAC,eAAe,KAAM,gCAAgC,CAC5D,MAAO,CAAAC,UAAU,KAAM,2BAA2B,CAClD,MAAO,CAAAC,SAAS,KAAM,0BAA0B,CAChD,MAAO,CAAAC,QAAQ,KAAM,4BAA4B,CACjD,MAAO,CAAAC,OAAO,KAAM,2BAA2B,CAC/C,MAAO,CAAAC,UAAU,KAAM,8BAA8B,CACrD,MAAO,CAAAC,OAAO,KAAM,2BAA2B,CAC/C,OAASC,KAAK,KAAQ,0BAA0B,CAEhD,MAAO,CAAAC,GAAG,KAAM,oBAAoB,CACpC,MAAO,CAAAC,gBAAgB,KAAM,mCAAmC,CAChE,MAAO,CAAAC,YAAY,KAAM,+BAA+B,CACxD,MAAO,CAAAC,iBAAiB,KAAM,qCAAqC,CACnE,MAAO,CAAAC,yBAAyB,KAAM,4CAA4C,CAElF,OAASC,IAAI,KAAQ,sBAAsB,CAC3C,MAAO,CAAAC,UAAU,KAAM,6BAA6B,CACpD,MAAO,CAAAC,KAAK,KAAM,wBAAwB,CAC1C,MAAO,CAAAC,wBAAwB,KAAM,2CAA2C,CAChF,MAAO,CAAAC,aAAa,KAAM,gCAAgC,CAC1D,MAAO,CAAAC,UAAU,KAAM,yBAAyB,CAEhD,OAASC,WAAW,KAAQ,gCAAgC,CAC5D,OAASC,GAAG,KAAQ,sBAAsB,CAC1C,MAAO,CAAAC,cAAc,KAAM,iCAAiC,CAC5D,OAASC,UAAU,KAAQ,6BAA6B,CACxD,MAAO,CAAAC,UAAU,EAAIC,WAAW,CAAEC,QAAQ,KAAQ,yBAAyB,CAC3E,MAAO,CAAAC,kBAAkB,KAAM,gCAAgC,CAC/D,OAASC,EAAE,GAAI,CAAAC,MAAM,KAAQ,MAAM,CAEnC,OAASC,aAAa,CAAEC,MAAM,CAAEC,YAAY,CAAEC,WAAW,KAAQ,oBAAoB,CACrF,OAASC,IAAI,CAAEC,QAAQ,KAAQ,mBAAmB,CAElD,MAAO,CAAAC,oBAAoB,KAAM,uCAAuC,CACxE,MAAO,CAAAC,kBAAkB,KAAM,yCAAyC,CACxE,OAASC,cAAc,KAAQ,sCAAsC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEtE,KAAM,CAAAC,OAAO,CAAGA,CAACC,KAAK,CAAEC,MAAM,GAAK,CACjC,GAAIA,MAAM,CAACC,IAAI,GAAK,eAAe,CAAE,CACnC,KAAM,CAAAC,QAAQ,CAAGF,MAAM,CAACG,OAAO,CAC/B,KAAM,CAAAC,WAAW,CAAG,EAAE,CAEtBF,QAAQ,CAACG,OAAO,CAAEC,OAAO,EAAK,CAC5B,KAAM,CAAAC,YAAY,CAAGR,KAAK,CAACS,SAAS,CAAEC,CAAC,EAAKA,CAAC,CAACC,EAAE,GAAKJ,OAAO,CAACI,EAAE,CAAC,CAChE,GAAIH,YAAY,GAAK,CAAC,CAAC,CAAE,CACvBR,KAAK,CAACQ,YAAY,CAAC,CAAGD,OAAO,CAC/B,CAAC,IAAM,CACLF,WAAW,CAACO,IAAI,CAACL,OAAO,CAAC,CAC3B,CACF,CAAC,CAAC,CAEF,MAAO,CAAC,GAAGP,KAAK,CAAE,GAAGK,WAAW,CAAC,CACnC,CAEA,GAAIJ,MAAM,CAACC,IAAI,GAAK,iBAAiB,CAAE,CACrC,KAAM,CAAAK,OAAO,CAAGN,MAAM,CAACG,OAAO,CAC9B,KAAM,CAAAI,YAAY,CAAGR,KAAK,CAACS,SAAS,CAAEC,CAAC,EAAKA,CAAC,CAACC,EAAE,GAAKJ,OAAO,CAACI,EAAE,CAAC,CAEhE,GAAIH,YAAY,GAAK,CAAC,CAAC,CAAE,CACvBR,KAAK,CAACQ,YAAY,CAAC,CAAGD,OAAO,CAC7B,MAAO,CAAC,GAAGP,KAAK,CAAC,CACnB,CAAC,IAAM,CACL,MAAO,CAACO,OAAO,CAAE,GAAGP,KAAK,CAAC,CAC5B,CACF,CAEA,GAAIC,MAAM,CAACC,IAAI,GAAK,gBAAgB,CAAE,CACpC,KAAM,CAAAW,SAAS,CAAGZ,MAAM,CAACG,OAAO,CAChC,KAAM,CAAAI,YAAY,CAAGR,KAAK,CAACS,SAAS,CAAEC,CAAC,EAAKA,CAAC,CAACC,EAAE,GAAKE,SAAS,CAAC,CAC/D,GAAIL,YAAY,GAAK,CAAC,CAAC,CAAE,CACvBR,KAAK,CAACc,MAAM,CAACN,YAAY,CAAE,CAAC,CAAC,CAC/B,CACA,MAAO,CAAC,GAAGR,KAAK,CAAC,CACnB,CAEA,GAAIC,MAAM,CAACC,IAAI,GAAK,sBAAsB,CAAE,CAC1C,KAAM,CAAAa,UAAU,CAAGd,MAAM,CAACG,OAAO,CACjC,MAAO,CAAAJ,KAAK,CAACgB,MAAM,CAACT,OAAO,EAAI,CAACQ,UAAU,CAACE,QAAQ,CAACV,OAAO,CAACI,EAAE,CAAC,CAAC,CAClE,CAEA,GAAIV,MAAM,CAACC,IAAI,GAAK,qBAAqB,CAAE,CACzC,KAAM,CAAEgB,UAAU,CAAG,EAAG,CAAC,CAAGjB,MAAM,CAACG,OAAO,CAC1C,MAAO,CAAAJ,KAAK,CAACgB,MAAM,CAACT,OAAO,EAAIW,UAAU,CAACD,QAAQ,CAACV,OAAO,CAACI,EAAE,CAAC,CAAC,CACjE,CAEA,GAAIV,MAAM,CAACC,IAAI,GAAK,OAAO,CAAE,CAC3B,MAAO,EAAE,CACX,CAEA,GAAID,MAAM,CAACC,IAAI,GAAK,iBAAiB,CAAE,CACrC;AACA,MAAO,CAAAF,KAAK,CACd,CACF,CAAC,CAED,KAAM,CAAAmB,SAAS,CAAGtF,UAAU,CAAEuF,KAAK,GAAM,CACvCC,SAAS,CAAAC,aAAA,EACPC,IAAI,CAAE,CAAC,CACPC,OAAO,CAAEJ,KAAK,CAACK,OAAO,CAAC,CAAC,CAAC,CACzBC,SAAS,CAAE,QAAQ,EAChBN,KAAK,CAACO,eAAe,CACzB,CACDC,UAAU,CAAE,CACVC,KAAK,CAAE,MAAM,CACbL,OAAO,CAAEJ,KAAK,CAACK,OAAO,CAAC,CAAC,CAC1B,CAAC,CACDK,MAAM,CAAE,CACND,KAAK,CAAE,MACT,CAAC,CACDE,YAAY,CAAE,CACZF,KAAK,CAAE,MAAM,CACbL,OAAO,CAAEJ,KAAK,CAACK,OAAO,CAAC,CAAC,CAAE,CAAC,CAC7B,CAAC,CACDO,eAAe,CAAE,CACfC,MAAM,CAAE,SAAS,CACjBC,UAAU,CAAE,4BAA4B,CACxC,SAAS,CAAE,CACTC,SAAS,CAAE,YACb,CACF,CAAC,CACDC,WAAW,CAAE,CACX,oBAAoB,CAAE,CACpBC,QAAQ,CAAE,OAAO,CACjBC,SAAS,CAAE,OACb,CACF,CAAC,CACDC,WAAW,CAAE,CACXC,OAAO,CAAE,MAAM,CACfC,cAAc,CAAE,eAAe,CAC/BC,UAAU,CAAE,QAAQ,CACpBC,aAAa,CAAEvB,KAAK,CAACK,OAAO,CAAC,CAAC,CAChC,CAAC,CACDmB,YAAY,CAAE,CACZf,KAAK,CAAE,MAAM,CACbgB,MAAM,CAAE,MAAM,CACdR,QAAQ,CAAE,OAAO,CACjBC,SAAS,CAAE,OAAO,CAClBQ,SAAS,CAAE,SACb,CAAC,CACDC,OAAO,CAAE,CACPC,WAAW,CAAE5B,KAAK,CAACK,OAAO,CAAC,CAAC,CAAC,CAC7BwB,YAAY,CAAE7B,KAAK,CAACK,OAAO,CAAC,CAAC,CAAC,CAC9ByB,eAAe,CAAExF,KAAK,CAAC0D,KAAK,CAAC+B,OAAO,CAACC,OAAO,CAACC,IAAI,CAAE,IAAI,CAAC,CACxDC,SAAS,CAAE,EACb,CAAC,CACDC,gBAAgB,CAAE,CAChBL,eAAe,CAAExF,KAAK,CAAC0D,KAAK,CAAC+B,OAAO,CAACC,OAAO,CAACC,IAAI,CAAE,IAAI,CACzD,CAAC,CACDG,YAAY,CAAE,CACZjC,IAAI,CAAE,UAAU,CAChBkC,UAAU,CAAE,GACd,CAAC,CACDC,WAAW,CAAE,CACXlB,OAAO,CAAE,MAAM,CACfmB,GAAG,CAAEvC,KAAK,CAACK,OAAO,CAAC,CAAC,CACtB,CACF,CAAC,CAAC,CAAC,CAEH,KAAM,CAAAmC,QAAQ,CAAGA,CAAA,GAAM,CACrB,KAAM,CAAAC,OAAO,CAAG1C,SAAS,CAAC,CAAC,CAC3B,KAAM,CAAA2C,OAAO,CAAGlI,UAAU,CAAC,CAAC,CAC5B,KAAM,CAAEmI,IAAI,CAAEC,MAAO,CAAC,CAAGvI,UAAU,CAAC6C,WAAW,CAAC,CAEhD,KAAM,CAAC2F,OAAO,CAAEC,UAAU,CAAC,CAAG5I,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAAC6I,UAAU,CAAEC,aAAa,CAAC,CAAG9I,QAAQ,CAAC,CAAC,CAAC,CAC/C,KAAM,CAAC+I,WAAW,CAAEC,cAAc,CAAC,CAAGhJ,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAAC6E,QAAQ,CAAEoE,QAAQ,CAAC,CAAG/I,UAAU,CAACuE,OAAO,CAAE,EAAE,CAAC,CACpD,KAAM,CAACyE,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGnJ,QAAQ,CAAC,IAAI,CAAC,CAChE,KAAM,CAACoJ,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGrJ,QAAQ,CAAC,KAAK,CAAC,CAC/D,KAAM,CAACsJ,kBAAkB,CAAEC,qBAAqB,CAAC,CAAGvJ,QAAQ,CAAC,CAAC,CAAC,CAE/D;AACA,KAAM,CAACwJ,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGzJ,QAAQ,CAAC,GAAI,CAAA0J,GAAG,CAAC,CAAC,CAAC,CACnE,KAAM,CAACC,aAAa,CAAEC,gBAAgB,CAAC,CAAG5J,QAAQ,CAAC,KAAK,CAAC,CAAE;AAE3D,KAAM,CAAC6J,sBAAsB,CAAEC,yBAAyB,CAAC,CAAG9J,QAAQ,CAAC,KAAK,CAAC,CAC3E,KAAM,CAAC+J,eAAe,CAAEC,kBAAkB,CAAC,CAAGhK,QAAQ,CAAC,IAAI,CAAC,CAC5D,KAAM,CAACiK,cAAc,CAAEC,iBAAiB,CAAC,CAAGlK,QAAQ,CAAC,IAAI,CAAC,CAC1D,KAAM,CAACmK,eAAe,CAAEC,kBAAkB,CAAC,CAAGpK,QAAQ,CAAC,IAAI,CAAC,CAC5D,KAAM,CAACqK,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGtK,QAAQ,CAAC,IAAI,CAAC,CAChE,KAAM,CAACuK,WAAW,CAAEC,cAAc,CAAC,CAAGxK,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAACyK,aAAa,CAAEC,gBAAgB,CAAC,CAAG1K,QAAQ,CAAC,KAAK,CAAC,CACzD,KAAM,CAAC2K,gBAAgB,CAAEC,mBAAmB,CAAC,CAAG5K,QAAQ,CAAC,KAAK,CAAC,CAC/D,KAAM,CAAC6K,OAAO,CAAEC,UAAU,CAAC,CAAG9K,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAAC+K,kBAAkB,CAAEC,qBAAqB,CAAC,CAAGhL,QAAQ,CAAC,KAAK,CAAC,CACnE,KAAM,CAACiL,aAAa,CAAEC,gBAAgB,CAAC,CAAGlL,QAAQ,CAAC,CAAC,CAAC,CAAC,CAEtD;AACA,KAAM,CAACmL,sBAAsB,CAAEC,yBAAyB,CAAC,CAAGpL,QAAQ,CAAC,KAAK,CAAC,CAC3E,KAAM,CAACqL,UAAU,CAAEC,aAAa,CAAC,CAAGtL,QAAQ,CAAC,EAAE,CAAC,CAAE;AAElD,KAAM,CAAAuL,aAAa,CAAGnL,MAAM,CAAC,IAAI,CAAC,CAClC,KAAM,CAACoL,YAAY,CAAEC,eAAe,CAAC,CAAGzL,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAAE0L,gBAAiB,CAAC,CAAGvL,UAAU,CAAC+D,cAAc,CAAC,CAEvD;AACA,KAAM,CAACyH,cAAc,CAAEC,iBAAiB,CAAC,CAAG5L,QAAQ,CAAC,KAAK,CAAC,CAC3D,KAAM,CAAC6L,aAAa,CAAEC,gBAAgB,CAAC,CAAG9L,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAAC+L,mBAAmB,CAAEC,sBAAsB,CAAC,CAAGhM,QAAQ,CAAC,EAAE,CAAC,CAElE,KAAM,CAAEiM,MAAM,CAAEC,cAAe,CAAC,CAAGjI,kBAAkB,CAAC,CAAC,CACvD,KAAM,CAACkI,OAAO,CAAEC,UAAU,CAAC,CAAGpM,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACqM,UAAU,CAAEC,aAAa,CAAC,CAAGtM,QAAQ,CAAC,KAAK,CAAC,CAEnDC,SAAS,CAAC,IAAM,CACd,cAAe,CAAAsM,SAASA,CAAA,CAAG,CACzB,KAAM,CAAAC,WAAW,CAAG,KAAM,CAAAN,cAAc,CAACzD,IAAI,CAACgE,SAAS,CAAC,CAExD,IAAK,KAAM,CAACC,GAAG,CAAEC,KAAK,CAAC,EAAI,CAAAC,MAAM,CAACC,OAAO,CAACL,WAAW,CAAC,CAAE,CACtD,GAAIE,GAAG,GAAK,YAAY,CAAEJ,aAAa,CAACK,KAAK,GAAK,SAAS,CAAC,CAC5D,GAAID,GAAG,GAAK,gBAAgB,CAAEN,UAAU,CAACO,KAAK,GAAK,SAAS,CAAC,CAC/D,CACF,CACAJ,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAO,mBAAmB,CAAIvH,SAAS,EAAK,CACzC,KAAM,CAAAwH,WAAW,CAAG,GAAI,CAAArD,GAAG,CAACF,gBAAgB,CAAC,CAC7C,GAAIuD,WAAW,CAACC,GAAG,CAACzH,SAAS,CAAC,CAAE,CAC9BwH,WAAW,CAACE,MAAM,CAAC1H,SAAS,CAAC,CAC/B,CAAC,IAAM,CACLwH,WAAW,CAACG,GAAG,CAAC3H,SAAS,CAAC,CAC5B,CACAkE,mBAAmB,CAACsD,WAAW,CAAC,CAChCnD,gBAAgB,CAAC,KAAK,CAAC,CAAE;AAC3B,CAAC,CAED,KAAM,CAAAuD,uBAAuB,CAAGA,CAAA,GAAM,CACpC,GAAIxD,aAAa,CAAE,CACjB;AACAF,mBAAmB,CAAC,GAAI,CAAAC,GAAG,CAAC,CAAC,CAAC,CAC9BE,gBAAgB,CAAC,KAAK,CAAC,CACzB,CAAC,IAAM,CACL;AACA,KAAM,CAAAwD,cAAc,CAAGvI,QAAQ,CAACwI,GAAG,CAACpI,OAAO,EAAIA,OAAO,CAACI,EAAE,CAAC,CAC1D,KAAM,CAAAiI,kBAAkB,CAAGF,cAAc,CAACG,KAAK,CAAClI,EAAE,EAAImE,gBAAgB,CAACwD,GAAG,CAAC3H,EAAE,CAAC,CAAC,CAE/E,GAAIiI,kBAAkB,EAAI9D,gBAAgB,CAACgE,IAAI,GAAKJ,cAAc,CAACK,MAAM,CAAE,CACzE;AACA7D,gBAAgB,CAAC,IAAI,CAAC,CACtBH,mBAAmB,CAAC,GAAI,CAAAC,GAAG,CAAC,CAAC,CAAC,CAAE;AAClC,CAAC,IAAM,CACL;AACAD,mBAAmB,CAAC,GAAI,CAAAC,GAAG,CAAC0D,cAAc,CAAC,CAAC,CAC5CxD,gBAAgB,CAAC,KAAK,CAAC,CACzB,CACF,CACF,CAAC,CAED;AACA3J,SAAS,CAAC,IAAM,CACdwJ,mBAAmB,CAAC,GAAI,CAAAC,GAAG,CAAC,CAAC,CAAC,CAC9BE,gBAAgB,CAAC,KAAK,CAAC,CACzB,CAAC,CAAE,CAACb,WAAW,CAAEyC,YAAY,CAAC,CAAC,CAE/B;AACA,KAAM,CAAAkC,gBAAgB,CAAGA,CAAA,GAAM,CAC7B,GAAI/D,aAAa,CAAE,CACjB,MAAO,CAAAL,kBAAkB,CAC3B,CACA,MAAO,CAAAE,gBAAgB,CAACgE,IAAI,CAC9B,CAAC,CAED;AACA,KAAM,CAAAG,sBAAsB,CAAGA,CAAA,GAAM,CACnC,GAAIhE,aAAa,CAAE,CACjB,wBAAAiE,MAAA,CAAyBtE,kBAAkB,MAC7C,CACA,GAAIE,gBAAgB,CAACgE,IAAI,CAAG,CAAC,CAAE,CAC7B,+BAAAI,MAAA,CAAgCpE,gBAAgB,CAACgE,IAAI,MACvD,CACA,MAAO,SAAS,CAClB,CAAC,CAED;AACA,KAAM,CAAAK,qBAAqB,CAAGA,CAAA,GAAM,CAClC,GAAIlE,aAAa,CAAE,CACjB2B,aAAa,CAAC,KAAK,CAAC,CACtB,CAAC,IAAM,IAAI9B,gBAAgB,CAACgE,IAAI,CAAG,CAAC,CAAE,CACpClC,aAAa,CAAC,UAAU,CAAC,CAC3B,CAAC,IAAM,CACLjL,KAAK,CAACyN,OAAO,CAAC,8CAA8C,CAAC,CAC7D,OACF,CACA1C,yBAAyB,CAAC,IAAI,CAAC,CACjC,CAAC,CAED,KAAM,CAAA2C,uBAAuB,CAAG,KAAAA,CAAA,GAAY,CAC1C,GAAI,CACF,GAAI1C,UAAU,GAAK,KAAK,CAAE,CACxB,KAAM,CAAAhJ,GAAG,CAAC4K,MAAM,CAAC,eAAe,CAAE,CAChCe,IAAI,CAAE,CACJC,YAAY,CAAE,qBAAqB,CACnCrI,UAAU,CAAE,EACd,CACF,CAAC,CAAC,CACFvF,KAAK,CAAC6N,OAAO,aAAAN,MAAA,CAAatE,kBAAkB,gCAA2B,CAAC,CAC1E,CAAC,IAAM,CACL,KAAM,CAAA7D,UAAU,CAAG0I,KAAK,CAACC,IAAI,CAAC5E,gBAAgB,CAAC,CAC/C,KAAM,CAAAnH,GAAG,CAACgM,IAAI,CAAC,uBAAuB,CAAE,CAAE5I,UAAW,CAAC,CAAC,CACvDpF,KAAK,CAAC6N,OAAO,IAAAN,MAAA,CAAInI,UAAU,CAACgI,MAAM,sCAAiC,CAAC,CACtE,CAEA;AACAhE,mBAAmB,CAAC,GAAI,CAAAC,GAAG,CAAC,CAAC,CAAC,CAC9BE,gBAAgB,CAAC,KAAK,CAAC,CAEvB;AACAZ,cAAc,CAAC,EAAE,CAAC,CAClBF,aAAa,CAAC,CAAC,CAAC,CAElB,CAAE,MAAOwF,GAAG,CAAE,CACZvL,UAAU,CAACuL,GAAG,CAAC,CACjB,CAAC,OAAS,CACRlD,yBAAyB,CAAC,KAAK,CAAC,CAChCE,aAAa,CAAC,EAAE,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAiD,oBAAoB,CAAGA,CAAA,GAAM,CACjCjD,aAAa,CAAC,KAAK,CAAC,CACpBF,yBAAyB,CAAC,IAAI,CAAC,CACjC,CAAC,CAED;AACA,KAAM,CAAAoD,oBAAoB,CAAGA,CAACC,QAAQ,CAAEC,WAAW,GAAK,CACtD5C,gBAAgB,CAAC2C,QAAQ,CAAC,CAC1BzC,sBAAsB,CAAC0C,WAAW,CAAC,CACnC9C,iBAAiB,CAAC,IAAI,CAAC,CACzB,CAAC,CAED;AACA,KAAM,CAAA+C,qBAAqB,CAAGA,CAAA,GAAM,CAClC/C,iBAAiB,CAAC,KAAK,CAAC,CACxBE,gBAAgB,CAAC,EAAE,CAAC,CACpBE,sBAAsB,CAAC,EAAE,CAAC,CAC5B,CAAC,CAED,KAAM,CAAA4C,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,CAAExD,aAAa,CAACyD,OAAO,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CACvD,KAAM,CAAA5M,GAAG,CAAC6M,OAAO,CAAC,CAChBC,GAAG,mBAAoB,CACvBC,MAAM,CAAE,MAAM,CACdpB,IAAI,CAAEa,QACR,CAAC,CAAC,CACFrG,OAAO,CAAC6G,EAAE,CAAC,CAAC,CAAC,CACf,CAAE,MAAOf,GAAG,CAAE,CACZvL,UAAU,CAACuL,GAAG,CAAC,CACjB,CACF,CAAC,CAEDrO,SAAS,CAAC,IAAM,CACdgJ,QAAQ,CAAC,CAAErE,IAAI,CAAE,OAAQ,CAAC,CAAC,CAC3BkE,aAAa,CAAC,CAAC,CAAC,CAClB,CAAC,CAAE,CAACC,WAAW,CAAEyC,YAAY,CAAC,CAAC,CAE/BvL,SAAS,CAAC,IAAM,CACd2I,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAA0G,eAAe,CAAGC,UAAU,CAAC,IAAM,CACvC,KAAM,CAAAC,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CACF,KAAM,CAAExB,IAAK,CAAC,CAAG,KAAM,CAAA3L,GAAG,CAACoN,GAAG,CAAC,YAAY,CAAE,CAC3CC,MAAM,CAAE,CACN3G,WAAW,CACXF,UAAU,CACV8G,UAAU,CAAEC,IAAI,CAACC,SAAS,CAACrE,YAAY,CACzC,CACF,CAAC,CAAC,CACFvC,QAAQ,CAAC,CAAErE,IAAI,CAAE,eAAe,CAAEE,OAAO,CAAEkJ,IAAI,CAACnJ,QAAS,CAAC,CAAC,CAC3DiG,UAAU,CAACkD,IAAI,CAACnD,OAAO,CAAC,CACxBtB,qBAAqB,CAACyE,IAAI,CAAC8B,KAAK,CAAC,CAAE;AACnClH,UAAU,CAAC,KAAK,CAAC,CACnB,CAAE,MAAO0F,GAAG,CAAE,CACZvL,UAAU,CAACuL,GAAG,CAAC,CACjB,CACF,CAAC,CACDkB,aAAa,CAAC,CAAC,CACjB,CAAC,CAAE,GAAG,CAAC,CACP,MAAO,IAAMO,YAAY,CAACT,eAAe,CAAC,CAC5C,CAAC,CAAE,CAACvG,WAAW,CAAEF,UAAU,CAAE2C,YAAY,CAAC,CAAC,CAE3CvL,SAAS,CAAC,IAAM,CACd,KAAM,CAAAwM,SAAS,CAAGhE,IAAI,CAACgE,SAAS,CAEhC,KAAM,CAAAuD,cAAc,CAAIhC,IAAI,EAAK,CAC/B,GAAIA,IAAI,CAACrJ,MAAM,GAAK,QAAQ,EAAIqJ,IAAI,CAACrJ,MAAM,GAAK,QAAQ,CAAE,CACxDsE,QAAQ,CAAC,CAAErE,IAAI,CAAE,iBAAiB,CAAEE,OAAO,CAAEkJ,IAAI,CAAC/I,OAAQ,CAAC,CAAC,CAC9D,CAEA,GAAI+I,IAAI,CAACrJ,MAAM,GAAK,QAAQ,CAAE,CAC5BsE,QAAQ,CAAC,CAAErE,IAAI,CAAE,gBAAgB,CAAEE,OAAO,CAAE,CAACkJ,IAAI,CAACzI,SAAU,CAAC,CAAC,CAC9DgE,qBAAqB,CAAC0G,IAAI,EAAIC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAEF,IAAI,CAAG,CAAC,CAAC,CAAC,CACtD,CAEA,GAAIjC,IAAI,CAACrJ,MAAM,GAAK,aAAa,CAAE,CACjCsE,QAAQ,CAAC,CAAErE,IAAI,CAAE,sBAAsB,CAAEE,OAAO,CAAEkJ,IAAI,CAACvI,UAAW,CAAC,CAAC,CACpE8D,qBAAqB,CAAC0G,IAAI,EAAIC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAEF,IAAI,CAAGjC,IAAI,CAACvI,UAAU,CAACgI,MAAM,CAAC,CAAC,CAC3E,CAEA,GAAIO,IAAI,CAACrJ,MAAM,GAAK,YAAY,CAAE,CAChCsE,QAAQ,CAAC,CAAErE,IAAI,CAAE,qBAAqB,CAAEE,OAAO,CAAE,CAAEc,UAAU,CAAEoI,IAAI,CAACpI,UAAW,CAAE,CAAC,CAAC,CACnF2D,qBAAqB,CAACyE,IAAI,CAACpI,UAAU,CAAC6H,MAAM,CAAC,CAC/C,CACF,CAAC,CAED/E,MAAM,CAAC0H,EAAE,YAAAxC,MAAA,CAAYnB,SAAS,aAAYuD,cAAc,CAAC,CAEzD,MAAO,IAAM,CACXtH,MAAM,CAAC2H,GAAG,YAAAzC,MAAA,CAAYnB,SAAS,aAAYuD,cAAc,CAAC,CAC5D,CAAC,CACH,CAAC,CAAE,CAACtH,MAAM,CAAC,CAAC,CAEZ,KAAM,CAAA4H,kBAAkB,CAAIC,MAAM,EAAK,CACrC,KAAM,CAAAC,IAAI,CAAG/M,MAAM,CAAC,CAAC,CACrB,KAAM,CAAE4B,EAAE,CAAEoL,IAAK,CAAC,CAAGF,MAAM,CAC3B7E,gBAAgB,CAAC,CAAErG,EAAE,CAAEoL,IAAI,CAAED,IAAK,CAAC,CAAC,CACtC,CAAC,CAED,KAAM,CAAAE,uBAAuB,CAAIH,MAAM,EAAK,CAC1CvF,qBAAqB,CAAC,KAAK,CAAC,CAC5B,GAAIuF,MAAM,GAAKI,SAAS,EAAIJ,MAAM,CAACE,IAAI,GAAKE,SAAS,CAAE,CACrDL,kBAAkB,CAACC,MAAM,CAAC,CAC1B/H,OAAO,CAAClD,IAAI,aAAAsI,MAAA,CAAa2C,MAAM,CAACE,IAAI,CAAE,CAAC,CACzC,CACF,CAAC,CAED,KAAM,CAAAG,kBAAkB,CAAIC,SAAS,EAAK,CACxC,KAAM,CAAAC,IAAI,CAAGD,SAAS,CAACxD,GAAG,CAAE0D,CAAC,EAAKA,CAAC,CAAC1L,EAAE,CAAC,CACvCoG,eAAe,CAACqF,IAAI,CAAC,CACvB,CAAC,CAED,KAAM,CAAAE,YAAY,CAAIC,KAAK,EAAK,CAC9BjI,cAAc,CAACiI,KAAK,CAACC,MAAM,CAACvE,KAAK,CAACwE,WAAW,CAAC,CAAC,CAAC,CAClD,CAAC,CAED,KAAM,CAAAC,sBAAsB,CAAGA,CAAA,GAAM,CACnCjI,oBAAoB,CAAC,IAAI,CAAC,CAC1BE,mBAAmB,CAAC,IAAI,CAAC,CAC3B,CAAC,CAED,KAAM,CAAAgI,uBAAuB,CAAGA,CAAA,GAAM,CACpClI,oBAAoB,CAAC,IAAI,CAAC,CAC1BE,mBAAmB,CAAC,KAAK,CAAC,CAC5B,CAAC,CAED,KAAM,CAAAiI,gBAAgB,CAAI/L,SAAS,EAAK,CACtC4D,oBAAoB,CAAC5D,SAAS,CAAC,CAC/B8D,mBAAmB,CAAC,IAAI,CAAC,CAC3B,CAAC,CAED,KAAM,CAAAkI,mBAAmB,CAAG,KAAO,CAAAhM,SAAS,EAAK,CAC/C,GAAI,CACF,KAAM,CAAAlD,GAAG,CAAC4K,MAAM,cAAAW,MAAA,CAAcrI,SAAS,CAAE,CAAC,CAC1ClF,KAAK,CAAC6N,OAAO,CAACxL,IAAI,CAACqO,CAAC,CAAC,yBAAyB,CAAC,CAAC,CAClD,CAAE,MAAOzC,GAAG,CAAE,CACZvL,UAAU,CAACuL,GAAG,CAAC,CACjB,CACAtE,kBAAkB,CAAC,IAAI,CAAC,CACxBhB,cAAc,CAAC,EAAE,CAAC,CAClBF,aAAa,CAAC,CAAC,CAAC,CAClB,CAAC,CAED,KAAM,CAAA0I,kBAAkB,CAAG,KAAO,CAAAjM,SAAS,EAAK,CAC9C,GAAI,CACF,KAAM,CAAAlD,GAAG,CAACoP,GAAG,oBAAA7D,MAAA,CAAoBrI,SAAS,EAAI,CAAEmM,MAAM,CAAE,KAAM,CAAC,CAAC,CAChErR,KAAK,CAAC6N,OAAO,CAAC,mBAAmB,CAAC,CACpC,CAAE,MAAOI,GAAG,CAAE,CACZvL,UAAU,CAACuL,GAAG,CAAC,CACjB,CACAtE,kBAAkB,CAAC,IAAI,CAAC,CACxBhB,cAAc,CAAC,EAAE,CAAC,CAClBF,aAAa,CAAC,CAAC,CAAC,CAChBsB,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAAC,CAED,KAAM,CAAAuH,oBAAoB,CAAG,KAAO,CAAApM,SAAS,EAAK,CAChD,GAAI,CACF,KAAM,CAAAlD,GAAG,CAACoP,GAAG,oBAAA7D,MAAA,CAAoBrI,SAAS,EAAI,CAAEmM,MAAM,CAAE,IAAK,CAAC,CAAC,CAC/DrR,KAAK,CAAC6N,OAAO,CAAC,sBAAsB,CAAC,CACvC,CAAE,MAAOI,GAAG,CAAE,CACZvL,UAAU,CAACuL,GAAG,CAAC,CACjB,CACAtE,kBAAkB,CAAC,IAAI,CAAC,CACxBhB,cAAc,CAAC,EAAE,CAAC,CAClBF,aAAa,CAAC,CAAC,CAAC,CAChBwB,oBAAoB,CAAC,IAAI,CAAC,CAC5B,CAAC,CAED,KAAM,CAAAsH,mBAAmB,CAAG,KAAAA,CAAA,GAAY,CACtC,GAAI,CACF,KAAM,CAAAvP,GAAG,CAACgM,IAAI,CAAC,kBAAkB,CAAC,CAClC7F,OAAO,CAAC6G,EAAE,CAAC,CAAC,CAAC,CACbnF,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CAAE,MAAOoE,GAAG,CAAE,CACZvL,UAAU,CAACuL,GAAG,CAAC,CACfpE,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CACF,CAAC,CAED,KAAM,CAAA2H,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpC,GAAI,CACF,KAAM,CAAAxP,GAAG,CAACgM,IAAI,CAAC,wBAAwB,CAAC,CACxC7F,OAAO,CAAC6G,EAAE,CAAC,CAAC,CAAC,CACf,CAAE,MAAOf,GAAG,CAAE,CACZvL,UAAU,CAACuL,GAAG,CAAC,CACjB,CACF,CAAC,CAED,KAAM,CAAAwD,QAAQ,CAAGA,CAAA,GAAM,CACrBhJ,aAAa,CAAEiJ,SAAS,EAAKA,SAAS,CAAG,CAAC,CAAC,CAC7C,CAAC,CAED,KAAM,CAAAC,YAAY,CAAIC,CAAC,EAAK,CAC1B,GAAI,CAACpH,OAAO,EAAIlC,OAAO,CAAE,OACzB,KAAM,CAAEuJ,SAAS,CAAEC,YAAY,CAAEC,YAAa,CAAC,CAAGH,CAAC,CAACI,aAAa,CACjE,GAAIF,YAAY,EAAID,SAAS,CAAG,GAAG,CAAC,CAAGE,YAAY,CAAE,CACnDN,QAAQ,CAAC,CAAC,CACZ,CACF,CAAC,CAED;AACA,KAAM,CAAAQ,gBAAgB,CAAGA,CAAA,GAAM,CAC7B,GAAIvI,eAAe,CAAE,MAAO,IAAMwH,mBAAmB,CAACxH,eAAe,CAAC1E,EAAE,CAAC,CACzE,GAAI8E,eAAe,CAAE,MAAO,IAAMqH,kBAAkB,CAACrH,eAAe,CAAC9E,EAAE,CAAC,CACxE,GAAIgF,iBAAiB,CAAE,MAAO,IAAMsH,oBAAoB,CAACtH,iBAAiB,CAAChF,EAAE,CAAC,CAC9E,GAAI4E,cAAc,CAAE,MAAO,CAAA2H,mBAAmB,CAC9C,MAAO,CAAAhD,iBAAiB,CAC1B,CAAC,CAED;AACA,KAAM,CAAA2D,eAAe,CAAGA,CAAA,GAAM,CAC5B,GAAIxI,eAAe,CAAE,SAAA6D,MAAA,CAAUlL,IAAI,CAACqO,CAAC,CAAC,wCAAwC,CAAC,MAAAnD,MAAA,CAAI7D,eAAe,CAACyI,IAAI,MACvG,GAAIrI,eAAe,CAAE,0BAAAyD,MAAA,CAA2BzD,eAAe,CAACqI,IAAI,MACpE,GAAInI,iBAAiB,CAAE,6BAAAuD,MAAA,CAA8BvD,iBAAiB,CAACmI,IAAI,MAC3E,GAAIvI,cAAc,CAAE,MAAO,CAAAvH,IAAI,CAACqO,CAAC,CAAC,yCAAyC,CAAC,CAC5E,MAAO,CAAArO,IAAI,CAACqO,CAAC,CAAC,iDAAiD,CAAC,CAClE,CAAC,CAED;AACA,KAAM,CAAA0B,iBAAiB,CAAGA,CAAA,GAAM,CAC9B,GAAIhI,aAAa,CAAE,MAAO,CAAA/H,IAAI,CAACqO,CAAC,CAAC,0CAA0C,CAAC,CAC5E,GAAIhH,eAAe,CAAE,MAAO,CAAArH,IAAI,CAACqO,CAAC,CAAC,0CAA0C,CAAC,CAC9E,GAAI5G,eAAe,CAAE,MAAO,CAAAzH,IAAI,CAACqO,CAAC,CAAC,yCAAyC,CAAC,CAC7E,GAAI1G,iBAAiB,CAAE,MAAO,CAAA3H,IAAI,CAACqO,CAAC,CAAC,2CAA2C,CAAC,CACjF,GAAI9G,cAAc,CAAE,MAAO,CAAAvH,IAAI,CAACqO,CAAC,CAAC,0CAA0C,CAAC,CAC7E,MAAO,CAAArO,IAAI,CAACqO,CAAC,CAAC,kDAAkD,CAAC,CACnE,CAAC,CAED,KAAM,CAAA2B,aAAa,CAAGhF,gBAAgB,CAAC,CAAC,CACxC,KAAM,CAAAiF,oBAAoB,CAAGhJ,aAAa,EAAIH,gBAAgB,CAACgE,IAAI,CAAG,CAAC,CAEvE;AACA,KAAM,CAAAoF,uBAAuB,CAAGA,CAAA,GAAM,CACpC,GAAIjJ,aAAa,CAAE,MAAO,CAAEkJ,OAAO,CAAE,IAAI,CAAEC,aAAa,CAAE,KAAM,CAAC,CAEjE,KAAM,CAAA1F,cAAc,CAAGvI,QAAQ,CAACwI,GAAG,CAACpI,OAAO,EAAIA,OAAO,CAACI,EAAE,CAAC,CAC1D,KAAM,CAAA0N,qBAAqB,CAAG3F,cAAc,CAAC1H,MAAM,CAACL,EAAE,EAAImE,gBAAgB,CAACwD,GAAG,CAAC3H,EAAE,CAAC,CAAC,CAACoI,MAAM,CAE1F,GAAIsF,qBAAqB,GAAK,CAAC,CAAE,CAC/B,MAAO,CAAEF,OAAO,CAAE,KAAK,CAAEC,aAAa,CAAE,KAAM,CAAC,CACjD,CAAC,IAAM,IAAIC,qBAAqB,GAAK3F,cAAc,CAACK,MAAM,CAAE,CAC1D,MAAO,CAAEoF,OAAO,CAAE,IAAI,CAAEC,aAAa,CAAE,KAAM,CAAC,CAChD,CAAC,IAAM,CACL,MAAO,CAAED,OAAO,CAAE,KAAK,CAAEC,aAAa,CAAE,IAAK,CAAC,CAChD,CACF,CAAC,CAED,KAAM,CAAAE,cAAc,CAAGJ,uBAAuB,CAAC,CAAC,CAEhD,mBACEtO,KAAA,CAACxB,aAAa,EAACmQ,SAAS,CAAE1K,OAAO,CAAC2K,aAAc,CAAAC,QAAA,eAC9C/O,IAAA,CAAClB,cAAc,EACbkQ,SAAS,CAAErI,kBAAmB,CAC9BsI,cAAc,CAAEpI,aAAc,CAC9BqI,OAAO,CAAG/C,MAAM,EAAK,CACnBG,uBAAuB,CAACH,MAAM,CAAC,CACjC,CAAE,CACH,CAAC,cACFnM,IAAA,CAAC7B,YAAY,EACXgR,IAAI,CAAEnK,gBAAiB,CACvBkK,OAAO,CAAEjC,uBAAwB,CACjC,kBAAgB,mBAAmB,CACnC9L,SAAS,CAAE2D,iBAAkB,CAChB,CAAC,cAGhB9E,IAAA,CAAC3B,yBAAyB,EACxB8Q,IAAI,CAAEpI,sBAAuB,CAC7BmI,OAAO,CAAEA,CAAA,GAAMlI,yBAAyB,CAAC,KAAK,CAAE,CAChDoI,SAAS,CAAEzF,uBAAwB,CACnC1C,UAAU,CAAEA,UAAW,CACvBqH,aAAa,CAAElJ,gBAAgB,CAACgE,IAAK,CACrCiG,UAAU,CAAEnK,kBAAmB,CAChC,CAAC,cAGFhF,KAAA,CAACtD,MAAM,EACLuS,IAAI,CAAE5H,cAAe,CACrB2H,OAAO,CAAE3E,qBAAsB,CAC/BsE,SAAS,CAAE1K,OAAO,CAACzB,WAAY,CAC/BC,QAAQ,CAAC,IAAI,CAAAoM,QAAA,eAEb7O,KAAA,CAACpD,WAAW,EAAC+R,SAAS,CAAE1K,OAAO,CAACtB,WAAY,CAAAkM,QAAA,eAC1C7O,KAAA,SAAA6O,QAAA,EAAM,mBAAiB,CAACpH,mBAAmB,EAAO,CAAC,cACnD3H,IAAA,CAAC1C,UAAU,EAACgS,OAAO,CAAE/E,qBAAsB,CAACnB,IAAI,CAAC,OAAO,CAAA2F,QAAA,cACtD/O,IAAA,CAAC9C,KAAK,GAAE,CAAC,CACC,CAAC,EACF,CAAC,cACd8C,IAAA,CAACnD,aAAa,EAAAkS,QAAA,CACXtH,aAAa,cACZzH,IAAA,QACEuP,GAAG,CAAE9H,aAAc,CACnB+H,GAAG,sBAAAhG,MAAA,CAAuB7B,mBAAmB,CAAG,CAChDkH,SAAS,CAAE1K,OAAO,CAACjB,YAAa,CAChCuM,OAAO,CAAG5B,CAAC,EAAK,CACdA,CAAC,CAACf,MAAM,CAAC4C,KAAK,CAAC5M,OAAO,CAAG,MAAM,CACjC,CAAE,CACH,CAAC,cAEF9C,IAAA,QAAK0P,KAAK,CAAE,CACV5M,OAAO,CAAE,MAAM,CACfC,cAAc,CAAE,QAAQ,CACxBC,UAAU,CAAE,QAAQ,CACpBG,MAAM,CAAE,OAAO,CACfwM,KAAK,CAAE,MACT,CAAE,CAAAZ,QAAA,CAAC,6BAEH,CAAK,CACN,CACY,CAAC,EACV,CAAC,cAGT/O,IAAA,CAAC5B,iBAAiB,EAChBwR,KAAK,CAAEzB,eAAe,CAAC,CAAE,CACzBgB,IAAI,CAAEhJ,WAAY,CAClB+I,OAAO,CAAE9I,cAAe,CACxBgJ,SAAS,CAAElB,gBAAgB,CAAC,CAAE,CAAAa,QAAA,CAE7BV,iBAAiB,CAAC,CAAC,CACH,CAAC,cAEpBrO,IAAA,CAAC5B,iBAAiB,EAChBwR,KAAK,CAAEtR,IAAI,CAACqO,CAAC,CAAC,uCAAuC,CAAE,CACvDwC,IAAI,CAAE5I,gBAAiB,CACvB2I,OAAO,CAAE1I,mBAAoB,CAC7B4I,SAAS,CAAGvB,CAAC,EAAKJ,iBAAiB,CAAC,CAAE,CAAAsB,QAAA,CAErCzQ,IAAI,CAACqO,CAAC,CAAC,uCAAuC,CAAC,CAC/B,CAAC,cAEpBzM,KAAA,CAAC3B,UAAU,EAAAwQ,QAAA,eACT7O,KAAA,CAAC1B,KAAK,EAAAuQ,QAAA,EACHzQ,IAAI,CAACqO,CAAC,CAAC,gBAAgB,CAAC,CAAC,IAAE,CAACzH,kBAAkB,CAAC,GAChD,CAACqJ,oBAAoB,eACnBrO,KAAA,SAAMwP,KAAK,CAAE,CAAEC,KAAK,CAAE,SAAS,CAAEE,UAAU,CAAE,CAAE,CAAE,CAAAd,QAAA,EAAC,IAC9C,CAACT,aAAa,CAAC,kBAAgB,CAAC/I,aAAa,EAAI,SAAS,EACxD,CACP,EACI,CAAC,cACRrF,KAAA,CAACzB,wBAAwB,EAAAsQ,QAAA,eACvB/O,IAAA,CAACjB,UAAU,EAAC+Q,UAAU,CAAEtD,kBAAmB,CAAE,CAAC,cAC9CxM,IAAA,CAAC5C,SAAS,EACR2S,WAAW,CAAEzR,IAAI,CAACqO,CAAC,CAAC,4BAA4B,CAAE,CAClDnM,IAAI,CAAC,QAAQ,CACb+H,KAAK,CAAE5D,WAAY,CACnBqL,QAAQ,CAAEpD,YAAa,CACvBqD,UAAU,CAAE,CACVC,cAAc,cACZlQ,IAAA,CAAC3C,cAAc,EAAC8S,QAAQ,CAAC,OAAO,CAAApB,QAAA,cAC9B/O,IAAA,CAAC7C,UAAU,EAACwS,KAAK,CAAC,WAAW,CAAE,CAAC,CAClB,CAEpB,CAAE,CACH,CAAC,CAGDpB,oBAAoB,eACnBvO,IAAA,QAAK6O,SAAS,CAAE1K,OAAO,CAACH,WAAY,CAAA+K,QAAA,cAClC/O,IAAA,CAACjC,OAAO,EAAC6R,KAAK,CAAErK,aAAa,CAAG,2BAA2B,CAAG,+BAAgC,CAAAwJ,QAAA,cAC5F/O,IAAA,CAACtD,MAAM,EACL0T,OAAO,CAAC,WAAW,CACnBT,KAAK,CAAC,WAAW,CACjBU,SAAS,cAAErQ,IAAA,CAACzC,iBAAiB,GAAE,CAAE,CACjC+R,OAAO,CAAE7F,qBAAsB,CAAAsF,QAAA,CAE9BxF,sBAAsB,CAAC,CAAC,CACnB,CAAC,CACF,CAAC,CACP,CACN,cAEDvJ,IAAA,CAAChB,UAAU,EAACoR,OAAO,CAAC,SAAS,CAACE,OAAO,CAAC,iBAAiB,CAAAvB,QAAA,CACnDwB,UAAU,eACVrQ,KAAA,CAACvE,KAAK,CAACwE,QAAQ,EAAA4O,QAAA,eACb7O,KAAA,CAACxD,MAAM,CAAAkF,aAAA,CAAAA,aAAA,EACLwO,OAAO,CAAC,WAAW,CACnBT,KAAK,CAAC,SAAS,EACX1Q,WAAW,CAACsR,UAAU,CAAC,MAAAxB,QAAA,EAE1BzQ,IAAI,CAACqO,CAAC,CAAC,4BAA4B,CAAC,cACrC3M,IAAA,CAACV,aAAa,GAAE,CAAC,GACX,CAAC,cACTY,KAAA,CAACR,IAAI,CAAAkC,aAAA,CAAAA,aAAA,IAAK1C,QAAQ,CAACqR,UAAU,CAAC,MAAAxB,QAAA,eAC5B7O,KAAA,CAACP,QAAQ,EACP2P,OAAO,CAAEA,CAAA,GAAM,CACblJ,cAAc,CAAC,IAAI,CAAC,CACpBN,iBAAiB,CAAC,IAAI,CAAC,CACvByK,UAAU,CAACC,KAAK,CAAC,CAAC,CACpB,CAAE,CAAAzB,QAAA,eAEF/O,IAAA,CAACR,YAAY,EACXiR,QAAQ,CAAC,OAAO,CAChBd,KAAK,CAAC,SAAS,CACfD,KAAK,CAAE,CAAEgB,WAAW,CAAE,EAAG,CAAE,CAC5B,CAAC,CACDpS,IAAI,CAACqO,CAAC,CAAC,+BAA+B,CAAC,EAChC,CAAC,cACXzM,KAAA,CAACP,QAAQ,EACP2P,OAAO,CAAEA,CAAA,GAAM,CACb5J,yBAAyB,CAAC,IAAI,CAAC,CACjC,CAAE,CAAAqJ,QAAA,eAEF/O,IAAA,CAACT,MAAM,EACLkR,QAAQ,CAAC,OAAO,CAChBd,KAAK,CAAC,SAAS,CACfD,KAAK,CAAE,CAAEgB,WAAW,CAAE,EAAG,CAAE,CAC5B,CAAC,CACDpS,IAAI,CAACqO,CAAC,CAAC,6BAA6B,CAAC,EAC9B,CAAC,cACX3M,IAAA,CAACnB,GAAG,EACF8R,IAAI,CAAEtM,IAAI,CAACuM,OAAQ,CACnBC,OAAO,CAAC,iCAAiC,CACzCC,GAAG,CAAEA,CAAA,gBACH5Q,KAAA,CAACP,QAAQ,EACP2P,OAAO,CAAEA,CAAA,GAAM,CACbnF,oBAAoB,CAAC,CAAC,CACtBoG,UAAU,CAACC,KAAK,CAAC,CAAC,CACpB,CAAE,CACFd,KAAK,CAAE,CAAEC,KAAK,CAAE,SAAU,CAAE,CAAAZ,QAAA,eAE5B/O,IAAA,CAACP,WAAW,EACVgR,QAAQ,CAAC,OAAO,CAChBf,KAAK,CAAE,CAAEgB,WAAW,CAAE,EAAE,CAAEf,KAAK,CAAE,SAAU,CAAE,CAC9C,CAAC,4BAEJ,EAAU,CACV,CACH,CAAC,GACE,CAAC,EACO,CACjB,CACS,CAAC,cAEb3P,IAAA,CAACtD,MAAM,EACL0T,OAAO,CAAC,WAAW,CACnBT,KAAK,CAAC,SAAS,CACfL,OAAO,CAAEtC,sBAAuB,CAAA+B,QAAA,CAE/BzQ,IAAI,CAACqO,CAAC,CAAC,sBAAsB,CAAC,CACzB,CAAC,EACe,CAAC,EACjB,CAAC,CAEZlH,sBAAsB,eACrBzF,IAAA,CAACJ,oBAAoB,EACnBmR,MAAM,CAAEtL,sBAAuB,CAC/BuL,WAAW,CAAEA,CAAA,GAAMtL,yBAAyB,CAAC,KAAK,CAAE,CACpD0B,YAAY,CAAEA,YAAa,CAC3BW,OAAO,CAAEA,OAAQ,CACjBkJ,WAAW,CAAE5M,IAAI,CAACuM,OAAQ,CAC3B,CACF,cAED1Q,KAAA,CAACzD,KAAK,EACJoS,SAAS,CAAE1K,OAAO,CAACxC,SAAU,CAC7ByO,OAAO,CAAC,UAAU,CAClBc,QAAQ,CAAEtD,YAAa,CAAAmB,QAAA,eAEvB/O,IAAA,UACE0P,KAAK,CAAE,CAAE5M,OAAO,CAAE,MAAO,CAAE,CAC3B7B,EAAE,CAAC,QAAQ,CACXmN,IAAI,CAAC,MAAM,CACX5N,IAAI,CAAC,MAAM,CACX2Q,MAAM,CAAC,YAAY,CACnBnB,QAAQ,CAAEA,CAAA,GAAM,CACd5J,cAAc,CAAC,IAAI,CAAC,CACtB,CAAE,CACFgL,GAAG,CAAEjK,aAAc,CACpB,CAAC,CAGDoH,oBAAoB,eACnBrO,KAAA,CAACrC,OAAO,EAACgR,SAAS,IAAArF,MAAA,CAAKrF,OAAO,CAACd,OAAO,MAAAmG,MAAA,CAAIrF,OAAO,CAACN,gBAAgB,CAAG,CAAAkL,QAAA,eACnE7O,KAAA,CAACpC,UAAU,EAAC+Q,SAAS,CAAE1K,OAAO,CAACL,YAAa,CAAC6L,KAAK,CAAC,SAAS,CAACS,OAAO,CAAC,WAAW,CAAArB,QAAA,EAC7ET,aAAa,CAAC,6BAA2B,CAAC/I,aAAa,EAAI,qBAAqB,EACvE,CAAC,cACbrF,KAAA,QAAK2O,SAAS,CAAE1K,OAAO,CAACH,WAAY,CAAA+K,QAAA,eAClC/O,IAAA,CAACjC,OAAO,EAAC6R,KAAK,CAAC,wBAAkB,CAAAb,QAAA,cAC/B/O,IAAA,CAACtD,MAAM,EACL0M,IAAI,CAAC,OAAO,CACZkG,OAAO,CAAEA,CAAA,GAAM,CACbjK,mBAAmB,CAAC,GAAI,CAAAC,GAAG,CAAC,CAAC,CAAC,CAC9BE,gBAAgB,CAAC,KAAK,CAAC,CACzB,CAAE,CAAAuJ,QAAA,CACH,UAED,CAAQ,CAAC,CACF,CAAC,cACV/O,IAAA,CAACjC,OAAO,EAAC6R,KAAK,CAAErK,aAAa,CAAG,2BAA2B,CAAG,sBAAuB,CAAAwJ,QAAA,cACnF/O,IAAA,CAAC1C,UAAU,EACTqS,KAAK,CAAC,SAAS,CACfL,OAAO,CAAE7F,qBAAsB,CAAAsF,QAAA,cAE/B/O,IAAA,CAACzC,iBAAiB,GAAE,CAAC,CACX,CAAC,CACN,CAAC,EACP,CAAC,EACC,CACV,cAED2C,KAAA,CAAC9D,KAAK,EAACgN,IAAI,CAAC,OAAO,CAAA2F,QAAA,eACjB/O,IAAA,CAACzD,SAAS,EAAAwS,QAAA,cACR7O,KAAA,CAAC1D,QAAQ,EAAAuS,QAAA,eACP/O,IAAA,CAAC1D,SAAS,EAACuS,SAAS,CAAE1K,OAAO,CAAC9B,YAAa,CAAA0M,QAAA,cACzC/O,IAAA,CAACpC,QAAQ,EACP8Q,aAAa,CAAEE,cAAc,CAACF,aAAc,CAC5CD,OAAO,CAAEG,cAAc,CAACH,OAAQ,CAChCuB,QAAQ,CAAEjH,uBAAwB,CAClCsI,QAAQ,CAAE5Q,QAAQ,CAAC4I,MAAM,GAAK,CAAE,CAChCiI,UAAU,CAAE,CAAE,YAAY,CAAE,8BAA+B,CAAE,CAC9D,CAAC,CACO,CAAC,cACZtR,IAAA,CAAC1D,SAAS,EAACuS,SAAS,CAAE1K,OAAO,CAAC/B,MAAO,CAAA2M,QAAA,CAAC,IAAE,CAAW,CAAC,cACpD/O,IAAA,CAAC1D,SAAS,EAACuS,SAAS,CAAE1K,OAAO,CAACjC,UAAW,CAACqP,KAAK,CAAC,QAAQ,CAAAxC,QAAA,CAAC,MAAI,CAAW,CAAC,cACzE/O,IAAA,CAAC1D,SAAS,EAAAyS,QAAA,CAAEzQ,IAAI,CAACqO,CAAC,CAAC,qBAAqB,CAAC,CAAY,CAAC,cACtD3M,IAAA,CAAC1D,SAAS,EAACiV,KAAK,CAAC,QAAQ,CAAAxC,QAAA,CACtBzQ,IAAI,CAACqO,CAAC,CAAC,yBAAyB,CAAC,CACzB,CAAC,cACZ3M,IAAA,CAAC1D,SAAS,EAACiV,KAAK,CAAC,QAAQ,CAAAxC,QAAA,CACtBzQ,IAAI,CAACqO,CAAC,CAAC,sBAAsB,CAAC,CACtB,CAAC,cACZ3M,IAAA,CAAC1D,SAAS,EAACiV,KAAK,CAAC,QAAQ,CAAAxC,QAAA,CAAE,QAAQ,CAAY,CAAC,cAChD/O,IAAA,CAAC1D,SAAS,EAACiV,KAAK,CAAC,QAAQ,CAAAxC,QAAA,CAAEzQ,IAAI,CAACqO,CAAC,CAAC,uBAAuB,CAAC,CAAY,CAAC,cACvE3M,IAAA,CAAC1D,SAAS,EAACiV,KAAK,CAAC,QAAQ,CAAAxC,QAAA,CACtBzQ,IAAI,CAACqO,CAAC,CAAC,wBAAwB,CAAC,CACxB,CAAC,EACJ,CAAC,CACF,CAAC,cACZ3M,IAAA,CAAC3D,SAAS,EAAA0S,QAAA,cACR7O,KAAA,CAAAE,SAAA,EAAA2O,QAAA,EACGtO,QAAQ,CAACwI,GAAG,CAAEpI,OAAO,EAAK,KAAA2Q,mBAAA,CAAAC,eAAA,CAAAC,qBAAA,CACzB,KAAM,CAAAC,UAAU,CAAGpM,aAAa,EAAIH,gBAAgB,CAACwD,GAAG,CAAC/H,OAAO,CAACI,EAAE,CAAC,CAEpE,mBACEf,KAAA,CAAC1D,QAAQ,EAEPoV,QAAQ,CAAED,UAAW,CAAA5C,QAAA,eAErB/O,IAAA,CAAC1D,SAAS,EAACuS,SAAS,CAAE1K,OAAO,CAAC9B,YAAa,CAAA0M,QAAA,cACzC/O,IAAA,CAACpC,QAAQ,EACP6Q,OAAO,CAAEkD,UAAW,CACpB3B,QAAQ,CAAEA,CAAA,GAAMtH,mBAAmB,CAAC7H,OAAO,CAACI,EAAE,CAAE,CAChDoQ,QAAQ,CAAE9L,aAAc,CACxB+L,UAAU,CAAE,CAAE,YAAY,uBAAA9H,MAAA,CAAwB3I,OAAO,CAACuN,IAAI,CAAG,CAAE,CACpE,CAAC,CACO,CAAC,cACZpO,IAAA,CAAC1D,SAAS,EAACuS,SAAS,CAAE1K,OAAO,CAAC/B,MAAO,CAAA2M,QAAA,CAAElO,OAAO,CAACI,EAAE,CAAY,CAAC,cAC9DjB,IAAA,CAAC1D,SAAS,EAACuS,SAAS,CAAE1K,OAAO,CAACjC,UAAW,CAACqP,KAAK,CAAC,QAAQ,CAAAxC,QAAA,cACtD/O,IAAA,CAACrD,MAAM,EACL4S,GAAG,IAAA/F,MAAA,CAAK3I,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEgR,UAAU,CAAG,CAC9BhD,SAAS,CAAE1K,OAAO,CAAC7B,eAAgB,CACnCgN,OAAO,CAAEA,CAAA,GAAMlF,oBAAoB,CAACvJ,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEgR,UAAU,CAAEhR,OAAO,CAACuN,IAAI,CAAE,CACxE,CAAC,CACO,CAAC,cACZpO,IAAA,CAAC1D,SAAS,EAAAyS,QAAA,CAAElO,OAAO,CAACuN,IAAI,CAAY,CAAC,cACrCpO,IAAA,CAAC1D,SAAS,EAACiV,KAAK,CAAC,QAAQ,CAAAxC,QAAA,CACtB9G,UAAU,EAAIF,OAAO,EAAI1D,IAAI,CAACuM,OAAO,GAAK,MAAM,CAC7C/P,OAAO,CAACiR,OAAO,CACbjR,OAAO,CAACkR,MAAM,CACd5S,kBAAkB,CAAC0B,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEkR,MAAM,CAAC,GAAK,IAAI,CAC5ClR,OAAO,CAACkR,MAAM,CAACC,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAAC,CAC3B,OAAO,EACPnR,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEkR,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,EACzB,EAAAR,mBAAA,CAAArS,kBAAkB,CAAC0B,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEkR,MAAM,CAAC,UAAAP,mBAAA,iBAAnCA,mBAAA,CAAqCQ,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAAC,EACjD,OAAO,EACPnR,OAAO,SAAPA,OAAO,kBAAA4Q,eAAA,CAAP5Q,OAAO,CAAEkR,MAAM,UAAAN,eAAA,iBAAfA,eAAA,CAAiBO,KAAK,CAAC,CAAC,CAAC,CAAC,EAC5BnR,OAAO,CAACiR,OAAO,CACfjR,OAAO,CAACkR,MAAM,CACd5S,kBAAkB,CAAC0B,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEkR,MAAM,CAAC,CAC9B,CAAC,cACZ/R,IAAA,CAAC1D,SAAS,EAACiV,KAAK,CAAC,QAAQ,CAAAxC,QAAA,CAAElO,OAAO,CAACoR,KAAK,CAAY,CAAC,cACrDjS,IAAA,CAAC1D,SAAS,EAACiV,KAAK,CAAC,QAAQ,CAAAxC,QAAA,CACtBlO,OAAO,CAACyM,MAAM,cACbtN,IAAA,CAACvC,eAAe,EACdiS,KAAK,CAAE,CAAEC,KAAK,CAAE,OAAQ,CAAE,CAC1Bc,QAAQ,CAAC,OAAO,CACjB,CAAC,cAEFzQ,IAAA,CAACtC,UAAU,EAACgS,KAAK,CAAE,CAAEC,KAAK,CAAE,KAAM,CAAE,CAACc,QAAQ,CAAC,OAAO,CAAE,CACxD,CACQ,CAAC,cACZzQ,IAAA,CAAC1D,SAAS,EAACiV,KAAK,CAAC,QAAQ,CAAAxC,QAAA,CACtBlO,OAAO,CAACqR,cAAc,EAAIrR,OAAO,CAACqR,cAAc,CAAC7I,MAAM,CAAG,CAAC,CACxD,EAAAqI,qBAAA,CAAA7Q,OAAO,CAACqR,cAAc,CAAC,CAAC,CAAC,CAACC,MAAM,UAAAT,qBAAA,iBAAhCA,qBAAA,CAAkCtD,IAAI,GAAI,wBAAwB,CAClE,eAAe,CACV,CAAC,cACZlO,KAAA,CAAC5D,SAAS,EAACiV,KAAK,CAAC,QAAQ,CAAAxC,QAAA,eACvB7O,KAAA,CAAC5C,UAAU,EACT8L,IAAI,CAAC,OAAO,CACZiI,QAAQ,CAAE,CAACxQ,OAAO,CAACyM,MAAO,CAC1BgC,OAAO,CAAEA,CAAA,GAAM,CACbxI,gBAAgB,CAACjG,OAAO,CAAC,CACzB+F,qBAAqB,CAAC,IAAI,CAAC,CAC7B,CAAE,CAAAmI,QAAA,EAEDlO,OAAO,CAACuR,OAAO,GAAK,UAAU,eAC7BpS,IAAA,CAAC/C,QAAQ,EAACyS,KAAK,CAAE,CAAEC,KAAK,CAAE,OAAQ,CAAE,CAAE,CACvC,CACA9O,OAAO,CAACuR,OAAO,GAAK,WAAW,eAC9BpS,IAAA,CAAChD,SAAS,EAAC0S,KAAK,CAAE,CAAEC,KAAK,CAAE,QAAS,CAAE,CAAE,CACzC,CACA9O,OAAO,CAACuR,OAAO,GAAK,UAAU,eAC7BpS,IAAA,CAACjD,QAAQ,EAAC2S,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAO,CAAE,CAAE,CACtC,EACS,CAAC,cAEb3P,IAAA,CAAC1C,UAAU,EACT8L,IAAI,CAAC,OAAO,CACZkG,OAAO,CAAEA,CAAA,GAAMpC,gBAAgB,CAACrM,OAAO,CAACI,EAAE,CAAE,CAAA8N,QAAA,cAE5C/O,IAAA,CAACxC,QAAQ,EAACmS,KAAK,CAAC,WAAW,CAAE,CAAC,CACpB,CAAC,cACb3P,IAAA,CAAC1C,UAAU,EACT8L,IAAI,CAAC,OAAO,CACZkG,OAAO,CACLzO,OAAO,CAACyM,MAAM,CACV,IAAM,CACJlH,cAAc,CAAC,IAAI,CAAC,CACpBJ,kBAAkB,CAACnF,OAAO,CAAC,CAC7B,CAAC,CACD,IAAM,CACJuF,cAAc,CAAC,IAAI,CAAC,CACpBF,oBAAoB,CAACrF,OAAO,CAAC,CAC/B,CACL,CAAAkO,QAAA,CAEAlO,OAAO,CAACyM,MAAM,cACbtN,IAAA,CAACrC,SAAS,EAACgS,KAAK,CAAC,WAAW,CAAE,CAAC,cAE/B3P,IAAA,CAACvC,eAAe,EAACkS,KAAK,CAAC,WAAW,CAAE,CACrC,CACS,CAAC,cACb3P,IAAA,CAACnB,GAAG,EACF8R,IAAI,CAAEtM,IAAI,CAACuM,OAAQ,CACnBC,OAAO,CAAC,6BAA6B,CACrCC,GAAG,CAAEA,CAAA,gBACH9Q,IAAA,CAAC1C,UAAU,EACT8L,IAAI,CAAC,OAAO,CACZkG,OAAO,CAAGzB,CAAC,EAAK,CACdzH,cAAc,CAAC,IAAI,CAAC,CACpBR,kBAAkB,CAAC/E,OAAO,CAAC,CAC7B,CAAE,CAAAkO,QAAA,cAEF/O,IAAA,CAACzC,iBAAiB,EAACoS,KAAK,CAAC,WAAW,CAAE,CAAC,CAC7B,CACZ,CACH,CAAC,EACO,CAAC,GAhHP9O,OAAO,CAACI,EAiHL,CAAC,CAEf,CAAC,CAAC,CACDsD,OAAO,eAAIvE,IAAA,CAAC9B,gBAAgB,EAACmU,MAAM,MAACC,OAAO,CAAE,CAAE,CAAE,CAAC,EACnD,CAAC,CACM,CAAC,EACP,CAAC,EACH,CAAC,EACK,CAAC,CAEpB,CAAC,CAED,cAAe,CAAApO,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}